<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Jon&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Jon&#039;s Blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Jon&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Jon&#039;s Blog"><meta property="og:url" content="https://noteforme.github.io/"><meta property="og:site_name" content="Jon&#039;s Blog"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://noteforme.github.io/img/og_image.png"><meta property="article:author" content="Jon"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://noteforme.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://noteforme.github.io"},"headline":"Jon's Blog","image":["https://noteforme.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Jon"},"publisher":{"@type":"Organization","name":"Jon's Blog","logo":{"@type":"ImageObject","url":"https://noteforme.github.io/img/logo.svg"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="Jon&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-05-22T13:44:38.000Z" title="5/22/2024, 9:44:38 PM">2024-05-22</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-13T21:02:22.000Z" title="9/14/2024, 5:02:22 AM">2024-09-14</time></span><span class="level-item"> Jon </span><span class="level-item"><a class="link-muted" href="/categories/LIFE/">LIFE</a></span><span class="level-item">a few seconds read (About 11 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/05/22/solar-system/">Solar System</a></p><div class="content"><p><img src="https://www.iau.org/static/archives/images/screen/iau0601a.jpg"></p>
<p><a target="_blank" rel="noopener" href="https://www.iau.org/public/themes/pluto/">https://www.iau.org/public/themes/pluto/</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-05-22T06:48:34.000Z" title="5/22/2024, 2:48:34 PM">2024-05-22</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-13T21:02:22.000Z" title="9/14/2024, 5:02:22 AM">2024-09-14</time></span><span class="level-item"> Jon </span><span class="level-item"><a class="link-muted" href="/categories/INTERVIEW/">INTERVIEW</a></span><span class="level-item">an hour read (About 7932 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/05/22/interview-android-basic/">INTERVIEW-ANDROID-BASIC</a></p><div class="content"><div class="ez-toc-v2_0_66_1 ez-toc-wrap-right counter-hierarchy ez-toc-counter ez-toc-grey ez-toc-container-direction" id="ez-toc-container"><div class="ez-toc-title-container">Table of Contents

<p><span class="ez-toc-title-toggle"><a href="#"><span class="ez-toc-js-icon-con"><span class><span class="eztoc-hide" style="display:none;">Toggle</span><span class="ez-toc-icon-toggle-span"><svg class="list-377408" fill="none" height="20px" style="fill: #999;color:#999" viewbox="0 0 24 24" width="20px" xmlns="http://www.w3.org/2000/svg"><path d="M6 6H4v2h2V6zm14 0H8v2h12V6zM4 11h2v2H4v-2zm16 0H8v2h12v-2zM4 16h2v2H4v-2zm16 0H8v2h12v-2z" fill="currentColor"/></svg><svg baseprofile="tiny" class="arrow-unsorted-368013" height="10px" style="fill: #999;color:#999" version="1.2" viewbox="0 0 24 24" width="10px" xmlns="http://www.w3.org/2000/svg"><path d="M18.2 9.3l-6.2-6.3-6.2 6.3c-.2.2-.3.4-.3.7s.1.5.3.7c.2.2.4.3.7.3h11c.3 0 .5-.1.7-.3.2-.2.3-.5.3-.7s-.1-.5-.3-.7zM5.8 14.7l6.2 6.3 6.2-6.3c.2-.2.3-.5.3-.7s-.1-.5-.3-.7c-.2-.2-.4-.3-.7-.3h-11c-.3 0-.5.1-.7.3-.2.2-.3.5-.3.7s.1.5.3.7z"/></svg></span></span></span></a></span></p></div><nav>- <a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#architecture" title="architecture">architecture</a><p></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#Android%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9" title="Android基础知识点">Android基础知识点</a><ul>
<li><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6%E6%98%AF%E4%BB%80%E4%B9%88" title="四大组件是什么">四大组件是什么</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#Activity" title="Activity">Activity</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#Activity%E5%90%84%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F" title="Activity各种情况下的生命周期?">Activity各种情况下的生命周期?</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#Activity%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F" title="Activity之间的通信方式">Activity之间的通信方式</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#Activity%E7%9A%84%E5%9B%9B%E7%A7%8D%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%E5%AF%B9%E6%AF%94" title="Activity的四种启动模式对比">Activity的四种启动模式对比</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#Android_APK%E7%BC%96%E8%AF%91%E6%89%93%E5%8C%85%E6%B5%81%E7%A8%8B" title="Android APK编译打包流程">Android APK编译打包流程</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#ART%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%8EDalvik%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E5%8C%BA%E5%88%AB" title="ART虚拟机与Dalvik虚拟机的区别">ART虚拟机与Dalvik虚拟机的区别</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#LaunchMode%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" title="LaunchMode应用场景">LaunchMode应用场景</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#Fragmment" title="Fragmment">Fragmment</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#Fragment%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%AE%A1%E7%90%86%E8%BF%87%E7%A8%8B%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91%E5%92%8C%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95" title="Fragment生命周期管理过程遇到的坑和解决办法">Fragment生命周期管理过程遇到的坑和解决办法</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#fragment%E5%90%84%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F_Activity%E4%B8%8EFragment%E4%B9%8B%E9%97%B4%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%AF%94%E8%BE%83" title="fragment各种情况下的生命周期 Activity与Fragment之间生命周期比较">fragment各种情况下的生命周期 Activity与Fragment之间生命周期比较</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#Fragment%E7%8A%B6%E6%80%81%E4%BF%9D%E5%AD%98startActivityForResult%E6%98%AF%E5%93%AA%E4%B8%AA%E7%B1%BB%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E5%9C%A8%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%E4%BD%BF%E7%94%A8%EF%BC%9F" title="Fragment状态保存startActivityForResult是哪个类的方法，在什么情况下使用？">Fragment状态保存startActivityForResult是哪个类的方法，在什么情况下使用？</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#fragment%E4%B9%8B%E9%97%B4%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%9F" title="fragment之间传递数据的方式？">fragment之间传递数据的方式？</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#Service" title="Service">Service</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#%E8%AF%B7%E6%8F%8F%E8%BF%B0%E4%B8%80%E4%B8%8BService_%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F" title="请描述一下Service 的生命周期">请描述一下Service 的生命周期</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#service%E5%92%8Cactivity%E6%80%8E%E4%B9%88%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92%EF%BC%9F" title="service和activity怎么进行数据交互？">service和activity怎么进行数据交互？</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#%E8%AF%B7%E6%8F%8F%E8%BF%B0%E4%B8%80%E4%B8%8B%E5%B9%BF%E6%92%ADBroadcastReceiver%E7%9A%84%E7%90%86%E8%A7%A3" title="请描述一下广播BroadcastReceiver的理解">请描述一下广播BroadcastReceiver的理解</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#BroadcastReceiver%EF%BC%8CLocalBroadcastReceiver%E6%9C%AC%E5%9C%B0%E5%B9%BF%E6%92%AD_%E5%8C%BA%E5%88%AB" title="BroadcastReceiver，LocalBroadcastReceiver(本地广播) 区别">BroadcastReceiver，LocalBroadcastReceiver(本地广播) 区别</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#Dialog" title="Dialog">Dialog</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#AlertDialogpopupWindowToast%E5%8C%BA%E5%88%AB_%EF%BC%9F" title="AlertDialog,popupWindow,Toast区别 ？">AlertDialog,popupWindow,Toast区别 ？</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#Application_%E5%92%8C_Activity_%E7%9A%84_Context_%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8C%BA%E5%88%AB" title="Application 和 Activity 的 Context 对象的区别">Application 和 Activity 的 Context 对象的区别</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#Context%E7%9A%84%E7%90%86%E8%A7%A3%EF%BC%9F" title="Context的理解？">Context的理解？</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#Anim" title="Anim">Anim</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#Android%E5%B1%9E%E6%80%A7%E5%8A%A8%E7%94%BB%E7%89%B9%E6%80%A7" title="Android属性动画特性">Android属性动画特性</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#%E5%A6%82%E4%BD%95%E5%AF%BC%E5%85%A5%E5%A4%96%E9%83%A8%E6%95%B0%E6%8D%AE%E5%BA%93" title="如何导入外部数据库?">如何导入外部数据库?</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#%E6%8F%92%E5%80%BC%E5%99%A8_%E4%BC%B0%E5%80%BC%E5%99%A8%E5%8C%BA%E5%88%AB" title="插值器 估值器区别">插值器 估值器区别</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#%E8%B0%88%E8%B0%88%E5%AF%B9%E6%8E%A5%E5%8F%A3%E4%B8%8E%E5%9B%9E%E8%B0%83%E7%9A%84%E7%90%86%E8%A7%A3" title="谈谈对接口与回调的理解">谈谈对接口与回调的理解</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#%E5%9B%9E%E8%B0%83%E7%9A%84%E5%8E%9F%E7%90%86_%E5%86%99%E4%B8%80%E4%B8%AA%E5%9B%9E%E8%B0%83demo" title="回调的原理 写一个回调demo">回调的原理 写一个回调demo</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#VIEW%E7%9B%B8%E5%85%B3" title="VIEW相关">VIEW相关</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96%E8%87%AA%E5%AE%9A%E4%B9%89View" title="如何优化自定义View">如何优化自定义View</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#android_view%E7%BB%98%E5%88%B6%E6%9C%BA%E5%88%B6%E5%92%8C%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B%EF%BC%8C%E8%AF%B7%E8%AF%A6%E7%BB%86%E8%AF%B4%E4%B8%8B%E6%95%B4%E4%B8%AA%E6%B5%81%E7%A8%8B" title="android view绘制机制和加载过程，请详细说下整个流程">android view绘制机制和加载过程，请详细说下整个流程</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#MeasureSpeck%E7%9A%84%E6%84%8F%E4%B9%89%EF%BC%8C%E6%80%8E%E4%B9%88%E8%AE%A1%E7%AE%97MeasureSpec" title="MeasureSpeck的意义，怎么计算MeasureSpec">MeasureSpeck的意义，怎么计算MeasureSpec</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#wrap_content_%E5%92%8CMATCH_PARENT%E7%9A%84%E6%B5%8B%E9%87%8F%E6%96%B9%E5%BC%8F" title="wrap content 和MATCH_PARENT的测量方式">wrap content 和MATCH_PARENT的测量方式</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#LayoutParams%E6%98%AF%E6%98%AF%E4%BB%80%E4%B9%88" title="LayoutParams是是什么">LayoutParams是是什么</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#%E4%BB%8B%E7%BB%8D%E4%B8%8BSurfaceView" title="介绍下SurfaceView">介绍下SurfaceView</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#RecycleView%E7%9A%84%E4%BD%BF%E7%94%A8" title="RecycleView的使用">RecycleView的使用</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#webview%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98" title="webview安全问题">webview安全问题</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#Webview%E5%AF%86%E7%A0%81%E6%98%8E%E6%96%87%E5%AD%98%E5%82%A8%E6%BC%8F%E6%B4%9E" title="Webview密码明文存储漏洞">Webview密码明文存储漏洞</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#WebView%E5%9F%9F%E6%8E%A7%E5%88%B6%E4%B8%8D%E4%B8%A5%E6%A0%BC%E6%BC%8F%E6%B4%9E" title="WebView域控制不严格漏洞">WebView域控制不严格漏洞</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#webview%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F_Leakcanary_%E9%AA%8C%E8%AF%81" title="webview内存泄漏 Leakcanary 验证?">webview内存泄漏 Leakcanary 验证?</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#overdraw%E8%BF%87%E5%BA%A6%E7%BB%98%E5%88%B6%E4%BC%98%E5%8C%96%E6%96%B9%E6%B3%95" title="overdraw过度绘制优化方法">overdraw过度绘制优化方法</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91%E6%9C%BA%E5%88%B6" title="事件分发机制">事件分发机制</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#%E6%88%91%E7%9A%84%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98" title="我的面试问题">我的面试问题</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#activity%E8%A2%AB%E9%94%80%E6%AF%81%E5%90%8E%E9%87%8D%E5%BB%BA%EF%BC%8C%E6%80%8E%E4%B9%88%E8%8E%B7%E5%8F%96fragment" title="activity被销毁后重建，怎么获取fragment">activity被销毁后重建，怎么获取fragment</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#activity%E5%92%8Cservice%E9%80%9A%E4%BF%A1" title="activity和service通信">activity和service通信</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#activity%E9%94%80%E6%AF%81%E7%BA%BF%E7%A8%8B%E4%BC%9A%E4%B8%8D%E4%BC%9A%E6%B6%88%E5%A4%B1" title="activity销毁线程会不会消失">activity销毁线程会不会消失</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#activity%E6%AF%8F%E4%B8%AA%E6%96%B9%E6%B3%95%E5%A4%84%E7%90%86%E7%9A%84%E5%8C%BA%E5%88%AB" title="activity每个方法处理的区别">activity每个方法处理的区别</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#activity_fragment%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE%E6%96%B9%E5%BC%8F" title="activity fragment传递数据方式">activity fragment传递数据方式</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E6%80%8E%E4%B9%88%E7%90%86%E8%A7%A3%E7%9A%84" title="单例模式怎么理解的">单例模式怎么理解的</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#%E6%88%AA%E8%8E%B7%E9%80%9A%E7%9F%A5" title="截获通知">截获通知</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#final%E7%89%B9%E6%80%A7" title="final特性">final特性</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#android%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86%E7%9A%84_%EF%BC%8C%E4%B8%A4%E4%B8%AA%E5%AD%90%E7%BA%BF%E7%A8%8B%E9%97%B4%E6%80%8E%E4%B9%88%E9%80%9A%E8%AE%AF" title="android多线程怎么处理的 ，两个子线程间怎么通讯">android多线程怎么处理的 ，两个子线程间怎么通讯</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#%E9%98%B2%E6%AD%A2%E5%BA%94%E7%94%A8%E8%A2%AB%E8%A2%AB%E6%9D%80%E6%AD%BB%E6%80%8E%E4%B9%88%E4%BF%9D%E8%AF%81service%E4%B8%8D%E8%A2%AB%E6%9D%80%E6%AD%BB" title="防止应用被被杀死,怎么保证service不被杀死">防止应用被被杀死,怎么保证service不被杀死</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#%E6%80%8E%E4%B9%88%E8%AE%A9%E7%BA%BF%E7%A8%8B%E6%9C%89%E5%BA%8F" title="怎么让线程有序">怎么让线程有序</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#%E4%B8%A4%E4%B8%AA%E7%BA%BF%E7%A8%8B%EF%BC%8C%E6%83%B3%E8%AE%A9%E6%9D%A5%E7%9A%84%E4%B8%80%E4%B8%AA%E6%8F%92%E9%98%9F%E6%80%8E%E4%B9%88%E5%BC%84" title="两个线程，想让来的一个插队怎么弄">两个线程，想让来的一个插队怎么弄</a></li>
</ul>
</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#Android%E6%BA%90%E7%A0%81%E7%9B%B8%E5%85%B3%E5%88%86%E6%9E%90" title="Android源码相关分析">Android源码相关分析</a><ul>
<li><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#Handler%E6%9C%BA%E5%88%B6%E5%92%8C%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0" title="Handler机制和底层实现">Handler机制和底层实现</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#RecycleView" title="RecycleView">RecycleView</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#Binder%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%BA%E5%88%B6" title="Binder通信原理与机制">Binder通信原理与机制</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#JetPack" title="JetPack">JetPack</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview-android-basic/#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" title="性能优化">性能优化</a></li>
</ul>
</nav></div>### <span class="ez-toc-section" id="architecture"></span>architecture<span class="ez-toc-section-end"></span>

<p><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/30/architecture/">https://jonblog.site/2024/05/30/architecture/</a></p>
<h3 id="Android基础知识点"><a href="#Android基础知识点" class="headerlink" title="Android基础知识点"></a><span class="ez-toc-section" id="Android%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9"></span>Android基础知识点<span class="ez-toc-section-end"></span></h3><h5 id="四大组件是什么"><a href="#四大组件是什么" class="headerlink" title="四大组件是什么"></a><span class="ez-toc-section" id="%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6%E6%98%AF%E4%BB%80%E4%B9%88"></span>四大组件是什么<span class="ez-toc-section-end"></span></h5><p>Activity ,Service ,BroadCastReceiver,ContentProvider</p>
<h4 id="Activity"><a href="#Activity" class="headerlink" title="Activity"></a><span class="ez-toc-section" id="Activity"></span>Activity<span class="ez-toc-section-end"></span></h4><h5 id="Activity各种情况下的生命周期"><a href="#Activity各种情况下的生命周期" class="headerlink" title="Activity各种情况下的生命周期?"></a><span class="ez-toc-section" id="Activity%E5%90%84%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"></span>Activity各种情况下的生命周期?<span class="ez-toc-section-end"></span></h5><ul>
<li><p>先启动A 再跳转B</p>
<p>A_onCreate()-&gt; A_onStart()-&gt;A_onResume-&gt; A_onPause()-&gt; B_onCreate() -&gt; B_onStart() -&gt; B_resume -&gt; A_onSaveInstanceState()-&gt;A_onStop()</p>
</li>
<li><p>弹出Dialog</p>
<p>不调用任何生命周期,所以Activity上有Dialog的时候按Home键时的生命周期,有没有Dialog都一样的。</p>
</li>
<li><p>横竖屏切换的时候，Activity 各种情况下的生命周期</p>
<ol>
<li>Activity状态保存于恢复 (什么都不设置)<br> <img src="https://raw.githubusercontent.com/BlogForMe/ImageServer/main/interview/Screen%20Shot%202021-01-24%20at%203.37.01%20PM.png"></li>
<li>设置<code>android:screenOrientation=&quot;portrait&quot;</code> 不会旋转</li>
</ol>
</li>
</ul>
<ol start="3">
<li>Android 8.0 设置<code>android:configChanges=&quot;orientation|keyboardHidden|screenSize&quot;</code></li>
</ol>
<p>  会发生旋转，生命周期不发生变化，只是会调用 <code>onConfigurationChanged()</code></p>
<p>  <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_36713816/article/details/80538467">https://blog.csdn.net/qq_36713816&#x2F;article&#x2F;details&#x2F;80538467</a></p>
<ul>
<li>前台切换到后台，然后再回到前台，Activity生命周期回调方法。</li>
</ul>
<p>  前台切换到后台: A_onCreate()-&gt; A_onStart()-&gt;A_onResume-&gt; A_onPause()-&gt;A_onSaveInstanceState()-&gt; A_onStop()</p>
<p>  再回到前台: A_onRestart() -&gt;A_onStart()-&gt; A_onResume()</p>
<h5 id="Activity之间的通信方式"><a href="#Activity之间的通信方式" class="headerlink" title="Activity之间的通信方式"></a><span class="ez-toc-section" id="Activity%E4%B9%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F"></span>Activity之间的通信方式<span class="ez-toc-section-end"></span></h5><ul>
<li><p>Intent</p>
<p>startActivity()或startActivityForResult(),通过Intent传递信息,需要注意，Intent对携带信息大小有限制。</p>
</li>
<li><p>BroadcastReceiver</p>
</li>
<li><p>数据存取传递，sharePreference&#x2F;sql&#x2F;File</p>
</li>
<li><p>Application 静态变量</p>
</li>
</ul>
<h5 id="Activity的四种启动模式对比"><a href="#Activity的四种启动模式对比" class="headerlink" title="Activity的四种启动模式对比"></a><span class="ez-toc-section" id="Activity%E7%9A%84%E5%9B%9B%E7%A7%8D%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%E5%AF%B9%E6%AF%94"></span>Activity的四种启动模式对比<span class="ez-toc-section-end"></span></h5><ul>
<li><p>Standard</p>
<p>默认启动模式，每次都重新创建一个新的Activity 。</p>
</li>
<li><p>SingleStop</p>
<p>当前Activity如果在栈顶，那么就不会创建新的Activity，会原先调用Activity的onNewIntent()</p>
</li>
<li><p>SingleTask</p>
<p>当前任务栈已经有Activity实例，就不会再创建了，会调用 onNewIntent().</p>
</li>
<li><p>SingleInstance</p>
<p>单一实例模式，整个手机操作系统里面只有一个实例存在。不同的应用去打开这个activity 共享公用的同一个activity。他会运行在自己单独，独立的任务栈里面，并且任务栈里面只有他一个实例存在。应用场景：呼叫来电界面。这种模式的使用情况比较罕见，在Launcher中可能使用。或者你确定你需要使Activity只有一个实例。<br>可以得出以下结论：<br>\1. 以singleInstance模式启动的Activity具有全局唯一性，即整个系统中只会存在一个这样的实例。<br>\2. 以singleInstance模式启动的Activity在整个系统中是单例的，如果在启动这样的Activiyt时，已经存在了一个实例，那么会把它所在的任务调度到前台，重用这个实例。<br>\3. 以singleInstance模式启动的Activity具有独占性，即它会独自占用一个任务，被他开启的任何activity都会运行在其他任务中。<br>\4. 被singleInstance模式的Activity开启的其他activity，能够在新的任务中启动，但不一定开启新的任务，也可能在已有的一个任务中开启。</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zivensonice/article/details/51569502">https://blog.csdn.net/zivensonice/article/details/51569502</a></p>
<p><a target="_blank" rel="noopener" href="https://ayusch.com/android-launch-modes-explained/">https://ayusch.com/android-launch-modes-explained/</a></p>
<p><a href="https://noteforme.github.io/2021/01/16/Activity/">https://noteforme.github.io/2021/01/16/Activity/</a></p>
</li>
<li><p>为什么 application.startActivity 要设置NEW_TASK</p>
<p>如果Activity是由一个已经启动的Activity发起的，那么把它放在这个已经启动的任务栈是合理的，Application本来没有任务栈，那么就新创建一个放起来.</p>
<p><a target="_blank" rel="noopener" href="https://www.wanandroid.com/wenda/show/8697">https://www.wanandroid.com/wenda/show/8697</a></p>
</li>
</ul>
<p>任务栈的底层原理</p>
<h5 id="Android-APK编译打包流程"><a href="#Android-APK编译打包流程" class="headerlink" title="Android APK编译打包流程"></a><span class="ez-toc-section" id="Android_APK%E7%BC%96%E8%AF%91%E6%89%93%E5%8C%85%E6%B5%81%E7%A8%8B"></span>Android APK编译打包流程<span class="ez-toc-section-end"></span></h5><p><img src="https://camo.githubusercontent.com/9f62ff22761b5a960fc9547be84cd05ddec48fe4b28fbb1bd17877fb88b43ed0/687474703a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f333938353536332d636462613331396461623332643063372e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430"></p>
<ol>
<li>AAPT（Android Asset Packaging Tools）工具会打包应用中的资源文件，如AndroidManifest.xml、layout布局中的xml等，并将xml文件编译成二进制形式，当然assets文件夹中的文件不会被编译，图片以及raw文件夹中的资源也会保持原有的形态，需要注意的是raw文件夹中的资源也会生成资源ID。AAPT编译完成后会生成R.java文件。</li>
<li>AIDL工会将所有的aidl接口转换为java接口。</li>
<li>所有的Java源代码、R文件、接口都会编译器编译成.class文件。</li>
<li>Dex工具会将上述产生的.class文件以及第三方库和其他class文件转化为dex（Dalvik虚拟机可执行文件）文件，dex文件最终会被打包进APK文件。</li>
<li>apkbuilder会把编译后的资源和其他资源文件同dex文件一起打入APK中。</li>
<li>生成APK文件之后，，需要对其签名才能安装到设备上，平时测试都会使用debug keystore，当发布应用时必须使用release版的keystore对应用进行签名。</li>
<li>如果对APK正式签名，还需要使用zipalign工具对APK进行对齐操作，这样做的好处是当应用运行时能提高速度，但是会相应的增加内存开销。</li>
</ol>
<p><strong>总结：编译 –&gt; DEX –&gt; 打包 –&gt; 签名和对齐</strong></p>
<h5 id="ART虚拟机与Dalvik虚拟机的区别"><a href="#ART虚拟机与Dalvik虚拟机的区别" class="headerlink" title="ART虚拟机与Dalvik虚拟机的区别"></a><span class="ez-toc-section" id="ART%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%8EDalvik%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E5%8C%BA%E5%88%AB"></span>ART虚拟机与Dalvik虚拟机的区别<span class="ez-toc-section-end"></span></h5><ul>
<li><p>什么是ART？</p>
<p>ART代表Android Runtime，其处理应用程序执行的方式完全不同于Dalvik，Dalvik是依靠一个Just-In-Time（<strong>JIT）编译器去解释字节码</strong>。开发者编译后的应用代码需要通过一个解释器在用户的设备上运行，这一机制并不高效，但让应用能更容易在不同硬件和架构上运行。ART则完全改变了这套做法，<strong>在应用安装时就预编译字节码到机器语言</strong>，这一机制叫Ahead-Of-Time（AOT）编译。在移除解释代码这一过程后，应用程序执行将更加效率。启动更快。</p>
</li>
<li><p>ART优点：</p>
<ol>
<li>系统性能的显著提升。</li>
<li>应用启动更快、运行更快、体验更流畅、触摸反馈更及时。</li>
<li>更长的电池续航能力</li>
<li>支持更低的硬件。</li>
</ol>
</li>
<li><p>ART缺点</p>
<ol>
<li>更大的存储空间占用，可能会增加10%-20%</li>
<li>更长的应用安装时间</li>
</ol>
</li>
</ul>
<h5 id="LaunchMode应用场景"><a href="#LaunchMode应用场景" class="headerlink" title="LaunchMode应用场景"></a><span class="ez-toc-section" id="LaunchMode%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"></span>LaunchMode应用场景<span class="ez-toc-section-end"></span></h5><h4 id="Fragmment"><a href="#Fragmment" class="headerlink" title="Fragmment"></a><span class="ez-toc-section" id="Fragmment"></span>Fragmment<span class="ez-toc-section-end"></span></h4><h5 id="Fragment生命周期管理过程遇到的坑和解决办法"><a href="#Fragment生命周期管理过程遇到的坑和解决办法" class="headerlink" title="Fragment生命周期管理过程遇到的坑和解决办法"></a><span class="ez-toc-section" id="Fragment%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%AE%A1%E7%90%86%E8%BF%87%E7%A8%8B%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91%E5%92%8C%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"></span>Fragment生命周期管理过程遇到的坑和解决办法<span class="ez-toc-section-end"></span></h5><h5 id="fragment各种情况下的生命周期-Activity与Fragment之间生命周期比较"><a href="#fragment各种情况下的生命周期-Activity与Fragment之间生命周期比较" class="headerlink" title="fragment各种情况下的生命周期 Activity与Fragment之间生命周期比较"></a><span class="ez-toc-section" id="fragment%E5%90%84%E7%A7%8D%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F_Activity%E4%B8%8EFragment%E4%B9%8B%E9%97%B4%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%AF%94%E8%BE%83"></span>fragment各种情况下的生命周期 Activity与Fragment之间生命周期比较<span class="ez-toc-section-end"></span></h5><p>​ <u>onAttach() -&gt; onCreate() -</u>&gt; onCreateView() -&gt; onActivityCreate() -&gt; onStart() -&gt; onResume() -&gt; onPause() -&gt; onStop() -&gt;</p>
<p>​ onDestroyView() -&gt; onDestroy() -&gt; onDetach()</p>
<h5 id="Fragment状态保存startActivityForResult是哪个类的方法，在什么情况下使用？"><a href="#Fragment状态保存startActivityForResult是哪个类的方法，在什么情况下使用？" class="headerlink" title="Fragment状态保存startActivityForResult是哪个类的方法，在什么情况下使用？"></a><span class="ez-toc-section" id="Fragment%E7%8A%B6%E6%80%81%E4%BF%9D%E5%AD%98startActivityForResult%E6%98%AF%E5%93%AA%E4%B8%AA%E7%B1%BB%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E5%9C%A8%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%E4%BD%BF%E7%94%A8%EF%BC%9F"></span>Fragment状态保存startActivityForResult是哪个类的方法，在什么情况下使用？<span class="ez-toc-section-end"></span></h5><ul>
<li><p>Fragment发起</p>
<p>Fragment onActivityResult能接收。Activity onActivityResult能接收,但是requestCode不正确。</p>
</li>
<li><p>Activity发起</p>
<p>Fragment不能接收。 Activity onActivityResult能接收。</p>
</li>
</ul>
<h5 id="fragment之间传递数据的方式？"><a href="#fragment之间传递数据的方式？" class="headerlink" title="fragment之间传递数据的方式？"></a><span class="ez-toc-section" id="fragment%E4%B9%8B%E9%97%B4%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%9F"></span>fragment之间传递数据的方式？<span class="ez-toc-section-end"></span></h5><ol>
<li>Fragment.setArguments()方法传递bundle</li>
<li>findFragmentById()找到tag,然后直接操作Framgent</li>
</ol>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onArticleSelected</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">      <span class="type">ArticleFragment</span> <span class="variable">articleFrag</span> <span class="operator">=</span> (ArticleFragment)</span><br><span class="line">      getSupportFragmentManager().findFragmentById(R.id.article_fragment);</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">if</span> (articleFrag != <span class="literal">null</span>) &#123;</span><br><span class="line">          articleFrag.updateArticleView(position);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="type">ArticleFragment</span> <span class="variable">newFragment</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArticleFragment</span>();</span><br><span class="line">          <span class="type">Bundle</span> <span class="variable">args</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bundle</span>();</span><br><span class="line">          args.putInt(ArticleFragment.ARG_POSITION, position);</span><br><span class="line">          newFragment.setArguments(args);</span><br><span class="line">  </span><br><span class="line">          <span class="type">FragmentTransaction</span> <span class="variable">transaction</span> <span class="operator">=</span> getSupportFragmentManager().beginTransaction();</span><br><span class="line">          transaction.replace(R.id.fragment_container, newFragment);</span><br><span class="line">          transaction.addToBackStack(<span class="literal">null</span>);</span><br><span class="line">          transaction.commit();</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>接口回调</li>
</ol>
<h4 id="Service"><a href="#Service" class="headerlink" title="Service"></a><span class="ez-toc-section" id="Service"></span>Service<span class="ez-toc-section-end"></span></h4><h5 id="请描述一下Service-的生命周期"><a href="#请描述一下Service-的生命周期" class="headerlink" title="请描述一下Service 的生命周期"></a><span class="ez-toc-section" id="%E8%AF%B7%E6%8F%8F%E8%BF%B0%E4%B8%80%E4%B8%8BService_%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"></span>请描述一下Service 的生命周期<span class="ez-toc-section-end"></span></h5><ul>
<li>startService()</li>
</ul>
<p>​ 启动: onCreate() - onCommandStart() - onDestory()</p>
<p>​ 继续startService : 只会执行 onCommandStart()</p>
<ul>
<li>bindService()</li>
</ul>
<p>​ onCreate() - onBind() - onUnbind()-onDestory()</p>
<h5 id="service和activity怎么进行数据交互？"><a href="#service和activity怎么进行数据交互？" class="headerlink" title="service和activity怎么进行数据交互？"></a><span class="ez-toc-section" id="service%E5%92%8Cactivity%E6%80%8E%E4%B9%88%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92%EF%BC%9F"></span>service和activity怎么进行数据交互？<span class="ez-toc-section-end"></span></h5><ol>
<li>bindService()</li>
</ol>
<p>  Service中定义接口，ServiceConnection中获取Service实例，调用响应接口<br>2. 注册广播传递数据说说ContentProvider、ContentResolver、ContentObserver 之间的关系</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">把自己的程序数据提供给其他应用程序调用，提供相关的uri接口,没用过ntentObserver 之间的关系</span><br><span class="line">   把自己的程序数据提供给其他应用程序调用，提供香港的uri接口,没用过</span><br></pre></td></tr></table></figure>
<p>  <a target="_blank" rel="noopener" href="http://wangbufan.cn/2019/09/17/Service%E5%8F%8AService%E4%B8%8EActivity%E9%80%9A%E4%BF%A1/">http://wangbufan.cn/2019/09/17/Service%E5%8F%8AService%E4%B8%8EActivity%E9%80%9A%E4%BF%A1/</a></p>
<h5 id="请描述一下广播BroadcastReceiver的理解"><a href="#请描述一下广播BroadcastReceiver的理解" class="headerlink" title="请描述一下广播BroadcastReceiver的理解"></a><span class="ez-toc-section" id="%E8%AF%B7%E6%8F%8F%E8%BF%B0%E4%B8%80%E4%B8%8B%E5%B9%BF%E6%92%ADBroadcastReceiver%E7%9A%84%E7%90%86%E8%A7%A3"></span>请描述一下广播BroadcastReceiver的理解<span class="ez-toc-section-end"></span></h5><ul>
<li><p>广播是可以作为应用全局监听器，可以实现应用中不同组件少量数据的通信！！！，更深研究后可以多说点.</p>
<p>基于消息的发布&#x2F;订阅事件模型.</p>
</li>
<li><p>广播的分类</p>
<ol>
<li><p>无序广播</p>
</li>
<li><p>有序广播</p>
<p> <strong>接收者按照优先级顺序</strong>接收,每个接收者都<strong>有权终止广播</strong>,下一个就得不到.</p>
</li>
</ol>
</li>
<li><p>广播使用的方式和场景</p>
<p>app全局监听</p>
<p>binder机制 <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/5a983578418e">https://www.jianshu.com/p/5a983578418e</a></p>
<h5 id="BroadcastReceiver，LocalBroadcastReceiver-本地广播-区别"><a href="#BroadcastReceiver，LocalBroadcastReceiver-本地广播-区别" class="headerlink" title="BroadcastReceiver，LocalBroadcastReceiver(本地广播) 区别"></a><span class="ez-toc-section" id="BroadcastReceiver%EF%BC%8CLocalBroadcastReceiver%E6%9C%AC%E5%9C%B0%E5%B9%BF%E6%92%AD_%E5%8C%BA%E5%88%AB"></span>BroadcastReceiver，LocalBroadcastReceiver(本地广播) 区别<span class="ez-toc-section-end"></span></h5><p>BroadcastReceiver：针对应用间，系统和应用间通信。</p>
<p>LocalBroadcastReceiver： 只有自己应用内部才能收到,效率更高.</p>
</li>
</ul>
<h4 id="Dialog"><a href="#Dialog" class="headerlink" title="Dialog"></a><span class="ez-toc-section" id="Dialog"></span>Dialog<span class="ez-toc-section-end"></span></h4><h5 id="AlertDialog-popupWindow-Toast区别-？"><a href="#AlertDialog-popupWindow-Toast区别-？" class="headerlink" title="AlertDialog,popupWindow,Toast区别 ？"></a><span class="ez-toc-section" id="AlertDialogpopupWindowToast%E5%8C%BA%E5%88%AB_%EF%BC%9F"></span>AlertDialog,popupWindow,Toast区别 ？<span class="ez-toc-section-end"></span></h5><p>Android是不允许Activity或Dialog凭空出现的,而Dialog则必须在一个Activity上面弹出</p>
<ul>
<li><p>AlertDialog</p>
<p>拦截了屏幕上所有的TouchK&#x2F;key</p>
</li>
<li><p>PopupWindow</p>
<p>仅仅拦截自身区域touch&#x2F;key</p>
<p>需要Activity类型的Context启动</p>
</li>
<li><p>Toast</p>
<p>可以研究下 两者最根本的区别在于有没有新建一个 window，PopupWindow 没有新建，而是通过 WMS 将 View 加到 DecorView；Dialog 是新建了一个 window (PhoneWindow)，相当于走了一遍 Activity 中创建 window 的流程</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/aed496937bd2">https://www.jianshu.com/p/aed496937bd2</a></p>
</li>
</ul>
<h5 id="Application-和-Activity-的-Context-对象的区别"><a href="#Application-和-Activity-的-Context-对象的区别" class="headerlink" title="Application 和 Activity 的 Context 对象的区别"></a><span class="ez-toc-section" id="Application_%E5%92%8C_Activity_%E7%9A%84_Context_%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8C%BA%E5%88%AB"></span>Application 和 Activity 的 Context 对象的区别<span class="ez-toc-section-end"></span></h5><p>ApplicatioContext ：</p>
<p>​ 应用生命周期一样长,长生命周期对象就用ApplicationContext</p>
<p>Activity的Context：</p>
<p>​ 当前Activity的生命周期,和UI相关的都用Activity为Context来处理</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/e215c90a460e">https://www.jianshu.com/p/e215c90a460e</a></p>
<h5 id="Context的理解？"><a href="#Context的理解？" class="headerlink" title="Context的理解？"></a><span class="ez-toc-section" id="Context%E7%9A%84%E7%90%86%E8%A7%A3%EF%BC%9F"></span>Context的理解？<span class="ez-toc-section-end"></span></h5><p>​ Context是维持Android程序中各组件能够正常工作的一个核心功能类</p>
<h4 id="Anim"><a href="#Anim" class="headerlink" title="Anim"></a><span class="ez-toc-section" id="Anim"></span>Anim<span class="ez-toc-section-end"></span></h4><h5 id="Android属性动画特性"><a href="#Android属性动画特性" class="headerlink" title="Android属性动画特性"></a><span class="ez-toc-section" id="Android%E5%B1%9E%E6%80%A7%E5%8A%A8%E7%94%BB%E7%89%B9%E6%80%A7"></span>Android属性动画特性<span class="ez-toc-section-end"></span></h5><p>Android动画框架实现原理</p>
<p>可以改变对象的属性。还需要说说什么吗?</p>
<h5 id="如何导入外部数据库"><a href="#如何导入外部数据库" class="headerlink" title="如何导入外部数据库?"></a><span class="ez-toc-section" id="%E5%A6%82%E4%BD%95%E5%AF%BC%E5%85%A5%E5%A4%96%E9%83%A8%E6%95%B0%E6%8D%AE%E5%BA%93"></span>如何导入外部数据库?<span class="ez-toc-section-end"></span></h5><p>把数据库文件防盗asserts目录下，然后写入databases目录下面, 然后通过数据库容器装载里面数据库里面的数据。</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/chaoyu168/article/details/50467913">https://blog.csdn.net/chaoyu168/article/details/50467913</a></p>
<h5 id="插值器-估值器区别"><a href="#插值器-估值器区别" class="headerlink" title="插值器 估值器区别"></a><span class="ez-toc-section" id="%E6%8F%92%E5%80%BC%E5%99%A8_%E4%BC%B0%E5%80%BC%E5%99%A8%E5%8C%BA%E5%88%AB"></span>插值器 估值器区别<span class="ez-toc-section-end"></span></h5><p>​ 插值器: （<code>Interpolator</code>）决定 值 的变化模式（匀速、加速）</p>
<p>​ 估值器 : (<code>TypeEvaluator</code>)决定 值 的具体变化数值</p>
<h5 id="谈谈对接口与回调的理解"><a href="#谈谈对接口与回调的理解" class="headerlink" title="谈谈对接口与回调的理解"></a><span class="ez-toc-section" id="%E8%B0%88%E8%B0%88%E5%AF%B9%E6%8E%A5%E5%8F%A3%E4%B8%8E%E5%9B%9E%E8%B0%83%E7%9A%84%E7%90%86%E8%A7%A3"></span>谈谈对接口与回调的理解<span class="ez-toc-section-end"></span></h5><ul>
<li>理解: A发送消息给B,B处理完后高速A处理结果.</li>
<li>实现: 一般而言，处理消息的类是唯一的，发送消息的类却是各种各样的，将回调方法做成一个接口，不同的发送者实现该接口，并且把自己的接口实现类的对象在发送消息时，传递给消息处理者。</li>
</ul>
<p>注册之后不马上执行，而是某个时机再触发执行。</p>
<h5 id="回调的原理-写一个回调demo"><a href="#回调的原理-写一个回调demo" class="headerlink" title="回调的原理 写一个回调demo"></a><span class="ez-toc-section" id="%E5%9B%9E%E8%B0%83%E7%9A%84%E5%8E%9F%E7%90%86_%E5%86%99%E4%B8%80%E4%B8%AA%E5%9B%9E%E8%B0%83demo"></span>回调的原理 写一个回调demo<span class="ez-toc-section-end"></span></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ProcessClick</span> <span class="variable">process</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProcessClick</span>(<span class="keyword">new</span> <span class="title class_">OnClickListener</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">()</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;已经点击&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        process.click();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">OnClickListener</span>&#123;</span><br><span class="line">    <span class="keyword">void</span>  <span class="title function_">onClick</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span>  <span class="title class_">ProcessClick</span> &#123;</span><br><span class="line">    OnClickListener listener;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ProcessClick</span><span class="params">(OnClickListener listener)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.listener = listener;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">click</span><span class="params">()</span>&#123;</span><br><span class="line">        listener.onClick();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://developer.aliyun.com/article/614769">https://developer.aliyun.com/article/614769</a></p>
<h4 id="VIEW相关"><a href="#VIEW相关" class="headerlink" title="VIEW相关"></a><span class="ez-toc-section" id="VIEW%E7%9B%B8%E5%85%B3"></span>VIEW相关<span class="ez-toc-section-end"></span></h4><h5 id="如何优化自定义View"><a href="#如何优化自定义View" class="headerlink" title="如何优化自定义View"></a><span class="ez-toc-section" id="%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96%E8%87%AA%E5%AE%9A%E4%B9%89View"></span>如何优化自定义View<span class="ez-toc-section-end"></span></h5><h5 id="android-view绘制机制和加载过程，请详细说下整个流程"><a href="#android-view绘制机制和加载过程，请详细说下整个流程" class="headerlink" title="android view绘制机制和加载过程，请详细说下整个流程"></a><span class="ez-toc-section" id="android_view%E7%BB%98%E5%88%B6%E6%9C%BA%E5%88%B6%E5%92%8C%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B%EF%BC%8C%E8%AF%B7%E8%AF%A6%E7%BB%86%E8%AF%B4%E4%B8%8B%E6%95%B4%E4%B8%AA%E6%B5%81%E7%A8%8B"></span>android view绘制机制和加载过程，请详细说下整个流程<span class="ez-toc-section-end"></span></h5><p>每个Activity包含一个Window对象，Android中window对象由PhoneWindow实现，PhoneWindow将一个DecorView设置为整个应用窗口的根View,DecorView作为窗口界面的顶层视图，封装了窗口操作的通用方法，DecorView将要显示的具体内容显示在PhoneWindow上，这里所有的View监听事件通过WindowMangerService来接收,通过Activity对象来回调相应的onCLicklistener.显示是将屏幕分成两部分，一个TitleView，另一个是ContentView.</p>
<p>Measure</p>
<p>如果是原始的 View,通过measure方法就完成了测量过程,如果是ViewGroup,除了完成自己的测量外，还需要遍历所有的子View,各个子元素再去递归执行这个流程.</p>
<p>Layout</p>
<p>Draw</p>
<h5 id="MeasureSpeck的意义，怎么计算MeasureSpec"><a href="#MeasureSpeck的意义，怎么计算MeasureSpec" class="headerlink" title="MeasureSpeck的意义，怎么计算MeasureSpec"></a><span class="ez-toc-section" id="MeasureSpeck%E7%9A%84%E6%84%8F%E4%B9%89%EF%BC%8C%E6%80%8E%E4%B9%88%E8%AE%A1%E7%AE%97MeasureSpec"></span>MeasureSpeck的意义，怎么计算MeasureSpec<span class="ez-toc-section-end"></span></h5><h5 id="wrap-content-和MATCH-PARENT的测量方式"><a href="#wrap-content-和MATCH-PARENT的测量方式" class="headerlink" title="wrap content 和MATCH_PARENT的测量方式"></a><span class="ez-toc-section" id="wrap_content_%E5%92%8CMATCH_PARENT%E7%9A%84%E6%B5%8B%E9%87%8F%E6%96%B9%E5%BC%8F"></span>wrap content 和MATCH_PARENT的测量方式<span class="ez-toc-section-end"></span></h5><p>WRAP_CONTENT : 最大模式，大小不定，但是不能超过窗口的大小. specMode是AT_MOST模式,这种模式下，它的宽，高等于specSize, 这种情况下specSize是parentSize,而parentSize是父容器目前可以使用的大小,也就是父容器剩余的空间大小.</p>
<p>MATCH_PARENT: 精确模式，大小就是窗口大小.</p>
<p><a href="https://noteforme.github.io/2017/11/12/View_OVER/">https://noteforme.github.io/2017/11/12/View_OVER&#x2F;</a></p>
<h5 id="LayoutParams是是什么"><a href="#LayoutParams是是什么" class="headerlink" title="LayoutParams是是什么"></a><span class="ez-toc-section" id="LayoutParams%E6%98%AF%E6%98%AF%E4%BB%80%E4%B9%88"></span>LayoutParams是是什么<span class="ez-toc-section-end"></span></h5><h5 id="介绍下SurfaceView"><a href="#介绍下SurfaceView" class="headerlink" title="介绍下SurfaceView"></a><span class="ez-toc-section" id="%E4%BB%8B%E7%BB%8D%E4%B8%8BSurfaceView"></span>介绍下SurfaceView<span class="ez-toc-section-end"></span></h5><ul>
<li><p>SurfaceView使用双缓冲技术缓解，页面绘制频繁引起的卡顿。</p>
</li>
<li><p>SurfaceView可以在子线程更新 UI,不会阻塞主线程，提高响应速度。</p>
<p><a href="https://noteforme.github.io/2019/11/05/SurfaceView/">https://noteforme.github.io/2019/11/05/SurfaceView/</a></p>
<p>SurfaceView在更新视图时用到了两张 Canvas，可以先创建一个临时的Canvas对象，将图像都绘制到这个临时的Canvas对象中，绘制完成之后再将这个临时Canvas对象中的内容(也就是一个Bitmap)，通过drawBitmap()方法绘制到onDraw()方法中的canvas对象中。</p>
</li>
</ul>
<h5 id="RecycleView的使用"><a href="#RecycleView的使用" class="headerlink" title="RecycleView的使用"></a><span class="ez-toc-section" id="RecycleView%E7%9A%84%E4%BD%BF%E7%94%A8"></span>RecycleView的使用<span class="ez-toc-section-end"></span></h5><p>​ <a href="https://noteforme.github.io/2017/07/17/RecyclerView/">https://noteforme.github.io/2017/07/17/RecyclerView/</a></p>
<h5 id="webview安全问题"><a href="#webview安全问题" class="headerlink" title="webview安全问题"></a><span class="ez-toc-section" id="webview%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98"></span>webview安全问题<span class="ez-toc-section-end"></span></h5><p>WebView漏洞的根源在于强制其访问攻击者控制的网页。网页中含有攻击者可以控制的JS,因此可能钓鱼，窃取私有文件，甚至是 RCE,带来比较大的危害。</p>
<p>下面主要是4.4系统以上的机型</p>
<h5 id="Webview密码明文存储漏洞"><a href="#Webview密码明文存储漏洞" class="headerlink" title="Webview密码明文存储漏洞"></a><span class="ez-toc-section" id="Webview%E5%AF%86%E7%A0%81%E6%98%8E%E6%96%87%E5%AD%98%E5%82%A8%E6%BC%8F%E6%B4%9E"></span>Webview密码明文存储漏洞<span class="ez-toc-section-end"></span></h5><p>WebView默认开启密码保存功能mWebView.setSavePassword(true),如果未关闭，用户输入密码时，会弹出提示框，询问用户是否保存密码，如果选是，密码会明文保存到 &#x2F;data&#x2F;data&#x2F;com.package.name&#x2F;databases&#x2F;webview.db</p>
<h5 id="WebView域控制不严格漏洞"><a href="#WebView域控制不严格漏洞" class="headerlink" title="WebView域控制不严格漏洞"></a><span class="ez-toc-section" id="WebView%E5%9F%9F%E6%8E%A7%E5%88%B6%E4%B8%8D%E4%B8%A5%E6%A0%BC%E6%BC%8F%E6%B4%9E"></span>WebView域控制不严格漏洞<span class="ez-toc-section-end"></span></h5><p>setAllowFileAccess(true) : 窃取APP任意目录下的私有文件</p>
<p>​ setAllowUniversalAccessFromFileURLs : 允许通过file域url中的 javascript访问其他的源。</p>
<p><a href="https://noteforme.github.io/2017/09/01/WebView/">https://noteforme.github.io/2017/09/01/WebView/</a></p>
<h5 id="webview内存泄漏-Leakcanary-验证"><a href="#webview内存泄漏-Leakcanary-验证" class="headerlink" title="webview内存泄漏 Leakcanary 验证?"></a><span class="ez-toc-section" id="webview%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F_Leakcanary_%E9%AA%8C%E8%AF%81"></span>webview内存泄漏 Leakcanary 验证?<span class="ez-toc-section-end"></span></h5><p>​ android 5.0以下有内存泄漏问题</p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6901487965562732551">https://juejin.cn/post/6901487965562732551</a></p>
<p>viewstub延迟加载原理</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">// 设置 ViewStub 不进行绘制</span></span><br><span class="line">     setWillNotDraw(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">replaceSelfWithView</span><span class="params">(View view, ViewGroup parent)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> parent.indexOfChild(<span class="built_in">this</span>);</span><br><span class="line">    <span class="comment">// 把 ViewStub 从控件层级中移除。</span></span><br><span class="line">    parent.removeViewInLayout(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 把新创建的 View 对象加入控件层级结构中，并且位于 ViewStub 的位置，</span></span><br><span class="line">    <span class="comment">// 并且在这个过程中，会使用 ViewStub 的布局参数，例如宽高等。</span></span><br><span class="line">    <span class="keyword">final</span> ViewGroup.<span class="type">LayoutParams</span> <span class="variable">layoutParams</span> <span class="operator">=</span> getLayoutParams();</span><br><span class="line">    <span class="keyword">if</span> (layoutParams != <span class="literal">null</span>) &#123;</span><br><span class="line">        parent.addView(view, index, layoutParams);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        parent.addView(view, index);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​ <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903799337779214">https://juejin.cn/post/6844903799337779214</a></p>
<h5 id="overdraw过度绘制优化方法"><a href="#overdraw过度绘制优化方法" class="headerlink" title="overdraw过度绘制优化方法"></a><span class="ez-toc-section" id="overdraw%E8%BF%87%E5%BA%A6%E7%BB%98%E5%88%B6%E4%BC%98%E5%8C%96%E6%96%B9%E6%B3%95"></span>overdraw过度绘制优化方法<span class="ez-toc-section-end"></span></h5><p>​ 移除默认和不必要背景</p>
<p>​ <a target="_blank" rel="noopener" href="https://jaeger.itscoder.com/android/2016/09/29/android-performance-overdraw.html">https://jaeger.itscoder.com/android/2016/09/29/android-performance-overdraw.html</a></p>
<p>​ <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/9e095bacf44a">https://www.jianshu.com/p/9e095bacf44a</a></p>
<ul>
<li>View刷新机制</li>
<li>View绘制流程</li>
<li>自定义控件原理</li>
<li>如何取消AsyncTask？</li>
<li>为什么不能在子线程更新UI？</li>
<li>Requestlayout，onlayout，onDraw，DrawChild区别与联系</li>
<li>invalidate和postInvalidate的区别及使用</li>
<li>Activity-Window-View三者的差别</li>
<li>自定义View如何考虑机型适配</li>
<li>自定义View的事件</li>
<li>封装View的时候怎么知道view的大小</li>
</ul>
<h4 id="事件分发机制"><a href="#事件分发机制" class="headerlink" title="事件分发机制"></a><span class="ez-toc-section" id="%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91%E6%9C%BA%E5%88%B6"></span>事件分发机制<span class="ez-toc-section-end"></span></h4><p>是否解决过事件冲突问题，怎么解决的。</p>
<p>问题: <a target="_blank" rel="noopener" href="https://juejin.cn/post/6922300686638153736">https://juejin.cn/post/6922300686638153736</a></p>
<p><a href="https://noteforme.github.io/categories/VIEW/">https://noteforme.github.io/categories/VIEW/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1754y1H7jT">https://www.bilibili.com/video/BV1754y1H7jT</a></p>
<p>请描述一下View事件传递分发机制</p>
<ul>
<li>Touch事件传递流程</li>
<li>事件分发中的onTouch 和onTouchEvent 有什么区别，又该如何使用？</li>
<li>View和ViewGroup分别有哪些事件分发相关的回调方法</li>
</ul>
<h4 id="我的面试问题"><a href="#我的面试问题" class="headerlink" title="我的面试问题"></a><span class="ez-toc-section" id="%E6%88%91%E7%9A%84%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98"></span>我的面试问题<span class="ez-toc-section-end"></span></h4><h5 id="activity被销毁后重建，怎么获取fragment"><a href="#activity被销毁后重建，怎么获取fragment" class="headerlink" title="activity被销毁后重建，怎么获取fragment"></a><span class="ez-toc-section" id="activity%E8%A2%AB%E9%94%80%E6%AF%81%E5%90%8E%E9%87%8D%E5%BB%BA%EF%BC%8C%E6%80%8E%E4%B9%88%E8%8E%B7%E5%8F%96fragment"></span>activity被销毁后重建，怎么获取fragment<span class="ez-toc-section-end"></span></h5><p>​ findFragmentByTag</p>
<p>​ <a target="_blank" rel="noopener" href="https://www.wanandroid.com/wenda/show/11077">https://www.wanandroid.com/wenda/show/11077</a></p>
<h5 id="activity和service通信"><a href="#activity和service通信" class="headerlink" title="activity和service通信"></a><span class="ez-toc-section" id="activity%E5%92%8Cservice%E9%80%9A%E4%BF%A1"></span>activity和service通信<span class="ez-toc-section-end"></span></h5><ol>
<li>通过bindService</li>
<li>通过广播</li>
</ol>
<p>  <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/6040dfa83594">https://www.jianshu.com/p/6040dfa83594</a></p>
<h5 id="activity销毁线程会不会消失"><a href="#activity销毁线程会不会消失" class="headerlink" title="activity销毁线程会不会消失"></a><span class="ez-toc-section" id="activity%E9%94%80%E6%AF%81%E7%BA%BF%E7%A8%8B%E4%BC%9A%E4%B8%8D%E4%BC%9A%E6%B6%88%E5%A4%B1"></span>activity销毁线程会不会消失<span class="ez-toc-section-end"></span></h5><p>不会, 可以这样处理</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 静态内部类将不会再隐式的持有外部类的引用，所以在配置改变时，你的Activity的实例在也不会</span></span><br><span class="line"><span class="comment">  * 出现内存泄露</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">mRunning</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">     mRunning = <span class="literal">true</span>;</span><br><span class="line">     <span class="keyword">while</span> (mRunning) &#123;</span><br><span class="line">       SystemClock.sleep(<span class="number">1000</span>);</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span> &#123;</span><br><span class="line">     mRunning = <span class="literal">false</span>;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h5 id="activity每个方法处理的区别"><a href="#activity每个方法处理的区别" class="headerlink" title="activity每个方法处理的区别"></a><span class="ez-toc-section" id="activity%E6%AF%8F%E4%B8%AA%E6%96%B9%E6%B3%95%E5%A4%84%E7%90%86%E7%9A%84%E5%8C%BA%E5%88%AB"></span>activity每个方法处理的区别<span class="ez-toc-section-end"></span></h5><ol>
<li>onCreate(): Activity创建的时候调用，绑定数据。</li>
<li>onStart() : 当Activity对用户变得可见的时候调用.</li>
<li>onResume() : activity开始和用户交互的时候调用，这时候activity处于栈顶，伴随着用户的输入.</li>
<li>onPause() : 当activity失去前台状态，开始进入stopped&#x2F;hidden or destroyed状态，不能再获取焦点，此时activity对用户可见，但是更新的UI的操作要快。</li>
<li>onStop() : 当activity不再可见，可能是新的activity来到栈顶，或者当前activity正在被destroy.</li>
<li>onDestory(): 当前activity正在离开。</li>
</ol>
<h5 id="activity-fragment传递数据方式"><a href="#activity-fragment传递数据方式" class="headerlink" title="activity fragment传递数据方式"></a><span class="ez-toc-section" id="activity_fragment%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE%E6%96%B9%E5%BC%8F"></span>activity fragment传递数据方式<span class="ez-toc-section-end"></span></h5><ul>
<li>ViewModel</li>
<li>onTach() 回调</li>
</ul>
<h5 id="单例模式怎么理解的"><a href="#单例模式怎么理解的" class="headerlink" title="单例模式怎么理解的"></a><span class="ez-toc-section" id="%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E6%80%8E%E4%B9%88%E7%90%86%E8%A7%A3%E7%9A%84"></span>单例模式怎么理解的<span class="ez-toc-section-end"></span></h5><p>创建唯一的对象</p>
<ul>
<li>res&#x2F;raw和assets 三者目录下的文件在打包后原封不动的保存在apk包中，不会被编译成二进制。</li>
<li>Res&#x2F;raw文件会被映射到R.java文件中，访问的时候直接使用资源 R.id.filename;</li>
<li>res&#x2F;raw不可以有目录结构，而asserts则可以有目录结构，也就是asserts目录下可以建立文件夹.</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/4c8bcb8c3717">https://www.jianshu.com/p/4c8bcb8c3717</a></p>
<h5 id="截获通知"><a href="#截获通知" class="headerlink" title="截获通知"></a><span class="ez-toc-section" id="%E6%88%AA%E8%8E%B7%E9%80%9A%E7%9F%A5"></span>截获通知<span class="ez-toc-section-end"></span></h5><p>新建一个服务MessageNotificationService实现 NotificationListenerService</p>
<h5 id="final特性"><a href="#final特性" class="headerlink" title="final特性"></a><span class="ez-toc-section" id="final%E7%89%B9%E6%80%A7"></span>final特性<span class="ez-toc-section-end"></span></h5><ol>
<li>final类不能被继承，没有子类</li>
<li>方法不能被子类的方法重写，但可以被继承</li>
<li>表示常量，只能被赋值一次，赋值后不再改变。</li>
</ol>
<h5 id="android多线程怎么处理的-，两个子线程间怎么通讯"><a href="#android多线程怎么处理的-，两个子线程间怎么通讯" class="headerlink" title="android多线程怎么处理的 ，两个子线程间怎么通讯"></a><span class="ez-toc-section" id="android%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86%E7%9A%84_%EF%BC%8C%E4%B8%A4%E4%B8%AA%E5%AD%90%E7%BA%BF%E7%A8%8B%E9%97%B4%E6%80%8E%E4%B9%88%E9%80%9A%E8%AE%AF"></span>android多线程怎么处理的 ，两个子线程间怎么通讯<span class="ez-toc-section-end"></span></h5><p>​ Android主线程和子线程之间的通信是通过消息循环机制，主线程中的handler把子线程的 message发送给主线程的Looper，那么子线程是如何通信的， 可以把looper绑定到子线程中，调用Looper.prepare()为改子线程生成Looper,然后调用Looper.loop()启动消息队列，并且在该子线程中创建一个Handler,在另一个子线程调用handler发送消息。这样实现通信.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> threadA = ThreadA()</span><br><span class="line"><span class="keyword">val</span> threadB = ThreadB()</span><br><span class="line">Thread(threadA).start()</span><br><span class="line"><span class="keyword">if</span> (threadA.getHandler() == <span class="literal">null</span>) &#123;</span><br><span class="line">    Thread.sleep(<span class="number">1000</span>)</span><br><span class="line">    handler = threadA.getHandler()</span><br><span class="line">&#125;</span><br><span class="line">Thread(threadB).start()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ThreadA</span> : <span class="type">Runnable</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> mHandler: Handler? = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">getHandler</span><span class="params">()</span></span>: Handler? &#123;</span><br><span class="line">            <span class="keyword">return</span> mHandler</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">run</span><span class="params">()</span></span> &#123;</span><br><span class="line">            Looper.prepare()</span><br><span class="line">            mHandler = <span class="keyword">object</span> : Handler(Looper.myLooper()!!) &#123;</span><br><span class="line">                <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">handleMessage</span><span class="params">(msg: <span class="type">Message</span>)</span></span> &#123;</span><br><span class="line">                    <span class="keyword">super</span>.handleMessage(msg)</span><br><span class="line">                    Timber.d(<span class="string">&quot;线程A: 线程B发过来消息了-- <span class="subst">$&#123;msg.obj&#125;</span> &quot;</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            Looper.loop()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">inner</span> <span class="keyword">class</span> <span class="title class_">ThreadB</span> : <span class="type">Runnable</span> &#123;</span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">run</span><span class="params">()</span></span> &#123;</span><br><span class="line">            <span class="keyword">val</span> message = Message.obtain()</span><br><span class="line">            message.what = <span class="number">1</span></span><br><span class="line">            message.obj = <span class="string">&quot;线程B 发送消息&quot;</span> + System.currentTimeMillis()</span><br><span class="line">            handler?.sendMessage(message)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/pbm863521/article/details/103493708">https://blog.csdn.net/pbm863521/article/details/103493708</a></p>
<h5 id="防止应用被被杀死-怎么保证service不被杀死"><a href="#防止应用被被杀死-怎么保证service不被杀死" class="headerlink" title="防止应用被被杀死,怎么保证service不被杀死"></a><span class="ez-toc-section" id="%E9%98%B2%E6%AD%A2%E5%BA%94%E7%94%A8%E8%A2%AB%E8%A2%AB%E6%9D%80%E6%AD%BB%E6%80%8E%E4%B9%88%E4%BF%9D%E8%AF%81service%E4%B8%8D%E8%A2%AB%E6%9D%80%E6%AD%BB"></span>防止应用被被杀死,怎么保证service不被杀死<span class="ez-toc-section-end"></span></h5><p><a target="_blank" rel="noopener" href="http://www.52im.net/thread-2881-1-1.html">http://www.52im.net/thread-2881-1-1.html</a></p>
<p><a target="_blank" rel="noopener" href="http://www.52im.net/thread-2893-1-1.html">http://www.52im.net/thread-2893-1-1.html</a></p>
<h5 id="怎么让线程有序"><a href="#怎么让线程有序" class="headerlink" title="怎么让线程有序"></a><span class="ez-toc-section" id="%E6%80%8E%E4%B9%88%E8%AE%A9%E7%BA%BF%E7%A8%8B%E6%9C%89%E5%BA%8F"></span>怎么让线程有序<span class="ez-toc-section-end"></span></h5><h5 id="两个线程，想让来的一个插队怎么弄"><a href="#两个线程，想让来的一个插队怎么弄" class="headerlink" title="两个线程，想让来的一个插队怎么弄"></a><span class="ez-toc-section" id="%E4%B8%A4%E4%B8%AA%E7%BA%BF%E7%A8%8B%EF%BC%8C%E6%83%B3%E8%AE%A9%E6%9D%A5%E7%9A%84%E4%B8%80%E4%B8%AA%E6%8F%92%E9%98%9F%E6%80%8E%E4%B9%88%E5%BC%84"></span>两个线程，想让来的一个插队怎么弄<span class="ez-toc-section-end"></span></h5><p>​ Join</p>
<p>批量网络请求</p>
<p>子线程创建Handler</p>
<p>context对象互相引用，对象回收 Android界面怎么回收的 生命周期</p>
<p>内存溢出和内存泄露的区别，oom是怎么处理的 ， ANR怎么避免</p>
<p>java内存回收机制 android管理机制 怎么处理内存泄露</p>
<p>怎么做性能优化</p>
<p>反射机制</p>
<p>broadcastReciever和 handler区别</p>
<p>后台图片更改，前台怎么处理</p>
<p>图片加载库,图片加载方法</p>
<p>图片加载框架怎么处理oom问题</p>
<p>java Android加载机制</p>
<p>Android加载动态库</p>
<p>AndroidManifest权限是怎么获取的，封装权限管理，为什么需要权限分组.</p>
<p>listview图片 缓存，listview怎么优化</p>
<p>viewpager listview处理滑动冲突</p>
<p>list遍历删除</p>
<p>fragment tag</p>
<p>sercice ALDL (后面再弄)</p>
<p>Hashmap实现原理 实现有序</p>
<p>android事件分发机制，请详细说下整个流程</p>
<p>android四大组件的加载过程</p>
<p>提高sqlite的查询效率</p>
<p>冒泡排序，插入排序</p>
<h3 id="Android源码相关分析"><a href="#Android源码相关分析" class="headerlink" title="Android源码相关分析"></a><span class="ez-toc-section" id="Android%E6%BA%90%E7%A0%81%E7%9B%B8%E5%85%B3%E5%88%86%E6%9E%90"></span>Android源码相关分析<span class="ez-toc-section-end"></span></h3><h5 id="Handler机制和底层实现"><a href="#Handler机制和底层实现" class="headerlink" title="Handler机制和底层实现"></a><span class="ez-toc-section" id="Handler%E6%9C%BA%E5%88%B6%E5%92%8C%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0"></span>Handler机制和底层实现<span class="ez-toc-section-end"></span></h5><p>​ <a href="https://noteforme.github.io/2017/08/21/Handler/">https://noteforme.github.io/2017/08/21/Handler/</a></p>
<h5 id="RecycleView"><a href="#RecycleView" class="headerlink" title="RecycleView"></a><span class="ez-toc-section" id="RecycleView"></span>RecycleView<span class="ez-toc-section-end"></span></h5><p>​ <a href="https://noteforme.github.io/2017/07/17/RecyclerView/">https://noteforme.github.io/2017/07/17/RecyclerView/</a></p>
<h5 id="Binder通信原理与机制"><a href="#Binder通信原理与机制" class="headerlink" title="Binder通信原理与机制"></a><span class="ez-toc-section" id="Binder%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E4%B8%8E%E6%9C%BA%E5%88%B6"></span>Binder通信原理与机制<span class="ez-toc-section-end"></span></h5><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Android_SE/article/details/103898581">https://blog.csdn.net/Android_SE&#x2F;article&#x2F;details&#x2F;103898581</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Ko4y117Ca?p=74">https://www.bilibili.com/video/BV1Ko4y117Ca?p=74</a></p>
<h5 id="JetPack"><a href="#JetPack" class="headerlink" title="JetPack"></a><span class="ez-toc-section" id="JetPack"></span>JetPack<span class="ez-toc-section-end"></span></h5><p><a href="https://noteforme.github.io/categories/Jetpack/">https://noteforme.github.io/categories/Jetpack/</a></p>
<ul>
<li>Android各个版本API的区别</li>
<li>描述一次网络请求的流程</li>
<li>Bitmap对象的理解</li>
<li>ActivityThread，AMS，WMS的工作原理</li>
<li>SpareArray原理</li>
<li>AndroidService与Activity之间通信的几种方式</li>
<li>IntentService原理及作用是什么？</li>
<li>说说Activity、Intent、Service 是什么关系</li>
<li>ApplicationContext和ActivityContext的区别</li>
<li>SP是进程同步的吗?有什么方法做到同步？</li>
<li>谈谈多线程在Android中的使用</li>
<li>进程和 Application 的生命周期</li>
<li>AsyncTask机制</li>
<li>AsyncTask原理及不足</li>
<li>AndroidManifest的作用与理解</li>
</ul>
<h3 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a><span class="ez-toc-section" id="%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"></span>性能优化<span class="ez-toc-section-end"></span></h3><p><a href="https://noteforme.github.io/2017/08/16/PerformancePatterns/">https://noteforme.github.io/2017/08/16/PerformancePatterns/</a></p>
<p><a href="https://noteforme.github.io/2018/02/09/LeakMemory/">https://noteforme.github.io/2018/02/09/LeakMemory/</a></p>
<ul>
<li>ANR产生的原因是什么？</li>
<li>ANR定位和修正</li>
<li>oom是什么？</li>
<li>什么情况导致oom？</li>
<li>有什么解决方法可以避免OOM？</li>
<li>Oom 是否可以try catch？为什么？</li>
<li>内存泄漏是什么？</li>
<li>什么情况导致内存泄漏？</li>
<li>如何防止线程的内存泄漏？</li>
<li>内存泄露场的解决方法</li>
<li>内存泄漏和内存溢出区别？</li>
<li>LruCache默认缓存大小</li>
<li>如何通过广播拦截和abort一条短信？</li>
<li>广播引起anr的时间限制是多少？</li>
<li>计算一个view的嵌套层级</li>
<li>Activity栈</li>
<li>Android线程有没有上限？</li>
<li>线程池有没有上限？</li>
<li>Android为什么引入Parcelable？</li>
<li>有没有尝试简化Parcelable的使用？</li>
</ul>
<p>（四）开发中常见的一些问题</p>
<ul>
<li>屏幕适配的处理技巧都有哪些?</li>
<li>服务器只提供数据接收接口，在多线程或多进程条件下，如何保证数据的有序到达？</li>
<li>动态布局的理解</li>
<li>怎么去除重复代码？</li>
<li>画出 Android 的大体架构图</li>
<li>Recycleview和ListView的区别</li>
<li>ListView图片加载错乱的原理和解决方案</li>
<li>动态权限适配方案，权限组的概念</li>
<li>Android系统为什么会设计ContentProvider？</li>
<li>下拉状态栏是不是影响activity的生命周期</li>
<li>如果在onStop的时候做了网络请求，onResume的时候怎么恢复？</li>
<li>Bitmap 使用时候注意什么？</li>
<li>Bitmap的recycler()</li>
<li>ViewPager使用细节，如何设置成每次只初始化当前的Fragment，其他的不初始化？</li>
<li>点击事件被拦截，但是想传到下面的View，如何操作？</li>
<li>微信上消息小红点的原理</li>
<li>CAS介绍（这是阿里巴巴的面试题，我不是很了解，可以参考博客: <a target="_blank" rel="noopener" href="http://blog.csdn.net/jly4758/article/details/46673835">CAS简介</a>）</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/android-exchange/Android-Interview">https://github.com/android-exchange/Android-Interview</a></p>
<p>Kotin面试题</p>
<p><a target="_blank" rel="noopener" href="http://www.youkmi.cn/2019/10/27/kotlin-ti-mu-zheng-li/">http://www.youkmi.cn/2019/10/27/kotlin-ti-mu-zheng-li/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/45866c8415c8">https://www.jianshu.com/p/45866c8415c8</a></p>
<p>怎么看源码</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1d54y1h768">https://www.bilibili.com/video/BV1d54y1h768</a></p>
<p>面经</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/sjy0118/article/details/112759112">https://blog.csdn.net/sjy0118/article/details/112759112</a></p>
<p><a target="_blank" rel="noopener" href="https://www.kaelli.com/43.html">https://www.kaelli.com/43.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/058c54948ca5">https://www.jianshu.com/p/058c54948ca5</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6888222422760488974#heading-51">https://juejin.cn/post/6888222422760488974#heading-51</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Omooo/Android_QA">https://github.com/Omooo/Android_QA</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-05-22T06:46:53.000Z" title="5/22/2024, 2:46:53 PM">2024-05-22</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-13T21:02:22.000Z" title="9/14/2024, 5:02:22 AM">2024-09-14</time></span><span class="level-item"> Jon </span><span class="level-item"><a class="link-muted" href="/categories/INTERVIEW/">INTERVIEW</a></span><span class="level-item">13 minutes read (About 2022 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/05/22/inteview-algorithem/">INTEVIEW-ALGORITHEM</a></p><div class="content"><h3 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h3><h6 id="排序算法有哪些？"><a href="#排序算法有哪些？" class="headerlink" title="排序算法有哪些？"></a>排序算法有哪些？</h6><p>冒泡排序、选择排序、插入排序、归并排序、快速排序、希尔排序、堆排序、计数排序、桶排序、基数排序</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/42586566">https://zhuanlan.zhihu.com/p/42586566</a></p>
<p><img src="https://img-blog.csdn.net/20180912224019565?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2NzcwNjQx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"></p>
<h6 id="最快的排序算法是哪个？"><a href="#最快的排序算法是哪个？" class="headerlink" title="最快的排序算法是哪个？"></a>最快的排序算法是哪个？</h6><p>快速排序 最好情况O(nlogn) 最坏情况 O(n^2)</p>
<p>为什么不是堆排序 ?</p>
<p>在堆排序（小根堆）的时候，每次总是将最小的元素移除，然后将最后的元素放到堆顶，再让其自我调整。这样一来，有很多比较将是被浪费的，因为被拿到堆顶的那个元素几乎肯定是很大的，而靠近堆顶的元素又几乎肯定是很小的，最后一个元素能留在堆顶的可能性微乎其微，最后一个元素很有可能最终再被移动到底部。在堆排序里面有大量这种近乎无效的比较。随着数据规模的增长，比较的开销最差情况应该在（线性*对数）级别，如果数据量是原来的10倍，那么用于比较的时间开销可能是原来的10log10倍<br>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_36770641/article/details/82669788">https://blog.csdn.net/qq_36770641&#x2F;article&#x2F;details&#x2F;82669788</a></p>
<ul>
<li>手写一个冒泡排序</li>
<li>手写快速排序代码</li>
<li>快速排序的过程、时间复杂度、空间复杂度</li>
<li>手写堆排序</li>
<li>堆排序过程、时间复杂度及空间复杂度</li>
<li>写出你所知道的排序算法及时空复杂度，稳定性</li>
</ul>
<p><a href="https://noteforme.github.io/2021/03/21/Data-Sort/">https://noteforme.github.io/2021/03/21/Data-Sort/</a></p>
<ul>
<li>二叉树给出根节点和目标节点，找出从根节点到目标节点的路径</li>
<li>给阿里2万多名员工按年龄排序应该选择哪个算法？</li>
<li>GC算法(各种算法的优缺点以及应用场景)</li>
<li>蚁群算法与蒙特卡洛算法</li>
<li>子串包含问题(KMP 算法)写代码实现</li>
<li>一个无序，不重复数组，输出N个元素，使得N个元素的和相加为M，给出时间复杂度、空间复杂度。手写算法</li>
<li>万亿级别的两个URL文件A和B，如何求出A和B的差集C(提示：Bit映射-&gt;hash分组-&gt;多文件读写效率-&gt;磁盘寻址以及应用层面对寻址的优化)</li>
<li>百度POI中如何试下查找最近的商家功能(提示：坐标镜像+R树)。</li>
<li>两个不重复的数组集合中，求共同的元素。</li>
<li>两个不重复的数组集合中，这两个集合都是海量数据，内存中放不下，怎么求共同的元素？</li>
<li>一个文件中有100万个整数，由空格分开，在程序中判断用户输入的整数是否在此文件中。说出最优的方法</li>
<li>一张Bitmap所占内存以及内存占用的计算</li>
<li>2000万个整数，找出第五十大的数字？</li>
<li>烧一根不均匀的绳，从头烧到尾总共需要1个小时。现在有若干条材质相同的绳子，问如何用烧绳的方法来计时一个小时十五分钟呢？</li>
<li>求1000以内的水仙花数以及40亿以内的水仙花数</li>
<li>5枚硬币，2正3反如何划分为两堆然后通过翻转让两堆中正面向上的硬8币和反面向上的硬币个数相同</li>
<li>时针走一圈，时针分针重合几次</li>
<li>N*N的方格纸,里面有多少个正方形</li>
<li>x个苹果，一天只能吃一个、两个、或者三个，问多少天可以吃完？<br>用过哪些数据结构</li>
</ul>
<p>常用数据结构</p>
<p>有哪些数据结构 增删改查的复杂度多少</p>
<p>计算二叉树的高度（递归与非递归两种方式）</p>
<p>快排写一下，动态规划了解吗？</p>
<p>冒泡排序的链表实现</p>
<p>写个快排</p>
<p>都用过那些常用的数据结构，说说对树的了解？</p>
<p>堆排</p>
<p>算法题 判断二叉树深度. 2</p>
<p>算法的五大基本要素有哪些？为什么算法效率不是基本要素</p>
<p>银行家算法</p>
<p>堆排序原理</p>
<p>b树、b+树、红黑树</p>
<p>红黑树怎么增加、删除节点</p>
<p>算法题：随机生成不重复的100个数0-99</p>
<p>写一个泛型方法，实现删除数组中的元素功能</p>
<p>返回二叉树的第k大数</p>
<p>返回第k大的数，先说下你能想到的方法，再选一个最优方法。</p>
<p>二分法查找目标数</p>
<p>使用一个固定长度数组实现队列，包括添加和取数据的功能</p>
<p>时间复杂度、空间复杂度，如何优化</p>
<p>链表如何优化，可以降低查询的时间复杂度？</p>
<p>手撕：手写一个单例模式</p>
<p>手撕：二叉搜索树第 k 小的节点</p>
<p>算法：合并区间</p>
<p>算法：排序数组</p>
<p>算法：序列化和反序列化二叉搜索树</p>
<p>equals和hashCode方法</p>
<p>手撕快速排序</p>
<p>讲一个红黑树和一个排序算法的时间复杂度问题的分析思路</p>
<p>二叉查找树的概念</p>
<p>树退化成链表如何解决？</p>
<p>B树以及B树可以解决什么问题？</p>
<p>图的遍历以及具体代码如何实现？（迭代）</p>
<p>时间复杂度和空间复杂度的概念</p>
<p>常见的排序算法以及时间复杂度</p>
<p>链表的反转怎么实现？</p>
<p>讲一下排序算法的思路</p>
<p>最后是华为经典题，一个桶5L，另一个桶7L，如何得到6L？（答出来了）面试官立马追问，有没有一种数学理论可以给这个问题提供支持来证明，1L，2L，3L，4L，6L是不是都可以得到还是只能得到其中的某几种？（到这里，我是真的麻了，考这种题真的无从准备，面试官是啥问题都能深挖深挖再深挖）（最后一题有知道的同学可以评论区留言</p>
<p>快排的思想</p>
<p>快排解决topk问题（我哭死啊，我没有想到当前的会使用快排来进行解决topk，我之前都是使用堆排序）</p>
<p>快排和堆排来进行解决topk问题</p>
<p>反转链表</p>
<p>合并两个排序的链表</p>
<p>算法题：给你一个数组，和一个数字m，问这个数组中存不存在一个子序列（不一定连续），使得它的和为m，输出true或false</p>
<p>两个算法（判断链表是否有环、链表重排&#x2F;链表折叠）</p>
<p>反转字符串</p>
<p>上楼梯动态规划，如果第M阶梯是不能踩的</p>
<p>倒水问题，3l和5l桶子要4l水怎么搞<br>算法思路，链表右移动k位和数组右移动k位怎么搞<br>左右括号匹配，最少情况要加多少次括号，写在纸上拍照</p>
<p>树、图的存储结构</p>
<p>给出二叉树的前序中序，输出后序</p>
<p>先来了一道算法题:找出最左边的次数最多的字母。</p>
<p>算法题：删除排序链表中的重复元素（力扣82）</p>
<p>快排和反转链表</p>
<p>判断一个树是不是平衡二叉树，</p>
<p>旋转链表 LC61:<br>题意是这样子的：给你一个链表的头节点 head ，旋转链表，将链表每个节点向右移动 k 个位置。<br>输入：head&#x3D;[1,2,3] k &#x3D; 1<br>输出：[3,1,2]</p>
<p>22.算法题：二分法查找目标数</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-05-22T06:39:05.000Z" title="5/22/2024, 2:39:05 PM">2024-05-22</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-13T21:02:22.000Z" title="9/14/2024, 5:02:22 AM">2024-09-14</time></span><span class="level-item"> Jon </span><span class="level-item"><a class="link-muted" href="/categories/INTERVIEW/">INTERVIEW</a></span><span class="level-item">35 minutes read (About 5189 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/05/22/interview/">INTERVIEW-LIABARY</a></p><div class="content"><p><a target="_blank" rel="noopener" href="https://github.com/pengMaster/BestNote/blob/master/docs/android/Android-Interview/Android/Android%E9%AB%98%E7%BA%A7%E9%9D%A2%E8%AF%9510%E5%A4%A7%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90.md">https://github.com/pengMaster/BestNote/blob/master/docs/android/Android-Interview/Android/Android%E9%AB%98%E7%BA%A7%E9%9D%A2%E8%AF%9510%E5%A4%A7%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90.md</a></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=pUV3qZh481k">https://www.youtube.com/watch?v=pUV3qZh481k</a></p>
<div class="ez-toc-v2_0_66_1 ez-toc-wrap-right counter-hierarchy ez-toc-counter ez-toc-grey ez-toc-container-direction" id="ez-toc-container"><div class="ez-toc-title-container">Table of Contents

<p><span class="ez-toc-title-toggle"><a href="#"><span class="ez-toc-js-icon-con"><span class><span class="eztoc-hide" style="display:none;">Toggle</span><span class="ez-toc-icon-toggle-span"><svg class="list-377408" fill="none" height="20px" style="fill: #999;color:#999" viewbox="0 0 24 24" width="20px" xmlns="http://www.w3.org/2000/svg"><path d="M6 6H4v2h2V6zm14 0H8v2h12V6zM4 11h2v2H4v-2zm16 0H8v2h12v-2zM4 16h2v2H4v-2zm16 0H8v2h12v-2z" fill="currentColor"/></svg><svg baseprofile="tiny" class="arrow-unsorted-368013" height="10px" style="fill: #999;color:#999" version="1.2" viewbox="0 0 24 24" width="10px" xmlns="http://www.w3.org/2000/svg"><path d="M18.2 9.3l-6.2-6.3-6.2 6.3c-.2.2-.3.4-.3.7s.1.5.3.7c.2.2.4.3.7.3h11c.3 0 .5-.1.7-.3.2-.2.3-.5.3-.7s-.1-.5-.3-.7zM5.8 14.7l6.2 6.3 6.2-6.3c.2-.2.3-.5.3-.7s-.1-.5-.3-.7c-.2-.2-.4-.3-.7-.3h-11c-.3 0-.5.1-.7.3-.2.2-.3.5-.3.7s.1.5.3.7z"/></svg></span></span></span></a></span></p></div><nav>- <a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#okhttp" title="okhttp">okhttp</a><p></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#Network" title="Network">Network</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#okio" title="okio">okio</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#Retrofit" title="Retrofit">Retrofit</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#coroutine_%E9%9D%A2%E8%AF%95" title="coroutine 面试">coroutine 面试</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#Glide" title="Glide">Glide</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#RxJava" title="RxJava">RxJava</a><ul>
<li><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#RxJava%E5%8E%9F%E7%90%86%E5%8F%8A%E5%A6%82%E4%BD%95%E5%B0%81%E8%A3%85%E4%BD%BF%E7%94%A8" title="RxJava原理及如何封装使用">RxJava原理及如何封装使用</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#rxjava%E9%87%8C%E9%9D%A2%E7%94%A8%E4%BA%86%E5%A4%A7%E9%87%8F%E7%9A%84" title="rxjava里面用了大量的&lt;? super T&gt;这些，是什么意思。">rxjava里面用了大量的&lt;? super T&gt;这些，是什么意思。</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#RxJava%E6%80%8E%E4%B9%88%E9%80%9A%E8%BF%87%E8%A2%AB%E8%AE%A2%E9%98%85%E8%80%85%E4%BC%A0%E7%BB%99%E8%AE%A2%E9%98%85%E8%80%85%E7%9A%84%E8%BF%87%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84" title="RxJava怎么通过被订阅者传给订阅者的过程是什么样的?">RxJava怎么通过被订阅者传给订阅者的过程是什么样的?</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#Observer%E5%A4%84%E7%90%86%E5%AE%8ConComplete%E5%90%8E%E4%BC%9A%E8%BF%98%E8%83%BDonNext%E5%90%97" title="Observer处理完onComplete后会还能onNext吗?">Observer处理完onComplete后会还能onNext吗?</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#RxJava%E4%B8%ADmap%E3%80%81flatMap%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%8C%E4%BD%A0%E8%BF%98%E7%94%A8%E8%BF%87%E5%85%B6%E4%BB%96%E5%93%AA%E4%BA%9B%E6%93%8D%E4%BD%9C%E7%AC%A6" title="RxJava中map、flatMap的区别，你还用过其他哪些操作符?">RxJava中map、flatMap的区别，你还用过其他哪些操作符?</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#Maybe%E3%80%81Single%E3%80%81Flowable%E3%80%81Completable%E5%87%A0%E7%A7%8D%E8%A7%82%E5%AF%9F%E8%80%85%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%8C%E4%BB%A5%E5%8F%8A%E4%BB%96%E4%BB%AC%E5%9C%A8%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF%E7%94%A8%EF%BC%9F" title="Maybe、Single、Flowable、Completable几种观察者的区别，以及他们在什么场景用？">Maybe、Single、Flowable、Completable几种观察者的区别，以及他们在什么场景用？</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#RxJava%E5%88%87%E6%8D%A2%E7%BA%BF%E7%A8%8B%E6%98%AF%E6%80%8E%E4%B9%88%E5%9B%9E%E4%BA%8B" title="RxJava切换线程是怎么回事?">RxJava切换线程是怎么回事?</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#RxJava%E7%9A%84subscribeOn%E5%8F%AA%E6%9C%89%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%94%9F%E6%95%88" title="RxJava的subscribeOn只有第一次生效?">RxJava的subscribeOn只有第一次生效?</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#RxJava%E7%9A%84observeOn%E5%A4%9A%E6%AC%A1%E8%B0%83%E7%94%A8%E5%93%AA%E4%B8%AA%E6%9C%89%E6%95%88" title="RxJava的observeOn多次调用哪个有效?">RxJava的observeOn多次调用哪个有效?</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#%E6%95%B0%E6%8D%AE%E5%BA%93" title="数据库">数据库</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#%E6%8F%92%E4%BB%B6%E5%8C%96%E3%80%81%E6%A8%A1%E5%9D%97%E5%8C%96%E3%80%81%E7%BB%84%E4%BB%B6%E5%8C%96%E3%80%81%E7%83%AD%E4%BF%AE%E5%A4%8D%E3%80%81%E5%A2%9E%E9%87%8F%E6%9B%B4%E6%96%B0%E3%80%81Gradle" title="插件化、模块化、组件化、热修复、增量更新、Gradle">插件化、模块化、组件化、热修复、增量更新、Gradle</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%92%8C%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" title="架构设计和设计模式">架构设计和设计模式</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99" title="设计原则">设计原则</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" title="设计模式">设计模式</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" title="性能优化">性能优化</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#NDK%E3%80%81jni%E3%80%81Binder%E3%80%81AIDL%E3%80%81%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%E6%9C%89%E5%85%B3" title="NDK、jni、Binder、AIDL、进程通信有关">NDK、jni、Binder、AIDL、进程通信有关</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/22/interview/#framework%E5%B1%82%E3%80%81ROM%E5%AE%9A%E5%88%B6%E3%80%81Ubuntu%E3%80%81Linux%E4%B9%8B%E7%B1%BB%E7%9A%84%E9%97%AE%E9%A2%98" title="framework层、ROM定制、Ubuntu、Linux之类的问题">framework层、ROM定制、Ubuntu、Linux之类的问题</a></li>
</ul>
</nav></div># <span class="ez-toc-section" id="okhttp"></span>okhttp<span class="ez-toc-section-end"></span>

<p><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/11/okhttp/">https://jonblog.site/2024/05/11/okhttp/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.51cto.com/article/689330.html">https://www.51cto.com/article/689330.html</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  OKHttp 请求的整体流程是怎样的?</span><br><span class="line">  OKHttp 分发器是怎样工作的?</span><br><span class="line">  OKHttp 拦截器是如何工作的?</span><br><span class="line">  应用拦截器和网络拦截器有什么区别?</span><br><span class="line">  OKHttp 如何复用 TCP 连接?</span><br><span class="line">  OKHttp 空闲连接如何清除?</span><br><span class="line">  OKHttp 有哪些优点?</span><br><span class="line">  OKHttp 框架中用到了哪些设计模式?</span><br><span class="line">  okhttp怎么支持http2.0 </span><br><span class="line">   配置合适的适配器，解析json数据。</span><br><span class="line"> Android 如何编写基于编译时注解的项目</span><br><span class="line">编译时注解与运行时注解，为什么retrofit要使用运行时注解？什么时候用运行时注解？</span><br><span class="line">在项目中有直接使用tcp,socket来发送消息吗</span><br><span class="line"></span><br><span class="line">https://www.bilibili.com/video/BV1ib4y1f7S1</span><br></pre></td></tr></table></figure>

<ul>
<li><p>okhttp怎么支持http2.0<br>Handshake则会把服务端支持的Tls版本，加密方式等都带回来，然后会把这个没有验证过的HandShake用X509Certificate去验证证书的有效性。然后会通过Platform去从SSLSocket去获取ALPN的协议支持信息，当后端支持的协议内包含Http2.0时，则就会把请求升级到Http2.0阶段。</p>
</li>
<li><p>配置合适的适配器，解析json数据。</p>
</li>
<li><p>Android 如何编写基于编译时注解的项目</p>
</li>
<li><p>编译时注解与运行时注解，为什么retrofit要使用运行时注解？什么时候用运行时注解？</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1ib4y1f7S1">https://www.bilibili.com/video/BV1ib4y1f7S1</a></p>
</li>
</ul>
<p>Okhttp缓存机制</p>
<p>网络请求缓存处理，okhttp如何处理网络缓存的</p>
<p>自己去设计网络请求框架，怎么做？</p>
<p>HTTP</p>
<h1 id="Network"><a href="#Network" class="headerlink" title="Network"></a><span class="ez-toc-section" id="Network"></span>Network<span class="ez-toc-section-end"></span></h1><ul>
<li>从网络加载一个10M的图片，说下注意事项</li>
<li>TCP的3次握手和四次挥手</li>
<li>TCP与UDP的区别</li>
<li>TCP与UDP的应用</li>
<li>HTTP协议</li>
<li>HTTP1.0与2.0的区别</li>
<li>HTTP报文结构</li>
<li>HTTP与HTTPS的区别以及如何实现安全性</li>
<li>如何验证证书的合法性?</li>
<li>https中哪里用了对称加密，哪里用了非对称加密，对加密算法（如RSA）等是否有了解?</li>
<li>client如何确定自己发送的消息被server收到?</li>
<li>谈谈你对安卓签名的理解。</li>
<li>请解释安卓为啥要加签名机制?</li>
<li>视频加密传输</li>
<li>App 是如何沙箱化，为什么要这么做？</li>
<li>权限管理系统（底层的权限是如何进行 grant 的）？</li>
</ul>
<p>从网络加载一个10M的图片，说下注意事项 TCP的3次握手和四次挥手 TCP与UDP的区别 TCP与UDP的应用 HTTP协议 HTTP1.0与2.0的区别 HTTP报文结构 HTTP与HTTPS的区别以及如何实现安全性 如何验证证书的合法性? https中哪里用了对称加密，哪里用了非对称加密，对加密算法（如RSA）等是否有了解? client如何确定自己发送的消息被server收到? 谈谈你对安卓签名的理解。 请解释安卓为啥要加签名机制? 视频加密传输 App 是如何沙箱化，为什么要这么做？ 权限管理系统（底层的权限是如何进行 grant 的）？</p>
<h1 id="okio"><a href="#okio" class="headerlink" title="okio"></a><span class="ez-toc-section" id="okio"></span>okio<span class="ez-toc-section-end"></span></h1><p>1.简介； 1.sink：自己–》别人 2.source：别人–》自己 3.BufferSink：有缓存区域的sink 4.BufferSource：有缓存区域的source 5.Buffer：实现了3、4的缓存区域，内部有Segment的双向链表，在在转移数据的时候，只需要将指针转移指向就行 2.比java io的好处： 1.减少内存申请和数据拷贝 2.类少，功能齐全，开发效率高 3.内部实现： 1.Buffer的Segment双向链表，减少数据拷贝 2.Segment的内部byte数组的共享，减少数据拷贝 3.SegmentPool的共享和回收Segment 4.sink和source中被实际操作的其实是Buffer，Buffer可以充当sink和source 5.最终okio只是对java io的封装，所有操作都是基于java io 的 写在最后:能看到这里的人,我挺佩服你的.这篇文章是我在头条面试之前整理的,最后**80%**的题目都命中了,所以祝你好运.</p>
<p>不贩卖焦虑，也不标题党。分享一些这个世界上有意思的事情。题材包括且不限于：科幻、科学、科技、互联网、程序员、计算机编程。下面是我的微信公众号：世界上有意思的事，干货多多等你来看。</p>
<p>作者：何时夕 链接：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/cf5092fa2694">https://www.jianshu.com/p/cf5092fa2694</a>来源：简书 著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
<h1 id="Retrofit"><a href="#Retrofit" class="headerlink" title="Retrofit"></a><span class="ez-toc-section" id="Retrofit"></span>Retrofit<span class="ez-toc-section-end"></span></h1><p>在retrofit中的泛型是怎么解析的</p>
<p><a href="https://noteforme.github.io/2017/09/23/Retrofit/">https://noteforme.github.io/2017/09/23/Retrofit/</a></p>
<h1 id="coroutine-面试"><a href="#coroutine-面试" class="headerlink" title="coroutine 面试"></a><span class="ez-toc-section" id="coroutine_%E9%9D%A2%E8%AF%95"></span>coroutine 面试<span class="ez-toc-section-end"></span></h1><p>kotlin协程有没有了解过。（协程是kotlin 语言对线程的封装）<br>协程实现原理<br>协程的理解<br>协程相对于线程的区别<br>协程Flow有哪些应用场景？<br>进程、线程、协程的联系与区别<br>你了解协程吗？协程有什么作用？可以完全取代rxjava吗？</p>
<p>高端技术面试题</p>
<p><strong>这里讲的是大公司需要用到的一些高端Android技术，这里专门整理了一个文档，希望大家都可以看看。这些题目有点技术含量，需要好点时间去研究一下的。</strong></p>
<h1 id="Glide"><a href="#Glide" class="headerlink" title="Glide"></a><span class="ez-toc-section" id="Glide"></span>Glide<span class="ez-toc-section-end"></span></h1><p><a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/18/glide/">https://jonblog.site/2024/06/18/glide/</a></p>
<h1 id="RxJava"><a href="#RxJava" class="headerlink" title="RxJava"></a><span class="ez-toc-section" id="RxJava"></span>RxJava<span class="ez-toc-section-end"></span></h1><p><a href="https://noteforme.github.io/2020/08/04/RxJava/">https://noteforme.github.io/2020/08/04/RxJava/</a></p>
<p>在 RxJava 中， 会遇到被观察者发送消息太快以至于它的操作符或者订阅者不能及时处理相关的消息，这就是典型的背压（ Back Pressure ）场景。</p>
<p>RxJava 是基于 Push 模型 。对于 Pull 模型而言，当消费者请求数据的时候，如果生产者比较慢 ，则消费者会阻塞等待。如果生产者比较快，生产者会等待消费者处理完后再生产新的数据，所以不会出现背压的情况。然而在 RxJava 中，只要生产者数据准备好了就会发射出去。如果生产者比较慢，则消费者会等待新的数据到来。如果生产者比较快，则会有很多数据发射给消费者，而不管消费者当前有没有能力处理数据，这样就会导致背压。</p>
<p>在 RxJava 2.x 中， Observable 不再支持背压，而是改用 Flowable 来专门支持背压。默认队列大小为 128 ，并且要求所有的操作符强制支持背压。</p>
<h3 id="RxJava原理及如何封装使用"><a href="#RxJava原理及如何封装使用" class="headerlink" title="RxJava原理及如何封装使用"></a><span class="ez-toc-section" id="RxJava%E5%8E%9F%E7%90%86%E5%8F%8A%E5%A6%82%E4%BD%95%E5%B0%81%E8%A3%85%E4%BD%BF%E7%94%A8"></span>RxJava原理及如何封装使用<span class="ez-toc-section-end"></span></h3><p>​ 使用观察者模式，和装饰器模式。</p>
<p>​ 先用Observablex向右构建流，然后向左创建订阅流，最后时间通过观察者回调流发送。</p>
<p>​</p>
<p>​ 你了解协程吗？协程有什么作用？可以完全取代rxjava吗？</p>
<h3 id="rxjava里面用了大量的这些，是什么意思。"><a href="#rxjava里面用了大量的这些，是什么意思。" class="headerlink" title="rxjava里面用了大量的&lt;? super T&gt;这些，是什么意思。"></a><span class="ez-toc-section" id="rxjava%E9%87%8C%E9%9D%A2%E7%94%A8%E4%BA%86%E5%A4%A7%E9%87%8F%E7%9A%84"></span>rxjava里面用了大量的<code>&lt;? super T&gt;</code>这些，是什么意思。<span class="ez-toc-section-end"></span></h3><ul>
<li><p>如果要从集合中读取类型T的数据，并且不能写入，可以使用 ? extends 通配符；(Producer Extends)</p>
</li>
<li><p>如果要从集合中写入类型T的数据，并且不需要读取，可以使用 ? super 通配符；(Consumer Super),只能用Object接收。</p>
</li>
<li><p>如果既要存又要取，那么就不要使用任何通配符。</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/86cf908afcb6">https://www.jianshu.com/p/86cf908afcb6</a></p>
</li>
</ul>
<h3 id="RxJava怎么通过被订阅者传给订阅者的过程是什么样的"><a href="#RxJava怎么通过被订阅者传给订阅者的过程是什么样的" class="headerlink" title="RxJava怎么通过被订阅者传给订阅者的过程是什么样的?"></a><span class="ez-toc-section" id="RxJava%E6%80%8E%E4%B9%88%E9%80%9A%E8%BF%87%E8%A2%AB%E8%AE%A2%E9%98%85%E8%80%85%E4%BC%A0%E7%BB%99%E8%AE%A2%E9%98%85%E8%80%85%E7%9A%84%E8%BF%87%E7%A8%8B%E6%98%AF%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84"></span>RxJava怎么通过被订阅者传给订阅者的过程是什么样的?<span class="ez-toc-section-end"></span></h3><h3 id="Observer处理完onComplete后会还能onNext吗"><a href="#Observer处理完onComplete后会还能onNext吗" class="headerlink" title="Observer处理完onComplete后会还能onNext吗?"></a><span class="ez-toc-section" id="Observer%E5%A4%84%E7%90%86%E5%AE%8ConComplete%E5%90%8E%E4%BC%9A%E8%BF%98%E8%83%BDonNext%E5%90%97"></span>Observer处理完onComplete后会还能onNext吗?<span class="ez-toc-section-end"></span></h3><p>​ onComplete是用来控制不能发送数据的，也就是不能onNext了，包括onError也是不能再发送onNext数据了，该方法中也是调用了 dispose方法。</p>
<h3 id="RxJava中map、flatMap的区别，你还用过其他哪些操作符"><a href="#RxJava中map、flatMap的区别，你还用过其他哪些操作符" class="headerlink" title="RxJava中map、flatMap的区别，你还用过其他哪些操作符?"></a><span class="ez-toc-section" id="RxJava%E4%B8%ADmap%E3%80%81flatMap%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%8C%E4%BD%A0%E8%BF%98%E7%94%A8%E8%BF%87%E5%85%B6%E4%BB%96%E5%93%AA%E4%BA%9B%E6%93%8D%E4%BD%9C%E7%AC%A6"></span>RxJava中map、flatMap的区别，你还用过其他哪些操作符?<span class="ez-toc-section-end"></span></h3><p>​ map是通过原始数据类型返回另外一种数据类型，而flatMap是通过原始数据类型返回另外一种被观察者。</p>
<h3 id="Maybe、Single、Flowable、Completable几种观察者的区别，以及他们在什么场景用？"><a href="#Maybe、Single、Flowable、Completable几种观察者的区别，以及他们在什么场景用？" class="headerlink" title="Maybe、Single、Flowable、Completable几种观察者的区别，以及他们在什么场景用？"></a><span class="ez-toc-section" id="Maybe%E3%80%81Single%E3%80%81Flowable%E3%80%81Completable%E5%87%A0%E7%A7%8D%E8%A7%82%E5%AF%9F%E8%80%85%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%8C%E4%BB%A5%E5%8F%8A%E4%BB%96%E4%BB%AC%E5%9C%A8%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF%E7%94%A8%EF%BC%9F"></span>Maybe、Single、Flowable、Completable几种观察者的区别，以及他们在什么场景用？<span class="ez-toc-section-end"></span></h3><p>​ 如果只想发一条数据，或者不发数据就用Maybe，如果想发多条数据或者不发数据就用Observable，如果只发一条数据或者失败就用Single，如果想用背压策略使用Flowable，如果不发数据就用Completable</p>
<p>也就是说Maybe可能不发送数据，如果发送数据只会发送单条数据。</p>
<p>single也是发送单条数据，但是它要么成功要么失败。</p>
<h3 id="RxJava切换线程是怎么回事"><a href="#RxJava切换线程是怎么回事" class="headerlink" title="RxJava切换线程是怎么回事?"></a><span class="ez-toc-section" id="RxJava%E5%88%87%E6%8D%A2%E7%BA%BF%E7%A8%8B%E6%98%AF%E6%80%8E%E4%B9%88%E5%9B%9E%E4%BA%8B"></span>RxJava切换线程是怎么回事?<span class="ez-toc-section-end"></span></h3><p>subscribeOn实际是创建了ObservableSubscribeOn的Observable，它的订阅方法里面创建了<code>SubscribeOnObserver</code>，通过线程池执行Runnable，使上游Observable的订阅在子线程中执行，这就是为什么subscribeOn能控制observable在哪个线程中执行的原因</p>
<h3 id="RxJava的subscribeOn只有第一次生效"><a href="#RxJava的subscribeOn只有第一次生效" class="headerlink" title="RxJava的subscribeOn只有第一次生效?"></a><span class="ez-toc-section" id="RxJava%E7%9A%84subscribeOn%E5%8F%AA%E6%9C%89%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%94%9F%E6%95%88"></span>RxJava的subscribeOn只有第一次生效?<span class="ez-toc-section-end"></span></h3><p>subscribeOn对subscribe订阅进行处理，针对是订阅流，从后向前流动，所以最前面的一次生效。</p>
<p>subscribeOn是规定上游的observable在哪个线程中执行，如果我们执行多次的subscribeOn的话，从下游的observer到上游的observable的订阅过程，<strong>最开始调用的subscribeOn返回的observable会把后面执行的subscribeOn返回的observable给覆盖了，因此我们感官的是只有第一次的subscribeOn能生效。</strong></p>
<h3 id="RxJava的observeOn多次调用哪个有效"><a href="#RxJava的observeOn多次调用哪个有效" class="headerlink" title="RxJava的observeOn多次调用哪个有效?"></a><span class="ez-toc-section" id="RxJava%E7%9A%84observeOn%E5%A4%9A%E6%AC%A1%E8%B0%83%E7%94%A8%E5%93%AA%E4%B8%AA%E6%9C%89%E6%95%88"></span>RxJava的observeOn多次调用哪个有效?<span class="ez-toc-section-end"></span></h3><p>observeOn在事件发送的 onNext(T t)进行处理，针对的是观察者流，从前向后流动，所以最后一次生效。</p>
<p>observeOn是指定下游的observer在哪个线程中执行，所以这个更好理解，看observeOn下一个observer是哪一个，<strong>所以多次调用observeOn肯定是最后一个observeOn控制有效。</strong></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6900870262062120967">https://juejin.cn/post/6900870262062120967</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/339620311">https://zhuanlan.zhihu.com/p/339620311</a></p>
<p>RxJava中背压是怎么回事？</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c3965e82b164">https://www.jianshu.com/p/c3965e82b164</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/322405376">https://zhuanlan.zhihu.com/p/322405376</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Af4y187b8">https://www.bilibili.com/video/BV1Af4y187b8</a></p>
<h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a><span class="ez-toc-section" id="%E6%95%B0%E6%8D%AE%E5%BA%93"></span>数据库<span class="ez-toc-section-end"></span></h1><ul>
<li>sqlite升级，增加字段的语句</li>
<li>数据库框架对比和源码分析</li>
<li>数据库的优化</li>
<li>数据库数据迁移问题</li>
</ul>
<h1 id="插件化、模块化、组件化、热修复、增量更新、Gradle"><a href="#插件化、模块化、组件化、热修复、增量更新、Gradle" class="headerlink" title="插件化、模块化、组件化、热修复、增量更新、Gradle"></a><span class="ez-toc-section" id="%E6%8F%92%E4%BB%B6%E5%8C%96%E3%80%81%E6%A8%A1%E5%9D%97%E5%8C%96%E3%80%81%E7%BB%84%E4%BB%B6%E5%8C%96%E3%80%81%E7%83%AD%E4%BF%AE%E5%A4%8D%E3%80%81%E5%A2%9E%E9%87%8F%E6%9B%B4%E6%96%B0%E3%80%81Gradle"></span>插件化、模块化、组件化、热修复、增量更新、Gradle<span class="ez-toc-section-end"></span></h1><ul>
<li>对热修复和插件化的理解</li>
<li>插件化原理分析</li>
<li>模块化实现（好处，原因）</li>
<li>热修复,插件化</li>
<li>项目组件化的理解</li>
<li>描述清点击 Android Studio 的 build 按钮后发生了什么</li>
</ul>
<h1 id="架构设计和设计模式"><a href="#架构设计和设计模式" class="headerlink" title="架构设计和设计模式"></a><span class="ez-toc-section" id="%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%92%8C%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"></span>架构设计和设计模式<span class="ez-toc-section-end"></span></h1><p>​ <a href="https://noteforme.github.io/categories/DesignPatterns/">https://noteforme.github.io/categories/DesignPatterns/</a></p>
<h1 id="设计原则"><a href="#设计原则" class="headerlink" title="设计原则"></a><span class="ez-toc-section" id="%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99"></span>设计原则<span class="ez-toc-section-end"></span></h1><p>​ 单一职责</p>
<p>​ 一个类应该只负责一项职责。</p>
<p>接口隔离</p>
<p>​ 客户端不应该依赖它不需要的接口，即一个类对另一个类的依赖应该建立在最小的接口上。</p>
<p>依赖倒置</p>
<ul>
<li>高层模块不应该依赖低层模块，二者都应该依赖其抽象。</li>
<li>抽象不应该依赖细节，细节应该依赖抽象。</li>
<li>依赖倒置的中心思想是<strong>面向接口编程</strong>。</li>
</ul>
<p>里氏替换</p>
<ul>
<li>所有使用基类的地方必须能透明的使用其子类。</li>
<li>使用继承时，遵循里氏替换原则，<strong>子类尽量不要重写父类的方法</strong>。继承实际上让两个类耦合性增强了，适当情况下可以通过 聚合 组合 依赖来解决问题。</li>
</ul>
<p>​ 通用做法是： 原来的父类和子类都继承一个更通俗的基类，原有的继承关系去掉，采用依赖，聚合，组合等关系代替。</p>
<p>开闭原则 ocp</p>
<p>迪米特法则</p>
<p>​ 一个对象应该对其他对象保持最少的了解</p>
<h1 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a><span class="ez-toc-section" id="%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"></span>设计模式<span class="ez-toc-section-end"></span></h1><ul>
<li>谈谈你对Android设计模式的理解</li>
<li>MVC MVP MVVM原理和区别</li>
<li>你所知道的设计模式有哪些？</li>
<li>项目中常用的设计模式</li>
<li>手写生产者&#x2F;消费者模式</li>
<li>写出观察者模式的代码</li>
<li>适配器模式，装饰者模式，外观模式的异同？</li>
<li>用到的一些开源框架，介绍一个看过源码的，内部实现过程。</li>
<li>谈谈对RxJava的理解</li>
<li>RxJava的功能与原理实现</li>
<li>RxJava的作用，与平时使用的异步操作来比的优缺点</li>
<li>说说EventBus作用，实现方式，代替EventBus的方式</li>
<li>从0设计一款App整体架构，如何去做？</li>
<li>说一款你认为当前比较火的应用并设计(比如：直播APP，P2P金融，小视频等)</li>
<li>谈谈对java状态机理解</li>
<li>Fragment如果在Adapter中使用应该如何解耦？</li>
<li>Binder机制及底层实现</li>
<li>对于应用更新这块是如何做的？(解答：灰度，强制更新，分区域更新)？</li>
<li>实现一个Json解析器(可以通过正则提高速度)</li>
<li>统计启动时长,标准</li>
</ul>
<h1 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a><span class="ez-toc-section" id="%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"></span>性能优化<span class="ez-toc-section-end"></span></h1><ul>
<li>如何对Android 应用进行性能分析以及优化?</li>
<li>ddms 和 traceView</li>
<li>性能优化如何分析systrace？</li>
<li>用IDE如何分析内存泄漏？</li>
<li>Java多线程引发的性能问题，怎么解决？</li>
<li>启动页白屏及黑屏解决？</li>
<li>启动太慢怎么解决？</li>
<li>怎么保证应用启动不卡顿？</li>
<li>App启动崩溃异常捕捉</li>
<li>自定义View注意事项</li>
<li>现在下载速度很慢,试从网络协议的角度分析原因,并优化(提示：网络的5层都可以涉及)。</li>
<li>Https请求慢的解决办法（提示：DNS，携带数据，直接访问IP）</li>
<li>如何保持应用的稳定性</li>
<li>RecyclerView和ListView的性能对比</li>
<li>ListView的优化</li>
<li>RecycleView优化</li>
<li>View渲染</li>
<li>Bitmap如何处理大图，如一张30M的大图，如何预防OOM</li>
<li>java中的四种引用的区别以及使用场景</li>
<li>强引用置为null，会不会被回收？</li>
</ul>
<h1 id="NDK、jni、Binder、AIDL、进程通信有关"><a href="#NDK、jni、Binder、AIDL、进程通信有关" class="headerlink" title="NDK、jni、Binder、AIDL、进程通信有关"></a><span class="ez-toc-section" id="NDK%E3%80%81jni%E3%80%81Binder%E3%80%81AIDL%E3%80%81%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%E6%9C%89%E5%85%B3"></span>NDK、jni、Binder、AIDL、进程通信有关<span class="ez-toc-section-end"></span></h1><ul>
<li>请介绍一下NDK</li>
<li>什么是NDK库?</li>
<li>jni用过吗？</li>
<li>如何在jni中注册native函数，有几种注册方式?</li>
<li>Java如何调用c、c++语言？</li>
<li>jni如何调用java层代码？</li>
<li>进程间通信的方式？</li>
<li>Binder机制</li>
<li>简述IPC？</li>
<li>什么是AIDL？</li>
<li>AIDL解决了什么问题？</li>
<li>AIDL如何使用？</li>
<li>Android 上的 Inter-Process-Communication 跨进程通信时如何工作的？</li>
<li>多进程场景遇见过么？</li>
<li>Android进程分类？</li>
<li>进程和 Application 的生命周期？</li>
<li>进程调度</li>
<li>谈谈对进程共享和线程安全的认识</li>
<li>谈谈对多进程开发的理解以及多进程应用场景</li>
<li>什么是协程？</li>
</ul>
<h1 id="framework层、ROM定制、Ubuntu、Linux之类的问题"><a href="#framework层、ROM定制、Ubuntu、Linux之类的问题" class="headerlink" title="framework层、ROM定制、Ubuntu、Linux之类的问题"></a><span class="ez-toc-section" id="framework%E5%B1%82%E3%80%81ROM%E5%AE%9A%E5%88%B6%E3%80%81Ubuntu%E3%80%81Linux%E4%B9%8B%E7%B1%BB%E7%9A%84%E9%97%AE%E9%A2%98"></span>framework层、ROM定制、Ubuntu、Linux之类的问题<span class="ez-toc-section-end"></span></h1><ul>
<li>java虚拟机的特性</li>
<li>谈谈对jvm的理解</li>
<li>JVM内存区域，开线程影响哪块内存</li>
<li>对Dalvik、ART虚拟机有什么了解？</li>
<li>Art和Dalvik对比</li>
<li>虚拟机原理，如何自己设计一个虚拟机(内存管理，类加载，双亲委派)</li>
<li>谈谈你对双亲委派模型理解</li>
<li>JVM内存模型，内存区域</li>
<li>类加载机制</li>
<li>谈谈对ClassLoader(类加载器)的理解</li>
<li>谈谈对动态加载（OSGI）的理解</li>
<li>内存对象的循环引用及避免</li>
<li>内存回收机制、GC回收策略、GC原理时机以及GC对象</li>
<li>垃圾回收机制与调用System.gc()区别</li>
<li>系统启动流程是什么？（提示：Zygote进程 –&gt; SystemServer进程 –&gt; 各种系统服务 –&gt; 应用进程）</li>
<li>大体说清一个应用程序安装到手机上时发生了什么</li>
<li>简述Activity启动全部过程</li>
<li>App启动流程，从点击桌面开始</li>
<li>Android中进程内存的分配，能不能自己分配定额内存？</li>
<li>如何保证一个后台服务不被杀死？（相同问题：如何保证service在后台不被kill？）比较省电的方式是什么？</li>
<li>App中唤醒其他进程的实现方式</li>
</ul>
<p>​ <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c3965e82b164">https://www.jianshu.com/p/c3965e82b164</a></p>
<p>​ <a target="_blank" rel="noopener" href="https://www.cnblogs.com/deman/p/5860976.html#_label29">https://www.cnblogs.com/deman/p/5860976.html#_label29</a></p>
<ul>
<li><strong>AMS是如何启动的？</strong></li>
<li><strong>AMS在Android起到什么作用？</strong></li>
<li><strong>AMS有哪些应用场景？我们是如何应用AMS核心原理的？</strong></li>
<li><strong>WMS的工作原理说说？</strong></li>
<li><strong>JVM的核心原理你懂多少？</strong></li>
<li><strong>我们的代码是如何在栈区中运行的？</strong></li>
<li>**如何使用字节码研究系统级原理？</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.1point3acres.com/bbs/interview/airbnb(%E5%8C%97%E4%BA%AC)%E3%80%81%E5%BF%AB%E6%89%8B%E3%80%81%E5%B0%8F%E7%BA%A2%E4%B9%A6%E3%80%81%E7%8C%BF%E9%A2%98%E5%BA%93%E7%AD%8915%E5%AE%B6%E9%9D%A2%E7%BB%8F-mobile-ios-android-530393.html">大佬面试经验</a></p>
<p><a target="_blank" rel="noopener" href="https://interview-q-a-1gdnkgkla15afdbe-1258598664.tcloudbaseapp.com/Android/">https://interview-q-a-1gdnkgkla15afdbe-1258598664.tcloudbaseapp.com/Android/</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-05-21T09:30:32.000Z" title="5/21/2024, 5:30:32 PM">2024-05-21</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-13T21:02:22.000Z" title="9/14/2024, 5:02:22 AM">2024-09-14</time></span><span class="level-item"> Jon </span><span class="level-item"><a class="link-muted" href="/categories/TOOL/">TOOL</a></span><span class="level-item">26 minutes read (About 3873 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/05/21/git/">GIT</a></p><div class="content"><p>官方文档<br><a target="_blank" rel="noopener" href="https://git-scm.com/book/en/v2">https://git-scm.com/book/en/v2</a><br><a target="_blank" rel="noopener" href="http://iissnan.com/progit/">http://iissnan.com/progit/</a></p>
<div class="ez-toc-v2_0_66_1 ez-toc-wrap-right counter-hierarchy ez-toc-counter ez-toc-grey ez-toc-container-direction" id="ez-toc-container"><div class="ez-toc-title-container">Table of Contents

<p><span class="ez-toc-title-toggle"><a href="#"><span class="ez-toc-js-icon-con"><span class><span class="eztoc-hide" style="display:none;">Toggle</span><span class="ez-toc-icon-toggle-span"><svg class="list-377408" fill="none" height="20px" style="fill: #999;color:#999" viewbox="0 0 24 24" width="20px" xmlns="http://www.w3.org/2000/svg"><path d="M6 6H4v2h2V6zm14 0H8v2h12V6zM4 11h2v2H4v-2zm16 0H8v2h12v-2zM4 16h2v2H4v-2zm16 0H8v2h12v-2z" fill="currentColor"/></svg><svg baseprofile="tiny" class="arrow-unsorted-368013" height="10px" style="fill: #999;color:#999" version="1.2" viewbox="0 0 24 24" width="10px" xmlns="http://www.w3.org/2000/svg"><path d="M18.2 9.3l-6.2-6.3-6.2 6.3c-.2.2-.3.4-.3.7s.1.5.3.7c.2.2.4.3.7.3h11c.3 0 .5-.1.7-.3.2-.2.3-.5.3-.7s-.1-.5-.3-.7zM5.8 14.7l6.2 6.3 6.2-6.3c.2-.2.3-.5.3-.7s-.1-.5-.3-.7c-.2-.2-.4-.3-.7-.3h-11c-.3 0-.5.1-.7.3-.2.2-.3.5-.3.7s.1.5.3.7z"/></svg></span></span></span></a></span></p></div><nav>- <a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#Git%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C" title="Git基本操作">Git基本操作</a><p></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#github%E4%B8%8A%E4%BC%A0%E9%A1%B9%E7%9B%AE" title="github上传项目">github上传项目</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#commit" title="commit">commit</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF" title="远程分支">远程分支</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#%E8%8E%B7%E5%8F%96%E6%9C%AC%E5%9C%B0%E6%B2%A1%E6%9C%89%E7%9A%84%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF" title="获取本地没有的远程分支">获取本地没有的远程分支</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#%E5%88%A0%E9%99%A4%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF" title="删除远程分支">删除远程分支</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E6%9B%B4%E6%96%B0%E5%88%B0%E6%9C%AC%E5%9C%B0" title="远程仓库更新到本地">远程仓库更新到本地</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#%E4%BF%AE%E6%94%B9%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80" title="修改远程仓库地址">修改远程仓库地址</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#fork%E5%90%8E%E7%9A%84%E9%A1%B9%E7%9B%AE%E5%A4%84%E7%90%86" title="fork后的项目处理">fork后的项目处理</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#get_fork%E5%90%8E%E5%88%86%E6%94%AF%E7%9A%84tag" title="get fork后分支的tag">get fork后分支的tag</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#merge_the_src_directory" title="merge the src directory">merge the src directory</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6%E5%B7%B2%E6%8F%90%E4%BA%A4%E7%9A%84%E6%96%87%E4%BB%B6" title="忽略文件已提交的文件">忽略文件已提交的文件</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#%E4%BF%AE%E5%A4%8D%E5%B7%B2%E5%8F%91%E5%B8%83%E7%89%88%E6%9C%ACbug" title="修复已发布版本bug">修复已发布版本bug</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#Git%E4%BB%93%E5%BA%93%E8%BF%81%E7%A7%BB" title="Git仓库迁移">Git仓库迁移</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#GIT%E6%A0%87%E7%AD%BE" title="GIT标签">GIT标签</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#Checkout_Git_Tags" title="Checkout Git Tags">Checkout Git Tags</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#checkout_remote_tag" title="checkout remote tag">checkout remote tag</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#git_stash" title="git stash">git stash</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#SVN" title="SVN">SVN</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#github%E6%8F%90%E9%80%9F" title="github提速">github提速</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#git_pull_git_fetch%E5%8C%BA%E5%88%AB" title="git pull git fetch区别">git pull git fetch区别</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#master_revert" title="master revert">master revert</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#%E5%88%A0%E9%99%A4%E4%B8%80%E6%9D%A1%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95" title="删除一条历史记录">删除一条历史记录</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#git_ssh" title="git ssh">git ssh</a><ul>
<li><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#%E5%8E%9F%E7%90%86" title="原理">原理</a><br>  - <a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#%E5%A4%9A%E5%B9%B3%E5%8F%B0%E9%85%8D%E7%BD%AESSH" title="多平台配置SSH">多平台配置SSH</a><br>  - <a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E8%AE%BE%E7%BD%AE" title="用户信息设置">用户信息设置</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#%E7%94%9F%E6%88%90sshkey" title="生成sshkey">生成sshkey</a><br>- <a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#%E4%B8%8D%E5%90%8C%E5%B9%B3%E5%8F%B0%E3%80%80%E4%B8%8D%E5%90%8C%E7%9A%84rsakey" title="不同平台　不同的rsa.key">不同平台 不同的rsa.key</a><br>- <a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#%E4%B8%8D%E5%90%8C%E7%9A%84%E5%B9%B3%E5%8F%B0%EF%BC%8C%E7%9B%B8%E5%90%8C%E7%9A%84rsakey_%E6%8E%A8%E8%8D%90" title="不同的平台，相同的rsa.key (推荐)">不同的平台，相同的rsa.key (推荐)</a><br>- <a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#%E9%97%AE%E9%A2%98" title="问题">问题</a><br>- <a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/21/git/#GitHub_CLI_%E9%85%8D%E7%BD%AE" title="GitHub CLI  配置">GitHub CLI 配置</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</nav></div>## <span class="ez-toc-section" id="Git%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"></span>Git基本操作<span class="ez-toc-section-end"></span>

<h3 id="github上传项目"><a href="#github上传项目" class="headerlink" title="github上传项目"></a><span class="ez-toc-section" id="github%E4%B8%8A%E4%BC%A0%E9%A1%B9%E7%9B%AE"></span>github上传项目<span class="ez-toc-section-end"></span></h3><ul>
<li>分支创建</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git branch Dev1.10 </span><br><span class="line">git push origin Dev1.10 　　　// 提交该分支到远程仓库</span><br><span class="line">git pull origin dev          //从远程获取分支</span><br></pre></td></tr></table></figure>

<ul>
<li>下面是对已有项目的提交</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@gitee.com:huaiyi/EffectiveJava.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>

<p>分支提交到远程仓库<br><code>$ git push origin v1.0.0 </code></p>
<h3 id="commit"><a href="#commit" class="headerlink" title="commit"></a><span class="ez-toc-section" id="commit"></span>commit<span class="ez-toc-section-end"></span></h3><p>Git撤销git commit 但是未git push的修改</p>
<ol>
<li>找到上次git commit的 id</li>
</ol>
<p>  git log</p>
<p>  找到你想撤销的commit_id<br>2. git reset –hard commit_id</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">完成撤销,同时将代码恢复到前一commit_id 对应的版本。</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>git reset commit_id</li>
</ol>
<p>  完成Commit命令的撤销，但是不对代码修改进行撤销，可以直接通过git commit 重新提交对本地代码的修改。</p>
<p>  <a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%AE%80%E4%BB%8B">git分支简介</a><br>  <a target="_blank" rel="noopener" href="http://blog.csdn.net/hyr83960944/article/details/36185231">http://blog.csdn.net/hyr83960944/article/details/36185231</a></p>
<p>合并分支<br>合并hotfix到dev</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout            // 先切换到dev </span><br><span class="line">$ git merge hotfix</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%9A%84%E6%96%B0%E5%BB%BA%E4%B8%8E%E5%90%88%E5%B9%B6">合并分支</a></p>
<h2 id="远程分支"><a href="#远程分支" class="headerlink" title="远程分支"></a><span class="ez-toc-section" id="%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF"></span>远程分支<span class="ez-toc-section-end"></span></h2><h3 id="获取本地没有的远程分支"><a href="#获取本地没有的远程分支" class="headerlink" title="获取本地没有的远程分支"></a><span class="ez-toc-section" id="%E8%8E%B7%E5%8F%96%E6%9C%AC%E5%9C%B0%E6%B2%A1%E6%9C%89%E7%9A%84%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF"></span>获取本地没有的远程分支<span class="ez-toc-section-end"></span></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -r #查看远程分支  或 git branch -a #查看所有分支</span><br></pre></td></tr></table></figure>

<p>会显示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">origin/HEAD -&gt; origin/master</span><br><span class="line">origin/daily/1.2.2</span><br><span class="line">origin/master</span><br></pre></td></tr></table></figure>

<p>然后直接</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout origin/daily/1.4.1</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://gaohaoyang.github.io/2016/07/07/git-clone-not-master-branch/">https://gaohaoyang.github.io/2016/07/07/git-clone-not-master-branch/</a></p>
<p><a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v1/Git-%E5%88%86%E6%94%AF-%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF" title="官方参考">官方</a></p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8">显示远程仓库</a><br><code>$ git remote show origin </code></p>
<p><strong>1. 本地分支重命名(还没有推送到远程)</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -m oldName newName</span><br></pre></td></tr></table></figure>

<p><strong>2. 远程分支重命名 (已经推送远程-假设本地分支和远程对应分支名称相同)</strong><br>a. 重命名远程分支对应的本地分支</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -m oldName newName</span><br></pre></td></tr></table></figure>

<p>c. 删除本地分支</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`    git branch -d v1.0.0    `</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="删除远程分支"><a href="#删除远程分支" class="headerlink" title="删除远程分支"></a><span class="ez-toc-section" id="%E5%88%A0%E9%99%A4%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF"></span>删除远程分支<span class="ez-toc-section-end"></span></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push --delete origin oldName</span><br></pre></td></tr></table></figure>

<h3 id="远程仓库更新到本地"><a href="#远程仓库更新到本地" class="headerlink" title="远程仓库更新到本地"></a><span class="ez-toc-section" id="%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E6%9B%B4%E6%96%B0%E5%88%B0%E6%9C%AC%E5%9C%B0"></span>远程仓库更新到本地<span class="ez-toc-section-end"></span></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch origin</span><br><span class="line">$ git merge origin/hexo</span><br></pre></td></tr></table></figure>

<p>或者合并</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git pull origin hexo </span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2014/06/git_remote.html">http://www.ruanyifeng.com/blog/2014/06/git_remote.html</a></p>
<h3 id="修改远程仓库地址"><a href="#修改远程仓库地址" class="headerlink" title="修改远程仓库地址"></a><span class="ez-toc-section" id="%E4%BF%AE%E6%94%B9%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E5%9C%B0%E5%9D%80"></span>修改远程仓库地址<span class="ez-toc-section-end"></span></h3><ul>
<li>github创建 New项目，项目地址是 <a href="mailto:&#x67;&#105;&#x74;&#64;&#103;&#x69;&#116;&#104;&#x75;&#98;&#46;&#99;&#111;&#x6d;">&#x67;&#105;&#x74;&#64;&#103;&#x69;&#116;&#104;&#x75;&#98;&#46;&#99;&#111;&#x6d;</a>:BlogForMe&#x2F;News.git</li>
<li>修改远程服务器地址 ：<code>git remote set-url origin git@github.com:BlogForMe/News.git</code></li>
<li>推送到远程服务器 : <code>git push origin </code></li>
</ul>
<p><a target="_blank" rel="noopener" href="http://jcpplus.github.io/2015/07/23/modify-remote-url/">http://jcpplus.github.io/2015/07/23/modify-remote-url/</a></p>
<h2 id="fork后的项目处理"><a href="#fork后的项目处理" class="headerlink" title="fork后的项目处理"></a><span class="ez-toc-section" id="fork%E5%90%8E%E7%9A%84%E9%A1%B9%E7%9B%AE%E5%A4%84%E7%90%86"></span>fork后的项目处理<span class="ez-toc-section-end"></span></h2><h3 id="get-fork后分支的tag"><a href="#get-fork后分支的tag" class="headerlink" title="get fork后分支的tag"></a><span class="ez-toc-section" id="get_fork%E5%90%8E%E5%88%86%E6%94%AF%E7%9A%84tag"></span>get fork后分支的tag<span class="ez-toc-section-end"></span></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git remote add upstream git@github.com:square/okhttp.git</span><br><span class="line">git fetch upstream --tags</span><br><span class="line"></span><br><span class="line">//Verify that the tags are fetched:</span><br><span class="line">git tag</span><br><span class="line">//will show  [new tag]             parent-4.9.0                                          -&gt; parent-4.9.0</span><br><span class="line">git push origin --tags</span><br><span class="line"></span><br><span class="line">git checkout tags/parent-4.12.0</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://gaohaoyang.github.io/2015/04/12/Syncing-a-fork/">https://gaohaoyang.github.io/2015/04/12/Syncing-a-fork/</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/sdujava2011/article/details/138312278">https://blog.csdn.net/sdujava2011/article/details/138312278</a></p>
<h3 id="merge-the-src-directory"><a href="#merge-the-src-directory" class="headerlink" title="merge the src directory"></a><span class="ez-toc-section" id="merge_the_src_directory"></span>merge the src directory<span class="ez-toc-section-end"></span></h3><p>Assume you want to merge the android-test-app directory from master into parent-4.12.0-study.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">okhttp_dump % git branch</span><br><span class="line">  main</span><br><span class="line">  master</span><br><span class="line">* parent-4.12.0-study</span><br><span class="line">okhttp_dump % git checkout parent-4.12.0-study</span><br><span class="line">okhttp_dump % git checkout master android-test-app</span><br><span class="line">okhttp_dump % git add android-test-app</span><br><span class="line">okhttp_dump % git commit -m <span class="string">&quot;Merged src directory from feature-branch&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="忽略文件已提交的文件"><a href="#忽略文件已提交的文件" class="headerlink" title="忽略文件已提交的文件"></a><span class="ez-toc-section" id="%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6%E5%B7%B2%E6%8F%90%E4%BA%A4%E7%9A%84%E6%96%87%E4%BB%B6"></span>忽略文件已提交的文件<span class="ez-toc-section-end"></span></h3><p>对于单个文件处理<br>假如要忽略 .idea&#x2F;misc.xml文件，.gitignore可以添加 <code>/.idea/* </code>把.idea文件过滤<br>主要是 <code>git rm --cached　.idea/misc.xml </code> 然后提交修改,每次手输入才有用?</p>
<p>对文件夹的处理,比如common-bankcard</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git rm -r --cached common-bankcard</span><br><span class="line">git rm --cached  *idea/*</span><br></pre></td></tr></table></figure>

<h2 id="修复已发布版本bug"><a href="#修复已发布版本bug" class="headerlink" title="修复已发布版本bug"></a><span class="ez-toc-section" id="%E4%BF%AE%E5%A4%8D%E5%B7%B2%E5%8F%91%E5%B8%83%E7%89%88%E6%9C%ACbug"></span>修复已发布版本bug<span class="ez-toc-section-end"></span></h2><p>修复bug主要以下几步:</p>
<ul>
<li><p>使用git reset –hard <commit id>命令退回到发布标签对应的版本</commit></p>
</li>
<li><p>使用git checkout -b BugFix新建一个BugFix的分支，原分支前进到最新提交版本</p>
</li>
<li><p>使用git checkout BugFix切换到BugFix分支，修改bug，重新发布并使用git tag打标签</p>
</li>
<li><p>git reaset –hard</p>
<p> 切换主干最新的分支</p>
</li>
<li><p>使用git merge合并BugFix分支到主分支</p>
<p>参考:<a target="_blank" rel="noopener" href="https://blog.masterliu.net/git-retag/">https://blog.masterliu.net/git-retag/</a></p>
<p>标签是一个文件快照，并不是真拉出一份代码放在了那里</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">D:\Project\ASProjects\cqianjia&gt;git tag</span><br><span class="line">v1.0.2</span><br></pre></td></tr></table></figure>

<p>参考: <a target="_blank" rel="noopener" href="http://gepeiyu.com/2017/06/28/git-tag-oldversion-debug/">http://gepeiyu.com/2017/06/28/git-tag-oldversion-debug/</a></p>
<p>还有一种情况是在最新提交版本修复bug</p>
<ul>
<li><p>git stash</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/54b8ea4317cc">https://www.jianshu.com/p/54b8ea4317cc</a></p>
<p><a target="_blank" rel="noopener" href="https://qiita.com/hudichao/items/d665cd769ed1d2ce832a">https://qiita.com/hudichao/items/d665cd769ed1d2ce832a</a></p>
</li>
</ul>
<h2 id="Git仓库迁移"><a href="#Git仓库迁移" class="headerlink" title="Git仓库迁移"></a><span class="ez-toc-section" id="Git%E4%BB%93%E5%BA%93%E8%BF%81%E7%A7%BB"></span>Git仓库迁移<span class="ez-toc-section-end"></span></h2><p>迁移git仓库</p>
<ul>
<li><p>原来托管于github,clone一份裸版本库</p>
<p>git clone –bare <a href="mailto:&#x67;&#105;&#x74;&#64;&#x67;&#x69;&#x74;&#101;&#101;&#46;&#99;&#x6f;&#109;">&#x67;&#105;&#x74;&#64;&#x67;&#x69;&#x74;&#101;&#101;&#46;&#99;&#x6f;&#109;</a>:huaiyi&#x2F;CQJ.git</p>
</li>
<li><p>在新的版本库(gitlab)里面创建一个新的项目，例如 cqianjia</p>
</li>
<li><p>推送刚才clone的镜像到gitlab服务器</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd CQJ.git/</span><br><span class="line">git push --mirror git@45.77.22.97:root/cqianjia.git</span><br></pre></td></tr></table></figure>

<p>mirror 克隆出来的裸版本对上游版本库进行了注册，这样可以在裸版本库中使用git fetch命令和上游版本库进行持续同步</p>
<ul>
<li>删除本地代码</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ..</span><br><span class="line">rm -rf project.git</span><br></pre></td></tr></table></figure>

<ul>
<li><p>到新的服务器clone到本地就Ok了</p>
<p><code>  git clone git@45.77.22.97:root/cqianjia.git</code></p>
<p>参考: <a target="_blank" rel="noopener" href="https://my.oschina.net/kind790/blog/510601">https://my.oschina.net/kind790/blog/510601</a></p>
<ul>
<li>git clone 所有分支</li>
</ul>
<p>这种方式有一个弊端，切换分支后 工程名没了， 还是慢慢摸索吧 !</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git branch -r | grep -v &#x27;\-&gt;&#x27; | while read remote; do git branch --track &quot;$&#123;remote#origin/&#125;&quot; &quot;$remote&quot;; done</span><br><span class="line">git fetch --all</span><br><span class="line">git pull --all</span><br></pre></td></tr></table></figure>

<p>参考: <a target="_blank" rel="noopener" href="http://blog.csdn.net/allangold/article/details/78028709">http://blog.csdn.net/allangold/article/details/78028709</a></p>
<h2 id="GIT标签"><a href="#GIT标签" class="headerlink" title="GIT标签"></a><span class="ez-toc-section" id="GIT%E6%A0%87%E7%AD%BE"></span>GIT标签<span class="ez-toc-section-end"></span></h2><p>查看所有的版本<br>​ <code>git tag</code></p>
<ul>
<li>查看远程分支 <code>git ls-remote --tags</code></li>
<li>创建标签 <code>git tag -a v1.0.2 -m &quot;my version 1.0.2&quot;  </code><br>-m 选项指定了一条将会存储在标签中的信息</li>
<li>创建Tag</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git tag -a v1.0.0 -m &quot;my version 1.0.0&quot;</span><br><span class="line">git push origin v1.0.0    //推送到远程分支</span><br><span class="line">git push origin --tags       //推送所有的标签</span><br></pre></td></tr></table></figure>

<ul>
<li>删除tag</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> git tag -d &lt;tagname&gt; </span><br><span class="line"> git push origin :refs/tags/&lt;tagname&gt;</span><br><span class="line"></span><br><span class="line">例如</span><br><span class="line"> git push origin :refs/tags/v1.0.2</span><br><span class="line"> git tag -d  v1.0.2</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E6%89%93%E6%A0%87%E7%AD%BE">检出标签</a> 检出标签</p>
<h3 id="Checkout-Git-Tags"><a href="#Checkout-Git-Tags" class="headerlink" title="Checkout Git Tags"></a><span class="ez-toc-section" id="Checkout_Git_Tags"></span>Checkout Git Tags<span class="ez-toc-section-end"></span></h3><p><a target="_blank" rel="noopener" href="https://devconnected.com/how-to-checkout-git-tags/">https://devconnected.com/how-to-checkout-git-tags/</a></p>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git fetch --all --tags</span><br><span class="line">git checkout tags/v1.0 -b v1.0-branch    //git checkout tags/v2.1.1 -b v2.1.1-branch  v1.0代表tag名称</span><br><span class="line"></span><br><span class="line">git log --oneline --graph        //You can inspect the state of your branch by using the “git log” command. Make sure that the HEAD pointer (the latest commit) is pointing to your annotated tag.</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="checkout-remote-tag"><a href="#checkout-remote-tag" class="headerlink" title="checkout remote tag"></a><span class="ez-toc-section" id="checkout_remote_tag"></span>checkout remote tag<span class="ez-toc-section-end"></span></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git fetch --all --tags</span><br><span class="line"></span><br><span class="line">git ls-remote --tags</span><br><span class="line">  refs/tags/v2.5.9</span><br><span class="line">  refs/tags/v2.5.9^&#123;&#125;</span><br><span class="line"></span><br><span class="line">git checkout  refs/tags/v2.5.9 -b v2.5.9-branch                    //-b 后面是自定义的分支名称</span><br><span class="line">                                                                                 这个自定义</span><br></pre></td></tr></table></figure>

<p>在 Git 中你并不能真的检出一个标签，因为它们并不能像分支一样来回移动。 如果你想要工作目录与仓库中特定的标签版本完全一样，可以使用 git checkout -b [branchname] [tagname] 在特定的标签上创建一个新分支：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b version2 v2.0.0</span><br></pre></td></tr></table></figure>

<p>Switched to a new branch ‘version2’</p>
<p>当然，如果在这之后又进行了一次提交，version2 分支会因为改动向前移动了，那么 version2 分支就会和 v2.0.0 标签稍微有些不同，这时就应该当心了。</p>
<p>修复已发布版本Bug<br><a target="_blank" rel="noopener" href="http://gepeiyu.com/2017/06/28/git-tag-oldversion-debug/">http://gepeiyu.com/2017/06/28/git-tag-oldversion-debug/</a></p>
<h3 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a><span class="ez-toc-section" id="git_stash"></span>git stash<span class="ez-toc-section-end"></span></h3><p>经常有这样的事情发生，当你正在进行项目中某一部分的工作，里面的东西处于一个比较杂乱的状态，而你想转到其他分支上进行一些工作。问题是，你不想提交进行了一半的工作，否则以后你无法回到这个工作点。解决这个问题的办法就是<code>git stash</code>命令。</p>
<ol>
<li><code>git stash  save  &#39;暂存备注信息&#39; </code> &#x2F;&#x2F;进入暂存状态,此时执行 git status 已经没有要提交的了</li>
<li>git checkout 切换到要修改的分支上 ,修改完</li>
<li>完成后回到原来的开发分支上，git stash apply 获取最近暂存内容</li>
<li><code>git stash drop  stash@&#123;1&#125; </code></li>
</ol>
<blockquote>
<p>apply 选项只尝试应用储藏的工作——储藏的内容仍然在栈上。要移除它，你可以运行 <code>git stash drop</code>，加上你希望移除的储藏的名字：</p>
<ul>
<li>git stash 可以进行多次暂存,多次存后 git stash list长下面这样,可以用 · git stash apply stash@{1}· 获取某次暂存的内容</li>
</ul>
<p>stash@{0}: WIP on dev: 3d01a6c Patient Entity数据库删除<br>stash@{1}: WIP on dev: b6a688e 跑起来提交</p>
</blockquote>
<ul>
<li><p>取消储藏 <code>git stash show -p stash@&#123;0&#125; | git apply -R</code> 如果没指定具体的标签 取消最近的</p>
<p>这个和<code>git stash drop</code>的区别是 取消的是文件内容，stash标签还在</p>
<p><a target="_blank" rel="noopener" href="https://git-scm.com/docs/git-stash">https://git-scm.com/docs/git-stash</a></p>
<blockquote>
<p>注意是 stash@{0} 不是 3d01a6c</p>
</blockquote>
<p>git branch 分支名 hash(历史版本)</p>
</li>
<li><p>update forked project</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq1332479771/article/details/56087333">https://blog.csdn.net/qq1332479771/article/details/56087333</a></p>
</li>
<li><p>获取暂存</p>
<blockquote>
<p>git stash apply stash@{0} &#x2F;&#x2F; don‘t remove stash</p>
<p>git stash pop stash@{0}</p>
</blockquote>
</li>
</ul>
<h3 id="SVN"><a href="#SVN" class="headerlink" title="SVN"></a><span class="ez-toc-section" id="SVN"></span>SVN<span class="ez-toc-section-end"></span></h3><ul>
<li>SVN不能添加文件:<a target="_blank" rel="noopener" href="https://blog.csdn.net/yujiayinshi/article/details/51381942">https://blog.csdn.net/yujiayinshi/article/details/51381942</a></li>
</ul>
<h3 id="github提速"><a href="#github提速" class="headerlink" title="github提速"></a><span class="ez-toc-section" id="github%E6%8F%90%E9%80%9F"></span>github提速<span class="ez-toc-section-end"></span></h3><p><a href="https://link.zhihu.com/?target=http://www.github.com/">www.github.com</a> 替换为 <a target="_blank" rel="noopener" href="http://www.github.com.cnpmjs.org/">www.github.com.cnpmjs.org</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/flutter/flutter.git">https://github.com/flutter/flutter.git</a></p>
<p>git clone <a target="_blank" rel="noopener" href="https://github.com.cnpmjs.org/love-flutter/flutter-column.git">https://github.com.cnpmjs.org/love-flutter/flutter-column.git</a></p>
<h2 id="git-pull-git-fetch区别"><a href="#git-pull-git-fetch区别" class="headerlink" title="git pull git fetch区别"></a><span class="ez-toc-section" id="git_pull_git_fetch%E5%8C%BA%E5%88%AB"></span>git pull git fetch区别<span class="ez-toc-section-end"></span></h2><p>git fetch更新本地仓库的两种用法：</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法一</span></span><br><span class="line">$ git fetch origin <span class="keyword">master</span>                <span class="title">#从远程的origin</span>仓库的<span class="literal">master</span>分支下载代码到本地的origin maste</span><br><span class="line">$ git log -p <span class="literal">master</span>.. origin/<span class="keyword">master</span>      <span class="title">#比较本地的仓库和远程参考的区别</span></span><br><span class="line"><span class="title">$</span> git merge origin/<span class="keyword">master</span>                <span class="title">#把远程下载下来的代码合并到本地仓库，远程的和本地的合并</span></span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法二</span></span><br><span class="line"><span class="variable">$</span> git fetch origin master:temp           <span class="comment">#从远程的origin仓库的master分支下载到本地并新建一个分支temp</span></span><br><span class="line"><span class="variable">$</span> git <span class="built_in">diff</span> temp                          <span class="comment">#比较master分支和temp分支的不同</span></span><br><span class="line"><span class="variable">$</span> git merge temp                         <span class="comment">#合并temp分支到master分支</span></span><br><span class="line"><span class="variable">$</span> git branch <span class="literal">-d</span> temp                     <span class="comment">#删除temp</span></span><br></pre></td></tr></table></figure>

<p>这样理解</p>
<p>pull &#x3D; fetch + merge</p>
<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000017030384">https://segmentfault.com/a/1190000017030384</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d265f7763a3a">https://www.jianshu.com/p/d265f7763a3a</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/riddle1981/article/details/74938111">https://blog.csdn.net/riddle1981/article/details/74938111</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cpweb.top/455">https://www.cpweb.top/455</a></p>
<h3 id="master-revert"><a href="#master-revert" class="headerlink" title="master revert"></a><span class="ez-toc-section" id="master_revert"></span>master revert<span class="ez-toc-section-end"></span></h3><p> 今天将一段代码合入了master，上线的时候有问题，而不能很快解决掉，为了不影响其他同事合入master或将有问题的commit带上线，因此我将我的commit revert掉了。<br> 同时，当天晚上的时候有同事刚好问我git revert后自己代码消失的问题，当时思考不清晰，也比较少用revert，因此现在来复盘下。<br> commit提交流程示意图如下：</p>
<p><img src="https://raw.githubusercontent.com/BlogForMe/ImageServer/main/GIT/20690451-b8fff26d34df812c.webp"></p>
<p>其中A是有问题的commit，R是revert的commit，M是master，序号N代表master的流向,</p>
<ol>
<li>从master checkout分支 F-A ,提交了TestA文件</li>
</ol>
<p>  <img src="https://raw.githubusercontent.com/BlogForMe/ImageServer/main/GIT/20221109111230.jpg"><br>2. 从master checkout分支 UP-R,提交了TESTB, TestR<br>  <img src="https://raw.githubusercontent.com/BlogForMe/ImageServer/main/GIT/20221109115616.jpg"><br>3. 分别吧F-A , UP-R分支合并到master.<br>4. 此时觉得F-A代码有问题，需要修改，master对F-A进行revert ,此时 master的F-A 分支TesA被删除了,并且有一条提交记录<br>5. 从master checkout得到分支verify-b,然后将之前需要会退的提交 , 再进行 git revert commit,然后push (这个方式没想明白)<br>6. 把master合并到verify-b就能解决这个问题.</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/oYiMiYangGuang123/article/details/99437382">https://blog.csdn.net/oYiMiYangGuang123/article/details/99437382</a></p>
<p>上面的步骤还是没想明白.</p>
<p>主要 git reset不能解决，有问题.除非强制push。</p>
<h3 id="删除一条历史记录"><a href="#删除一条历史记录" class="headerlink" title="删除一条历史记录"></a><span class="ez-toc-section" id="%E5%88%A0%E9%99%A4%E4%B8%80%E6%9D%A1%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95"></span>删除一条历史记录<span class="ez-toc-section-end"></span></h3><p>git revert 纪录</p>
<p>Git force push</p>
<p>git rebase -i 7158b278b8f47f9b46f9af2207996bce783c0b57 这篇blog介绍的，但是没起作用。</p>
<p><a target="_blank" rel="noopener" href="https://linuxhint.com/remove-commit-from-history-git/">https://linuxhint.com/remove-commit-from-history-git/</a></p>
<p>查看日志</p>
<p>git log –author zh –since&#x3D;2022-12-10</p>
<h2 id="git-ssh"><a href="#git-ssh" class="headerlink" title="git ssh"></a><span class="ez-toc-section" id="git_ssh"></span>git ssh<span class="ez-toc-section-end"></span></h2><h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a><span class="ez-toc-section" id="%E5%8E%9F%E7%90%86"></span>原理<span class="ez-toc-section-end"></span></h4><p><a target="_blank" rel="noopener" href="http://skypegnu1.blog.51cto.com/8991766/1641064">http://skypegnu1.blog.51cto.com/8991766/1641064</a></p>
<h5 id="多平台配置SSH"><a href="#多平台配置SSH" class="headerlink" title="多平台配置SSH"></a><span class="ez-toc-section" id="%E5%A4%9A%E5%B9%B3%E5%8F%B0%E9%85%8D%E7%BD%AESSH"></span>多平台配置SSH<span class="ez-toc-section-end"></span></h5><p>正常情况会哟几个平台的配置情况,ssh操作方式</p>
<h5 id="用户信息设置"><a href="#用户信息设置" class="headerlink" title="用户信息设置"></a><span class="ez-toc-section" id="%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E8%AE%BE%E7%BD%AE"></span>用户信息设置<span class="ez-toc-section-end"></span></h5><p>在config后加上 –global 即可全局设置用户名和邮箱，否则就是局部的。有时候用手输入才有用</p>
<blockquote>
<p>$ git config –global user.name “John Doe”<br>$ git config –global user.email <a href="mailto:&#x6a;&#111;&#x68;&#110;&#100;&#111;&#x65;&#64;&#101;&#x78;&#x61;&#x6d;&#112;&#108;&#101;&#46;&#99;&#x6f;&#109;">&#x6a;&#111;&#x68;&#110;&#100;&#111;&#x65;&#64;&#101;&#x78;&#x61;&#x6d;&#112;&#108;&#101;&#46;&#99;&#x6f;&#109;</a></p>
</blockquote>
<p> 检查配置信息 <code>git config --list</code></p>
<h4 id="生成sshkey"><a href="#生成sshkey" class="headerlink" title="生成sshkey"></a><span class="ez-toc-section" id="%E7%94%9F%E6%88%90sshkey"></span>生成sshkey<span class="ez-toc-section-end"></span></h4><p>如果视其他平台生成时就要修改名称了</p>
<blockquote>
<p>ssh-keygen -t rsa -b 4096 -C “your_<a href="mailto:&#x65;&#109;&#97;&#x69;&#108;&#x40;&#101;&#120;&#x61;&#109;&#112;&#108;&#101;&#x2e;&#99;&#111;&#109;">&#x65;&#109;&#97;&#x69;&#108;&#x40;&#101;&#120;&#x61;&#109;&#112;&#108;&#101;&#x2e;&#99;&#111;&#109;</a>“<br>Enter file in which to save the key (&#x2F;home&#x2F;jon&#x2F;.ssh&#x2F;id_rsa): &#x2F;home&#x2F;jon&#x2F;.ssh&#x2F;id_rsa.Oschina<br>cat ~&#x2F;.ssh&#x2F;id_rsa.li | clip</p>
</blockquote>
<p>Adding your SSH key to the ssh-agent</p>
<p>start the ssh-agent in the background</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ eval $(ssh-agent -s)</span><br><span class="line">  Agent pid 59566</span><br><span class="line">$ ssh-add ~/.ssh/id_rsa.li</span><br></pre></td></tr></table></figure>

<p>gitbash下把生成的id_rsa.pub 添加到sshkey</p>
<p>oschina 测试连接：<code>$ ssh -T git@git.oschina.net</code></p>
<p>github 测试连接: <code> $ ssh -T git@github.com</code><br>如果出现:</p>
<blockquote>
<p>Hi username! You’ve successfully authenticated, but GitHub does not<br>provide shell access.<br>配置成功</p>
</blockquote>
<h5 id="不同平台-不同的rsa-key"><a href="#不同平台-不同的rsa-key" class="headerlink" title="不同平台 不同的rsa.key"></a><span class="ez-toc-section" id="%E4%B8%8D%E5%90%8C%E5%B9%B3%E5%8F%B0%E3%80%80%E4%B8%8D%E5%90%8C%E7%9A%84rsakey"></span>不同平台 不同的rsa.key<span class="ez-toc-section-end"></span></h5><p> 我前面的key重新命名，clone项目还是有问题</p>
<p>解决方法: 在 .ssh目录下 新建config文件 添加</p>
<blockquote>
<p>Host github<br>HostName github.com<br>User Jon<br>IdentityFile ~&#x2F;.ssh&#x2F;id_rsa.li</p>
</blockquote>
<h5 id="不同的平台，相同的rsa-key-推荐"><a href="#不同的平台，相同的rsa-key-推荐" class="headerlink" title="不同的平台，相同的rsa.key (推荐)"></a><span class="ez-toc-section" id="%E4%B8%8D%E5%90%8C%E7%9A%84%E5%B9%B3%E5%8F%B0%EF%BC%8C%E7%9B%B8%E5%90%8C%E7%9A%84rsakey_%E6%8E%A8%E8%8D%90"></span>不同的平台，相同的rsa.key (推荐)<span class="ez-toc-section-end"></span></h5><p>复制id_rsa.pub填入</p>
<blockquote>
<p>clip &lt; ~&#x2F;.ssh&#x2F;id_rsa.pub</p>
</blockquote>
<p>参考：<br>github生成方式<br><a target="_blank" rel="noopener" href="https://help.github.com/articles/about-ssh/">https://help.github.com/articles/about-ssh/</a></p>
<p>gitlab生成方式<br><a target="_blank" rel="noopener" href="https://gitlab.com/help/ssh/README">https://gitlab.com/help/ssh/README</a></p>
<p>oschina方式:<br><a target="_blank" rel="noopener" href="http://git.mydoc.io/?t=154712">http://git.mydoc.io/?t=154712</a></p>
<p>gogs:参考github,配置sskey后还需要用账号登陆</p>
<h5 id="问题"><a href="#问题" class="headerlink" title="问题"></a><span class="ez-toc-section" id="%E9%97%AE%E9%A2%98"></span>问题<span class="ez-toc-section-end"></span></h5><ol>
<li>类似下面错误使用 git push -u origin master</li>
</ol>
<p>  <code>git push -f origin master</code></p>
<blockquote>
<p>! [rejected] master -&gt; master (fetch first)<br>error: failed to push some refs to ‘<a target="_blank" rel="noopener" href="https://github.com/aniruddhabarapatre/learn-rails.git">https://github.com/aniruddhabarapatre/learn-rails.git</a>‘<br>hint: Updates were rejected because the remote contains work that you do<br>hint: not have locally. This is usually caused by another repository pushing</p>
</blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/20939648/issue-pushing-new-code-in-github">https://stackoverflow.com/questions/20939648/issue-pushing-new-code-in-github</a></p>
<ol start="2">
<li>生成key时，我改成了 id_rsaOschina<br>  android studio 最后push 时<br>  authentication id_rsaOschina using key failed报错<br>  方法: AndroidStudio -&gt; File -&gt; Settings -&gt;Git -&gt; SSH executable : built-in 改成Native</li>
</ol>
<p>参考:<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/24688700/android-studio-push-failed-fatal-could-not-read-from-remote-repository">https://stackoverflow.com/questions/24688700/android-studio-push-failed-fatal-could-not-read-from-remote-repository</a></p>
<h5 id="GitHub-CLI-配置"><a href="#GitHub-CLI-配置" class="headerlink" title="GitHub CLI 配置"></a><span class="ez-toc-section" id="GitHub_CLI_%E9%85%8D%E7%BD%AE"></span>GitHub CLI 配置<span class="ez-toc-section-end"></span></h5><p>在windows平台 <code>git auth login</code> 授权 要用windows命令行工具。</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/7990ca55da69">Mac使用ssh密钥登录Linux - 简书</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-05-20T01:57:34.000Z" title="5/20/2024, 9:57:34 AM">2024-05-20</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-13T21:02:22.000Z" title="9/14/2024, 5:02:22 AM">2024-09-14</time></span><span class="level-item"> Jon </span><span class="level-item"><a class="link-muted" href="/categories/LIFE/">LIFE</a></span><span class="level-item">a few seconds read (About 23 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/05/20/equipment/">Equipment ear</a></p><div class="content"><p><img src="https://raw.githubusercontent.com/BlogForMe/ImageServer/main/OKHTTP/Screenshot%202024-05-16%20at%2021.37.59.png"></p>
<p>domain</p>
<p><img src="https://raw.githubusercontent.com/BlogForMe/ImageServer/main/OKHTTP/Screenshot%202024-05-05%20at%2020.22.34.png"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-05-15T07:08:40.000Z" title="5/15/2024, 3:08:40 PM">2024-05-15</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-13T21:02:22.000Z" title="9/14/2024, 5:02:22 AM">2024-09-14</time></span><span class="level-item"> Jon </span><span class="level-item"><a class="link-muted" href="/categories/NETWORK/">NETWORK</a></span><span class="level-item">4 minutes read (About 599 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/05/15/http/">HTTP</a></p><div class="content"><div class="ez-toc-v2_0_66_1 ez-toc-wrap-right counter-hierarchy ez-toc-counter ez-toc-grey ez-toc-container-direction" id="ez-toc-container"><div class="ez-toc-title-container">Table of Contents

<p><span class="ez-toc-title-toggle"><a href="#"><span class="ez-toc-js-icon-con"><span class><span class="eztoc-hide" style="display:none;">Toggle</span><span class="ez-toc-icon-toggle-span"><svg class="list-377408" fill="none" height="20px" style="fill: #999;color:#999" viewbox="0 0 24 24" width="20px" xmlns="http://www.w3.org/2000/svg"><path d="M6 6H4v2h2V6zm14 0H8v2h12V6zM4 11h2v2H4v-2zm16 0H8v2h12v-2zM4 16h2v2H4v-2zm16 0H8v2h12v-2z" fill="currentColor"/></svg><svg baseprofile="tiny" class="arrow-unsorted-368013" height="10px" style="fill: #999;color:#999" version="1.2" viewbox="0 0 24 24" width="10px" xmlns="http://www.w3.org/2000/svg"><path d="M18.2 9.3l-6.2-6.3-6.2 6.3c-.2.2-.3.4-.3.7s.1.5.3.7c.2.2.4.3.7.3h11c.3 0 .5-.1.7-.3.2-.2.3-.5.3-.7s-.1-.5-.3-.7zM5.8 14.7l6.2 6.3 6.2-6.3c.2-.2.3-.5.3-.7s-.1-.5-.3-.7c-.2-.2-.4-.3-.7-.3h-11c-.3 0-.5.1-.7.3-.2.2-.3.5-.3.7s.1.5.3.7z"/></svg></span></span></span></a></span></p></div><nav>- <a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/15/http/#Post" title="Post">Post</a><p></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/15/http/#GET" title="GET">GET</a></li>
</ul>
</nav></div>## <span class="ez-toc-section" id="Post"></span>Post<span class="ez-toc-section-end"></span>

<p><a target="_blank" rel="noopener" href="https://jsonplaceholder.typicode.com/posts">https://jsonplaceholder.typicode.com/posts</a></p>
<p>request</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">:method: POST</span><br><span class="line">:path: /posts</span><br><span class="line">:authority: jsonplaceholder.typicode.com</span><br><span class="line">:scheme: https</span><br><span class="line">content-type: application/x-www-form-urlencoded</span><br><span class="line">content-length: 42</span><br><span class="line">accept-encoding: gzip</span><br><span class="line">user-agent: okhttp/5.0.0-SNAPSHOT</span><br><span class="line"></span><br><span class="line">userId=1&amp;title=article+2&amp;body=body+article</span><br></pre></td></tr></table></figure>

<p>response</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">:status: 201</span><br><span class="line">date: Wed, 17 Apr 2024 06:45:30 GMT</span><br><span class="line">content-type: application/json; charset=utf-8</span><br><span class="line">content-length: 82</span><br><span class="line">location: https://jsonplaceholder.typicode.com/posts/101</span><br><span class="line">report-to: &#123;&quot;group&quot;:&quot;heroku-nel&quot;,&quot;max_age&quot;:3600,&quot;endpoints&quot;:[&#123;&quot;url&quot;:&quot;https://nel.heroku.com/reports?ts=1713336330&amp;sid=e11707d5-02a7-43ef-b45e-2cf4d2036f7d&amp;s=Hua%2F7slOIpUhGTDPNaKu4xbP%2Bjuwplp9ehOh7C014ok%3D&quot;&#125;]&#125;</span><br><span class="line">reporting-endpoints: heroku-nel=https://nel.heroku.com/reports?ts=1713336330&amp;sid=e11707d5-02a7-43ef-b45e-2cf4d2036f7d&amp;s=Hua%2F7slOIpUhGTDPNaKu4xbP%2Bjuwplp9ehOh7C014ok%3D</span><br><span class="line">nel: &#123;&quot;report_to&quot;:&quot;heroku-nel&quot;,&quot;max_age&quot;:3600,&quot;success_fraction&quot;:0.005,&quot;failure_fraction&quot;:0.05,&quot;response_headers&quot;:[&quot;Via&quot;]&#125;</span><br><span class="line">x-powered-by: Express</span><br><span class="line">x-ratelimit-limit: 1000</span><br><span class="line">x-ratelimit-remaining: 999</span><br><span class="line">x-ratelimit-reset: 1713336348</span><br><span class="line">vary: Origin, X-HTTP-Method-Override, Accept-Encoding</span><br><span class="line">access-control-allow-credentials: true</span><br><span class="line">cache-control: no-cache</span><br><span class="line">pragma: no-cache</span><br><span class="line">expires: -1</span><br><span class="line">access-control-expose-headers: Location</span><br><span class="line">x-content-type-options: nosniff</span><br><span class="line">etag: W/&quot;52-HKy3Gu5DcI5r2jj3f8TQwnYvlDs&quot;</span><br><span class="line">via: 1.1 vegur</span><br><span class="line">cf-cache-status: DYNAMIC</span><br><span class="line">server: cloudflare</span><br><span class="line">cf-ray: 875a73ddee780484-HKG</span><br><span class="line">alt-svc: h3=&quot;:443&quot;; ma=86400</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;userId&quot;: &quot;1&quot;,</span><br><span class="line">  &quot;title&quot;: &quot;article 2&quot;,</span><br><span class="line">  &quot;body&quot;: &quot;body article&quot;,</span><br><span class="line">  &quot;id&quot;: 101</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="GET"><a href="#GET" class="headerlink" title="GET"></a><span class="ez-toc-section" id="GET"></span>GET<span class="ez-toc-section-end"></span></h2><p><a target="_blank" rel="noopener" href="https://api.github.com/repos/square/okhttp/contributors">https://api.github.com/repos/square/okhttp/contributors</a></p>
<p>Request</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">:method: GET</span><br><span class="line">:path: /repos/square/okhttp/contributors</span><br><span class="line">:authority: api.github.com</span><br><span class="line">:scheme: https</span><br><span class="line">accept-encoding: gzip</span><br><span class="line">user-agent: okhttp/5.0.0-SNAPSHOT</span><br></pre></td></tr></table></figure>

<p>Response</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">:status: 200</span><br><span class="line">server: GitHub.com</span><br><span class="line">date: Wed, 17 Apr 2024 06:58:41 GMT</span><br><span class="line">content-type: application/json; charset=utf-8</span><br><span class="line">cache-control: public, max-age=60, s-maxage=60</span><br><span class="line">vary: Accept, Accept-Encoding, Accept, X-Requested-With</span><br><span class="line">etag: W/&quot;699b092aa0b0980f1b2f2bde5e810a75c5c1921ee2f53c4d9f28fc8ea5fca327&quot;</span><br><span class="line">last-modified: Wed, 17 Apr 2024 02:18:24 GMT</span><br><span class="line">x-github-media-type: github.v3; format=json</span><br><span class="line">link: &lt;https://api.github.com/repositories/5152285/contributors?page=2&gt;; rel=&quot;next&quot;, &lt;https://api.github.com/repositories/5152285/contributors?page=9&gt;; rel=&quot;last&quot;</span><br><span class="line">x-github-api-version-selected: 2022-11-28</span><br><span class="line">access-control-expose-headers: ETag, Link, Location, Retry-After, X-GitHub-OTP, X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Used, X-RateLimit-Resource, X-RateLimit-Reset, X-OAuth-Scopes, X-Accepted-OAuth-Scopes, X-Poll-Interval, X-GitHub-Media-Type, X-GitHub-SSO, X-GitHub-Request-Id, Deprecation, Sunset</span><br><span class="line">access-control-allow-origin: *</span><br><span class="line">strict-transport-security: max-age=31536000; includeSubdomains; preload</span><br><span class="line">x-frame-options: deny</span><br><span class="line">x-content-type-options: nosniff</span><br><span class="line">x-xss-protection: 0</span><br><span class="line">referrer-policy: origin-when-cross-origin, strict-origin-when-cross-origin</span><br><span class="line">content-security-policy: default-src &#x27;none&#x27;</span><br><span class="line">content-encoding: gzip</span><br><span class="line">x-ratelimit-limit: 60</span><br><span class="line">x-ratelimit-remaining: 55</span><br><span class="line">x-ratelimit-reset: 1713337679</span><br><span class="line">x-ratelimit-resource: core</span><br><span class="line">x-ratelimit-used: 5</span><br><span class="line">accept-ranges: bytes</span><br><span class="line">x-github-request-id: 200C:21C6BE:267A047:2720F58:661F7320</span><br><span class="line"></span><br><span class="line">[&#123;&quot;login&quot;:&quot;swankjesse&quot;,&quot;id&quot;:133019,&quot;node_id&quot;:&quot;MDQ6VXNlcjEzMzAxOQ==&quot;,&quot;avatar_url&quot;:&quot;https://avatars.githubusercontent.com/u/133019?v=4&quot;,&quot;gravatar_id&quot;:&quot;&quot;,&quot;url&quot;:&quot;https://api.github.com/users/swankjesse&quot;,&quot;html_url&quot;:&quot;https://github.com/swankjesse&quot;,&quot;followers_url&quot;:&quot;https://api.github.com/users/swankjesse/followers&quot;,&quot;following_url&quot;:&quot;https://api.github.com/users/swankjesse/following&#123;/other_user&#125;&quot;,&quot;gists_url&quot;:&quot;https://api.github.com/users/swankjesse/gists&#123;/gist_id&#125;&quot;,&quot;starred_url&quot;:&quot;https://api.github.com/users/swankjesse/starred&#123;/owner&#125;&#123;/repo&#125;&quot;,&quot;subscriptions_url&quot;:&quot;https://api.github.com/users/swankjesse/subscriptions&quot;,&quot;organizations_url&quot;:&quot;https://api.github.com/users/swankjesse/orgs&quot;,&quot;repos_url&quot;:&quot;https://api.github.com/users/swankjesse/repos&quot;,&quot;events_url&quot;:&quot;https://api.github.com/users/swankjesse/events&#123;/privacy&#125;&quot;,&quot;received_events_url&quot;:&quot;https://api.github.com/users/swankjesse/received_events&quot;,&quot;type&quot;:&quot;User&quot;,&quot;site_admin&quot;:false,&quot;contributions&quot;:2768&#125;,&#123;&quot;login&quot;:&quot;JakeWharton&quot;,&quot;id&quot;:66577,&quot;node_id&quot;:&quot;MDQ6VXNlcjY2NTc3&quot;,&quot;avatar_url&quot;:&quot;https://avatars.githubusercontent.com/u/66577?v=4&quot;,&quot;gravatar_id&quot;:&quot;&quot;,&quot;url&quot;:&quot;https://api.github.com/users/JakeWharton&quot;...</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-05-15T06:28:23.000Z" title="5/15/2024, 2:28:23 PM">2024-05-15</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-13T21:02:22.000Z" title="9/14/2024, 5:02:22 AM">2024-09-14</time></span><span class="level-item"> Jon </span><span class="level-item"><a class="link-muted" href="/categories/ANDROID/">ANDROID</a></span><span class="level-item">3 minutes read (About 418 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/05/15/cache-file/">Cache File</a></p><div class="content"><p>In Android, creating cache files and managing permissions related to file storage are common tasks, especially when you need to store temporary data. Here’s how you can handle creating cache files and manage the necessary permissions:</p>
<ol>
<li>Creating a Cache File<br>  Android provides two main cache storage options:</li>
</ol>
<p>Internal cache directory: Private to your app and doesn’t require any permissions to read or write.<br>External cache directory: Accessible by other apps and the user. Depending on your target API level and Android version, you may need to request permissions.<br>Creating a File in Internal Cache:<br>Here’s how you can create a file in the internal cache directory. This method does not require any special permissions:</p>
<p>kotlin<br>Copy code<br>fun createCacheFile(context: Context, fileName: String): File {<br>&#x2F;&#x2F; Creating a file in the internal cache directory<br>val file &#x3D; File(context.cacheDir, fileName)<br>if (!file.exists()) {<br>file.createNewFile()<br>}<br>return file<br>}<br>Creating a File in External Cache:<br>For external cache files, you might need to check and request permissions, especially on Android versions prior to Android 10 (API level 29). From Android 10 and beyond, scoped storage simplifies permission management.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Copy code</span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">createExternalCacheFile</span><span class="params">(context: <span class="type">Context</span>, fileName: <span class="type">String</span>)</span></span>: File &#123;</span><br><span class="line">    <span class="comment">// Check for the external storage state</span></span><br><span class="line">    <span class="keyword">val</span> externalCacheDir = context.externalCacheDir ?: <span class="keyword">throw</span> IllegalStateException(<span class="string">&quot;External cache is not available&quot;</span>)</span><br><span class="line">    <span class="keyword">val</span> file = File(externalCacheDir, fileName)</span><br><span class="line">    <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">        file.createNewFile()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> file</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>Managing Permissions<br>  For versions before Android 10, if you’re using external storage for anything other than the cache directories, you’ll need to request the following permissions in your AndroidManifest.xml:</li>
</ol>
<p>xml<br>Copy code</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.READ_EXTERNAL_STORAGE&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>Requesting Permissions at Runtime (Android 6.0 and up):<br>You should request permissions at runtime for accessing external storage with API level 23 and above. Here’s a simplified way to request permissions:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Copy code</span><br><span class="line"><span class="keyword">if</span> (ContextCompat.checkSelfPermission(context, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class="line">    ActivityCompat.requestPermissions(activity, arrayOf(Manifest.permission.WRITE_EXTERNAL_STORAGE), REQUEST_CODE)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>In the above code, replace REQUEST_CODE with any integer value that you use to identify the permission request. This code should be called before you perform any operations that require the permission.</p>
<p>Note on Scoped Storage (Android 10+)<br>From Android 10 (API level 29), scoped storage is enforced, which restricts access to broad file paths and requires you to use either the app-specific directories or scoped storage APIs to access files. For temporary files, using the cache directories as shown above usually does not require additional permissions with scoped storage.</p>
<p>This should help you manage cache files and permissions effectively in your Android applications.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-05-14T02:01:38.000Z" title="5/14/2024, 10:01:38 AM">2024-05-14</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-13T21:02:22.000Z" title="9/14/2024, 5:02:22 AM">2024-09-14</time></span><span class="level-item"> Jon </span><span class="level-item"><a class="link-muted" href="/categories/Library/">Library</a></span><span class="level-item">26 minutes read (About 3871 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/05/14/retrofit/">Retrofit</a></p><div class="content"><div class="ez-toc-v2_0_66_1 ez-toc-wrap-right counter-hierarchy ez-toc-counter ez-toc-grey ez-toc-container-direction" id="ez-toc-container"><div class="ez-toc-title-container">Table of Contents

<p><span class="ez-toc-title-toggle"><a href="#"><span class="ez-toc-js-icon-con"><span class><span class="eztoc-hide" style="display:none;">Toggle</span><span class="ez-toc-icon-toggle-span"><svg class="list-377408" fill="none" height="20px" style="fill: #999;color:#999" viewbox="0 0 24 24" width="20px" xmlns="http://www.w3.org/2000/svg"><path d="M6 6H4v2h2V6zm14 0H8v2h12V6zM4 11h2v2H4v-2zm16 0H8v2h12v-2zM4 16h2v2H4v-2zm16 0H8v2h12v-2z" fill="currentColor"/></svg><svg baseprofile="tiny" class="arrow-unsorted-368013" height="10px" style="fill: #999;color:#999" version="1.2" viewbox="0 0 24 24" width="10px" xmlns="http://www.w3.org/2000/svg"><path d="M18.2 9.3l-6.2-6.3-6.2 6.3c-.2.2-.3.4-.3.7s.1.5.3.7c.2.2.4.3.7.3h11c.3 0 .5-.1.7-.3.2-.2.3-.5.3-.7s-.1-.5-.3-.7zM5.8 14.7l6.2 6.3 6.2-6.3c.2-.2.3-.5.3-.7s-.1-.5-.3-.7c-.2-.2-.4-.3-.7-.3h-11c-.3 0-.5.1-.7.3-.2.2-.3.5-.3.7s.1.5.3.7z"/></svg></span></span></span></a></span></p></div><nav>- <a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#Retofit%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB" title="Retofit调用关系">Retofit调用关系</a><p></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#illustrating_interceptor_request_flow" title="illustrating  interceptor request flow">illustrating interceptor request flow</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#Retrofit_VS_Okhttp" title="Retrofit VS  Okhttp">Retrofit VS Okhttp</a><ul>
<li><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#Ease_of_Use" title="Ease of Use:">Ease of Use:</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#Automatic_JSON_Parsing" title="Automatic JSON Parsing:">Automatic JSON Parsing:</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#Annotations" title="Annotations:">Annotations:</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#Interceptors_and_Customization" title="Interceptors and Customization:">Interceptors and Customization:</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#Error_Handling" title="Error Handling:">Error Handling:</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#Scalability" title="Scalability:">Scalability:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#Retrofit%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%EF%BC%8C%E5%9C%A8okhttp%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8B%E5%81%9A%E4%BA%86%E5%93%AA%E4%BA%9B%E5%B0%81%E8%A3%85" title="Retrofit底层实现，在okhttp的基础下做了哪些封装">Retrofit底层实现，在okhttp的基础下做了哪些封装</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#Retrofit%E4%B8%AD%E7%9A%84Call%E5%AF%B9%E8%B1%A1%E5%A6%82%E4%BD%95%E8%BD%AC%E6%8D%A2%E6%88%90okhttp%E7%9A%84call%E5%AF%B9%E8%B1%A1" title="Retrofit中的Call对象如何转换成okhttp的call对象">Retrofit中的Call对象如何转换成okhttp的call对象</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#%E5%9C%A8retrofit%E4%B8%AD%E7%9A%84%E6%B3%9B%E5%9E%8B%E6%98%AF%E6%80%8E%E4%B9%88%E8%A7%A3%E6%9E%90%E7%9A%84" title="在retrofit中的泛型是怎么解析的?">在retrofit中的泛型是怎么解析的?</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#%E4%B8%BA%E4%BB%80%E4%B9%88retrofit%E8%A6%81%E4%BD%BF%E7%94%A8%E8%BF%90%E8%A1%8C%E6%97%B6%E6%B3%A8%E8%A7%A3%EF%BC%9F%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E7%94%A8%E8%BF%90%E8%A1%8C%E6%97%B6%E6%B3%A8%E8%A7%A3%EF%BC%9F" title="为什么retrofit要使用运行时注解？什么时候用运行时注解？">为什么retrofit要使用运行时注解？什么时候用运行时注解？</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#DESIGN_PATTERN" title="DESIGN PATTERN">DESIGN PATTERN</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#static_method_factory" title="static method factory">static method factory</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#Abstract_Factory_method" title="Abstract Factory method">Abstract Factory method</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#Adater_design" title="Adater design">Adater design</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F" title="外观模式">外观模式</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F" title="策略模式">策略模式</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#Retrofit_Rxjava" title="Retrofit Rxjava">Retrofit Rxjava</a><ul>
<li><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#Retrofit%E5%8C%85%E8%A3%85%E7%B1%BB" title="Retrofit包装类">Retrofit包装类</a></li>
</ul>
</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#Retrofit%E6%98%AF%E5%A6%82%E4%BD%95%E5%B0%86%E5%AD%90%E7%BA%BF%E7%A8%8B%E5%88%87%E6%8D%A2%E5%88%B0%E4%B8%BB%E7%BA%BF%E7%A8%8B%EF%BC%9F" title="Retrofit是如何将子线程切换到主线程？">Retrofit是如何将子线程切换到主线程？</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#UML" title="UML">UML</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#implementation" title="implementation">implementation</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#Retrofit_%E6%B3%A8%E8%A7%A3%E6%98%AF%E6%80%8E%E4%B9%88%E6%B6%88%E8%B4%B9%E7%9A%84" title="Retrofit 注解是怎么消费的">Retrofit 注解是怎么消费的</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/retrofit/#Build_Project" title="Build Project">Build Project</a></li>
</ul>
</nav></div># <span class="ez-toc-section" id="Retofit%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB"></span>Retofit调用关系<span class="ez-toc-section-end"></span>

<p><img src="https://raw.githubusercontent.com/BlogForMe/ImageServer/main/Retrofit/5d1ba3a67f83cdc0a03694e431bee4cda35c51a7.png"></p>
<p><img src="https://raw.githubusercontent.com/BlogForMe/ImageServer/main/Retrofit/f2f4fc41e9bde83f0f4ff0f6661a3a3de8a8deed.png"></p>
<h1 id="illustrating-interceptor-request-flow"><a href="#illustrating-interceptor-request-flow" class="headerlink" title="illustrating interceptor request flow"></a><span class="ez-toc-section" id="illustrating_interceptor_request_flow"></span>illustrating interceptor request flow<span class="ez-toc-section-end"></span></h1><p>调用整体流程</p>
<div class="mermaid">
  sequenceDiagram
autonumber

participant SimpleService as Retrofit
participant ProxyClass as BinInterface$0
participant InvocationHandler 
participant ExecutorCallbackCall as RetrofitCall

SimpleService ->> ProxyClass : retrofit.create(IGitHub.class)
ProxyClass ->> InvocationHandler : github.contributors

InvocationHandler ->> ExecutorCallbackCall : h.invoke(this, m3, new Object[]{var1})
Note over InvocationHandler, ExecutorCallbackCall: it invoke in proxyclass <br>  loadServiceMethod(service, method).invoke(proxy, args) 

ExecutorCallbackCall ->> OkHttpCall : retrofit2::call.execute()
OkHttpCall  ->> OkHttpCall : createRaw Okhttp Call
OkHttpCall ->> RealCall : Okhttp Call.execute()
RealCall ->> RealCall: getResponseWithInterceptorChain
Note over RealCall : RetryAndFollowUpInterceptor <br> BridgeInterceptor <br> CacheInterceptor <br> CallServerInterceptor
RealCall -->> OkHttpCall : parseResponse
OkHttpCall -->> SimpleService :  Response Entity
</div>


<ol>
<li>动态代理创建一个接口的代理类,为代理类注入一个回调。</li>
<li>The step cannot check out the source code because it is generated by ProxyGenerator. Invoke the contributors method of the proxy class.</li>
<li>The InvocationHandler parameter, h, is passed in step 1. The object is constructed with var1.newInstance(var2).</li>
<li>In step 3, create an ExecutorCallbackCall object last so that it can invoke retrofit2::execute().</li>
<li>通过反射解析每个接口的注解、入参构造http请求获取到返回的http请求，使用Adapter解析成需要的返回值。</li>
</ol>
<p>  Retrofit 交付请求给OkHttp主要是，OkHttpCall中处理, 组装数据后，请求方式就是OkHttp官方提供的方式了。<br>  请求的body是在这里处理的</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">okhttp3.Request <span class="title function_">create</span><span class="params">(<span class="meta">@Nullable</span> Object instance, Object[] args)</span>  &#123;</span><br><span class="line">handlers[p].apply(requestBuilder, args[p]);</span><br><span class="line"><span class="keyword">return</span> requestBuilder</span><br><span class="line">    .get() <span class="comment">// 组装body和请求</span></span><br><span class="line">      .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Retrofit-VS-Okhttp"><a href="#Retrofit-VS-Okhttp" class="headerlink" title="Retrofit VS Okhttp"></a><span class="ez-toc-section" id="Retrofit_VS_Okhttp"></span>Retrofit VS Okhttp<span class="ez-toc-section-end"></span></h1><h3 id="Ease-of-Use"><a href="#Ease-of-Use" class="headerlink" title="Ease of Use:"></a><span class="ez-toc-section" id="Ease_of_Use"></span>Ease of Use:<span class="ez-toc-section-end"></span></h3><ul>
<li>Retrofit:<br>Provides a high-level API that simplifies the creation and execution of network requests. You define API endpoints using Java interfaces, and Retrofit generates the necessary code to handle these requests.</li>
<li>OkHttp:<br>While powerful, requires more boilerplate code to set up and execute requests. You need to manually construct HTTP requests, handle responses, and parse the results.</li>
</ul>
<h3 id="Automatic-JSON-Parsing"><a href="#Automatic-JSON-Parsing" class="headerlink" title="Automatic JSON Parsing:"></a><span class="ez-toc-section" id="Automatic_JSON_Parsing"></span>Automatic JSON Parsing:<span class="ez-toc-section-end"></span></h3><ul>
<li>Retrofit:<br>Integrates seamlessly with JSON libraries like Gson or Moshi to automatically convert JSON responses into Java objects. This reduces the need for manual parsing and makes the code cleaner and easier to maintain.</li>
<li>OkHttp:<br>Does not include built-in support for JSON parsing, so you need to manually parse JSON responses using a separate library.</li>
</ul>
<h3 id="Annotations"><a href="#Annotations" class="headerlink" title="Annotations:"></a><span class="ez-toc-section" id="Annotations"></span>Annotations:<span class="ez-toc-section-end"></span></h3><ul>
<li>Retrofit:<br>Uses annotations to define request parameters, headers, and endpoints. This makes the code more readable and easier to understand.</li>
<li>OkHttp:<br>Requires manual handling of these aspects, leading to more verbose and error-prone code.</li>
</ul>
<h3 id="Interceptors-and-Customization"><a href="#Interceptors-and-Customization" class="headerlink" title="Interceptors and Customization:"></a><span class="ez-toc-section" id="Interceptors_and_Customization"></span>Interceptors and Customization:<span class="ez-toc-section-end"></span></h3><ul>
<li>Retrofit:<br>Allows for easy integration of OkHttp interceptors to handle logging, authentication, and other concerns. Retrofit itself focuses on simplifying API interactions while allowing OkHttp to handle lower-level HTTP operations.</li>
<li>OkHttp:<br>You can also use interceptors and customize requests, but it requires more effort compared to Retrofit.</li>
</ul>
<h3 id="Error-Handling"><a href="#Error-Handling" class="headerlink" title="Error Handling:"></a><span class="ez-toc-section" id="Error_Handling"></span>Error Handling:<span class="ez-toc-section-end"></span></h3><ul>
<li>Retrofit:<br>Provides built-in support for error handling, including deserialization of error responses and easier differentiation between HTTP error codes.</li>
<li>OkHttp:<br>Requires manual implementation of error handling, which can be more complex and less consistent.</li>
</ul>
<h3 id="Scalability"><a href="#Scalability" class="headerlink" title="Scalability:"></a><span class="ez-toc-section" id="Scalability"></span>Scalability:<span class="ez-toc-section-end"></span></h3><ul>
<li>Retrofit:<br>Ideal for larger projects with multiple API endpoints. The use of interfaces and annotations makes it easier to manage and scale the codebase.</li>
<li>OkHttp:<br>Better suited for simpler or lower-level network tasks where fine-grained control over the HTTP layer is required.</li>
</ul>
<ol>
<li>用户网络请求的借口配置 繁琐， 尤其是需要配置复杂的请求body,请求头，参数的时候。</li>
<li>数据解析过程需要用户手动拿到respponsbody进行解析，不能复用。</li>
<li>无法适配自动进行线程的切换。</li>
</ol>
<h1 id="Retrofit底层实现，在okhttp的基础下做了哪些封装"><a href="#Retrofit底层实现，在okhttp的基础下做了哪些封装" class="headerlink" title="Retrofit底层实现，在okhttp的基础下做了哪些封装"></a><span class="ez-toc-section" id="Retrofit%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%EF%BC%8C%E5%9C%A8okhttp%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8B%E5%81%9A%E4%BA%86%E5%93%AA%E4%BA%9B%E5%B0%81%E8%A3%85"></span>Retrofit底层实现，在okhttp的基础下做了哪些封装<span class="ez-toc-section-end"></span></h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Retrofit在OkHttp的基础上进行了多个层次的封装，主要集中在简化网络请求的创建、执行和响应处理。以下是Retrofit在OkHttp基础上所做的主要封装：</span><br></pre></td></tr></table></figure>

<ul>
<li><p>接口定义和注解：<br>Retrofit允许开发者使用Java接口来定义网络请求。每个接口方法对应一个API端点，并通过注解（如@GET、@POST、@Path、@Query等）来描述请求的类型、路径和参数。<br>这些注解让代码更简洁、易读，避免了手动构建请求所需的冗长代码。</p>
</li>
<li><p>动态代理：<br>Retrofit使用Java的动态代理机制（Proxy类）在运行时生成接口实现。这些实现会将方法调用转换为HTTP请求。<br>通过动态代理，Retrofit能够在开发者调用接口方法时，自动创建并执行相应的OkHttp请求。</p>
</li>
<li><p>请求和响应转换：<br>Retrofit提供了Converter接口，用于将请求体转换为HTTP请求的有效负载（如JSON）以及将HTTP响应转换为Java对象。<br>常见的Converter包括GsonConverter、MoshiConverter和JacksonConverter，方便开发者使用各种JSON库来解析响应。</p>
</li>
<li><p>异步和同步请求：<br>Retrofit支持同步和异步请求。开发者可以选择返回Call<t>对象，并使用enqueue方法进行异步请 求，或者使用execute方法进行同步请求。这种灵活性使得网络请求的处理方式更加丰富和适应不同的需求场景.</t></p>
</li>
<li><p>错误处理:<br>Retrofit内置了对HTTP错误的处理机制，能够方便地捕获和处理HTTP错误状态码和网络异常。<br>开发者可以通过自定义Callback或者配合使用Call对象的Response类，方便地进行错误处理和重试逻辑。</p>
</li>
<li><p>拦截器：<br>虽然OkHttp本身也支持拦截器，Retrofit对其进行了更友好的集成。开发者可以轻松地将OkHttp的拦截器（如日志记录、认证拦截器）添加到Retrofit的配置中。<br>这使得调试和网络请求的管理更加方便。</p>
</li>
<li><p>URL管理：</p>
<p>Retrofit支持在接口方法上通过注解来灵活配置URL参数，路径变量和查询参数。这使得构建复杂的URL变得更加简单和直观。<br>通过注解和参数替换，Retrofit能够动态地生成完整的请求URL。<br>内置协程支持（在Kotlin中）：</p>
</li>
</ul>
<p>对于使用Kotlin的项目，Retrofit提供了对协程的支持，使得网络请求可以以挂起函数的形式实现，简化了异步代码的编写。<br>通过这些封装，Retrofit将OkHttp强大的低级网络功能与高层的API定义和处理结合起来，使得开发者能够更加专注于业务逻辑，而不需要过多关心底层的网络请求细节。</p>
<h1 id="Retrofit中的Call对象如何转换成okhttp的call对象"><a href="#Retrofit中的Call对象如何转换成okhttp的call对象" class="headerlink" title="Retrofit中的Call对象如何转换成okhttp的call对象"></a><span class="ez-toc-section" id="Retrofit%E4%B8%AD%E7%9A%84Call%E5%AF%B9%E8%B1%A1%E5%A6%82%E4%BD%95%E8%BD%AC%E6%8D%A2%E6%88%90okhttp%E7%9A%84call%E5%AF%B9%E8%B1%A1"></span>Retrofit中的Call对象如何转换成okhttp的call对象<span class="ez-toc-section-end"></span></h1><p>Retrofit中有一个OkHttpCall类，它实现了Call接口，并封装了OkHttp的Call对象。创建OkHttp Request对象：</p>
<p>在OkHttpCall类中，createRawCall方法会调用OkHttp的Call.Factory来创建一个新的OkHttp Call对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> okhttp3.Call <span class="title function_">createRawCall</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Request</span> <span class="variable">request</span> <span class="operator">=</span> serviceMethod.toRequest(args);</span><br><span class="line">    <span class="keyword">return</span> serviceMethod.callFactory.newCall(request);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="在retrofit中的泛型是怎么解析的"><a href="#在retrofit中的泛型是怎么解析的" class="headerlink" title="在retrofit中的泛型是怎么解析的?"></a><span class="ez-toc-section" id="%E5%9C%A8retrofit%E4%B8%AD%E7%9A%84%E6%B3%9B%E5%9E%8B%E6%98%AF%E6%80%8E%E4%B9%88%E8%A7%A3%E6%9E%90%E7%9A%84"></span>在retrofit中的泛型是怎么解析的?<span class="ez-toc-section-end"></span></h1><h1 id="为什么retrofit要使用运行时注解？什么时候用运行时注解？"><a href="#为什么retrofit要使用运行时注解？什么时候用运行时注解？" class="headerlink" title="为什么retrofit要使用运行时注解？什么时候用运行时注解？"></a><span class="ez-toc-section" id="%E4%B8%BA%E4%BB%80%E4%B9%88retrofit%E8%A6%81%E4%BD%BF%E7%94%A8%E8%BF%90%E8%A1%8C%E6%97%B6%E6%B3%A8%E8%A7%A3%EF%BC%9F%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E7%94%A8%E8%BF%90%E8%A1%8C%E6%97%B6%E6%B3%A8%E8%A7%A3%EF%BC%9F"></span>为什么retrofit要使用运行时注解？什么时候用运行时注解？<span class="ez-toc-section-end"></span></h1><p>Retrofit使用运行时注解的原因在于其灵活性和动态特性，这使得Retrofit能够在运行时解析接口方法的注解和参数，并根据这些信息动态地构建HTTP请求。下面是Retrofit使用运行时注解的具体原因以及适用场景：</p>
<ol>
<li>灵活的请求配置<br>  运行时注解允许开发者在接口方法上灵活地配置HTTP请求。例如，可以通过注解指定HTTP方法、URL路径、查询参数、请求头等。这种方式 比硬编码请求配置更加灵活和可维护。</li>
</ol>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ApiService</span> &#123;</span><br><span class="line"><span class="meta">@GET(&quot;users/&#123;user&#125;/repos&quot;)</span></span><br><span class="line">Call&lt;list&gt;&gt; listRepos(<span class="meta">@Path(&quot;user&quot;)</span> String user);</span><br><span class="line">&#125;&lt;/list&gt;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>动态解析和生成请求<br>  使用运行时注解，Retrofit可以在运行时解析接口方法的注解，生成相应的请求对象。这个过程包括解析HTTP方法、URL、请求参数等信息， 并动态构建请求。这种动态生成请求的方式相比于编译时生成请求代码，更加灵活且易于修改。</li>
<li>适应多变的API<br>  许多网络API会频繁变化，使用运行时注解可以更容易地适应这些变化。因为注解的解析和请求的生成是在运行时进行的，所以在代码中修改 注解即可应对API的变化，而不需要重新编译代码。</li>
</ol>
<h1 id="DESIGN-PATTERN"><a href="#DESIGN-PATTERN" class="headerlink" title="DESIGN PATTERN"></a><span class="ez-toc-section" id="DESIGN_PATTERN"></span>DESIGN PATTERN<span class="ez-toc-section-end"></span></h1><h2 id="static-method-factory"><a href="#static-method-factory" class="headerlink" title="static method factory"></a><span class="ez-toc-section" id="static_method_factory"></span>static method factory<span class="ez-toc-section-end"></span></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Platform <span class="title function_">findPlatform</span><span class="params">()</span> &#123;</span><br><span class="line"> <span class="keyword">if</span> (isAndroid()) &#123;</span><br><span class="line">   <span class="keyword">return</span> findAndroidPlatform();</span><br><span class="line"> &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> findJvmPlatform();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Abstract-Factory-method"><a href="#Abstract-Factory-method" class="headerlink" title="Abstract Factory method"></a><span class="ez-toc-section" id="Abstract_Factory_method"></span>Abstract Factory method<span class="ez-toc-section-end"></span></h2><p>Retrofit deserializes data using the abstract factory method</p>
<p><img src="https://refactoring.guru/images/patterns/diagrams/abstract-factory/structure.png"></p>
<div class="mermaid">
  classDiagram

  class Factory {
    +requestBodyConverter(): RequestBody
    +responseBodyConverter(): ResponseBody
  }

  class GsonConverterFactory {
    +requestBodyConverter(): GsonRequestBodyConverter
    +responseBodyConverter(): GsonResponseBodyConverter
  }

  class Converter {
    +convert(): T
  }

  class MoshiConverterFactory {
    +requestBodyConverter(): MoshiRequestBodyConverter
    +responseBodyConverter(): MoshiResponseBodyConverter
  }

  class RequestBody {
    +operationA(): void
  }

  class ResponseBody {
    +operationA(): void
  }

  class AbstractProductB {
    +operationB(): void
  }

  class ConcreteProductB1 {
    +operationB(): void
  }

  class ConcreteProductB2 {
    +operationB(): void
  }

  Factory <|-- gsonconverterfactory factory <|-- moshiconverterfactory converter <|..requestbody <|..responsebody *.. requestbody responsebody < div>


<p>invoke steps</p>
<ol>
<li>Retrofit , pass converterFactories &#96;&#96;&#96;java<br>  public Retrofit build() {<br> return new Retrofit(<br>   callFactory,<br>   baseUrl,<br>   unmodifiableList(converterFactories),<br>   defaultConverterFactoriesSize,<br>   unmodifiableList(callAdapterFactories),<br>   defaultCallAdapterFactories.size(),<br>   callbackExecutor,<br>   validateEagerly);<br>  }<br>  }  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">2. execute flow</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">call.execute();</span><br><span class="line"></span><br><span class="line">  @Override</span><br><span class="line">  public Response&lt;t&gt; execute() throws IOException &#123;</span><br><span class="line">    return parseResponse(call.execute());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Response&lt;t&gt; parseResponse(okhttp3.Response rawResponse) throws IOException &#123;</span><br><span class="line">      ExceptionCatchingResponseBody catchingBody = new ExceptionCatchingResponseBody(rawBody);</span><br><span class="line">      T body = responseConverter.convert(catchingBody);</span><br><span class="line"></span><br><span class="line">      return Response.success(body, rawResponse);</span><br><span class="line">  &#125;&lt;/t&gt;&lt;/t&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>CallAdapter.Factory is also an abstract factory method in the Retrofit library.</p>
<h2 id="Adater-design"><a href="#Adater-design" class="headerlink" title="Adater design"></a><span class="ez-toc-section" id="Adater_design"></span>Adater design<span class="ez-toc-section-end"></span></h2><p>In the Adapter design pattern, there are two types: Class Adapter and Object Adapter . 但是在Retrofit中，adater使用和上面两种模式，有点差别.</p>
<p>Call.java 对应 Adaptee</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Call</span>&lt;t&gt; <span class="keyword">extends</span> <span class="title class_">Cloneable</span> &#123; </span><br><span class="line"></span><br><span class="line">  Response&lt;t&gt; <span class="title function_">execute</span><span class="params">()</span> <span class="keyword">throws</span> IOException;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">enqueue</span><span class="params">(Callback&lt;t&gt; callback)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">cancel</span><span class="params">()</span>;</span><br><span class="line">  Request <span class="title function_">request</span><span class="params">()</span>;</span><br><span class="line">&#125;&lt;/t&gt;&lt;/t&gt;&lt;/t&gt;</span><br></pre></td></tr></table></figure>

<p>CallAdapter.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CallAdapter</span>&lt;r t=<span class="string">&quot;&quot;</span>&gt; &#123;</span><br><span class="line"></span><br><span class="line">  Type <span class="title function_">responseType</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">  T <span class="title function_">adapt</span><span class="params">(Call&lt;r&gt; call)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Factory</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="meta">@Nullable</span> CallAdapter, ?&gt; get(</span><br><span class="line">        Type returnType, Annotation[] annotations, Retrofit retrofit);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  DefaultCallAdapterFactory.java</span><br><span class="line">  <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">DefaultCallAdapterFactory</span> <span class="keyword">extends</span> <span class="title class_">CallAdapter</span>.Factory &#123;</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/r&gt;&lt;/r&gt;</span><br></pre></td></tr></table></figure>

<p>Call：Adaptee ， 这个我理解的其实是OkhttpCall，这个OkhttpCall传到适配器中<br>CallAdapter：Target<br>CallAdapter匿名类：Adapter , 这个贴出来就报错，所以没有贴出来。<br>通过adater调用OkhttpCall,所以我理解Adaptee对应的是OkhttpCall</p>
<h2 id="外观模式"><a href="#外观模式" class="headerlink" title="外观模式"></a><span class="ez-toc-section" id="%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F"></span>外观模式<span class="ez-toc-section-end"></span></h2><p>the use of Retrofit library</p>
<h2 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a><span class="ez-toc-section" id="%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F"></span>策略模式<span class="ez-toc-section-end"></span></h2><p>3-28 retrofit面试题：sp跨进程&amp;apply和commit方法</p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6879326343667023879">https://juejin.cn/post/6879326343667023879</a><br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/435a5296ee94">https://www.jianshu.com/p/435a5296ee94</a></p>
<h1 id="Retrofit-Rxjava"><a href="#Retrofit-Rxjava" class="headerlink" title="Retrofit Rxjava"></a><span class="ez-toc-section" id="Retrofit_Rxjava"></span>Retrofit Rxjava<span class="ez-toc-section-end"></span></h1><p><img src="https://raw.githubusercontent.com/BlogForMe/ImageServer/main/Retrofit/e60bb6dbf6f6ec0cb9f6ede98003154818a906f4.png"></p>
<p><img src="https://raw.githubusercontent.com/BlogForMe/ImageServer/main/Retrofit/00e0ce6a69d77c815471a84f7f9eb221a6900951.png"></p>
<h3 id="Retrofit包装类"><a href="#Retrofit包装类" class="headerlink" title="Retrofit包装类"></a><span class="ez-toc-section" id="Retrofit%E5%8C%85%E8%A3%85%E7%B1%BB"></span>Retrofit包装类<span class="ez-toc-section-end"></span></h3><p>Retrofit组装完数据，使用Okhttp进行网络请求的类</p>
<p>OkHttpCall.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">enqueue</span><span class="params">(<span class="keyword">final</span> Callback&lt;T&gt; callback)</span> &#123;</span><br><span class="line">  Objects.requireNonNull(callback, <span class="string">&quot;callback == null&quot;</span>);</span><br><span class="line"></span><br><span class="line">  okhttp3.Call call;</span><br><span class="line">  Throwable failure;</span><br><span class="line">  <span class="keyword">synchronized</span> (<span class="built_in">this</span>) &#123;</span><br><span class="line">    call = rawCall = createRawCall();     <span class="comment">// 创建OkhttpCall</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  call.enqueue(</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">okhttp3</span>.Callback() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onResponse</span><span class="params">(okhttp3.Call call, okhttp3.Response rawResponse)</span> &#123;</span><br><span class="line">          Response&lt;T&gt; response;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            response = parseResponse(rawResponse);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            throwIfFatal(e);</span><br><span class="line">            callFailure(e);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            callback.onResponse(OkHttpCall.<span class="built_in">this</span>, response);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (Throwable t) &#123;</span><br><span class="line">            throwIfFatal(t);</span><br><span class="line">            t.printStackTrace(); <span class="comment">// TODO this is not great</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onFailure</span><span class="params">(okhttp3.Call call, IOException e)</span> &#123;</span><br><span class="line">          callFailure(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">callFailure</span><span class="params">(Throwable e)</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            callback.onFailure(OkHttpCall.<span class="built_in">this</span>, e);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (Throwable t) &#123;</span><br><span class="line">            throwIfFatal(t);</span><br><span class="line">            t.printStackTrace(); <span class="comment">// TODO this is not great</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我还加了了提交Map参数的<a target="_blank" rel="noopener" href="https://gitee.com/huaiyi/RetrofitDemo.git">Demo</a> Demo<br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1mU4y1p71g">https://www.bilibili.com/video/BV1mU4y1p71g</a><br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV12Q4y1d7uD">https://www.bilibili.com/video/BV12Q4y1d7uD</a><br><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/308f3c54abdd">http://www.jianshu.com/p/308f3c54abdd</a><br>这篇文章不错，深入浅出<br><a target="_blank" rel="noopener" href="http://blog.csdn.net/itjianghuxiaoxiong/article/details/52135748">http://blog.csdn.net/itjianghuxiaoxiong/article/details/52135748</a><br><a target="_blank" rel="noopener" href="https://juejin.im/post/5afc1706518825426f30f6ec">https://juejin.im/post/5afc1706518825426f30f6ec</a><br>要实现类似这样的请求,用post方式怎么也不行<br><a target="_blank" rel="noopener" href="https://newsapi.org/v2/top-headlines?sources=financial-times&amp;apiKey=e4f505f73a9f4ee99119ab33a19ab05e">https://newsapi.org/v2/top-headlines?sources=financial-times&amp;apiKey=e4f505f73a9f4ee99119ab33a19ab05e</a></p>
<h1 id="Retrofit是如何将子线程切换到主线程？"><a href="#Retrofit是如何将子线程切换到主线程？" class="headerlink" title="Retrofit是如何将子线程切换到主线程？"></a><span class="ez-toc-section" id="Retrofit%E6%98%AF%E5%A6%82%E4%BD%95%E5%B0%86%E5%AD%90%E7%BA%BF%E7%A8%8B%E5%88%87%E6%8D%A2%E5%88%B0%E4%B8%BB%E7%BA%BF%E7%A8%8B%EF%BC%9F"></span>Retrofit是如何将子线程切换到主线程？<span class="ez-toc-section-end"></span></h1><h2 id="UML"><a href="#UML" class="headerlink" title="UML"></a><span class="ez-toc-section" id="UML"></span>UML<span class="ez-toc-section-end"></span></h2><div class="mermaid">
  sequenceDiagram

RetrofitCall ->> DefaultCallAdapterFactory :  RetrofitCall.enqueue()
DefaultCallAdapterFactory ->> AndroidMainExecutor : callbackExecutor.execute
AndroidMainExecutor -->> DefaultCallAdapterFactory : handler.post(r);
DefaultCallAdapterFactory -->> RetrofitCall : callback.onResponse
</div>


<h2 id="implementation"><a href="#implementation" class="headerlink" title="implementation"></a><span class="ez-toc-section" id="implementation"></span>implementation<span class="ez-toc-section-end"></span></h2><p>在添加默认适配器工厂defaultCallAdapterFactories时，将callbackExecutor作为了一个参数，那么它的具体实现也就是在这个默认适配器工厂中。 我们来看下callbackExecutor在里面做了些啥。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">ExecutorCallbackCall</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Call</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">final</span> Executor callbackExecutor;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">enqueue</span><span class="params">(<span class="keyword">final</span> Callback&lt;T&gt; callback)</span> &#123;</span><br><span class="line">    delegate.enqueue(</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Callback</span>&lt;T&gt;() &#123;</span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onResponse</span><span class="params">(Call&lt;T&gt; call, <span class="keyword">final</span> Response&lt;T&gt; response)</span> &#123;</span><br><span class="line">            callbackExecutor.execute(        <span class="comment">// 这里切换到主线程</span></span><br><span class="line">                () -&gt; &#123;</span><br><span class="line">                    callback.onResponse(ExecutorCallbackCall.<span class="built_in">this</span>, response);</span><br><span class="line">                &#125;);</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onFailure</span><span class="params">(Call&lt;T&gt; call, <span class="keyword">final</span> Throwable t)</span> &#123;</span><br><span class="line">            callbackExecutor.execute(() -&gt; callback.onFailure(ExecutorCallbackCall.<span class="built_in">this</span>, t)); <span class="comment">// 这里切换到主线程</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>在上述代码里了解到，callbackExecutor即Executor，一个线程调度器。在Call的enqueue实现里执行了一个异步网络请求delegate.enqueue，在请求的响应onResponse、onFailure中 Executor也同样执行了一个线程，这里就有个疑问，为什么要在一个异步请求里又调用一个线程？我们知道callbackExecutor是一个线程调度器，那他内部到底实现的是什么？ 默认callbackExecutor的创建在Retrofit的初始化中，callbackExecutor &#x3D; platform.defaultCallbackExecutor();</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Android</span> <span class="keyword">extends</span> <span class="title class_">Platform</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Executor <span class="title function_">defaultCallbackExecutor</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MainThreadExecutor</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">MainThreadExecutor</span> <span class="keyword">implements</span> <span class="title class_">Executor</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Handler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Handler</span>(Looper.getMainLooper());</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">execute</span><span class="params">(Runnable r)</span> &#123;</span><br><span class="line">    handler.post(r);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>platform是一个Android平台，defaultCallbackExecutor 内部其实调用的是 new MainThreadExecutor() ，很清楚的看到， handler.post(r) 内部使用Handler将响应抛到了主线程。</p>
<p>这就是Retrofit将子线程切换到主线程的核心所在。</p>
<p>问3：Retrofit为什么要用动态代理？<br><img src="https://raw.githubusercontent.com/BlogForMe/ImageServer/main/Retrofit/e81f0a50834b2fb1b72fb6b7a2f92ec9ed09d6f1.png"></p>
<p>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37492806/article/details/133995368">https://blog.csdn.net/qq_37492806&#x2F;article&#x2F;details&#x2F;133995368</a></p>
<p>Retrofit结合RxJava 感觉RxJava可以了解下，<br>Retrofit结合courutine 感觉courutine代码不懂，courutine的可以了解下，感觉courutine有先级别更高一点，回来再来画Retrofit其他的类图</p>
<h1 id="Retrofit-注解是怎么消费的"><a href="#Retrofit-注解是怎么消费的" class="headerlink" title="Retrofit 注解是怎么消费的"></a><span class="ez-toc-section" id="Retrofit_%E6%B3%A8%E8%A7%A3%E6%98%AF%E6%80%8E%E4%B9%88%E6%B6%88%E8%B4%B9%E7%9A%84"></span>Retrofit 注解是怎么消费的<span class="ez-toc-section-end"></span></h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">parseMethodAnnotation</span><span class="params">(Annotation annotation)</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (annotation <span class="keyword">instanceof</span> DELETE) &#123;</span><br><span class="line">        parseHttpMethodAndPath(<span class="string">&quot;DELETE&quot;</span>, ((DELETE) annotation).value(), <span class="literal">false</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (annotation <span class="keyword">instanceof</span> GET) &#123;</span><br><span class="line">        parseHttpMethodAndPath(<span class="string">&quot;GET&quot;</span>, ((GET) annotation).value(), <span class="literal">false</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (annotation <span class="keyword">instanceof</span> HEAD) &#123;</span><br><span class="line">        parseHttpMethodAndPath(<span class="string">&quot;HEAD&quot;</span>, ((HEAD) annotation).value(), <span class="literal">false</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (annotation <span class="keyword">instanceof</span> PATCH) &#123;</span><br><span class="line">        parseHttpMethodAndPath(<span class="string">&quot;PATCH&quot;</span>, ((PATCH) annotation).value(), <span class="literal">true</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (annotation <span class="keyword">instanceof</span> POST) &#123;</span><br><span class="line">        parseHttpMethodAndPath(<span class="string">&quot;POST&quot;</span>, ((POST) annotation).value(), <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://github.com/pengMaster/BestNote/blob/master/docs/android/Android-Interview/Android/Android%E9%AB%98%E7%BA%A7%E9%9D%A2%E8%AF%9510%E5%A4%A7%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90.md">https://github.com/pengMaster/BestNote/blob/master/docs/android/Android-Interview/Android/Android%E9%AB%98%E7%BA%A7%E9%9D%A2%E8%AF%9510%E5%A4%A7%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90.md</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/stven0king/designmode?tab=readme-ov-file">https://github.com/stven0king/designmode?tab=readme-ov-file</a></p>
<h1 id="Build-Project"><a href="#Build-Project" class="headerlink" title="Build Project"></a><span class="ez-toc-section" id="Build_Project"></span>Build Project<span class="ez-toc-section-end"></span></h1><p><img src="https://raw.githubusercontent.com/BlogForMe/ImageServer/main/Retrofit/20240618162215.jpg"></p>
</|--></div></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2024-05-14T01:54:42.000Z" title="5/14/2024, 9:54:42 AM">2024-05-14</time></span><span class="level-item">Updated&nbsp;<time dateTime="2024-09-13T21:02:22.000Z" title="9/14/2024, 5:02:22 AM">2024-09-14</time></span><span class="level-item"> Jon </span><span class="level-item"><a class="link-muted" href="/categories/Architecture/">Architecture</a><span> / </span><a class="link-muted" href="/categories/Architecture/DesignPattern/">DesignPattern</a></span><span class="level-item">36 minutes read (About 5403 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2024/05/14/designpattern/">DesignPattern</a></p><div class="content"><div class="ez-toc-v2_0_66_1 ez-toc-wrap-right counter-hierarchy ez-toc-counter ez-toc-grey ez-toc-container-direction" id="ez-toc-container"><div class="ez-toc-title-container">Table of Contents

<p><span class="ez-toc-title-toggle"><a href="#"><span class="ez-toc-js-icon-con"><span class><span class="eztoc-hide" style="display:none;">Toggle</span><span class="ez-toc-icon-toggle-span"><svg class="list-377408" fill="none" height="20px" style="fill: #999;color:#999" viewbox="0 0 24 24" width="20px" xmlns="http://www.w3.org/2000/svg"><path d="M6 6H4v2h2V6zm14 0H8v2h12V6zM4 11h2v2H4v-2zm16 0H8v2h12v-2zM4 16h2v2H4v-2zm16 0H8v2h12v-2z" fill="currentColor"/></svg><svg baseprofile="tiny" class="arrow-unsorted-368013" height="10px" style="fill: #999;color:#999" version="1.2" viewbox="0 0 24 24" width="10px" xmlns="http://www.w3.org/2000/svg"><path d="M18.2 9.3l-6.2-6.3-6.2 6.3c-.2.2-.3.4-.3.7s.1.5.3.7c.2.2.4.3.7.3h11c.3 0 .5-.1.7-.3.2-.2.3-.5.3-.7s-.1-.5-.3-.7zM5.8 14.7l6.2 6.3 6.2-6.3c.2-.2.3-.5.3-.7s-.1-.5-.3-.7c-.2-.2-.4-.3-.7-.3h-11c-.3 0-.5.1-.7.3-.2.2-.3.5-.3.7s.1.5.3.7z"/></svg></span></span></span></a></span></p></div><nav>- <a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Resource" title="Resource">Resource</a><p></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Overview" title="Overview">Overview</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99" title="设计原则">设计原则</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%991-%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A3%E5%8E%9F%E5%88%99" title="设计模式六大原则1-单一职责原则">设计模式六大原则1-单一职责原则</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%992-%E9%87%8C%E6%B0%8F%E6%9B%BF%E6%8D%A2%E5%8E%9F%E5%88%99" title="设计模式六大原则2-里氏替换原则">设计模式六大原则2-里氏替换原则</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%993-%E4%BE%9D%E8%B5%96%E5%80%92%E7%BD%AE%E5%8E%9F%E5%88%99" title="设计模式六大原则3-依赖倒置原则">设计模式六大原则3-依赖倒置原则</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%994-%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%99" title="设计模式六大原则4-接口隔离原则">设计模式六大原则4-接口隔离原则</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%995-%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%99" title="设计模式六大原则5-迪米特法则">设计模式六大原则5-迪米特法则</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%996-%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99" title="设计模式六大原则6-开闭原则">设计模式六大原则6-开闭原则</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC" title="控制反转">控制反转</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Creational_Design_Patterns" title="Creational Design Patterns">Creational Design Patterns</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Singleton" title="Singleton">Singleton</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Factory" title="Factory">Factory</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Prototype_%E5%8E%9F%E5%9E%8B" title="Prototype 原型">Prototype 原型</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Behavioral_Patterns" title="Behavioral Patterns">Behavioral Patterns</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Chain_of_Responsibility" title="Chain of Responsibility">Chain of Responsibility</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Command" title="Command">Command</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Iterator" title="Iterator">Iterator</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Mediator_%E4%B8%AD%E4%BB%8B%E8%80%85" title="Mediator 中介者">Mediator 中介者</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Memento_%E5%A4%87%E5%BF%98%E5%BD%95" title="Memento 备忘录">Memento 备忘录</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Observer" title="Observer">Observer</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#State" title="State">State</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Strategy" title="Strategy">Strategy</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Template_Method" title="Template Method">Template Method</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Visitor" title="Visitor">Visitor</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Structural_%E7%B1%BB%E6%88%96%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%BB%84%E5%90%88%E6%88%96%E7%BB%84%E8%A3%85" title="Structural : 类或对象的组合或组装">Structural : 类或对象的组合或组装</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Adapter" title="Adapter">Adapter</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Proxy" title="Proxy">Proxy</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Bridge" title="Bridge">Bridge</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Decorator" title="Decorator">Decorator</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Facade_%E9%97%A8%E9%9D%A2%E6%A8%A1%E5%BC%8F" title="Facade 门面模式">Facade 门面模式</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Composite_%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F" title="Composite 组合模式">Composite 组合模式</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/05/14/designpattern/#Flayweight_%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F" title="Flayweight 享元模式">Flayweight 享元模式</a></li>
</ul>
</li>
</ul>
</nav></div># <span class="ez-toc-section" id="Resource"></span>Resource<span class="ez-toc-section-end"></span>

<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a><span class="ez-toc-section" id="Overview"></span>Overview<span class="ez-toc-section-end"></span></h2><p><a target="_blank" rel="noopener" href="https://refactoring.guru/design-patterns/abstract-factory">https://refactoring.guru/design-patterns/abstract-factory</a><br><a target="_blank" rel="noopener" href="https://design-patterns.readthedocs.io/zh-cn/latest/behavioral_patterns/behavioral.html">https://design-patterns.readthedocs.io/zh-cn/latest/behavioral_patterns&#x2F;behavioral.html</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/unique_perfect/article/details/109621369">https://blog.csdn.net/unique_perfect&#x2F;article&#x2F;details&#x2F;109621369</a></p>
<p>meituan<br><a target="_blank" rel="noopener" href="https://tech.meituan.com/2022/03/10/interesting-talk-about-design-patterns.html">https://tech.meituan.com/2022/03/10/interesting-talk-about-design-patterns.html</a></p>
<p>列举了视频示例<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/mrhanzhou5273/article/details/119248595">https://blog.csdn.net/mrhanzhou5273/article/details/119248595</a></p>
<p>尚硅谷-Java设计模式<br><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1W4411c77E">https://www.bilibili.com/video/BV1W4411c77E</a><br><a target="_blank" rel="noopener" href="https://github.com/vectorxxxx/NOTE_DesignPatterns">https://github.com/vectorxxxx/NOTE_DesignPatterns</a></p>
<p>23种 <a target="_blank" rel="noopener" href="https://www.cnblogs.com/furenjun/archive/2008/12/28/DesignPatterns1.html">https://www.cnblogs.com/furenjun/archive/2008/12/28/DesignPatterns1.html</a><br><a target="_blank" rel="noopener" href="https://masiyi.blog.csdn.net/article/details/128345543">https://masiyi.blog.csdn.net/article/details/128345543</a><br><a target="_blank" rel="noopener" href="https://www.yuque.com/u22582281/qyidho/bd7d1k#e3c84592">https://www.yuque.com/u22582281/qyidho/bd7d1k#e3c84592</a></p>
<p>画em的图 <a target="_blank" rel="noopener" href="https://github.com/noteforme/noteforme.github.io/blob/main/source/_posts/DesignPatterns_Factory.md">https://github.com/noteforme/noteforme.github.io/blob/main/source/_posts&#x2F;DesignPatterns_Factory.md</a></p>
<h1 id="设计原则"><a href="#设计原则" class="headerlink" title="设计原则"></a><span class="ez-toc-section" id="%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99"></span>设计原则<span class="ez-toc-section-end"></span></h1><h2 id="设计模式六大原则1-单一职责原则"><a href="#设计模式六大原则1-单一职责原则" class="headerlink" title="设计模式六大原则1-单一职责原则"></a><span class="ez-toc-section" id="%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%991-%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A3%E5%8E%9F%E5%88%99"></span>设计模式六大原则1-单一职责原则<span class="ez-toc-section-end"></span></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一个类应该只负责一项职责。</span><br></pre></td></tr></table></figure>

<h2 id="设计模式六大原则2-里氏替换原则"><a href="#设计模式六大原则2-里氏替换原则" class="headerlink" title="设计模式六大原则2-里氏替换原则"></a><span class="ez-toc-section" id="%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%992-%E9%87%8C%E6%B0%8F%E6%9B%BF%E6%8D%A2%E5%8E%9F%E5%88%99"></span>设计模式六大原则2-里氏替换原则<span class="ez-toc-section-end"></span></h2><blockquote>
<p>子类必须实现父类的抽象方法，但不得重写（覆盖）父类的非抽象（已实现）方法，里氏替换原则规定，子类不能覆写父类已实现的方法。父类中已实现的方法其实是一种已定好的规范和契约，如果我们随意的修改了它，那么可能会带来意想不到的错误。</p>
<p>子类完美继承父类的设计初衷，并做了增强</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/cf9f3c7c0df5">https://www.jianshu.com/p/cf9f3c7c0df5</a></p>
<p>里氏替换</p>
<ul>
<li><p>所有使用基类的地方必须能透明的使用其子类。</p>
</li>
<li><p>使用继承时，遵循里氏替换原则，<strong>子类尽量不要重写父类的方法</strong>。继承实际上让两个类耦合性增强了，适当情况下可以通过 聚合 组合 依赖来解决问题。</p>
<p>通用做法是： 原来的父类和子类都继承一个更通俗的基类，原有的继承关系去掉，采用依赖，聚合，组合等关系代替。</p>
</li>
</ul>
<p>之前的方案</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Liskov</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">        System.out.println(<span class="string">&quot;11-3=&quot;</span> + a.func1(<span class="number">11</span>, <span class="number">3</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;1-8=&quot;</span> + a.func1(<span class="number">1</span>, <span class="number">8</span>));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;---------------&quot;</span>);</span><br><span class="line">        <span class="type">B</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">B</span>();</span><br><span class="line">        System.out.println(<span class="string">&quot;11-3=&quot;</span> + b.func1(<span class="number">11</span>, <span class="number">3</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;1-8=&quot;</span> + b.func1(<span class="number">1</span>, <span class="number">8</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;11+3+9=&quot;</span> + b.func2(<span class="number">11</span>, <span class="number">3</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">func1</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> num1 - num2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="comment">//没意识到 重写了该方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">func1</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> num1 + num2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">func2</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> func1(a, b) - <span class="number">9</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>改进后的方案</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Liskov</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">        System.out.println(<span class="string">&quot;11-3=&quot;</span> + a.func1(<span class="number">11</span>, <span class="number">3</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;1-8=&quot;</span> + a.func1(<span class="number">1</span>, <span class="number">8</span>));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;---------------&quot;</span>);</span><br><span class="line">        <span class="type">B</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">B</span>();</span><br><span class="line">        <span class="comment">//因为B类不再继承A类，因此调用者，不会再func1求减法</span></span><br><span class="line">        System.out.println(<span class="string">&quot;11+3=&quot;</span> + b.func1(<span class="number">11</span>, <span class="number">3</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;1+8=&quot;</span> + b.func1(<span class="number">1</span>, <span class="number">8</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;11+3+9=&quot;</span> + b.func2(<span class="number">11</span>, <span class="number">3</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用组合仍然可以使用A类相关方法</span></span><br><span class="line">        System.out.println(<span class="string">&quot;11-3=&quot;</span> + b.func3(<span class="number">11</span>, <span class="number">3</span>));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="keyword">class</span>  <span class="title class_">Base</span>&#123;</span><br><span class="line">    <span class="comment">//把更基础的方法和成员写到Base类中</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> <span class="keyword">extends</span> <span class="title class_">Base</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">func1</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> num1 - num2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_">Base</span> &#123;</span><br><span class="line">    <span class="comment">//如果B需要使用A类的方法，使用组合关系</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">    <span class="comment">//没意识到 重写了该方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">func1</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> num1 + num2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">func2</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> func1(a, b) +<span class="number">9</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">func3</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.a.func1(a,b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="9">
<li>开闭原则 ocp</li>
</ol>
<p>open closed principle</p>
<ul>
<li><p>不适用该原则的方案</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GraphicEditor</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      <span class="type">GraphicEditor</span> <span class="variable">graphicEditor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GraphicEditor</span>();</span><br><span class="line">      graphicEditor.drawShape(<span class="keyword">new</span> <span class="title class_">Rectangle</span>());</span><br><span class="line">      graphicEditor.drawShape(<span class="keyword">new</span> <span class="title class_">Circle</span>());</span><br><span class="line">      graphicEditor.drawShape(<span class="keyword">new</span> <span class="title class_">Triangle</span>());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//添加一个图形需要修改</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawShape</span><span class="params">(Shape s)</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (s.m_type == <span class="number">1</span>)</span><br><span class="line">          drawRectangle(s);</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (s.m_type == <span class="number">2</span>)</span><br><span class="line">          drawCircle(s);</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (s.m_type == <span class="number">3</span>)</span><br><span class="line">          drawTriangle(s);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawCircle</span><span class="params">(Shape s)</span> &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;绘制圆形&quot;</span>);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawRectangle</span><span class="params">(Shape s)</span> &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;绘制矩形&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//添加一个图形需要修改</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">drawTriangle</span><span class="params">(Shape s)</span> &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;绘制三角形&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="type">int</span> m_type;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Rectangle</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="built_in">super</span>.m_type = <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Circle</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="built_in">super</span>.m_type = <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//新增图形</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Triangle</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Triangle</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="built_in">super</span>.m_type = <span class="number">3</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>可以看到改动很多</p>
<ul>
<li>使用ocp原则改进后</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GraphicEditor</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">GraphicEditor</span> <span class="variable">graphicEditor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GraphicEditor</span>();</span><br><span class="line">        graphicEditor.drawShape(<span class="keyword">new</span> <span class="title class_">Rectangle</span>());</span><br><span class="line">        graphicEditor.drawShape(<span class="keyword">new</span> <span class="title class_">Circle</span>());</span><br><span class="line">        graphicEditor.drawShape(<span class="keyword">new</span> <span class="title class_">Triangle</span>());</span><br><span class="line">        graphicEditor.drawShape(<span class="keyword">new</span> <span class="title class_">OtherGraphic</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawShape</span><span class="params">(Shape s)</span> &#123;</span><br><span class="line">        s.drawShape();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> m_type;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">drawShape</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">drawShape</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;绘制矩形&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">drawShape</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;绘制圆形&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Triangle</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">drawShape</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;绘制三角形&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//新增一个图形</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OtherGraphic</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">drawShape</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;新增一个图形&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实现代码没有任何改动</p>
<h2 id="设计模式六大原则3-依赖倒置原则"><a href="#设计模式六大原则3-依赖倒置原则" class="headerlink" title="设计模式六大原则3-依赖倒置原则"></a><span class="ez-toc-section" id="%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%993-%E4%BE%9D%E8%B5%96%E5%80%92%E7%BD%AE%E5%8E%9F%E5%88%99"></span>设计模式六大原则3-依赖倒置原则<span class="ez-toc-section-end"></span></h2><blockquote>
<p>高层模块不应该依赖于底层模块，两者都应该依赖于抽象，<br>抽象不应该依赖于细节，细节应该依赖于抽象<br>依赖倒置的中心思想是<strong>面向接口编程</strong>。</p>
</blockquote>
<h2 id="设计模式六大原则4-接口隔离原则"><a href="#设计模式六大原则4-接口隔离原则" class="headerlink" title="设计模式六大原则4-接口隔离原则"></a><span class="ez-toc-section" id="%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%994-%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%99"></span>设计模式六大原则4-接口隔离原则<span class="ez-toc-section-end"></span></h2><p>接口隔离原则:Clients should not be forced to depend upon interfaces that they do not use.与外部关系上只依赖需要的抽象<br>客户端不应该依赖它不需要的接口，即一个类对另一个类的依赖应该建立在最小的接口上。</p>
<blockquote>
<p>接口隔离原则的关键是接口以及这个接口要小，如何小呢，也就是我们要为专门的类创建专门的接口，这个接口只对它有效，不要试图让一个接口包罗万象，要建立最小的依赖关系</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/dingshuo168/article/details/103531805">https://blog.csdn.net/dingshuo168/article/details/103531805</a></p>
<h2 id="设计模式六大原则5-迪米特法则"><a href="#设计模式六大原则5-迪米特法则" class="headerlink" title="设计模式六大原则5-迪米特法则"></a><span class="ez-toc-section" id="%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%995-%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%99"></span>设计模式六大原则5-迪米特法则<span class="ez-toc-section-end"></span></h2><p>减少依赖 Each unit should have only limited knowledge about other units: only units “closely” related to the current unit. Or: Each unit should only talk to its friends; Don’t talk to strangers</p>
<blockquote>
<p>一个类应该应该对其他类尽可能了解得最少；类只与直接的朋友通信等等。但是其最终目的只有一个，就是让类间解耦。</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://tianweili.github.io/2015/02/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99-%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%99/">https://tianweili.github.io/2015/02/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99-%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%99/</a></p>
<p>迪米特法则</p>
<ul>
<li><p>一个对象应该对其他对象保持最少的了解</p>
</li>
<li><p>Demeter Principle又叫最少知道原则， 即一个类对自己依赖的类知道的越少越好。也就是说，对于被依赖的类不管多么复杂，都尽量将逻辑封装在类的内部。对外出了提供的public方法，不泄漏任何信息</p>
</li>
<li><p>只与直接的朋友通信。</p>
<p>直接的朋友: 每个对象都会与其他对象有耦合关系，只要两个对象之间有耦合关系，我们就说这两个对象之间是朋友关系。耦合的方式很多， 依赖 关联，组合，聚合等。 其中，我们称出现成员变量，方法参数，方法返回值中的类为直接的朋友，而出现在局部变量中的类不是直接的朋友。也就是说，陌生的类最好不要以局部变量的形式出现在类的内部。</p>
</li>
</ul>
<p>​ 改进前</p>
<p>​</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demeter1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">SchoolManager</span> <span class="variable">schoolManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SchoolManager</span>();</span><br><span class="line">        schoolManager.printAllEmployee(<span class="keyword">new</span> <span class="title class_">CollegeManger</span>());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//学校总部员工的类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SchollEmployee</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//学院的员工</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CollegeEmployee</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//管理学院员工的管理类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CollegeManger</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;CollegeEmployee&gt; <span class="title function_">getAllEmployee</span><span class="params">()</span> &#123;</span><br><span class="line">        ArrayList&lt;CollegeEmployee&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="type">CollegeEmployee</span> <span class="variable">collegeEmployee</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CollegeEmployee</span>();</span><br><span class="line">            collegeEmployee.setId(<span class="string">&quot;学院员工id= &quot;</span> + i);</span><br><span class="line">            list.add(collegeEmployee);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// SchollEmployee , CollegeManger 是直接朋友</span></span><br><span class="line"><span class="comment">// CollegeEmployee 不是直接朋友，而是一个陌生类，这样违反了 迪米特法则。</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SchoolManager</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;SchollEmployee&gt; <span class="title function_">getAllEmployee</span><span class="params">()</span> &#123;<span class="comment">//方法返回值:直接朋友</span></span><br><span class="line">        ArrayList&lt;SchollEmployee&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            <span class="type">SchollEmployee</span> <span class="variable">schollEmployee</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SchollEmployee</span>(); <span class="comment">// CollegeEmployee 不是直接朋友，以局部变量出现在SchoolManager</span></span><br><span class="line">            schollEmployee.setId(<span class="string">&quot;学校总部员工id= &quot;</span> + i);</span><br><span class="line">            list.add(schollEmployee);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//该方法完成输出学校总部和学院员工ID</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">printAllEmployee</span><span class="params">(CollegeManger sub)</span> &#123;<span class="comment">//方法参数:直接朋友</span></span><br><span class="line"></span><br><span class="line">        List&lt;CollegeEmployee&gt; list1 = sub.getAllEmployee();</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------学院员工--------&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (CollegeEmployee e : list1) &#123;</span><br><span class="line">            System.out.println(e.getId());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        List&lt;SchollEmployee&gt; list2 = <span class="built_in">this</span>.getAllEmployee();</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------学校总部员工--------&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (SchollEmployee e : list2) &#123;</span><br><span class="line">            System.out.println(e.getId());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>改进后</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demeter2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;使用迪米特法则的改进&quot;</span>);</span><br><span class="line">        <span class="type">SchoolManager</span> <span class="variable">schoolManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SchoolManager</span>();</span><br><span class="line">        schoolManager.printAllEmployee(<span class="keyword">new</span> <span class="title class_">CollegeManger</span>());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//学校总部员工的类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SchollEmployee</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//学院的员工</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CollegeEmployee</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//管理学院员工的管理类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CollegeManger</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;CollegeEmployee&gt; <span class="title function_">getAllEmployee</span><span class="params">()</span> &#123;</span><br><span class="line">        ArrayList&lt;CollegeEmployee&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="type">CollegeEmployee</span> <span class="variable">collegeEmployee</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CollegeEmployee</span>();</span><br><span class="line">            collegeEmployee.setId(<span class="string">&quot;学院员工id= &quot;</span> + i);</span><br><span class="line">            list.add(collegeEmployee);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 输出学院员工的信息</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">printCollegeEmployee</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//改进方法： 将输出学院员工的方法，封装到CollegeManager中。</span></span><br><span class="line">        List&lt;CollegeEmployee&gt; list1 = getAllEmployee();</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------学院员工--------&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (CollegeEmployee e : list1) &#123;</span><br><span class="line">            System.out.println(e.getId());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// SchollEmployee , CollegeManger 是直接朋友</span></span><br><span class="line"><span class="comment">// CollegeEmployee 不是直接朋友，而是一个陌生类，这样违反了 迪米特法则。</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SchoolManager</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;SchollEmployee&gt; <span class="title function_">getAllEmployee</span><span class="params">()</span> &#123;<span class="comment">//方法返回值:直接朋友</span></span><br><span class="line">        ArrayList&lt;SchollEmployee&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            <span class="type">SchollEmployee</span> <span class="variable">schollEmployee</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SchollEmployee</span>(); <span class="comment">// CollegeEmployee 不是直接朋友，以局部变量出现在SchoolManager</span></span><br><span class="line">            schollEmployee.setId(<span class="string">&quot;学校总部员工id= &quot;</span> + i);</span><br><span class="line">            list.add(schollEmployee);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//该方法完成输出学校总部和学院员工ID</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">printAllEmployee</span><span class="params">(CollegeManger sub)</span> &#123;<span class="comment">//方法参数:直接朋友</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">/*</span></span><br><span class="line"><span class="comment">        List&lt;CollegeEmployee&gt; list1 = sub.getAllEmployee();</span></span><br><span class="line"><span class="comment">        System.out.println(&quot;-----------学院员工--------&quot;);</span></span><br><span class="line"><span class="comment">        for (CollegeEmployee e : list1) &#123;</span></span><br><span class="line"><span class="comment">            System.out.println(e.getId());</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">        <span class="comment">//改进方法： 将输出学院员工的方法，封装到CollegeManager中。</span></span><br><span class="line">        sub.printCollegeEmployee();</span><br><span class="line"></span><br><span class="line">        List&lt;SchollEmployee&gt; list2 = <span class="built_in">this</span>.getAllEmployee();</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------学校总部员工--------&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (SchollEmployee e : list2) &#123;</span><br><span class="line">            System.out.println(e.getId());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="设计模式六大原则6-开闭原则"><a href="#设计模式六大原则6-开闭原则" class="headerlink" title="设计模式六大原则6-开闭原则"></a><span class="ez-toc-section" id="%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%996-%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99"></span>设计模式六大原则6-开闭原则<span class="ez-toc-section-end"></span></h2><h2 id="控制反转"><a href="#控制反转" class="headerlink" title="控制反转"></a><span class="ez-toc-section" id="%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC"></span>控制反转<span class="ez-toc-section-end"></span></h2><p>在使用框架之后，整个程序的执行流程通过框架来控制。流程的控制权从程序员“反转”给了框架。</p>
<p>谈一谈自己对依赖、关联、聚合和组合之间区别的理解</p>
<p><a target="_blank" rel="noopener" href="http://blog.itpub.net/69952849/viewspace-2672009/">http://blog.itpub.net/69952849/viewspace-2672009/</a></p>
<h1 id="Creational-Design-Patterns"><a href="#Creational-Design-Patterns" class="headerlink" title="Creational Design Patterns"></a><span class="ez-toc-section" id="Creational_Design_Patterns"></span>Creational Design Patterns<span class="ez-toc-section-end"></span></h1><h2 id="Singleton"><a href="#Singleton" class="headerlink" title="Singleton"></a><span class="ez-toc-section" id="Singleton"></span>Singleton<span class="ez-toc-section-end"></span></h2><h2 id="Factory"><a href="#Factory" class="headerlink" title="Factory"></a><span class="ez-toc-section" id="Factory"></span>Factory<span class="ez-toc-section-end"></span></h2><h2 id="Prototype-原型"><a href="#Prototype-原型" class="headerlink" title="Prototype 原型"></a><span class="ez-toc-section" id="Prototype_%E5%8E%9F%E5%9E%8B"></span>Prototype 原型<span class="ez-toc-section-end"></span></h2><h1 id="Behavioral-Patterns"><a href="#Behavioral-Patterns" class="headerlink" title="Behavioral Patterns"></a><span class="ez-toc-section" id="Behavioral_Patterns"></span>Behavioral Patterns<span class="ez-toc-section-end"></span></h1><h2 id="Chain-of-Responsibility"><a href="#Chain-of-Responsibility" class="headerlink" title="Chain of Responsibility"></a><span class="ez-toc-section" id="Chain_of_Responsibility"></span>Chain of Responsibility<span class="ez-toc-section-end"></span></h2><p>将请求的发送和接收解耦，让多个接收对象都有机会处理这个请求。将这些接收对象串成一条链，并沿着这条链传递这个请求，直到链上的某个接收对象能够处理它为止。</p>
<p><a target="_blank" rel="noopener" href="https://refactoring.guru/design-patterns/chain-of-responsibility">https://refactoring.guru/design-patterns/chain-of-responsibility</a><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1W4411c77E?p=147">https://www.bilibili.com/video/BV1W4411c77E?p=147</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/vectorxxxx/NOTE_DesignPatterns/blob/main/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/22-%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F/README.md">https://github.com/vectorxxxx/NOTE_DesignPatterns&#x2F;blob&#x2F;main&#x2F;%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F&#x2F;22-%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F&#x2F;README.md</a></p>
<div class="mermaid">
  classDiagram
    class Handler{
        + successor :Handler
        + setSuccessor(Handler): void
       + handleRequest(): void
    }

    class ConcreteHandlerA {
        + handleRequest()
    }

    class ConcreteHandlerB {
        + handleRequest()
    }

ConcreteHandlerA --|> Handler
ConcreteHandlerB --|> Handler
Handler o-- Handler

class Client

Client --> Handler
</div>


<p>为请求创建了一个接收者对象的链. 职责链模式通常每个接收者都包含对另一个接收者的引用。如果一个对象不能处理该请求，那么它会把相同的请求传给下一个接收者，依此类推</p>
<p>将这个对象连成一条链，并沿着这条链传递该请求，直到有一个对象处理它为止</p>
<ul>
<li>Handler抽象处理者： 定义了一个处理请求的方法，同时含有另外一个Handler</li>
<li>ConcreteHandler具体处理者： 处理自己负责的请求，同时可以访问它的后继者（即下一个处理者） ；如果可以处理请求，则进行处理，否则交给后继者去处理，从而形成一个职责链</li>
<li>Request含有很多属性，表示一个请求</li>
</ul>
<h2 id="Command"><a href="#Command" class="headerlink" title="Command"></a><span class="ez-toc-section" id="Command"></span>Command<span class="ez-toc-section-end"></span></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">命令模式将请求（命令）封装为一个对象，这样可以使用不同的请求参数化其他对象（将不同请求依赖注入到其他对象），并且能够支持请求（命令）的排队执行、记录日志、撤销等（附加控制）功能</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在策略模式中，不同的策略具有相同的目的、不同的实现、互相之间可以替换。比如，BubbleSort、SelectionSort 都是为了实现排序的，只不过一个是用冒泡排序算法来实现的，另一个是用选择排序算法来实现的。而在命令模式中，不同的命令具有不同的目的，对应不同的处理逻辑，并且互相之间不可替换</p>
<h2 id="Iterator"><a href="#Iterator" class="headerlink" title="Iterator"></a><span class="ez-toc-section" id="Iterator"></span>Iterator<span class="ez-toc-section-end"></span></h2><p>一般会涉及容器 List 和容器迭代器 iterator 两部分内容.</p>
<h2 id="Mediator-中介者"><a href="#Mediator-中介者" class="headerlink" title="Mediator 中介者"></a><span class="ez-toc-section" id="Mediator_%E4%B8%AD%E4%BB%8B%E8%80%85"></span>Mediator 中介者<span class="ez-toc-section-end"></span></h2><p>将一组对象之间的交互关系（或者依赖关系）从多对多（网状关系）转换为一对多（星状关系).</p>
</blockquote>
<h2 id="Memento-备忘录"><a href="#Memento-备忘录" class="headerlink" title="Memento 备忘录"></a><span class="ez-toc-section" id="Memento_%E5%A4%87%E5%BF%98%E5%BD%95"></span>Memento 备忘录<span class="ez-toc-section-end"></span></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这个模式理解、掌握起来不难，代码实现比较灵活，应用场景也比较明确和有限，主要是用来防丢失、撤销、恢复等.</span><br></pre></td></tr></table></figure>

<h2 id="Observer"><a href="#Observer" class="headerlink" title="Observer"></a><span class="ez-toc-section" id="Observer"></span>Observer<span class="ez-toc-section-end"></span></h2><h2 id="State"><a href="#State" class="headerlink" title="State"></a><span class="ez-toc-section" id="State"></span>State<span class="ez-toc-section-end"></span></h2><h2 id="Strategy"><a href="#Strategy" class="headerlink" title="Strategy"></a><span class="ez-toc-section" id="Strategy"></span>Strategy<span class="ez-toc-section-end"></span></h2><p>包含一组策略可选，客户端代码如何选择使用哪个策略，有两种确定方法：编译时静态确定和运行时动态确定。其中，“运行时动态确定”才是策略模式最典型的应用场景。</p>
<blockquote>
<p>类似于面向接口编程,策略模式包含策略的定义、创建和使用三部分，从代码结构上来，它非常像工厂模式。它们的区别在于，策略模式侧重“策略”或“算法”这个特定的应用场景，用来解决根据运行时状态从一组策略中选择不同策略的问题，而工厂模式侧重封装对象的创建过程，这里的对象没有任何业务场景的限定，可以是策略，但也可以是其他东西。从设计意图上来，这两个模式完全是两回事儿</p>
<h2 id="Template-Method"><a href="#Template-Method" class="headerlink" title="Template Method"></a><span class="ez-toc-section" id="Template_Method"></span>Template Method<span class="ez-toc-section-end"></span></h2><p>模板方法模式在一个方法中定义一个算法骨架，并将某些步骤推迟到子类中实现。模板方法模式可以让子类在不改变算法整体结构的情况下，重新定义算法中的某些步骤。</p>
</blockquote>
<p>回调基于组合关系来实现，把一个对象传递给另一个对象，是一种对象之间的关系；模板模式基于继承关系来实现，子类重写父类的抽象方法，是一种类之间的关系。</p>
<h2 id="Visitor"><a href="#Visitor" class="headerlink" title="Visitor"></a><span class="ez-toc-section" id="Visitor"></span>Visitor<span class="ez-toc-section-end"></span></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在不违背封装原则的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态，以便之后恢复对象为先前的状态.</span><br></pre></td></tr></table></figure>

<h1 id="Structural-类或对象的组合或组装"><a href="#Structural-类或对象的组合或组装" class="headerlink" title="Structural : 类或对象的组合或组装"></a><span class="ez-toc-section" id="Structural_%E7%B1%BB%E6%88%96%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%BB%84%E5%90%88%E6%88%96%E7%BB%84%E8%A3%85"></span>Structural : 类或对象的组合或组装<span class="ez-toc-section-end"></span></h1><h2 id="Adapter"><a href="#Adapter" class="headerlink" title="Adapter"></a><span class="ez-toc-section" id="Adapter"></span>Adapter<span class="ez-toc-section-end"></span></h2><p>适配器模式是一种事后的补救策略。适配器提供跟原始类不同的接口，而代理模式、装饰器模式提供的都是跟原始类相同的接口。</p>
<p>类适配器: 通过继承关系</p>
<p>对象适配器：通过组合关系</p>
<h2 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a><span class="ez-toc-section" id="Proxy"></span>Proxy<span class="ez-toc-section-end"></span></h2><p>代理模式在不改变原始类接口的条件下，为原始类定义一个代理类，主要目的是控制访问，而非加强功能，这是它跟装饰器模式最大的不同。</p>
<h2 id="Bridge"><a href="#Bridge" class="headerlink" title="Bridge"></a><span class="ez-toc-section" id="Bridge"></span>Bridge<span class="ez-toc-section-end"></span></h2><p>有两种理解方式。第一种理解方式是“将抽象和实现解耦，让它们能独立开发</p>
<h2 id="Decorator"><a href="#Decorator" class="headerlink" title="Decorator"></a><span class="ez-toc-section" id="Decorator"></span>Decorator<span class="ez-toc-section-end"></span></h2><ol>
<li>装饰器类和原始类继承同样的父类，这样我们可以对原始类“嵌套”多个装饰器类</li>
</ol>
<p>  装饰器类是对功能的<strong>增强</strong>，这也是装饰器模式应用场景的一个重要特点。</p>
<blockquote>
<p>代理模式中，代理类附加的是跟原始类无关的功能，而在装饰器模式中，装饰器类附加的是跟原始类相关的增强功能。</p>
<p>对于为什么必须继承装饰器父类 FilterInputStream的思考：<br>装饰器如BufferedInputStream等，本身并不真正处理read()等方法，而是由构造函数传入的被装饰对象：InputStream（实际上是FileInputStream或者ByteArrayInputStream等对象）来完成的。<br>如果不重写默认的read()等方法，则无法完成如FileInputStream或者ByteArrayInputStream等对象所真正实现的read功能。<br>所以必须重写对应的方法，代理给这些被装饰对象进行处理（这也是类似于代理模式的地方）。<br>如果像DataInputStream和BufferedInputStream等每个装饰器都重写的这些方法话，会存在大量重复的代码。<br>所以让它们都继承FilterInputStream提供的默认实现，可以减少代码重复，让装饰器只聚焦在它自己的装饰功能上即可。</p>
</blockquote>
<p>  <a href="https://noteforme.github.io/2017/09/12/JavaIo/">https://noteforme.github.io/2017/09/12/JavaIo/</a></p>
<h2 id="Facade-门面模式"><a href="#Facade-门面模式" class="headerlink" title="Facade 门面模式"></a><span class="ez-toc-section" id="Facade_%E9%97%A8%E9%9D%A2%E6%A8%A1%E5%BC%8F"></span>Facade 门面模式<span class="ez-toc-section-end"></span></h2><p>门面模式为子系统提供一组统一的接口，定义一组高层接口让子系统更易用。这个定义很简洁，我再进一步解释一下。假设有一个系统 A，提供了 a、b、c、d 四个接口。系统 B 完成某个业务功能，需要调用 A 系统的 a、b、d 接口。利用门面模式，我们提供一个包裹 a、b、d 接口调用的门面接口 x，给系统 B 直接使用</p>
<h2 id="Composite-组合模式"><a href="#Composite-组合模式" class="headerlink" title="Composite 组合模式"></a><span class="ez-toc-section" id="Composite_%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F"></span>Composite 组合模式<span class="ez-toc-section-end"></span></h2><ol>
<li>将一组对象组织（Compose）成树形结构，以表示一种“部分 - 整体”的层次结构。组合让客户端（在很多设计模式书籍中，“客户端”代指代码的使用者。）可以统一单个对象和组合对象的处理逻辑。</li>
</ol>
<blockquote>
<p>组合模式的设计思路，与其说是一种设计模式，倒不如说是对业务场景的一种数据结构和算法的抽象。其中，数据可以表示成树这种数据结构，业务需求可以通过在树上的递归遍历算法来实现。</p>
</blockquote>
<h2 id="Flayweight-享元模式"><a href="#Flayweight-享元模式" class="headerlink" title="Flayweight 享元模式"></a><span class="ez-toc-section" id="Flayweight_%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F"></span>Flayweight 享元模式<span class="ez-toc-section-end"></span></h2><p>如果这些重复的对象是不可变对象，我们就可以利用享元模式将对象设计成享元，在内存中只保留一份实例，供多处代码引用。这样可以减少内存中对象的数量，起到节省内存的目的.</p>
<p>实际上，不仅仅相同对象可以设计成享元，对于相似对象，我们也可以将这些对象中相同的部分（字段）提取出来，设计成享元，让这些大量相似对象引用这些享元。</p>
<blockquote>
<p>思考: 提取相同对象，最终还是要创建相同的数量的对象，只是字段省略了</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/mxg133/learnforJava_DesignPattern">https://github.com/mxg133/learnforJava_DesignPattern</a></p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/3/">Previous</a></div><div class="pagination-next"><a href="/page/5/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li><li><a class="pagination-link" href="/page/3/">3</a></li><li><a class="pagination-link is-current" href="/page/4/">4</a></li><li><a class="pagination-link" href="/page/5/">5</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/25/">25</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Your name"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Your name</p><p class="is-size-6 is-block">Your title</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Your location</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">243</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">30</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">33</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ppoffice" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/ANDROID/"><span class="level-start"><span class="level-item">ANDROID</span></span><span class="level-end"><span class="level-item tag">54</span></span></a></li><li><a class="level is-mobile" href="/categories/Architecture/"><span class="level-start"><span class="level-item">Architecture</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/Architecture/DesignPattern/"><span class="level-start"><span class="level-item">DesignPattern</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/BLE/"><span class="level-start"><span class="level-item">BLE</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/C/"><span class="level-start"><span class="level-item">C++</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/COROUTINE/"><span class="level-start"><span class="level-item">COROUTINE</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Computer-Composition-principles/"><span class="level-start"><span class="level-item">Computer Composition principles</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/DataStructure/"><span class="level-start"><span class="level-item">DataStructure</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/categories/DesignPattern/"><span class="level-start"><span class="level-item">DesignPattern</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/DesignPatterns/"><span class="level-start"><span class="level-item">DesignPatterns</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/ENGLISH/"><span class="level-start"><span class="level-item">ENGLISH</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/INTERVIEW/"><span class="level-start"><span class="level-item">INTERVIEW</span></span><span class="level-end"><span class="level-item tag">9</span></span></a><ul><li><a class="level is-mobile" href="/categories/INTERVIEW/NETWORK/"><span class="level-start"><span class="level-item">NETWORK</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/JAVA/"><span class="level-start"><span class="level-item">JAVA</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li><li><a class="level is-mobile" href="/categories/JETPACK/"><span class="level-start"><span class="level-item">JETPACK</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Jetpack/"><span class="level-start"><span class="level-item">Jetpack</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Kotlin/"><span class="level-start"><span class="level-item">Kotlin</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/categories/LIFE/"><span class="level-start"><span class="level-item">LIFE</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/LINUX/"><span class="level-start"><span class="level-item">LINUX</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Library/"><span class="level-start"><span class="level-item">Library</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Mathematics/"><span class="level-start"><span class="level-item">Mathematics</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/NETWORK/"><span class="level-start"><span class="level-item">NETWORK</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/OS/"><span class="level-start"><span class="level-item">OS</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Organization/"><span class="level-start"><span class="level-item">Organization</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/SOURCE/"><span class="level-start"><span class="level-item">SOURCE</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/TEST/"><span class="level-start"><span class="level-item">TEST</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/TOOL/"><span class="level-start"><span class="level-item">TOOL</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li><li><a class="level is-mobile" href="/categories/VIEW/"><span class="level-start"><span class="level-item">VIEW</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/anim/"><span class="level-start"><span class="level-item">anim</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/flutter/"><span class="level-start"><span class="level-item">flutter</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-07-04T07:57:26.000Z">2024-07-04</time></p><p class="title"><a href="/2024/07/04/DesignPatterns-State/">DesignPatterns_State</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-07-03T05:51:25.000Z">2024-07-03</time></p><p class="title"><a href="/2024/07/03/glide/">glide</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-06-28T09:37:49.000Z">2024-06-28</time></p><p class="title"><a href="/2024/06/28/bitmap/">Bitmap</a></p><p class="categories"><a href="/categories/Computer-Composition-principles/">Computer Composition principles</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-06-28T08:04:14.000Z">2024-06-28</time></p><p class="title"><a href="/2024/06/28/bits-and-bytes/">Bits and Bytes</a></p><p class="categories"><a href="/categories/Computer-Composition-principles/">Computer Composition principles</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-06-26T06:45:50.000Z">2024-06-26</time></p><p class="title"><a href="/2024/06/26/lifecycle/">LifeCycle</a></p><p class="categories"><a href="/categories/JETPACK/">JETPACK</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/07/"><span class="level-start"><span class="level-item">July 2024</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/06/"><span class="level-start"><span class="level-item">June 2024</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/05/"><span class="level-start"><span class="level-item">May 2024</span></span><span class="level-end"><span class="level-item tag">28</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/11/"><span class="level-start"><span class="level-item">November 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/08/"><span class="level-start"><span class="level-item">August 2023</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/04/"><span class="level-start"><span class="level-item">April 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/01/"><span class="level-start"><span class="level-item">January 2023</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/12/"><span class="level-start"><span class="level-item">December 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/10/"><span class="level-start"><span class="level-item">October 2022</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/09/"><span class="level-start"><span class="level-item">September 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/08/"><span class="level-start"><span class="level-item">August 2022</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/07/"><span class="level-start"><span class="level-item">July 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">June 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/05/"><span class="level-start"><span class="level-item">May 2022</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">April 2022</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/03/"><span class="level-start"><span class="level-item">March 2022</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">February 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">January 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">December 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/11/"><span class="level-start"><span class="level-item">November 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">October 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/09/"><span class="level-start"><span class="level-item">September 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">August 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">June 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">May 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">April 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">March 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/02/"><span class="level-start"><span class="level-item">February 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/01/"><span class="level-start"><span class="level-item">January 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/12/"><span class="level-start"><span class="level-item">December 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">November 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">September 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">August 2020</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/07/"><span class="level-start"><span class="level-item">July 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">June 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/04/"><span class="level-start"><span class="level-item">April 2020</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">March 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">November 2019</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/09/"><span class="level-start"><span class="level-item">September 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/08/"><span class="level-start"><span class="level-item">August 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/07/"><span class="level-start"><span class="level-item">July 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/06/"><span class="level-start"><span class="level-item">June 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/04/"><span class="level-start"><span class="level-item">April 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/03/"><span class="level-start"><span class="level-item">March 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/01/"><span class="level-start"><span class="level-item">January 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/11/"><span class="level-start"><span class="level-item">November 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/08/"><span class="level-start"><span class="level-item">August 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/07/"><span class="level-start"><span class="level-item">July 2018</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/06/"><span class="level-start"><span class="level-item">June 2018</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/05/"><span class="level-start"><span class="level-item">May 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/04/"><span class="level-start"><span class="level-item">April 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/03/"><span class="level-start"><span class="level-item">March 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/02/"><span class="level-start"><span class="level-item">February 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/01/"><span class="level-start"><span class="level-item">January 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/12/"><span class="level-start"><span class="level-item">December 2017</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/11/"><span class="level-start"><span class="level-item">November 2017</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/10/"><span class="level-start"><span class="level-item">October 2017</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/09/"><span class="level-start"><span class="level-item">September 2017</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/08/"><span class="level-start"><span class="level-item">August 2017</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/07/"><span class="level-start"><span class="level-item">July 2017</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/ANDROID/"><span class="tag">ANDROID</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AOSP/"><span class="tag">AOSP</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Activity/"><span class="tag">Activity</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AndroidNewFeatures/"><span class="tag">AndroidNewFeatures</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Assembly/"><span class="tag">Assembly</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BLOG/"><span class="tag">BLOG</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ConstraintLayout/"><span class="tag">ConstraintLayout</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DB/"><span class="tag">DB</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DesignPattern/"><span class="tag">DesignPattern</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Drawer/"><span class="tag">Drawer</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Fragment/"><span class="tag">Fragment</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JVM/"><span class="tag">JVM</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LEETCODE/"><span class="tag">LEETCODE</span><span class="tag">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Library/"><span class="tag">Library</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Operators/"><span class="tag">Operators</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Performance/"><span class="tag">Performance</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RecyclerView/"><span class="tag">RecyclerView</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RxJava/"><span class="tag">RxJava</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/THINK/"><span class="tag">THINK</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TOOL/"><span class="tag">TOOL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TabLayout/"><span class="tag">TabLayout</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Test/"><span class="tag">Test</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TouchEvent/"><span class="tag">TouchEvent</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VIEW/"><span class="tag">VIEW</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/XML/"><span class="tag">XML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/anim/"><span class="tag">anim</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/compose/"><span class="tag">compose</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/concurrency/"><span class="tag">concurrency</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/coroutie/"><span class="tag">coroutie</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/inter/"><span class="tag">inter</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/keyboard/"><span class="tag">keyboard</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/permission/"><span class="tag">permission</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/proguard/"><span class="tag">proguard</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="Jon&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2024 Jon</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>