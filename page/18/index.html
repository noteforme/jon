<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Jon&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  
  
    <link rel="alternate" href="/atom.xml" title="Jon's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="/localshare/css/share.css">

  
  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Jon&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Cease to struggle and you cease to live. - Thomas Carlyle</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/."><i class="fa fa-home"></i> Home</a>
        
          <a class="main-nav-link" href="/archives/"><i class="fa fa-archive"></i> Archive</a>
        
          <a class="main-nav-link" href="/about/"><i class="fa fa-user"></i> About</a>
        
          <a class="main-nav-link" href="/atom.xml"><i class="fa fa-rss"></i> RSS</a>
        
      </nav>
    </div>
    <div id="search-form">
      <div id="result-mask" class="hide"></div>
      <label><input id="search-key" type="text" autocomplete="off" placeholder="search"></label>
      <div id="result-wrap" class="hide">
        <div id="search-result"></div>
      </div>
      <div class="hide">
        <template id="search-tpl">
          <div class="item">
            <a href="/{path}" title="{title}">
              <div class="title">{title}</div>
              <div class="time">{date}</div>
              <div class="tags">{tags}</div>
            </a>
          </div>
        </template>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  <article id="post-background_draw" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/11/03/background_draw/">background_draw (背景图形绘制)</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-11-03T01:59:57.000Z" itemprop="datePublished">2017年11月03日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/VIEW/">VIEW</a>
  </div>

      
      
<a href="/2017/11/03/background_draw/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p> ** 为了提高App性能，经常会用到代码写背景 **</p>
<h4 id="基本属性"><a href="#基本属性" class="headerlink" title="基本属性"></a>基本属性</h4><ul>
<li><p>solid : 　填充内容</p>
</li>
<li><p>stroke:   绘制边框</p>
<p>代码里设置颜色  <code>Color.parseColor(&quot;#fa6d62&quot;)</code></p>
</li>
</ul>
<h5 id="点击选中状态"><a href="#点击选中状态" class="headerlink" title="点击选中状态"></a>点击选中状态</h5><ul>
<li>android:state_pressed 是否按下，如一个按钮触摸或者点击。</li>
<li>android:state_focused 是否取得焦点，比如用户选择了一个文本框。</li>
<li> android:state_hovered 光标是否悬停，通常与focused state相同，它是4.0的新特性 </li>
<li>android:state_selected 被选中，它与focus state并不完全一样，如一个list view 被选中的时候，它里面的各个子组件可能通过方向键，被选中了。 </li>
<li>android:state_checkable 组件是否能被check。如：RadioButton是可以被check的。 android:state_checked 被checked了，如：一个RadioButton可以被check了。</li>
<li> android:state_enabled 能够接受触摸或者点击事件 android:state_activated 被激活(这个麻烦举个例子，不是特明白) android:state_window_focused 应用程序是否在前台，当有通知栏被拉下来或者一个对话框弹出的时候应用程序就不在前台了 </li>
</ul>
<p>注意:如果有多个item，那么程序将自动从上到下进行匹配，最先匹配的将得到应用。（不是通过最佳匹配） 如果一个item没有任何的状态说明，那么它将可以被任何一个状态匹配。 </p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/yinbucheng/article/details/52922759">https://blog.csdn.net/yinbucheng/article/details/52922759</a></p>
<p>seleced用于单选，checked用于多选,</p>
<p>selected是选择很多项，但是只取当前的项，即最后一个选中的</p>
<p>checked是选中很多项，都选中。</p>
<h1 id="shape-layer-list-selector"><a href="#shape-layer-list-selector" class="headerlink" title="shape  layer-list    selector"></a>shape  layer-list    selector</h1><h5 id="设置Button按钮背景"><a href="#设置Button按钮背景" class="headerlink" title="设置Button按钮背景"></a>设置Button按钮背景</h5><p><img src="/2017/11/03/background_draw/bg_login.png" alt="登录背景"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">&quot;20dp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 边框的颜色--&gt;</span></span><br><span class="line">    &lt;stroke</span><br><span class="line">        android:width=&quot;2dp&quot;</span><br><span class="line">        android:color=&quot;#009cff&quot; /&gt;</span><br><span class="line">    <span class="comment">&lt;!--填充的颜色 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;@android:color/transparent&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="shape"><a href="#shape" class="headerlink" title="shape"></a>shape</h5><pre><code>    &lt;shape android:shape=&quot;rectangle&quot;&gt; 
        &lt;solid android:color=&quot;#2e97f3&quot; /&gt;       //填充颜色
        &lt;stroke
            android:width=&quot;2dp&quot;                 //描边宽度
            android:color=&quot;#2e97f3&quot; /&gt;          //描边颜色
    &lt;/shape&gt;
</code></pre>
<h5 id="layer-list"><a href="#layer-list" class="headerlink" title="layer-list"></a>layer-list</h5><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;
 &lt;item&gt;
    &lt;shape android:shape=&quot;rectangle&quot;&gt;
        &lt;solid android:color=&quot;#2e97f3&quot; /&gt;
        &lt;stroke
            android:width=&quot;2dp&quot;
            android:color=&quot;#2e97f3&quot; /&gt;
    &lt;/shape&gt;
&lt;/item&gt;

&lt;item android:top=&quot;50dp&quot;&gt;
    &lt;shape android:shape=&quot;rectangle&quot;&gt;
        &lt;solid android:color=&quot;@android:color/holo_green_dark&quot; /&gt;
        &lt;padding android:left=&quot;50dp&quot;/&gt;
    &lt;/shape&gt;
&lt;/item&gt;

&lt;item android:top=&quot;100dp&quot;&gt;
    &lt;shape android:shape=&quot;rectangle&quot;&gt;
        &lt;solid android:color=&quot;@android:color/holo_orange_light&quot; /&gt;
    &lt;/shape&gt;
&lt;/item&gt;
&lt;/layer-list&gt;
</code></pre>
<p><img src="/2017/11/03/background_draw/bg_layer.png" alt="图层显示"></p>
<p>LayerDrawable 是管理其他可绘制对象阵列的可绘制对象。列表中的每个可绘制对象按照列表的顺序绘制，列表中的最后一个可绘制对象绘于顶部。每个可绘制对象由单一 元素内的 元素表示。我们需要注意的是layer-list中有item的先后顺序会影响展示效果，不同顺序的效果可能大相径庭，因为，后面的item总是在之前的item之上并覆盖显示。</p>
<h4 id="selector"><a href="#selector" class="headerlink" title="selector"></a>selector</h4><ul>
<li>底部选择器</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_selected</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layer-list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">android:color</span>=<span class="string">&quot;#2e97f3&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:bottom</span>=<span class="string">&quot;5dp&quot;</span> <span class="attr">android:drawable</span>=<span class="string">&quot;@color/white&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layer-list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">color</span> <span class="attr">android:color</span>=<span class="string">&quot;#2e97f3&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">&quot;@color/white&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>参考 <a target="_blank" rel="noopener" href="https://keeganlee.me/post/android/20150909">https://keeganlee.me/post/android/20150909</a></p>
<ul>
<li>背景选择器</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">&quot;@drawable/bg_circle_tab_yellow&quot;</span> <span class="attr">android:state_selected</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">&quot;@drawable/bg_circle_tab_gray&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>字体颜色选择器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:color</span>=<span class="string">&quot;@color/white&quot;</span> <span class="attr">android:state_selected</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:color</span>=<span class="string">&quot;#999999&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>后面的item在之前的item上显示，所有前面设置的padding,后面叠加形成图层</strong></p>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/xiehuimx/article/details/70242676">http://blog.csdn.net/xiehuimx/article/details/70242676</a><br><a target="_blank" rel="noopener" href="https://developer.android.com/guide/topics/resources/drawable-resource.html#Transition">https://developer.android.com/guide/topics/resources/drawable-resource.html#Transition</a></p>
<h1 id="首页阴影效果"><a href="#首页阴影效果" class="headerlink" title="首页阴影效果"></a>首页阴影效果</h1><h2 id="office"><a href="#office" class="headerlink" title="office"></a>office</h2><p>前端时间一直找这种资料，效果一直不如意，不得已用了图片，真是　踏破铁鞋无觅处<br><a target="_blank" rel="noopener" href="https://developer.android.com/training/material/shadows-clipping.html">https://developer.android.com/training/material/shadows-clipping.html</a></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">	<span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:shape</span>=<span class="string">&quot;rectangle&quot;</span>&gt;</span></span><br><span class="line">    &lt;stroke</span><br><span class="line">        android:width=&quot;1dp&quot;</span><br><span class="line">        android:color=&quot;#f9fafc&quot; /&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">&quot;2dp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;@color/white&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p> 不过这种方法还是差强人意</p>
<h2 id="another"><a href="#another" class="headerlink" title="another"></a>another</h2><p>可以试试下面这种方式　<br><a target="_blank" rel="noopener" href="http://blog.csdn.net/u011421608/article/details/51923812">http://blog.csdn.net/u011421608/article/details/51923812</a><br><a target="_blank" rel="noopener" href="http://yifeng.studio/2017/02/26/android-elevation-and-shadow/">http://yifeng.studio/2017/02/26/android-elevation-and-shadow/</a></p>
<h1 id="画虚线"><a href="#画虚线" class="headerlink" title="画虚线"></a>画虚线</h1><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
 android:shape=&quot;line&quot;&gt;
&lt;!-- jon  虚线--&gt;
&lt;size android:height=&quot;1dp&quot; /&gt;
&lt;stroke
    android:width=&quot;1dp&quot;
    android:color=&quot;@color/white&quot;
    android:dashGap=&quot;2dp&quot;
    android:dashWidth=&quot;4dp&quot; /&gt;

&lt;!-- dashwidth是指- - -中每一个-的宽度--&gt;
&lt;!-- dashGap是指虚线中每一个间隔的宽度 --&gt;
</code></pre>
   

<ul>
<li>height比height高  关闭硬件加速   android:layerType=”software”</li>
</ul>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;View</span><br><span class="line">    android:<span class="attribute">layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:<span class="attribute">layout_height</span>=<span class="string">&quot;10dp&quot;</span></span><br><span class="line">    android:<span class="attribute">layout_below</span>=<span class="string">&quot;@+id/rl_time_day&quot;</span></span><br><span class="line">    android:<span class="attribute">background</span>=<span class="string">&quot;@drawable/bg_dash_line&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>参考：<br>  <a target="_blank" rel="noopener" href="https://lianyuchen.github.io/2017/05/09/%E5%85%B3%E4%BA%8Eshape%E7%94%BB%E8%99%9A%E7%BA%BF/">https://lianyuchen.github.io/2017/05/09/%E5%85%B3%E4%BA%8Eshape%E7%94%BB%E8%99%9A%E7%BA%BF/</a><br>  <a target="_blank" rel="noopener" href="http://www.jianshu.com/p/75cc93195f7a?from=jiantop.com">http://www.jianshu.com/p/75cc93195f7a?from=jiantop.com</a></p>
<p>  <a target="_blank" rel="noopener" href="https://keeganlee.me/post/android/20150909">https://keeganlee.me/post/android/20150909</a></p>
<h4 id="LinearLayout默认横线"><a href="#LinearLayout默认横线" class="headerlink" title="LinearLayout默认横线"></a>LinearLayout默认横线</h4><ul>
<li><pre><code>android:divider=&quot;@drawable/shape_line
android:dividerPadding=&quot;@dimen/dimen_15&quot;

<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">* shape_line.xml</span><br><span class="line"></span><br></pre></td></tr></table></figure>
&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;
    &lt;solid android:color=&quot;@color/line_color&quot; /&gt;
    &lt;size android:height=&quot;0.5dp&quot; /&gt;
&lt;/shape&gt;
</code></pre>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/BingShuShu/article/details/51444206">https://blog.csdn.net/BingShuShu/article/details/51444206</a></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/18/index.html">https://noteforme.github.io/page/18/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Resource" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/21/Resource/">Resource</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-21T00:53:39.000Z" itemprop="datePublished">2017年10月21日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/TOOL/">TOOL</a>
  </div>

      
      
<a href="/2017/10/21/Resource/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ColorInt 表明该参数、变量或者函数返回值应该是一个颜色值而不是颜色资源引用，例如应该是一个 AARRGGBB 的整数值。</span><br><span class="line">@ColorRes 表明该参数、变量或者函数返回值应该是一个 color 类型的资源，而不是颜色值。注意和 ColorInt 区别</span><br></pre></td></tr></table></figure>

<p>ColorInt: Color.Red  和R.color.refrence是有区别的</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/2edbd53fa7b0">https://www.jianshu.com/p/2edbd53fa7b0</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/ziwang_/article/details/70513932">https://blog.csdn.net/ziwang_/article/details/70513932</a></p>
<p>有时候想写点东西　苦于没有素材</p>
<p><a target="_blank" rel="noopener" href="https://icons8.com/">https://icons8.com/</a><br><a target="_blank" rel="noopener" href="http://www.iconfont.cn/">http://www.iconfont.cn</a></p>
<p><a target="_blank" rel="noopener" href="https://icomoon.io/">https://icomoon.io/</a><br><a target="_blank" rel="noopener" href="http://fontello.com/">http://fontello.com/</a></p>
<p>也可以导入矢量图<br><a target="_blank" rel="noopener" href="https://developer.android.com/studio/write/vector-asset-studio.html?hl=zh-cn">https://developer.android.com/studio/write/vector-asset-studio.html?hl=zh-cn</a></p>
<p><a target="_blank" rel="noopener" href="https://material.io/icons/">https://material.io/icons/</a>  官方图</p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/18/index.html">https://noteforme.github.io/page/18/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Git_SSKEY" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/19/Git_SSKEY/">GIT_SSHKEY</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-19T01:28:15.000Z" itemprop="datePublished">2017年10月19日</time>
</span>
      
      
      
<a href="/2017/10/19/Git_SSKEY/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4><p><a target="_blank" rel="noopener" href="http://skypegnu1.blog.51cto.com/8991766/1641064">http://skypegnu1.blog.51cto.com/8991766/1641064</a></p>
<h5 id="多平台配置SSH"><a href="#多平台配置SSH" class="headerlink" title="多平台配置SSH"></a>多平台配置SSH</h5><p>正常情况会哟几个平台的配置情况,ssh操作方式</p>
<h5 id="用户信息设置"><a href="#用户信息设置" class="headerlink" title="用户信息设置"></a>用户信息设置</h5><p>在config后加上 –global 即可全局设置用户名和邮箱，否则就是局部的。有时候用手输入才有用</p>
<blockquote>
<p> $ git config –global user.name “John Doe”<br> $ git config –global user.email <a href="mailto:&#x6a;&#111;&#104;&#x6e;&#100;&#111;&#x65;&#x40;&#x65;&#120;&#97;&#109;&#x70;&#108;&#101;&#x2e;&#x63;&#x6f;&#109;">&#x6a;&#111;&#104;&#x6e;&#100;&#111;&#x65;&#x40;&#x65;&#120;&#97;&#109;&#x70;&#108;&#101;&#x2e;&#x63;&#x6f;&#109;</a></p>
</blockquote>
<p>　　检查配置信息　<code>git config --list</code></p>
<h4 id="生成sshkey"><a href="#生成sshkey" class="headerlink" title="生成sshkey"></a>生成sshkey</h4><p>如果视其他平台生成时就要修改名称了</p>
<blockquote>
<p>ssh-keygen -t rsa -b 4096 -C “<a href="mailto:&#x79;&#111;&#x75;&#x72;&#x5f;&#101;&#x6d;&#x61;&#x69;&#x6c;&#x40;&#x65;&#120;&#97;&#109;&#x70;&#x6c;&#x65;&#46;&#x63;&#111;&#109;">&#x79;&#111;&#x75;&#x72;&#x5f;&#101;&#x6d;&#x61;&#x69;&#x6c;&#x40;&#x65;&#120;&#97;&#109;&#x70;&#x6c;&#x65;&#46;&#x63;&#111;&#109;</a>“<br>Enter file in which to save the key (/home/jon/.ssh/id_rsa): /home/jon/.ssh/id_rsa.Oschina<br>cat ~/.ssh/id_rsa.li | clip</p>
</blockquote>
<p>Adding your SSH key to the ssh-agent</p>
<p>start the ssh-agent in the background</p>
<pre><code>  $ eval $(ssh-agent -s)
    Agent pid 59566
  $ ssh-add ~/.ssh/id_rsa.li
</code></pre>
<p>gitbash下把生成的id_rsa.pub 添加到sshkey</p>
<p>oschina 测试连接：<code>$ ssh -T git@git.oschina.net</code>　　</p>
<p>github 测试连接:    <code> $ ssh -T git@github.com</code><br>如果出现:</p>
<blockquote>
<p>Hi username! You’ve successfully authenticated, but GitHub does not<br> provide shell access.<br> 配置成功</p>
</blockquote>
<h5 id="不同平台-不同的rsa-key"><a href="#不同平台-不同的rsa-key" class="headerlink" title="不同平台　不同的rsa.key"></a>不同平台　不同的rsa.key</h5><p>　我前面的key重新命名，clone项目还是有问题</p>
<p>  解决方法: 在 .ssh目录下　新建config文件 添加</p>
<blockquote>
<p>  Host github<br>    HostName github.com<br>    User Jon<br>    IdentityFile ~/.ssh/id_rsa.li</p>
</blockquote>
<h5 id="不同的平台，相同的rsa-key-推荐"><a href="#不同的平台，相同的rsa-key-推荐" class="headerlink" title="不同的平台，相同的rsa.key (推荐)"></a>不同的平台，相同的rsa.key (推荐)</h5><p>复制id_rsa.pub填入</p>
<blockquote>
<p>clip &lt; ~/.ssh/id_rsa.pub</p>
</blockquote>
<p>参考：<br>github生成方式<br><a target="_blank" rel="noopener" href="https://help.github.com/articles/about-ssh/">https://help.github.com/articles/about-ssh/</a></p>
<p>gitlab生成方式<br><a target="_blank" rel="noopener" href="https://gitlab.com/help/ssh/README">https://gitlab.com/help/ssh/README</a></p>
<p>oschina方式:<br><a target="_blank" rel="noopener" href="http://git.mydoc.io/?t=154712">http://git.mydoc.io/?t=154712</a></p>
<p>gogs:参考github,配置sskey后还需要用账号登陆</p>
<h5 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h5><ol>
<li> 类似下面错误使用　git push -u origin master</li>
</ol>
<p>   <code>git push -f origin master</code></p>
<blockquote>
<p>! [rejected]        master -&gt; master (fetch first)<br>error: failed to push some refs to ‘<a target="_blank" rel="noopener" href="https://github.com/aniruddhabarapatre/learn-rails.git&#39;">https://github.com/aniruddhabarapatre/learn-rails.git&#39;</a><br>hint: Updates were rejected because the remote contains work that you do<br>hint: not have locally. This is usually caused by another repository pushing</p>
</blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/20939648/issue-pushing-new-code-in-github">https://stackoverflow.com/questions/20939648/issue-pushing-new-code-in-github</a></p>
<ol start="2">
<li>生成key时，我改成了　id_rsaOschina<br> android studio 最后push 时<br> authentication id_rsaOschina　using key failed报错<br> 方法: AndroidStudio -&gt; File -&gt; Settings -&gt;Git -&gt; SSH executable : built-in 改成Native</li>
</ol>
<p>参考:<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/24688700/android-studio-push-failed-fatal-could-not-read-from-remote-repository">https://stackoverflow.com/questions/24688700/android-studio-push-failed-fatal-could-not-read-from-remote-repository</a></p>
<h5 id="GitHub-CLI-配置"><a href="#GitHub-CLI-配置" class="headerlink" title="GitHub CLI  配置"></a>GitHub CLI  配置</h5><p> 在windows平台 <code>git auth login</code> 授权    要用windows命令行工具。 </p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/18/index.html">https://noteforme.github.io/page/18/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/" rel="tag">Git</a></li></ul>

          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Git-BRANCH" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/19/Git-BRANCH/">GIT_BRANCH</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-19T01:24:09.000Z" itemprop="datePublished">2017年10月19日</time>
</span>
      
      
      
<a href="/2017/10/19/Git-BRANCH/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>官方文档<br><a target="_blank" rel="noopener" href="https://git-scm.com/book/en/v2">https://git-scm.com/book/en/v2</a><br><a target="_blank" rel="noopener" href="http://iissnan.com/progit/">http://iissnan.com/progit/</a></p>
<h4 id="Git基本操作"><a href="#Git基本操作" class="headerlink" title="Git基本操作"></a>Git基本操作</h4><h5 id="github上传项目"><a href="#github上传项目" class="headerlink" title="github上传项目"></a>github上传项目</h5><ul>
<li> 分支创建</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git branch Dev1.10 </span><br><span class="line">git push origin Dev1.10 　　　&#x2F;&#x2F; 提交该分支到远程仓库</span><br><span class="line">git pull origin dev          &#x2F;&#x2F;从远程获取分支</span><br><span class="line">      </span><br></pre></td></tr></table></figure>

<ul>
<li> 下面是对已有项目的提交</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mkdir EffectiveJava</span><br><span class="line">cd EffectiveJava</span><br><span class="line">git init</span><br><span class="line">touch README.md</span><br><span class="line">git add README.md</span><br><span class="line">git commit -m &quot;first commit&quot;</span><br><span class="line">git remote add origin git@gitee.com:huaiyi&#x2F;EffectiveJava.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>

<p>分支提交到远程仓库<br><code>$ git push origin v1.0.0 </code></p>
<ul>
<li><p>commit</p>
<p>Git撤销git commit 但是未git push的修改</p>
<ol>
<li><p>找到上次git commit的 id</p>
<p>  git log </p>
<p>  找到你想撤销的commit_id</p>
</li>
<li><p>git reset –hard commit_id</p>
<pre><code>完成撤销,同时将代码恢复到前一commit_id 对应的版本。
</code></pre>
</li>
<li><p>git reset commit_id </p>
<p>  完成Commit命令的撤销，但是不对代码修改进行撤销，可以直接通过git commit 重新提交对本地代码的修改。</p>
</li>
</ol>
</li>
</ul>
<p> <a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%AE%80%E4%BB%8B">git分支简介</a><br> <a target="_blank" rel="noopener" href="http://blog.csdn.net/hyr83960944/article/details/36185231">http://blog.csdn.net/hyr83960944/article/details/36185231</a></p>
<p>合并分支<br>合并hotfix到dev</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout            &#x2F;&#x2F; 先切换到dev </span><br><span class="line">$ git merge hotfix</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%9A%84%E6%96%B0%E5%BB%BA%E4%B8%8E%E5%90%88%E5%B9%B6">合并分支</a></p>
<h5 id="获取本地没有的远程分支"><a href="#获取本地没有的远程分支" class="headerlink" title="获取本地没有的远程分支"></a>获取本地没有的远程分支</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -r #查看远程分支  或 git branch -a #查看所有分支</span><br></pre></td></tr></table></figure>

<p>会显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">origin&#x2F;HEAD -&gt; origin&#x2F;master</span><br><span class="line">origin&#x2F;daily&#x2F;1.2.2</span><br><span class="line">origin&#x2F;daily&#x2F;1.3.0</span><br><span class="line">origin&#x2F;daily&#x2F;1.4.1</span><br><span class="line">origin&#x2F;develop</span><br><span class="line">origin&#x2F;feature&#x2F;daily-1.0.0</span><br><span class="line">origin&#x2F;master</span><br></pre></td></tr></table></figure>

<p>然后直接 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout origin&#x2F;daily&#x2F;1.4.1</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://gaohaoyang.github.io/2016/07/07/git-clone-not-master-branch/">https://gaohaoyang.github.io/2016/07/07/git-clone-not-master-branch/</a></p>
<p><a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v1/Git-%E5%88%86%E6%94%AF-%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF" title="官方参考">官方</a></p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8">显示远程仓库</a><br> <code>$ git remote show origin </code></p>
<p> <strong>1. 本地分支重命名(还没有推送到远程)</strong></p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -m oldName newName</span><br></pre></td></tr></table></figure>
<p> <strong>2. 远程分支重命名 (已经推送远程-假设本地分支和远程对应分支名称相同)</strong><br>  a. 重命名远程分支对应的本地分支</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -m oldName newName</span><br></pre></td></tr></table></figure>
<p> c. 删除本地分支</p>
<pre><code>   `    git branch -d v1.0.0    `
</code></pre>
</li>
</ul>
<h5 id="删除远程分支"><a href="#删除远程分支" class="headerlink" title="删除远程分支"></a>删除远程分支</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push --delete origin oldName</span><br></pre></td></tr></table></figure>





<h5 id="修复已发布版本bug"><a href="#修复已发布版本bug" class="headerlink" title="修复已发布版本bug"></a>修复已发布版本bug</h5><p>修复bug主要以下几步:</p>
<ul>
<li><p>使用git reset –hard <commit id="">命令退回到发布标签对应的版本</commit></p>
</li>
<li><p>使用git checkout -b BugFix新建一个BugFix的分支，原分支前进到最新提交版本</p>
</li>
<li><p>使用git checkout BugFix切换到BugFix分支，修改bug，重新发布并使用git tag打标签</p>
</li>
<li><p>git reaset –hard <head commit="" id=""> 切换主干最新的分支</head></p>
</li>
<li><p>使用git merge合并BugFix分支到主分支</p>
<p>参考:<a target="_blank" rel="noopener" href="https://blog.masterliu.net/git-retag/">https://blog.masterliu.net/git-retag/</a></p>
<p>标签是一个文件快照，并不是真拉出一份代码放在了那里</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">D:\Project\ASProjects\cqianjia&gt;git tag</span><br><span class="line">v1.0.2</span><br></pre></td></tr></table></figure>

<p>参考: <a target="_blank" rel="noopener" href="http://gepeiyu.com/2017/06/28/git-tag-oldversion-debug/">http://gepeiyu.com/2017/06/28/git-tag-oldversion-debug/</a></p>
<p>还有一种情况是在最新提交版本修复bug</p>
<ul>
<li><p>git stash</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/54b8ea4317cc">https://www.jianshu.com/p/54b8ea4317cc</a></p>
<p><a target="_blank" rel="noopener" href="https://qiita.com/hudichao/items/d665cd769ed1d2ce832a">https://qiita.com/hudichao/items/d665cd769ed1d2ce832a</a></p>
</li>
</ul>
<h5 id="远程仓库更新到本地"><a href="#远程仓库更新到本地" class="headerlink" title="远程仓库更新到本地"></a>远程仓库更新到本地</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git fetch origin</span><br><span class="line">$ git merge origin&#x2F;hexo</span><br></pre></td></tr></table></figure>

<p>或者合并</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git pull origin hexo </span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2014/06/git_remote.html">http://www.ruanyifeng.com/blog/2014/06/git_remote.html</a></p>
<h6 id="fork后的项目处理"><a href="#fork后的项目处理" class="headerlink" title="fork后的项目处理"></a>fork后的项目处理</h6><p>  <a target="_blank" rel="noopener" href="https://gaohaoyang.github.io/2015/04/12/Syncing-a-fork/">https://gaohaoyang.github.io/2015/04/12/Syncing-a-fork/</a></p>
<h5 id="忽略文件已提交的文件"><a href="#忽略文件已提交的文件" class="headerlink" title="忽略文件已提交的文件"></a>忽略文件已提交的文件</h5><p> 对于单个文件处理<br>  假如要忽略 .idea/misc.xml文件，.gitignore可以添加 <code>/.idea/* </code>把.idea文件过滤<br> 主要是　<code>git rm --cached　.idea/misc.xml </code> 然后提交修改,每次手输入才有用?</p>
<p> 对文件夹的处理,比如common-bankcard</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git rm -r --cached common-bankcard</span><br><span class="line">git rm --cached  *idea&#x2F;*</span><br></pre></td></tr></table></figure>


<h4 id="Git仓库迁移"><a href="#Git仓库迁移" class="headerlink" title="Git仓库迁移"></a>Git仓库迁移</h4><p> 迁移git仓库</p>
<ul>
<li><p>原来托管于github,clone一份裸版本库</p>
<pre><code>git clone --bare git@gitee.com:huaiyi/CQJ.git
</code></pre>
</li>
<li><p>在新的版本库(gitlab)里面创建一个新的项目，例如 cqianjia</p>
</li>
<li><p>推送刚才clone的镜像到gitlab服务器</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd CQJ.git&#x2F;</span><br><span class="line">git push --mirror git@45.77.22.97:root&#x2F;cqianjia.git</span><br></pre></td></tr></table></figure>

<p> mirror 克隆出来的裸版本对上游版本库进行了注册，这样可以在裸版本库中使用git fetch命令和上游版本库进行持续同步</p>
<ul>
<li>  删除本地代码</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ..</span><br><span class="line">rm -rf project.git</span><br></pre></td></tr></table></figure>


<ul>
<li> 到新的服务器clone到本地就Ok了</li>
</ul>
<p>  <code>  git clone git@45.77.22.97:root/cqianjia.git</code> </p>
<p>  参考: <a target="_blank" rel="noopener" href="https://my.oschina.net/kind790/blog/510601">https://my.oschina.net/kind790/blog/510601</a></p>
<ul>
<li>  git clone 所有分支</li>
</ul>
<pre><code>这种方式有一个弊端，切换分支后　工程名没了， 还是慢慢摸索吧　!
</code></pre>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git branch -r | grep -v &#39;\-&gt;&#39; | while read remote; do git branch --track &quot;$&#123;remote#origin&#x2F;&#125;&quot; &quot;$remote&quot;; done</span><br><span class="line">git fetch --all</span><br><span class="line">git pull --all</span><br></pre></td></tr></table></figure>

<p>参考: <a target="_blank" rel="noopener" href="http://blog.csdn.net/allangold/article/details/78028709">http://blog.csdn.net/allangold/article/details/78028709</a></p>
<h4 id="GIT标签"><a href="#GIT标签" class="headerlink" title="GIT标签"></a>GIT标签</h4><p>  查看所有的版本<br>​    <code>git tag</code></p>
<ul>
<li>查看远程分支  <code>git ls-remote --tags</code></li>
<li>创建标签 <code>git tag -a v1.0.2 -m &quot;my version 1.0.2&quot;  </code><br>-m 选项指定了一条将会存储在标签中的信息</li>
</ul>
<ul>
<li>创建Tag</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git tag -a v1.0.0 -m &quot;my version 1.0.0&quot;</span><br><span class="line">git push origin v1.0.0    &#x2F;&#x2F;推送到远程分支</span><br><span class="line">git push origin --tags       &#x2F;&#x2F;推送所有的标签</span><br></pre></td></tr></table></figure>

<ul>
<li>删除tag </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> git tag -d &lt;tagname&gt; </span><br><span class="line"> git push origin :refs&#x2F;tags&#x2F;&lt;tagname&gt;</span><br><span class="line"></span><br><span class="line">例如</span><br><span class="line"> git push origin :refs&#x2F;tags&#x2F;v1.0.2</span><br><span class="line"> git tag -d  v1.0.2</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E6%89%93%E6%A0%87%E7%AD%BE">检出标签</a> 检出标签</p>
<h5 id="Checkout-Git-Tags"><a href="#Checkout-Git-Tags" class="headerlink" title="Checkout Git Tags"></a>Checkout Git Tags</h5><p><a target="_blank" rel="noopener" href="https://devconnected.com/how-to-checkout-git-tags/">https://devconnected.com/how-to-checkout-git-tags/</a></p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git fetch --all --tags</span><br><span class="line">git checkout tags&#x2F;v1.0 -b v1.0-branch	&#x2F;&#x2F;git checkout tags&#x2F;v2.1.1 -b v2.1.1-branch  v1.0代表tag名称</span><br><span class="line"></span><br><span class="line">git log --oneline --graph		&#x2F;&#x2F;You can inspect the state of your branch by using the “git log” command. Make sure that the HEAD pointer (the latest commit) is pointing to your annotated tag.</span><br></pre></td></tr></table></figure>
</blockquote>
<h5 id="checkout-remote-tag"><a href="#checkout-remote-tag" class="headerlink" title="checkout remote tag"></a>checkout remote tag</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">git fetch --all --tags</span><br><span class="line"></span><br><span class="line">git ls-remote --tags</span><br><span class="line"> </span><br><span class="line">  refs&#x2F;tags&#x2F;v2.5.8^&#123;&#125;</span><br><span class="line">  refs&#x2F;tags&#x2F;v2.5.9</span><br><span class="line">  refs&#x2F;tags&#x2F;v2.5.9^&#123;&#125;</span><br><span class="line"></span><br><span class="line">git checkout  refs&#x2F;tags&#x2F;v2.5.9 -b v2.5.9-branch					&#x2F;&#x2F;-b 后面是自定义的分支名称</span><br><span class="line"> 																				这个自定义</span><br></pre></td></tr></table></figure>



<p>在 Git 中你并不能真的检出一个标签，因为它们并不能像分支一样来回移动。 如果你想要工作目录与仓库中特定的标签版本完全一样，可以使用 git checkout -b [branchname] [tagname] 在特定的标签上创建一个新分支：</p>
<pre><code>    $ git checkout -b version2 v2.0.0
</code></pre>
<p>Switched to a new branch ‘version2’</p>
<p>当然，如果在这之后又进行了一次提交，version2 分支会因为改动向前移动了，那么 version2 分支就会和 v2.0.0 标签稍微有些不同，这时就应该当心了。</p>
<p>修复已发布版本Bug<br><a target="_blank" rel="noopener" href="http://gepeiyu.com/2017/06/28/git-tag-oldversion-debug/">http://gepeiyu.com/2017/06/28/git-tag-oldversion-debug/</a></p>
<h5 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h5><p>经常有这样的事情发生，当你正在进行项目中某一部分的工作，里面的东西处于一个比较杂乱的状态，而你想转到其他分支上进行一些工作。问题是，你不想提交进行了一半的工作，否则以后你无法回到这个工作点。解决这个问题的办法就是<code>git stash</code>命令。</p>
<ol>
<li><p><code>git stash  save  &#39;暂存备注信息&#39; </code> //进入暂存状态,此时执行 git status 已经没有要提交的了</p>
</li>
<li><p>git checkout  切换到要修改的分支上 ,修改完</p>
</li>
<li><p>  完成后回到原来的开发分支上，git stash apply 获取最近暂存内容</p>
</li>
<li><p><code>git stash drop  stash@&#123;1&#125; </code></p>
<blockquote>
<p>apply 选项只尝试应用储藏的工作——储藏的内容仍然在栈上。要移除它，你可以运行 <code>git stash drop</code>，加上你希望移除的储藏的名字：</p>
</blockquote>
</li>
</ol>
<ul>
<li><p>git stash 可以进行多次暂存,多次存后 git stash list长下面这样,可以用 · git stash apply stash@{1}· 获取某次暂存的内容</p>
<blockquote>
<p>stash@{0}: WIP on dev: 3d01a6c Patient Entity数据库删除<br>stash@{1}: WIP on dev: b6a688e 跑起来提交</p>
</blockquote>
</li>
<li><p>取消储藏  <code>git stash show -p stash@&#123;0&#125; | git apply -R</code>  如果没指定具体的标签 取消最近的</p>
<p>这个和<code>git stash drop</code>的区别是 取消的是文件内容，stash标签还在</p>
<p><a target="_blank" rel="noopener" href="https://git-scm.com/docs/git-stash">https://git-scm.com/docs/git-stash</a></p>
<blockquote>
<p> 注意是 stash@{0}  不是  3d01a6c</p>
</blockquote>
<p>git branch 分支名 hash(历史版本)</p>
</li>
<li><p>update forked project</p>
<p> <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq1332479771/article/details/56087333">https://blog.csdn.net/qq1332479771/article/details/56087333</a> </p>
</li>
<li><p>获取暂存</p>
<blockquote>
<p>git stash apply stash@{0}   // don‘t remove stash</p>
<p>git stash pop stash@{0}</p>
</blockquote>
</li>
</ul>
<h5 id="SVN"><a href="#SVN" class="headerlink" title="SVN"></a>SVN</h5><ul>
<li>SVN不能添加文件:<a target="_blank" rel="noopener" href="https://blog.csdn.net/yujiayinshi/article/details/51381942">https://blog.csdn.net/yujiayinshi/article/details/51381942</a></li>
</ul>
<h5 id="github提速"><a href="#github提速" class="headerlink" title="github提速"></a>github提速</h5><p><a href="https://link.zhihu.com/?target=http://www.github.com/">www.github.com</a> 替换为   <a target="_blank" rel="noopener" href="http://www.github.com.cnpmjs.org/">www.github.com.cnpmjs.org</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/flutter/flutter.git">https://github.com/flutter/flutter.git</a></p>
<p>git clone <a target="_blank" rel="noopener" href="https://github.com.cnpmjs.org/love-flutter/flutter-column.git">https://github.com.cnpmjs.org/love-flutter/flutter-column.git</a></p>
<h4 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h4><h5 id="修改远程仓库地址"><a href="#修改远程仓库地址" class="headerlink" title="修改远程仓库地址"></a>修改远程仓库地址</h5><ul>
<li>github创建 New项目，项目地址是 <a href="mailto:&#x67;&#105;&#x74;&#x40;&#x67;&#105;&#x74;&#104;&#117;&#98;&#46;&#x63;&#x6f;&#109;">&#x67;&#105;&#x74;&#x40;&#x67;&#105;&#x74;&#104;&#117;&#98;&#46;&#x63;&#x6f;&#109;</a>:BlogForMe/News.git</li>
<li>修改远程服务器地址 ：<code>git remote set-url origin git@github.com:BlogForMe/News.git</code></li>
<li>推送到远程服务器 : <code>git push origin </code></li>
</ul>
<p><a target="_blank" rel="noopener" href="http://jcpplus.github.io/2015/07/23/modify-remote-url/">http://jcpplus.github.io/2015/07/23/modify-remote-url/</a></p>
<h5 id="git-pull-git-fetch区别"><a href="#git-pull-git-fetch区别" class="headerlink" title="git pull git fetch区别"></a>git pull git fetch区别</h5><p>git fetch更新本地仓库的两种用法：</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法一</span></span><br><span class="line">$ git fetch origin <span class="keyword">master</span>                <span class="title">#从远程的origin</span>仓库的<span class="literal">master</span>分支下载代码到本地的origin maste</span><br><span class="line">$ git log -p <span class="literal">master</span>.. origin/<span class="keyword">master</span>      <span class="title">#比较本地的仓库和远程参考的区别</span></span><br><span class="line"><span class="title">$</span> git merge origin/<span class="keyword">master</span>                <span class="title">#把远程下载下来的代码合并到本地仓库，远程的和本地的合并</span></span><br></pre></td></tr></table></figure>



<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法二</span></span><br><span class="line"><span class="variable">$</span> git fetch origin master:temp           <span class="comment">#从远程的origin仓库的master分支下载到本地并新建一个分支temp</span></span><br><span class="line"><span class="variable">$</span> git <span class="built_in">diff</span> temp                          <span class="comment">#比较master分支和temp分支的不同</span></span><br><span class="line"><span class="variable">$</span> git merge temp                         <span class="comment">#合并temp分支到master分支</span></span><br><span class="line"><span class="variable">$</span> git branch <span class="literal">-d</span> temp                     <span class="comment">#删除temp</span></span><br></pre></td></tr></table></figure>



<p>这样理解</p>
<p>pull = fetch + merge</p>
<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000017030384">https://segmentfault.com/a/1190000017030384</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d265f7763a3a">https://www.jianshu.com/p/d265f7763a3a</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/riddle1981/article/details/74938111">https://blog.csdn.net/riddle1981/article/details/74938111</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cpweb.top/455">https://www.cpweb.top/455</a></p>
<h4 id="master-revert"><a href="#master-revert" class="headerlink" title="master revert"></a>master revert</h4><p> 今天将一段代码合入了master，上线的时候有问题，而不能很快解决掉，为了不影响其他同事合入master或将有问题的commit带上线，因此我将我的commit revert掉了。<br>  同时，当天晚上的时候有同事刚好问我git revert后自己代码消失的问题，当时思考不清晰，也比较少用revert，因此现在来复盘下。<br>  commit提交流程示意图如下：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/20690451-b8fff26d34df812c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/340/format/webp"></p>
<p>其中A是有问题的commit，R是revert的commit，M是master，序号N代表master的流向,</p>
<ol>
<li><p>从master checkout分支 F-A ,提交了TestA文件</p>
<p><img src="/2017/10/19/Git-BRANCH/20221109111230.jpg"></p>
</li>
<li><p>从master checkout分支 UP-R,提交了TESTB, TestR</p>
</li>
</ol>
<p><img src="/2017/10/19/Git-BRANCH/20221109115616.jpg" alt="20221109115616"></p>
<ol start="3">
<li>分别吧F-A , UP-R分支合并到master.</li>
<li>此时觉得F-A代码有问题，需要修改，master对F-A进行revert ,此时 master的F-A 分支TesA被删除了,并且有一条提交记录</li>
<li>从master checkout得到分支verify-b,然后将之前需要会退的提交 , 再进行 git revert commit,然后push (这个方式没想明白)</li>
<li>把master合并到verify-b就能解决这个问题.</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/oYiMiYangGuang123/article/details/99437382">https://blog.csdn.net/oYiMiYangGuang123/article/details/99437382</a></p>
<p>上面的步骤还是没想明白.</p>
<p>主要 git reset不能解决，有问题.除非强制push。</p>
<h5 id="删除一条历史记录"><a href="#删除一条历史记录" class="headerlink" title="删除一条历史记录"></a>删除一条历史记录</h5><p>git revert 纪录</p>
<p>Git force push</p>
<p>git rebase -i 7158b278b8f47f9b46f9af2207996bce783c0b57 这篇blog介绍的，但是没起作用。</p>
<p><a target="_blank" rel="noopener" href="https://linuxhint.com/remove-commit-from-history-git/">https://linuxhint.com/remove-commit-from-history-git/</a></p>
<p>查看日志</p>
<p>git log –author zh –since=2022-12-10</p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/18/index.html">https://noteforme.github.io/page/18/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/" rel="tag">Git</a></li></ul>

          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-hot-patch" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/17/hot-patch/">hot_patch（热更新）</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-17T07:25:56.000Z" itemprop="datePublished">2017年10月17日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2017/10/17/hot-patch/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>为了预防项目紧急问题，使用热更新比发版要好点</p>
<h5 id="热更新选择"><a href="#热更新选择" class="headerlink" title="热更新选择"></a>热更新选择</h5><ul>
<li><p>VitrualApk  滴滴开源的方案，之前的dynamic-load-apk推动的热更新的发展,不过这个开源没多久，准备后面迁移到这上面来</p>
</li>
<li><p>Tinker-Bugly      这个很不错免费，就是只支持 冷启动，配合bugly教程用起来方便</p>
</li>
<li><p>sophix         这个支持热启动 配置也方便，不过5万设备以上就要收费，对于收费我觉得也无可厚非，毕竟是别人的劳动成果，</p>
<pre><code>           作为开发者的角度，还是开源最好，以后可以学习下。
</code></pre>
</li>
</ul>
<p>所以先选择Tinker-Bugly</p>
<h5 id="接入"><a href="#接入" class="headerlink" title="接入"></a>接入</h5><p> 按照<a target="_blank" rel="noopener" href="https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix/" title="bugly">接入文档</a> 配合Demo接入配置，然后就开始做自己的app 定义</p>
<ol>
<li>修改appid </li>
</ol>
<p> bugly平台申请后的 AppId</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里实现SDK初始化，appId替换成你的在Bugly平台申请的appId</span></span><br><span class="line">       <span class="comment">// 调试时，将第三个参数改为true</span></span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">Bugly</span>.</span></span>init(get<span class="constructor">Application()</span>, <span class="string">&quot;f7b6508f55&quot;</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<p> 第三个参数设置  log是否展示</p>
<ol start="2">
<li>tinkerId</li>
</ol>
<p>每次修改 基线版本和 补丁版本都要修改 tinkerId</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">tinkerId</span> = <span class="string">&quot;1.0.6-patch&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>点击 assembleDebug</li>
</ol>
<p>生成 基线版本</p>
<p><a target="_blank" rel="noopener" href="https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix-demo/">https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix-demo/</a></p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">实际应用中，请注意保存线上发布版本的基准apk包、mapping文件、<span class="type">R</span>.txt文件，如果线上版本有bug，就可以借助我们tinker-sup<span class="keyword">port</span>插件进行补丁包的生成。</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>修改 def baseApkDir , 修改 tinkerId</li>
</ol>
<ul>
<li>修改bug</li>
<li>baseApkDir是根据基线版本生成的目录</li>
<li>修改tinkerId</li>
</ul>
<ol start="5">
<li>编译patch包 </li>
</ol>
<p>  点击 buildTinkerPatchRelease，生成patch_signed_7zip.apk上传,然后重启就可以了</p>
<ol start="6">
<li>对于开发设备和全量设备</li>
</ol>
<p>修改</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//指定为开发设备</span></span><br><span class="line">   <span class="module-access"><span class="module"><span class="identifier">Bugly</span>.</span></span>set<span class="constructor">IsDevelopmentDevice(<span class="params">getApplication</span>()</span>,<span class="literal">true</span>);</span><br></pre></td></tr></table></figure>

<p> 参考 ：<br>  <a target="_blank" rel="noopener" href="https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix/">https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix/</a><br>  <a target="_blank" rel="noopener" href="https://github.com/Tencent/tinker">https://github.com/Tencent/tinker</a><br>  <a target="_blank" rel="noopener" href="https://github.com/BuglyDevTeam/Bugly-Android-Demo">https://github.com/BuglyDevTeam/Bugly-Android-Demo</a></p>
<h5 id="UncaughtExceptionHandler-Bugly冲突-不上报日志"><a href="#UncaughtExceptionHandler-Bugly冲突-不上报日志" class="headerlink" title="UncaughtExceptionHandler Bugly冲突 不上报日志"></a>UncaughtExceptionHandler Bugly冲突 不上报日志</h5><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/ZPCrobot/article/details/97390156">https://blog.csdn.net/ZPCrobot/article/details/97390156</a></p>
<h5 id="从零开始实现一个插件化框架"><a href="#从零开始实现一个插件化框架" class="headerlink" title="从零开始实现一个插件化框架"></a>从零开始实现一个插件化框架</h5><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_22090073/article/details/103946596">https://blog.csdn.net/qq_22090073/article/details/103946596</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/af8c47fabb12">https://www.jianshu.com/p/af8c47fabb12</a></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/18/index.html">https://noteforme.github.io/page/18/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-ConstraintLayout" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/15/ConstraintLayout/">ConstraintLayout</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-15T02:37:39.000Z" itemprop="datePublished">2017年10月15日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2017/10/15/ConstraintLayout/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="introduce"><a href="#introduce" class="headerlink" title="introduce"></a>introduce</h4><p><a target="_blank" rel="noopener" href="https://developer.android.google.cn/reference/androidx/constraintlayout/widget/ConstraintLayout">https://developer.android.google.cn/reference/androidx/constraintlayout/widget/ConstraintLayout</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/develop/ui/views/layout/constraint-layout">https://developer.android.com/develop/ui/views/layout/constraint-layout</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6949186887609221133#heading-6">https://juejin.cn/post/6949186887609221133#heading-6</a></p>
<h4 id="Widgets-dimension"><a href="#Widgets-dimension" class="headerlink" title="Widgets dimension"></a>Widgets dimension</h4><p>widget的尺寸可以通过设置<code>android:layout_width</code>和<code>android:layout_height</code>的属性值来指定，有如下三种方式：</p>
<ul>
<li>使用具体值</li>
<li>使用<code>WRAP_CONTENT</code>，这样widget会计算自身的尺寸</li>
<li>Using <code>0dp</code>, which is the equivalent of “<code>MATCH_CONSTRAINT</code>“ (使用<code>0dp</code>，这等于“<code>MATCH_CONSTRAINT</code>” )</li>
</ul>
<p><img src="https://developer.android.google.cn/static/reference/androidx/constraintlayout/widget/resources/images/dimension-match-constraints.png" alt="img"></p>
<h5 id="Group"><a href="#Group" class="headerlink" title="Group"></a>Group</h5><p>可以控制一组控件的隐藏和显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;androidx.constraintlayout.widget.Group</span><br><span class="line">      android:id&#x3D;&quot;@+id&#x2F;gp_1&quot;</span><br><span class="line">      android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">      android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">      android:visibility&#x3D;&quot;gone&quot;</span><br><span class="line">      app:constraint_referenced_ids&#x3D;&quot;cl_h4,cl_h2&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">((Group)findViewById(R.id.gp_1)).setVisibility(View.GONE);</span><br></pre></td></tr></table></figure>

<p>​    <code>findViewById(R.id.gp_2).setVisibility(View.INVISIBLE);  doesnt not work</code></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903875569254414#heading-17">https://juejin.cn/post/6844903875569254414#heading-17</a></p>
<h5 id="Guideline使用"><a href="#Guideline使用" class="headerlink" title="Guideline使用"></a>Guideline使用</h5><p><a target="_blank" rel="noopener" href="https://developer.android.com/reference/android/support/constraint/Guideline.html">https://developer.android.com/reference/android/support/constraint/Guideline.html</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app:layout_constraintGuide_percent&#x3D;&quot;0.2&quot;</span><br><span class="line">app:layout_constraintGuide_begin&#x3D;&quot;100dp&quot;</span><br></pre></td></tr></table></figure>

<h4 id="特色属性"><a href="#特色属性" class="headerlink" title="特色属性"></a>特色属性</h4><h5 id="layout-constraintDimensionRatio"><a href="#layout-constraintDimensionRatio" class="headerlink" title="layout_constraintDimensionRatio"></a>layout_constraintDimensionRatio</h5><p>指定高度，宽度随着宽高比自适应</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;ImageView</span><br><span class="line">    android:id&#x3D;&quot;@+id&#x2F;iv_img01&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;0dp&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">    android:src&#x3D;&quot;@mipmap&#x2F;img_1&quot;</span><br><span class="line">    app:layout_constraintDimensionRatio&#x3D;&quot;1:1&quot;</span><br><span class="line">    app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>

<!--指定高度，宽度随着宽高比自适应 app:layout_constraintDimensionRatio="H,16:9"  H: 表示高宽比-->     

<p>layout_constraintHorizontal_bias  先设置约束</p>
<h4 id="Bias"><a href="#Bias" class="headerlink" title="Bias"></a><strong>Bias</strong></h4><p>上面的水平居中,是使用的与父亲左侧对齐+与父亲右侧对齐.  可以理解为左右的有一种约束力,默认情况下,左右的力度是一样大的,那么view就居中了.</p>
<p>当左侧的力度大一些时,view就会偏向左侧.就像下面这样.</p>
<blockquote>
<p>layout_constraintHorizontal_bias 水平约束力<br>layout_constraintVertical_bias 垂直约束力</p>
</blockquote>
<p><img src="https://developer.android.google.cn/static/reference/androidx/constraintlayout/widget/resources/images/centering-positioning-bias.png"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;android.support.constraint.ConstraintLayout</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:text=&quot;按钮1&quot;</span><br><span class="line">        app:layout_constraintHorizontal_bias=&quot;0.3&quot;</span><br><span class="line">        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</span><br><span class="line">        app:layout_constraintRight_toRightOf=&quot;parent&quot;/&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.constraint.ConstraintLayout</span>&gt;</span>    </span><br></pre></td></tr></table></figure>

<p>上面代码就偏左约束</p>
<h5 id="WRAP-CONTENT-强制约束"><a href="#WRAP-CONTENT-强制约束" class="headerlink" title="WRAP_CONTENT: 强制约束"></a>WRAP_CONTENT: 强制约束</h5><p>我们可能希望使用<code>WRAP_CONTENT</code>，同时仍然强制执行约束以限制最终的尺寸</p>
<ul>
<li><code>app:layout_constrainedWidth=”true|false”</code></li>
</ul>
<p>button1居中显示，button2约束在button1的右边、parent的左边：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/button1&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:text=&quot;aaaaaaa&quot;</span><br><span class="line">    app:layout_constraintStart_toStartOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintEnd_toEndOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintTop_toTopOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/button2&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:text=&quot;22222222222222222222222222222&quot;</span><br><span class="line">    app:layout_constrainedWidth=&quot;true&quot;</span><br><span class="line">    android:layout_marginTop=&quot;40dp&quot;</span><br><span class="line">    app:layout_constraintTop_toTopOf=&quot;@id/button1&quot;</span><br><span class="line">    app:layout_constraintStart_toEndOf=&quot;@id/button1&quot;</span><br><span class="line">    app:layout_constraintEnd_toEndOf=&quot;parent&quot;/&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>对button2使不使用<code>app:layout_constrainedWidth=&quot;true&quot;</code>的效果如下：</p>
<p><img src="/2017/10/15/ConstraintLayout/constraintlayout-constrainted-width-before.png" alt="constraintlayout-constrainted-width-before"></p>
<p><img src="/2017/10/15/ConstraintLayout/constraintlayout-constrainted-width-after.png" alt="constraintlayout-constrainted-width-after"></p>
<p>约束width前 &amp; 约束width后</p>
<h5 id="占用父布局的比例"><a href="#占用父布局的比例" class="headerlink" title="占用父布局的比例"></a>占用父布局的比例</h5><h4 id="chain"><a href="#chain" class="headerlink" title="chain"></a>chain</h4><p> 3个Button 两两依赖,相当于组成了一个链</p>
<p>Button均分 width = match_constraint (0dp)</p>
<p> <img src="/2017/10/15/ConstraintLayout/ConstraintLayout_000.png" alt="图"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">       android:id&#x3D;&quot;@+id&#x2F;bt_00&quot;</span><br><span class="line">       android:layout_width&#x3D;&quot;0dp&quot;</span><br><span class="line">       android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">       android:text&#x3D;&quot;Button_00&quot;</span><br><span class="line">       app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot;</span><br><span class="line">       app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_01&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">   &lt;Button</span><br><span class="line">       android:id&#x3D;&quot;@+id&#x2F;bt_01&quot;</span><br><span class="line">       android:layout_width&#x3D;&quot;0dp&quot;</span><br><span class="line">       android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">       android:text&#x3D;&quot;Button_01&quot;</span><br><span class="line">       app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_00&quot;</span><br><span class="line">       app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_02&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">   &lt;Button</span><br><span class="line">       android:id&#x3D;&quot;@+id&#x2F;bt_02&quot;</span><br><span class="line">       android:layout_width&#x3D;&quot;0dp&quot;</span><br><span class="line">       android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">       android:text&#x3D;&quot;Button_02&quot;</span><br><span class="line">       app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_01&quot;</span><br><span class="line">       app:layout_constraintRight_toRightOf&#x3D;&quot;parent&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>



<p>app:layout_constraintHorizontal_weight=”2”`　</p>
<p>看属性也可以猜到是干嘛用的了.<br><img src="/2017/10/15/ConstraintLayout/ConstraintLayout_001.png" alt="宽度为wrap_content"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;androidx.constraintlayout.widget.ConstraintLayout</span><br><span class="line">       android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">       app:layout_constraintTop_toBottomOf&#x3D;&quot;@+id&#x2F;guideline_00&quot;</span><br><span class="line">       android:layout_height&#x3D;&quot;wrap_content&quot;&gt;</span><br><span class="line">       &lt;Button</span><br><span class="line">           android:id&#x3D;&quot;@+id&#x2F;bt_00&quot;</span><br><span class="line">           android:layout_width&#x3D;&quot;0dp&quot;</span><br><span class="line">           android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">           android:text&#x3D;&quot;Button_00&quot;</span><br><span class="line">           app:layout_constraintHorizontal_weight&#x3D;&quot;2&quot;</span><br><span class="line">           app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot;</span><br><span class="line">           app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_01&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">       &lt;Button</span><br><span class="line">           android:id&#x3D;&quot;@+id&#x2F;bt_01&quot;</span><br><span class="line">           android:layout_width&#x3D;&quot;0dp&quot;</span><br><span class="line">           android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">           android:text&#x3D;&quot;Button_01&quot;</span><br><span class="line">           app:layout_constraintHorizontal_weight&#x3D;&quot;1&quot;</span><br><span class="line">           app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_00&quot;</span><br><span class="line">           app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_02&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">       &lt;Button</span><br><span class="line">           android:id&#x3D;&quot;@+id&#x2F;bt_02&quot;</span><br><span class="line">           android:layout_width&#x3D;&quot;0dp&quot;</span><br><span class="line">           android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">           app:layout_constraintHorizontal_weight&#x3D;&quot;1&quot;</span><br><span class="line">           android:text&#x3D;&quot;Button_02&quot;</span><br><span class="line">           app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_01&quot;</span><br><span class="line">           app:layout_constraintRight_toRightOf&#x3D;&quot;parent&quot; &#x2F;&gt;</span><br><span class="line">   &lt;&#x2F;androidx.constraintlayout.widget.ConstraintLayout&gt;</span><br></pre></td></tr></table></figure>





<p>Button均份　宽度不为match_constraint</p>
<p><img src="/2017/10/15/ConstraintLayout/ConstraintLayout_10.png" alt="宽度为wrap_content"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">           android:id&#x3D;&quot;@+id&#x2F;bt_10&quot;</span><br><span class="line">           android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">           android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">           android:text&#x3D;&quot;Button_00&quot;</span><br><span class="line">           app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot;</span><br><span class="line">           app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_11&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">       &lt;Button</span><br><span class="line">           android:id&#x3D;&quot;@+id&#x2F;bt_11&quot;</span><br><span class="line">           android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">           android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">           android:text&#x3D;&quot;Button_01&quot;</span><br><span class="line">           app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_10&quot;</span><br><span class="line">           app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_12&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">       &lt;Button</span><br><span class="line">           android:id&#x3D;&quot;@+id&#x2F;bt_12&quot;</span><br><span class="line">           android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">           android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">           android:text&#x3D;&quot;Button_02&quot;</span><br><span class="line">           app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_11&quot;</span><br><span class="line">           app:layout_constraintRight_toRightOf&#x3D;&quot;parent&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>





<h4 id="chainStyle"><a href="#chainStyle" class="headerlink" title="chainStyle"></a>chainStyle</h4><p>Chains are controlled by attributes set on the first element of the chain (the “head” of the chain):</p>
<img src="https://developer.android.google.cn/static/reference/androidx/constraintlayout/widget/resources/images/chains-head.png" alt="img" style="zoom:50%;">

<p>The head is the left-most widget for horizontal chains, and the top-most widget for vertical chains.第一个元素决定链style</p>
<p>而且只有放在头节点才有效，否则都没用</p>
<p><img src="https://developer.android.google.cn/static/reference/androidx/constraintlayout/widget/resources/images/chains-styles.png"></p>
<h5 id="spread-Chain"><a href="#spread-Chain" class="headerlink" title="spread Chain"></a>spread Chain</h5><p>layout_constraintHorizontal_chainStyle  这个属性默认是spread</p>
<p>元素展开</p>
<p><img src="/2017/10/15/ConstraintLayout/20220820163354.jpg" alt="20220820163354"></p>
<p>mineutil</p>
<p>activity_constraint.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/bt_00&quot;</span><br><span class="line">    android:layout_width=&quot;0dp&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:text=&quot;Button_00&quot;</span><br><span class="line">    app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintRight_toLeftOf=&quot;@+id/bt_01&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/bt_01&quot;</span><br><span class="line">    android:layout_width=&quot;0dp&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:text=&quot;Button_01&quot;</span><br><span class="line">    app:layout_constraintLeft_toRightOf=&quot;@+id/bt_00&quot;</span><br><span class="line">    app:layout_constraintRight_toLeftOf=&quot;@+id/bt_02&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/bt_02&quot;</span><br><span class="line">    android:layout_width=&quot;0dp&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:text=&quot;Button_02&quot;</span><br><span class="line">    app:layout_constraintLeft_toRightOf=&quot;@+id/bt_01&quot;</span><br><span class="line">    app:layout_constraintRight_toRightOf=&quot;parent&quot; /&gt;</span><br></pre></td></tr></table></figure>



<h5 id="Spread-inside-chain"><a href="#Spread-inside-chain" class="headerlink" title="Spread inside chain"></a>Spread inside chain</h5><p> endpoints of the chain will not be spread out (两端不会展开)</p>
<p>其实就相当于两端的约束去掉了</p>
<p><img src="/2017/10/15/ConstraintLayout/20220820182406.jpg" alt="20220820182406"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/bt_10&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:text=&quot;Inside&quot;</span><br><span class="line">    android:background=&quot;@android:color/holo_blue_light&quot;</span><br><span class="line">    app:layout_constraintHorizontal_chainStyle=&quot;spread_inside&quot;</span><br><span class="line">    app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintRight_toLeftOf=&quot;@+id/bt_11&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/bt_11&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:text=&quot;Inside&quot;</span><br><span class="line">    android:background=&quot;@android:color/holo_blue_light&quot;</span><br><span class="line">    app:layout_constraintLeft_toRightOf=&quot;@+id/bt_10&quot;</span><br><span class="line">    app:layout_constraintRight_toLeftOf=&quot;@+id/bt_12&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/bt_12&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:text=&quot;Inside&quot;</span><br><span class="line">    android:background=&quot;@android:color/holo_blue_light&quot;</span><br><span class="line">    app:layout_constraintLeft_toRightOf=&quot;@+id/bt_11&quot;</span><br><span class="line">    app:layout_constraintRight_toRightOf=&quot;parent&quot; /&gt;</span><br></pre></td></tr></table></figure>



<h5 id="Weighted-chains"><a href="#Weighted-chains" class="headerlink" title="Weighted chains"></a>Weighted chains</h5><p>看上面官方的图就能理解了</p>
<h5 id="packed-chains"><a href="#packed-chains" class="headerlink" title="packed chains"></a>packed chains</h5><img src="/2017/10/15/ConstraintLayout/20220820182631.jpg" alt="20220820182631" style="zoom:50%;">


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">    android:id&#x3D;&quot;@+id&#x2F;bt_20&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">    android:background&#x3D;&quot;@android:color&#x2F;holo_blue_light&quot;</span><br><span class="line">    android:text&#x3D;&quot;packed&quot;</span><br><span class="line">    app:layout_constraintHorizontal_chainStyle&#x3D;&quot;packed&quot; &#x2F;&#x2F;第一个有效</span><br><span class="line">    app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot;</span><br><span class="line">    app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_21&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;Button</span><br><span class="line">    android:id&#x3D;&quot;@+id&#x2F;bt_21&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">    android:background&#x3D;&quot;@android:color&#x2F;holo_blue_light&quot;</span><br><span class="line">    android:text&#x3D;&quot;packed&quot;</span><br><span class="line">    app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_20&quot;</span><br><span class="line">    app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_22&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;Button</span><br><span class="line">    android:id&#x3D;&quot;@+id&#x2F;bt_22&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">    android:background&#x3D;&quot;@android:color&#x2F;holo_blue_light&quot;</span><br><span class="line">    android:text&#x3D;&quot;packed&quot;</span><br><span class="line">    app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_21&quot;</span><br><span class="line">    app:layout_constraintRight_toRightOf&#x3D;&quot;parent&quot; &#x2F;&gt; </span><br></pre></td></tr></table></figure>



<h5 id="Packed-Chain-with-Bias"><a href="#Packed-Chain-with-Bias" class="headerlink" title="Packed Chain with Bias"></a>Packed Chain with Bias</h5><p><img src="/2017/10/15/ConstraintLayout/20220820184349.jpg" alt="20220820184349"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/bt_30&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:background=&quot;@android:color/holo_blue_light&quot;</span><br><span class="line">    android:text=&quot;packedBias&quot;</span><br><span class="line">    app:layout_constraintHorizontal_bias=&quot;0.2&quot;</span><br><span class="line">    app:layout_constraintHorizontal_chainStyle=&quot;packed&quot;</span><br><span class="line">    app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintRight_toLeftOf=&quot;@+id/bt_31&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/bt_31&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:background=&quot;@android:color/holo_blue_light&quot;</span><br><span class="line">    android:text=&quot;packedBias&quot;</span><br><span class="line">    app:layout_constraintLeft_toRightOf=&quot;@+id/bt_30&quot;</span><br><span class="line">    app:layout_constraintRight_toLeftOf=&quot;@+id/bt_32&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/bt_32&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:background=&quot;@android:color/holo_blue_light&quot;</span><br><span class="line">    android:text=&quot;packedBias&quot;</span><br><span class="line">    app:layout_constraintLeft_toRightOf=&quot;@+id/bt_31&quot;</span><br><span class="line">    app:layout_constraintRight_toRightOf=&quot;parent&quot; /&gt;</span><br></pre></td></tr></table></figure>







<h4 id="Barrier"><a href="#Barrier" class="headerlink" title="Barrier"></a>Barrier</h4><p>用于控制 Barrier 相对于给定的 View 的位置， app:barrierDirection=”right”,表示barrier在constraint_referenced_ids给定ID的右侧,constraint_referenced_ids的id就是左侧的这些控件</p>
<p>输入信息挺有用的 </p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/QIuww9b0TsNjajEUS8c2fg">https://mp.weixin.qq.com/s/QIuww9b0TsNjajEUS8c2fg</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">&lt;android.support.constraint.ConstraintLayout</span><br><span class="line">      android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">      android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">      android:layout_margin&#x3D;&quot;@dimen&#x2F;dimen_11&quot;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;TextView</span><br><span class="line">          android:id&#x3D;&quot;@+id&#x2F;tv_order_num&quot;</span><br><span class="line">          android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:text&#x3D;&quot;订单编号：10002220000001234&quot;</span><br><span class="line">          android:textColor&#x3D;&quot;#ff999999&quot;</span><br><span class="line">          android:textSize&#x3D;&quot;19sp&quot;</span><br><span class="line">          app:layout_constraintTop_toTopOf&#x3D;&quot;parent&quot;</span><br><span class="line">          app:layout_constraintStart_toStartOf&#x3D;&quot;parent&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;TextView</span><br><span class="line">          android:id&#x3D;&quot;@+id&#x2F;tv_order_pro&quot;</span><br><span class="line">          android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:layout_marginTop&#x3D;&quot;@dimen&#x2F;dimen_11&quot;</span><br><span class="line">          android:text&#x3D;&quot;订购产品：爱达康高血压监护服务&quot;</span><br><span class="line">          android:textColor&#x3D;&quot;#ff666666&quot;</span><br><span class="line">          android:textSize&#x3D;&quot;21sp&quot;</span><br><span class="line">          app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot;</span><br><span class="line">          app:layout_constraintTop_toBottomOf&#x3D;&quot;@+id&#x2F;tv_order_num&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;TextView</span><br><span class="line">          android:id&#x3D;&quot;@+id&#x2F;tv_service_team&quot;</span><br><span class="line">          android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:text&#x3D;&quot;服务团队：爱达康远程监护团队&quot;</span><br><span class="line">          android:textColor&#x3D;&quot;#ff666666&quot;</span><br><span class="line">          android:textSize&#x3D;&quot;21sp&quot;</span><br><span class="line">          app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot;</span><br><span class="line">          app:layout_constraintTop_toBottomOf&#x3D;&quot;@+id&#x2F;tv_order_pro&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;TextView</span><br><span class="line">          android:id&#x3D;&quot;@+id&#x2F;tv_period_valid&quot;</span><br><span class="line">          android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:text&#x3D;&quot;有效期：2019-03-01至2019-12-31&quot;</span><br><span class="line">          android:textColor&#x3D;&quot;#ff999999&quot;</span><br><span class="line">          android:textSize&#x3D;&quot;19sp&quot;</span><br><span class="line">          app:layout_constraintStart_toEndOf&#x3D;&quot;@+id&#x2F;barrier&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;TextView</span><br><span class="line">          android:id&#x3D;&quot;@+id&#x2F;tv_order_time&quot;</span><br><span class="line">          android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:layout_marginTop&#x3D;&quot;@dimen&#x2F;dimen_11&quot;</span><br><span class="line">          android:text&#x3D;&quot;订购时间：2019-03-11 12:00:00&quot;</span><br><span class="line">          android:textColor&#x3D;&quot;#ff666666&quot;</span><br><span class="line">          android:textSize&#x3D;&quot;21sp&quot;</span><br><span class="line">          app:layout_constraintStart_toEndOf&#x3D;&quot;@+id&#x2F;barrier&quot;</span><br><span class="line">          app:layout_constraintTop_toBottomOf&#x3D;&quot;@+id&#x2F;tv_period_valid&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;TextView</span><br><span class="line">          android:id&#x3D;&quot;@+id&#x2F;tv_order_count&quot;</span><br><span class="line">          android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:text&#x3D;&quot;订购数量：500次&quot;</span><br><span class="line">          android:textColor&#x3D;&quot;#ff666666&quot;</span><br><span class="line">          android:textSize&#x3D;&quot;21sp&quot;</span><br><span class="line">          app:layout_constraintStart_toEndOf&#x3D;&quot;@+id&#x2F;barrier&quot;</span><br><span class="line">          app:layout_constraintTop_toBottomOf&#x3D;&quot;@+id&#x2F;tv_order_time&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      &lt;android.support.constraint.Barrier</span><br><span class="line">          android:id&#x3D;&quot;@+id&#x2F;barrier&quot;</span><br><span class="line">          android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          app:barrierDirection&#x3D;&quot;right&quot;</span><br><span class="line">          app:constraint_referenced_ids&#x3D;&quot;tv_order_num,tv_order_pro,tv_service_team&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;&#x2F;android.support.constraint.ConstraintLayout&gt;</span><br></pre></td></tr></table></figure>



<h4 id="Dimensions-constraints"><a href="#Dimensions-constraints" class="headerlink" title="Dimensions constraints"></a>Dimensions constraints</h4><p>You can define minimum and maximum sizes for the <code>ConstraintLayout</code> itself:</p>
<ul>
<li><code>android:minWidth</code> set the minimum width for the layout</li>
<li><code>android:minHeight</code> set the minimum height for the layout</li>
</ul>
<p>可以设置百分比</p>
<h4 id="Practice"><a href="#Practice" class="headerlink" title="Practice"></a>Practice</h4><p>需求是美女跟在文字后面，如果文字太长就用省略号</p>
<img src="/2017/10/15/ConstraintLayout/20220821165517.jpg" alt="20220821165517" style="zoom: 67%;">



<p><img src="/2017/10/15/ConstraintLayout/20220821165912.jpg" alt="20220821165912"></p>
<p>主要着两个属性</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app:layout_constrainedWidth=&quot;true&quot; // 如果不用这个约束，文字太长,会把直接在Learn more后面</span><br><span class="line">app:layout_constraintHorizontal_bias=&quot;0&quot; // 去掉左边的约束</span><br><span class="line">app:layout_constraintHorizontal_chainStyle=&quot;packed&quot; // 让文字和美女在一起</span><br></pre></td></tr></table></figure>



<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&lt;ImageView</span><br><span class="line">    android:id=&quot;@+id/iv_duitnow&quot;</span><br><span class="line">    android:layout_width=&quot;36dp&quot;</span><br><span class="line">    android:layout_height=&quot;36dp&quot;</span><br><span class="line">    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintStart_toStartOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;TextView</span><br><span class="line">    android:id=&quot;@+id/tv_duit_text&quot;</span><br><span class="line">    android:layout_width=&quot;0dp&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_marginStart=&quot;9dp&quot;</span><br><span class="line">    android:textColor=&quot;#282828&quot;</span><br><span class="line">    android:textSize=&quot;22sp&quot;</span><br><span class="line">    app:layout_constraintEnd_toEndOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintStart_toEndOf=&quot;@id/iv_duitnow&quot;</span><br><span class="line">    app:layout_constraintTop_toTopOf=&quot;parent&quot;</span><br><span class="line">    android:text=&quot;Reload via  Transfer:&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;TextView</span><br><span class="line">    android:id=&quot;@+id/tv_duitnow_id&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_marginTop=&quot;4dp&quot;</span><br><span class="line">    android:ellipsize=&quot;end&quot;</span><br><span class="line">    android:lines=&quot;1&quot;</span><br><span class="line">    android:textColor=&quot;#0064FF&quot;</span><br><span class="line">    android:textSize=&quot;14sp&quot;</span><br><span class="line">    app:layout_constrainedWidth=&quot;true&quot;</span><br><span class="line">    app:layout_constraintEnd_toStartOf=&quot;@+id/img_copy&quot;</span><br><span class="line">    app:layout_constraintHorizontal_bias=&quot;0&quot;</span><br><span class="line">    app:layout_constraintHorizontal_chainStyle=&quot;packed&quot;</span><br><span class="line">    app:layout_constraintStart_toStartOf=&quot;@+id/tv_duit_text&quot;</span><br><span class="line">    app:layout_constraintTop_toBottomOf=&quot;@+id/tv_duit_text&quot;</span><br><span class="line">    android:text=&quot;0124455660124455660124455666&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;ImageView</span><br><span class="line">    android:id=&quot;@+id/img_copy&quot;</span><br><span class="line">    android:layout_width=&quot;30dp&quot;</span><br><span class="line">    android:layout_height=&quot;30dp&quot;</span><br><span class="line">    android:scaleType=&quot;fitXY&quot;</span><br><span class="line">    android:src=&quot;@drawable/meitu111e33&quot;</span><br><span class="line">    app:layout_constraintBottom_toBottomOf=&quot;@+id/tv_duitnow_id&quot;</span><br><span class="line">    app:layout_constraintEnd_toStartOf=&quot;@+id/bt_learn_more&quot;</span><br><span class="line">    app:layout_constraintStart_toEndOf=&quot;@+id/tv_duitnow_id&quot;</span><br><span class="line">    app:layout_constraintTop_toTopOf=&quot;@+id/tv_duitnow_id&quot; /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;TextView</span><br><span class="line">    android:id=&quot;@+id/bt_learn_more&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:paddingLeft=&quot;15dp&quot;</span><br><span class="line">    android:paddingTop=&quot;7dp&quot;</span><br><span class="line">    android:background=&quot;@android:color/holo_blue_light&quot;</span><br><span class="line">    android:paddingRight=&quot;15dp&quot;</span><br><span class="line">    android:paddingBottom=&quot;7dp&quot;</span><br><span class="line">    android:textSize=&quot;10sp&quot;</span><br><span class="line">    android:textStyle=&quot;normal&quot;</span><br><span class="line">    app:layout_constraintBottom_toBottomOf=&quot;@+id/tv_duitnow_id&quot;</span><br><span class="line">    app:layout_constraintEnd_toEndOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintTop_toTopOf=&quot;@+id/tv_duitnow_id&quot;</span><br><span class="line">    android:text=&quot;Learn_More&quot; /&gt;</span><br></pre></td></tr></table></figure>







<p><a target="_blank" rel="noopener" href="https://blog.yorek.xyz/android/other/constraintlayout/#63-wrap_content-11">https://blog.yorek.xyz/android/other/constraintlayout/#63-wrap_content-11</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903733948579847">https://juejin.cn/post/6844903733948579847</a></p>
<p><a target="_blank" rel="noopener" href="https://jishuin.proginn.com/p/763bfbd5c73f">https://jishuin.proginn.com/p/763bfbd5c73f</a></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/18/index.html">https://noteforme.github.io/page/18/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ConstraintLayout/" rel="tag">ConstraintLayout</a></li></ul>

          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-tool-miflash" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/13/tool-miflash/">tool_pc_phone</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-13T15:22:47.000Z" itemprop="datePublished">2017年10月13日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/TOOL/">TOOL</a>
  </div>

      
      
<a href="/2017/10/13/tool-miflash/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="mi救砖"><a href="#mi救砖" class="headerlink" title="mi救砖"></a>mi救砖</h2><p>前两天不小心把　新买的小米４给刷成黑砖了，我的操作是<br><strong>双击磁盘模式工具目录里的“清除fastboot进磁盘操作.bat”进入磁盘模式</strong><br> 使用这种方式把fastboot清掉了，然后手机都没法进入fastboot模式，插入电脑无法识别</p>
<h1 id="我的方法"><a href="#我的方法" class="headerlink" title="我的方法"></a>我的方法</h1><h2 id="进入方法三：通过线刷升级"><a href="#进入方法三：通过线刷升级" class="headerlink" title="进入方法三：通过线刷升级"></a>进入方法三：通过线刷升级</h2><p>　　点以下链接 <a target="_blank" rel="noopener" href="http://www.miui.com/shuaji-393.html,%E4%B8%8B%E8%BD%BD%E9%80%9A%E7%94%A8%E5%88%B7%E6%9C%BA%E5%B7%A5%E5%85%B7%EF%BC%8C%E5%AE%89%E8%A3%85%E5%90%8E">http://www.miui.com/shuaji-393.html,下载通用刷机工具，安装后</a>(需要<br>　　一段时间)，插上已成砖手机，windows设备管理器　端口我的显示9006
　　</p>
<h2 id="下载fastboot完整包"><a href="#下载fastboot完整包" class="headerlink" title="下载fastboot完整包"></a>下载fastboot完整包</h2><pre><code>   也是在上面链接路径下面
</code></pre>
<h2 id="下载-miflash"><a href="#下载-miflash" class="headerlink" title="下载 miflash"></a>下载 miflash</h2><p>   我下载的是15版的miflash　新版 .bat文件不同会报各种错误<br>    链接: <a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1pKPLJdD">https://pan.baidu.com/s/1pKPLJdD</a> 密码: 94mi</p>
<h2 id="救活"><a href="#救活" class="headerlink" title="救活"></a>救活</h2><p>  选择下载的fastboot包，刷机，然后是等待</p>
<p>   看到一篇文章高通下教程　<a target="_blank" rel="noopener" href="http://www.miui.com/thread-2689657-1-1.html">http://www.miui.com/thread-2689657-1-1.html</a></p>
<h2 id="Thinkpad更换固态硬盘"><a href="#Thinkpad更换固态硬盘" class="headerlink" title="Thinkpad更换固态硬盘"></a>Thinkpad更换固态硬盘</h2><ul>
<li>视频教程:</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://v.qq.com/x/page/k0157zxhob1.html">https://v.qq.com/x/page/k0157zxhob1.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=Qgh5v6ccMOg">https://www.youtube.com/watch?v=Qgh5v6ccMOg</a></p>
<p><a target="_blank" rel="noopener" href="http://v.youku.com/v_show/id_XMzE3NTU5MjA4OA==.html?spm=a2hzp.8244740.0.0">http://v.youku.com/v_show/id_XMzE3NTU5MjA4OA==.html?spm=a2hzp.8244740.0.0</a></p>
<ul>
<li>文字教程:</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://www.xinxunwei.com/bjbcj/2016/0119/5261.html">http://www.xinxunwei.com/bjbcj/2016/0119/5261.html</a></p>
<ul>
<li>Ubuntu系统安装:</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/dkh_321/article/details/79304377">https://blog.csdn.net/dkh_321/article/details/79304377</a></p>
<p>　　</p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/18/index.html">https://noteforme.github.io/page/18/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-StateBar" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/12/StateBar/">StateBar</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-12T08:35:05.000Z" itemprop="datePublished">2017年10月12日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2017/10/12/StateBar/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://developer.android.com/training/appbar/setting-up.html">https://developer.android.com/training/appbar/setting-up.html</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/xiewenfeng/statusbartextcolorchange">https://github.com/xiewenfeng/statusbartextcolorchange</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/NvmOlJzEkdrJREueIFd_DA">https://mp.weixin.qq.com/s/NvmOlJzEkdrJREueIFd_DA</a></p>
<p>目前只要考虑 5.0以上系统就可以了,有些flag虽然被标记为Deprecated,但是系统也还在用，所以有必要研究。</p>
 <img src="/2017/10/12/StateBar/tool_color.png" alt="tool设置" style="zoom:50%;">



<h3 id="statebar"><a href="#statebar" class="headerlink" title="statebar"></a>statebar</h3><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/f84f7e07e0d6">https://www.jianshu.com/p/f84f7e07e0d6</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u011200604/article/details/107959340">https://blog.csdn.net/u011200604/article/details/107959340</a></p>
<p>实现沉浸式状态栏主要跟以下四个Api相关:</p>
<ul>
<li>View#setSystemUiVisibility()</li>
<li>Window#addFlags()</li>
<li>View#setFitsSystemWindows</li>
<li>Window#setStatusBarColor()</li>
</ul>
<h5 id="View-setSystemUiVisibility-及其各种Flags"><a href="#View-setSystemUiVisibility-及其各种Flags" class="headerlink" title="View#setSystemUiVisibility()及其各种Flags"></a>View#setSystemUiVisibility()及其各种Flags</h5><p>首先setSystemUiVisibility()这个方法就是设置状态栏或者导航栏的各种属性的，哪都有些可以设置的属性呢？</p>
<ul>
<li> View.SYSTEM_UI_FLAG_FULLSCREEN</li>
</ul>
<p>  视图全屏并隐藏状态栏，当用户交互时（如下滑状态栏）会恢复隐藏的状态栏（例子：电子书阅读）缺点：进入Activity会产生一个从非全屏到全屏的闪动效果</p>
<p>  <img src="/2017/10/12/StateBar/View.SYSTEM_UI_FLAG_FULLSCREEN.gif" alt="View.SYSTEM_UI_FLAG_FULLSCREEN"></p>
<ul>
<li><p>View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY</p>
<p>粘性沉浸模式，需要和SYSTEM_UI_FLAG_FULLSCREEN或者SYSTEM_UI_FLAG_HIDE_NAVIGATION联用，当使用View.setSystemUiVisibility(View.SYSTEM_UI_FLAG_FULLSCREEN|View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY)联用时视图全屏，当用户产生交互时（如下滑状态栏）不会恢复状态栏，只会以半透明的方式覆盖在视图上面并在一定时间内自动消失</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_FULLSCREEN|View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY)</span><br></pre></td></tr></table></figure>

<p><img src="/2017/10/12/StateBar/SYSTEM_UI_FLAG_IMMERSIVE_STICKY.gif" alt="SYSTEM_UI_FLAG_IMMERSIVE_STICKY"></p>
</li>
<li><p>View.SYSTEM_UI_FLAG_IMMERSIVE：<br> 沉浸模式，只能和View.SYSTEM_UI_FLAG_FULLSCREEN联用，效果和View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY一样，目前已被后者替代。</p>
</li>
<li><p>View.SYSTEM_UI_FLAG_LOW_PROFILE:<br> 低配模式，会隐藏一些不重要的状态栏和导航栏的图标,(用模拟器跑，只剩下电池了)</p>
</li>
<li><p>View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN：<br> 视图全屏且不会产生闪动，如果没有toolbar,contentview会占住statebar的位置，状态栏会覆盖在contentview上面.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isWhite = <span class="literal">false</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">change_statebar_element_color</span><span class="params">(view: <span class="type">View</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (isWhite) &#123;</span><br><span class="line">        window.decorView.systemUiVisibility = SYSTEM_UI_FLAG_LAYOUT_STABLE <span class="comment">//statebar 元素显示白色</span></span><br><span class="line">        isWhite = <span class="literal">false</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        window.decorView.systemUiVisibility =</span><br><span class="line">            SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN or SYSTEM_UI_FLAG_LIGHT_STATUS_BAR  <span class="comment">//显示黑色</span></span><br><span class="line">        isWhite = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>View.SYSTEM_UI_FLAG_LAYOUT_STABLE：<br> 使视图稳定，当使用fitSystemWindows（）（下面会介绍这个方法）需要视图稳定，一般和SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN联用,我使用这个属性后，能使<strong>statebar的电池条变成白色</strong>。</p>
</li>
<li><p>View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR:<br> Android6.0系统以上增加的属性，设置了这个属性，状态栏会以与状态栏背景颜色兼容的模式绘制。什么意思呢？就是说如果当前的<strong>状态栏颜色</strong>是浅色，那么就有可能造成状态栏上的图标看不清了，但是如果你设置这个属性以后，状态栏的图标就会以深色绘制，这样就没有什么UI上的问题了。</p>
</li>
</ul>
<h5 id="Window-addFlags"><a href="#Window-addFlags" class="headerlink" title="Window#addFlags()"></a>Window#addFlags()</h5><p>这种方式<strong>感觉是setSystemUiVisibility之前的用法</strong>了。</p>
<p>WindowManager.LayoutParams相关属性：</p>
<ul>
<li>FLAG_TRANSLUCENT_STATUS:<br> Android4.4系统增加的属性，它会使状态栏透明,并且自动执行View.SYSTEM_UI_FLAG_LAYOUT_STABLE和View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN</li>
<li>FLAG_FULLSCREEN:<br> 视图全屏并隐藏状态栏，效果相当于View.SYSTEM_UI_FLAG_FULLSCREEN+View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY，并且视图稳定（不会因为系统控件的变化（如输入法），而重新布局）</li>
<li>FLAG_FORCE_NOT_FULLSCREEN：<br> 重写了FLAG_FULLSCREEN并强制显示状态栏（没有啥用）</li>
<li>FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS：<br> Android5.0系统以上支持，如果设置了该属性，系统栏（状态栏和导航栏）将以透明背景绘制，并且该窗口中的相应区域将填充setStatusBar（）和setNavigationBarColor（）中设置的颜色。 现在项目就是用这种方式。<ol>
<li>感觉这也是设置stateBar颜色一种主要的方式。</li>
<li>另一种就是自己设置statebar颜色。</li>
</ol>
</li>
</ul>
<h4 id="几种全屏模式"><a href="#几种全屏模式" class="headerlink" title="几种全屏模式"></a>几种全屏模式</h4><h5 id="Lean-back"><a href="#Lean-back" class="headerlink" title="Lean back"></a>Lean back</h5><p>倾斜模式</p>
<p>When users want to bring back the system bars, they simply tap the screen anywhere.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">window.decorView.systemUiVisibility =</span><br><span class="line">    SYSTEM_UI_FLAG_FULLSCREEN or SYSTEM_UI_FLAG_HIDE_NAVIGATION</span><br></pre></td></tr></table></figure>

<p>轻触屏幕 会显示 底部导航如返回按钮 </p>
<h5 id="Immersive"><a href="#Immersive" class="headerlink" title="Immersive"></a>Immersive</h5><p>沉浸模式：从边缘滑动，显示系统Bar,也可以通过回调显示系统控件</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">window.decorView.systemUiVisibility =</span><br><span class="line">    SYSTEM_UI_FLAG_FULLSCREEN or SYSTEM_UI_FLAG_HIDE_NAVIGATION or  SYSTEM_UI_FLAG_IMMERSIVE</span><br></pre></td></tr></table></figure>



<h5 id="Sticky-immersive"><a href="#Sticky-immersive" class="headerlink" title="Sticky immersive"></a>Sticky immersive</h5><p>从边缘滑动，显示系统Bar,statebar.又恢复了。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">window.decorView.systemUiVisibility =</span><br><span class="line">    SYSTEM_UI_FLAG_FULLSCREEN or SYSTEM_UI_FLAG_HIDE_NAVIGATION or  SYSTEM_UI_FLAG_IMMERSIVE_STICKY</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://developer.android.com/training/system-ui/immersive">https://developer.android.com/training/system-ui/immersive</a></p>
<p>android 11  systemUiVisibility过期需要更新</p>
<h4 id="Statabar-Color"><a href="#Statabar-Color" class="headerlink" title="Statabar Color"></a>Statabar Color</h4><ol>
<li><p>Application AppTheme statusBarColor</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;AppTheme&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Theme.AppCompat.Light.NoActionBar&quot;</span>&gt;</span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- Customize your theme here. --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorPrimary&quot;</span>&gt;</span>@color/colorPrimary<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorPrimaryDark&quot;</span>&gt;</span>@color/colorPrimaryDark<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorAccent&quot;</span>&gt;</span>@color/colorAccent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:statusBarColor&quot;</span>&gt;</span> @android:color/white<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>Activity设置</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.R) &#123;</span><br><span class="line">    window.decorView.systemUiVisibility =</span><br><span class="line">        View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    window.insetsController?.setSystemBarsAppearance(</span><br><span class="line">        WindowInsetsController.APPEARANCE_LIGHT_STATUS_BARS,</span><br><span class="line">        WindowInsetsController.APPEARANCE_LIGHT_STATUS_BARS</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="Statabar-element-Color"><a href="#Statabar-element-Color" class="headerlink" title="Statabar element Color"></a>Statabar element Color</h5><p>两种方式</p>
<h6 id="systemUiVisibility"><a href="#systemUiVisibility" class="headerlink" title="systemUiVisibility"></a>systemUiVisibility</h6><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">window.decorView.systemUiVisibility = SYSTEM_UI_FLAG_LAYOUT_STABLE <span class="comment">//statebar 元素显示白色</span></span><br><span class="line"></span><br><span class="line">window.decorView.systemUiVisibility = SYSTEM_UI_FLAG_LIGHT_STATUS_BAR  <span class="comment">//显示黑色</span></span><br></pre></td></tr></table></figure>



<h6 id="主题配置-gt-23"><a href="#主题配置-gt-23" class="headerlink" title="主题配置&gt;23"></a>主题配置&gt;23</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowLightStatusBar&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>false : 白色</p>
<p>true :  黑色</p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/training/system-ui">https://developer.android.com/training/system-ui</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/shanshui911587154/article/details/86623646">https://blog.csdn.net/shanshui911587154/article/details/86623646</a></p>
<h4 id="WindowInsetsController"><a href="#WindowInsetsController" class="headerlink" title="WindowInsetsController"></a>WindowInsetsController</h4><p>Android11 使用</p>
<h5 id="statabar-text-color"><a href="#statabar-text-color" class="headerlink" title="statabar text color"></a>statabar text color</h5><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequiresApi(Build.VERSION_CODES.R)</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">AppearanceLightStatusBars</span><span class="params">(view: <span class="type">android</span>.<span class="type">view</span>.<span class="type">View</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (isWhite) &#123;</span><br><span class="line">        controller?.setSystemBarsAppearance(</span><br><span class="line">            WindowInsetsController.APPEARANCE_LIGHT_STATUS_BARS,</span><br><span class="line">            WindowInsetsController.APPEARANCE_LIGHT_STATUS_BARS</span><br><span class="line">        )</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        controller?.setSystemBarsAppearance(</span><br><span class="line">            <span class="number">0</span>,</span><br><span class="line">            WindowInsetsController.APPEARANCE_LIGHT_STATUS_BARS</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">    isWhite = !isWhite</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="statebar-hide"><a href="#statebar-hide" class="headerlink" title="statebar hide"></a>statebar hide</h5><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isHide = <span class="literal">true</span></span><br><span class="line"><span class="meta">@RequiresApi(Build.VERSION_CODES.R)</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">hide_state_bar</span><span class="params">(view: <span class="type">android</span>.<span class="type">view</span>.<span class="type">View</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (isHide) &#123;</span><br><span class="line">        controller?.hide(WindowInsetsCompat.Type.statusBars())</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        controller?.show(WindowInsetsCompat.Type.statusBars())</span><br><span class="line">    &#125;</span><br><span class="line">    isHide = !isHide</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/jingzz1/article/details/111468726">https://blog.csdn.net/jingzz1/article/details/111468726</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6940048488071856164">https://juejin.cn/post/6940048488071856164</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_39038178/article/details/119657376">https://blog.csdn.net/qq_39038178/article/details/119657376</a></p>
<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000022129198">https://segmentfault.com/a/1190000022129198</a></p>
<h3 id="ToolBar"><a href="#ToolBar" class="headerlink" title="ToolBar"></a>ToolBar</h3><h5 id="颜色设置"><a href="#颜色设置" class="headerlink" title="颜色设置"></a>颜色设置</h5><p>  AppTheme下的设置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;application</span><br><span class="line">      android:name=&quot;.application.NBBApplication&quot;</span><br><span class="line">      android:allowBackup=&quot;true&quot;</span><br><span class="line">      android:icon=&quot;@mipmap/icon&quot;</span><br><span class="line">      android:label=&quot;@string/app_name&quot;</span><br><span class="line">      android:supportsRtl=&quot;true&quot;</span><br><span class="line">      android:theme=&quot;@style/AppTheme&quot;&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>Toolbar颜色:<br><code>&lt;item name=&quot;colorPrimary&quot;&gt;@color/toolbar_color&lt;/item&gt;</code></p>
</li>
<li><p>状态栏设置 :<br><code>&lt;item name=&quot;android:windowTranslucentStatus&quot;&gt;true&lt;/item&gt;</code><br> 在 API 19 及更高版本上，Toolbar 内容延伸至状态栏上去了, statebar把toolbar给覆盖了<br> 要解决这个问题就需要下面的属性</p>
</li>
<li><p>android:fitsSystemWindows =”true”<br>  这个属性能保持与statebar一定 的padding,能解决上面windowTranslucentStatus的重叠问题</p>
<p>   参考: <a target="_blank" rel="noopener" href="http://yifeng.studio/2017/02/19/android-statusbar/">亦枫</a> </p>
</li>
<li><p>去掉阴影线</p>
<p>   toolbar底部会有一条阴影线,通过AppBarLayout标签下的app:elevation=”0dp”去掉</p>
</li>
</ul>
<h5 id="自定义返回键"><a href="#自定义返回键" class="headerlink" title="自定义返回键"></a>自定义返回键</h5><p><code> mToolbar.setNavigationIcon(R.mipmap.ic_back);//自定义返回键</code></p>
<p>或者这样设置<br> <code>app:navigationIcon=&quot;@mipmap/ic_back&quot;</code></p>
<h5 id="toolbar-xml解读"><a href="#toolbar-xml解读" class="headerlink" title="toolbar.xml解读"></a>toolbar.xml解读</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;android.support.design.widget.AppBarLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    xmlns:app&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res-auto&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">    app:elevation&#x3D;&quot;0dp&quot;&gt;                    			 &#x2F;&#x2F;设置仰角,0dp可以去掉底部的线</span><br><span class="line"></span><br><span class="line">    &lt;android.support.v7.widget.Toolbar</span><br><span class="line">        android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;?attr&#x2F;actionBarSize&quot;</span><br><span class="line">        android:minHeight&#x3D;&quot;?actionBarSize&quot;</span><br><span class="line">        android:theme&#x3D;&quot;@style&#x2F;ThemeOverlay.AppCompat.ActionBar&quot;			&#x2F;&#x2F;toolbar主题</span><br><span class="line">        app:popupTheme&#x3D;&quot;@style&#x2F;ThemeOverlay.AppCompat.Light&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:id&#x3D;&quot;@+id&#x2F;tb_title&quot;</span><br><span class="line">            style&#x3D;&quot;@style&#x2F;TextAppearance.AppCompat.Widget.ActionBar.Title&quot;</span><br><span class="line">            android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">            android:layout_gravity&#x3D;&quot;center&quot;</span><br><span class="line">            android:text&#x3D;&quot;标题&quot;</span><br><span class="line">            android:textColor&#x3D;&quot;#333333&quot;</span><br><span class="line">            android:textSize&#x3D;&quot;18sp&quot; &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;android.support.v7.widget.Toolbar&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;android.support.design.widget.AppBarLayout&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>还有一种方式是在application设置，这样就不用集成baseActivity</p>
<p> <a target="_blank" rel="noopener" href="http://blog.csdn.net/a553181867/article/details/51336899">http://blog.csdn.net/a553181867/article/details/51336899</a></p>
<h3 id="menu设置"><a href="#menu设置" class="headerlink" title="menu设置"></a>menu设置</h3><p>AppBarLayout下的 <code>app:theme=&quot;@style/toolbar_menu&quot;</code>用于设置menu</p>
<h5 id="menu字体颜色"><a href="#menu字体颜色" class="headerlink" title="menu字体颜色"></a>menu字体颜色</h5><p>需要设置 app:theme ,用 android:theme不起作用.</p>
<p><code>&lt;item name=&quot;android:actionMenuTextColor&quot;&gt;@color/text_my_black&lt;/item&gt;</code></p>
<h5 id="menu事件"><a href="#menu事件" class="headerlink" title="menu事件"></a>menu事件</h5><pre><code>@Override
public boolean onCreateOptionsMenu(Menu menu) &#123;
    getMenuInflater().inflate(R.menu.menu_login, menu);
    menu.findItem(R.id.item_right_text).setTitle(&quot;注册&quot;); //设置文字
    return true;
&#125;

@Override
public boolean onOptionsItemSelected(MenuItem item) &#123;
    switch (item.getItemId()) &#123;
        
            break;
    &#125;
    return super.onOptionsItemSelected(item);
&#125;
</code></pre>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/guyuealian/article/details/51721167">https://blog.csdn.net/guyuealian/article/details/51721167</a></p>
<p>使用toolbar过程中遇到了一些问题</p>
<p>问题 1</p>
<p>弹出键盘后 editext不见了，应该是toolbar被拉伸了</p>
<p>暂时解决方式:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;activity</span><br><span class="line">   android:name=&quot;.activity.WebActivity&quot;</span><br><span class="line">   android:hardwareAccelerated=&quot;true&quot;</span><br><span class="line">   android:screenOrientation=&quot;portrait&quot;</span><br><span class="line">   android:windowSoftInputMode=&quot;adjustPan&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://github.com/CoolThink/StatusBarAdapt/issues/2">https://github.com/CoolThink/StatusBarAdapt/issues/2</a></p>
<h5 id="fragment使用toolbar"><a href="#fragment使用toolbar" class="headerlink" title="fragment使用toolbar"></a>fragment使用toolbar</h5><p><a target="_blank" rel="noopener" href="http://wuxiaolong.me/2015/12/21/fragmentToolbar/">http://wuxiaolong.me/2015/12/21/fragmentToolbar/</a></p>
<h5 id="三条线的颜色修改"><a href="#三条线的颜色修改" class="headerlink" title="三条线的颜色修改"></a>三条线的颜色修改</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;DrawerArrowStyle&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Base.Widget.AppCompat.DrawerArrowToggle&quot;</span>&gt;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;spinBars&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;color&quot;</span>&gt;</span>@android:color/white<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>具体可以查看mineutil:PopupWindowActivity</p>
<ul>
<li>溢出菜单三个点离右边的距离</li>
</ul>
<p> AppTheme中设置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:actionOverflowButtonStyle&quot;</span>&gt;</span>@style/OverflowMenuStyle<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;OverflowMenuStyle&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Widget.AppCompat.Light.PopupMenu.Overflow&quot;</span>&gt;</span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;overlapAnchor&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span>  <span class="comment">&lt;!--把该属性改为false即可使menu位置位于toolbar之下--&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:src&quot;</span>&gt;</span>@mipmap/doc_ic_new_patient<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:paddingRight&quot;</span>&gt;</span>15dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>





<table>
<thead>
<tr>
<th>操作符</th>
<th>描述</th>
<th>例子</th>
</tr>
</thead>
<tbody><tr>
<td>＆</td>
<td>如果相对应位都是1，则结果为1，否则为0</td>
<td>（A＆B），得到12，即0000 1100</td>
</tr>
<tr>
<td>|</td>
<td>如果相对应位都是 0，则结果为 0，否则为 1</td>
<td>（A | B）得到61，即 0011 1101</td>
</tr>
<tr>
<td>^</td>
<td>如果相对应位值相同，则结果为0，否则为1</td>
<td>（A ^ B）得到49，即 0011 0001</td>
</tr>
</tbody></table>
<p><a href="https://noteforme.github.io/2018/01/07/Operators/">https://noteforme.github.io/2018/01/07/Operators/</a></p>
<h3 id="Support-display-cutouts"><a href="#Support-display-cutouts" class="headerlink" title="Support display cutouts"></a>Support display cutouts</h3><p>刘海屏</p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/topics/display-cutout">https://developer.android.com/guide/topics/display-cutout</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_64314432/article/details/121437314">https://blog.csdn.net/m0_64314432/article/details/121437314</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/topics/display-cutout?authuser=1">https://developer.android.com/guide/topics/display-cutout?authuser=1</a></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TargetApi(28)</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">getNotchParams</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> decorView: View = window.decorView</span><br><span class="line">    <span class="keyword">if</span> (decorView != <span class="literal">null</span>) &#123;</span><br><span class="line">        decorView.post(Runnable &#123;</span><br><span class="line">            <span class="keyword">val</span> windowInsets: WindowInsets = decorView.rootWindowInsets</span><br><span class="line">            <span class="keyword">if</span> (windowInsets != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">// 当全屏顶部显示黑边时，getDisplayCutout()返回为null</span></span><br><span class="line">                <span class="keyword">val</span> displayCutout = windowInsets.displayCutout</span><br><span class="line">                Log.e(<span class="string">&quot;TAG&quot;</span>, <span class="string">&quot;安全区域距离屏幕左边的距离 SafeInsetLeft:&quot;</span> + displayCutout!!.safeInsetLeft)</span><br><span class="line">                Log.e(<span class="string">&quot;TAG&quot;</span>, <span class="string">&quot;安全区域距离屏幕右部的距离 SafeInsetRight:&quot;</span> + displayCutout.safeInsetRight)</span><br><span class="line">                Log.e(<span class="string">&quot;TAG&quot;</span>, <span class="string">&quot;安全区域距离屏幕顶部的距离 SafeInsetTop:&quot;</span> + displayCutout.safeInsetTop)</span><br><span class="line">                Log.e(<span class="string">&quot;TAG&quot;</span>, <span class="string">&quot;安全区域距离屏幕底部的距离 SafeInsetBottom:&quot;</span> + displayCutout.safeInsetBottom)</span><br><span class="line">                <span class="comment">// 获得刘海区域</span></span><br><span class="line">                <span class="keyword">val</span> rects: List&lt;Rect&gt; = displayCutout.boundingRects</span><br><span class="line">                <span class="keyword">if</span> (rects == <span class="literal">null</span> || rects.isEmpty()) &#123;</span><br><span class="line">                    Log.e(<span class="string">&quot;TAG&quot;</span>, <span class="string">&quot;不是刘海屏&quot;</span>)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    Log.e(<span class="string">&quot;TAG&quot;</span>, <span class="string">&quot;刘海屏数量:&quot;</span> + rects.size)</span><br><span class="line">                    <span class="keyword">for</span> (rect <span class="keyword">in</span> rects) &#123;</span><br><span class="line">                        Log.e(<span class="string">&quot;TAG&quot;</span>, <span class="string">&quot;刘海屏区域：<span class="variable">$rect</span>&quot;</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h4 id="骨架屏加载效果"><a href="#骨架屏加载效果" class="headerlink" title="骨架屏加载效果"></a>骨架屏加载效果</h4><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6963143268448239653">https://juejin.cn/post/6963143268448239653</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/ethanhua/Skeleton">https://github.com/ethanhua/Skeleton</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ded3c7e8adfe">https://www.jianshu.com/p/ded3c7e8adfe</a></p>
<p>DialogFragment 修改底部导航了</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/e28a54b44bdc">https://www.jianshu.com/p/e28a54b44bdc</a></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/18/index.html">https://noteforme.github.io/page/18/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-DesignPattern_Builder" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/07/DesignPattern_Builder/">DesignPattern-Builder</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-07T09:45:46.000Z" itemprop="datePublished">2017年10月07日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/DesignPatterns/">DesignPatterns</a>
  </div>

      
      
<a href="/2017/10/07/DesignPattern_Builder/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Builder模式"><a href="#Builder模式" class="headerlink" title="Builder模式"></a>Builder模式</h1><p>不直接生成想要的对象，而是让客户端利用所有必要的参数调用构造器（或者静态工厂），得到一个builder对象，然后客户端在builder对象上调用类似于setter的方法，来设置每个相关的可选参数</p>
<p> 既能保证像重叠构造器模式那样的安全性，也能保证像JavaBeans模式那么好的可读性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NutritionFacts_03_Builder</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> servingSize;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> servings;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> calories;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> fat;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> sodium;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> carbohydrate;</span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">static</span>  <span class="class"><span class="keyword">class</span>  <span class="title">Builder</span></span>&#123;</span><br><span class="line">        <span class="comment">//Required parameters</span></span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> servingSize;</span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> servings;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Optional parameters = initialized to default values</span></span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">int</span> calories     = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">int</span> fat          = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">int</span> carbohydrate = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">int</span> sodium       = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Builder</span><span class="params">(<span class="keyword">int</span> servingSize, <span class="keyword">int</span> servings)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.servingSize = servingSize;</span><br><span class="line">            <span class="keyword">this</span>.servings = servings;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span>  Builder <span class="title">calories</span><span class="params">(<span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">            calories = val;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span>  Builder <span class="title">fat</span><span class="params">(<span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.fat = fat;</span><br><span class="line">            <span class="keyword">return</span>  <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span>  Builder <span class="title">carbohydrate</span><span class="params">(<span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">            carbohydrate = val;</span><br><span class="line">            <span class="keyword">return</span>  <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span>  Builder <span class="title">sodium</span><span class="params">(<span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">            sodium = val;</span><br><span class="line">            <span class="keyword">return</span>  <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span>  NutritionFacts_03_Builder <span class="title">build</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span>  <span class="keyword">new</span> NutritionFacts_03_Builder(<span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">NutritionFacts_03_Builder</span><span class="params">(Builder builder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.servingSize = builder.servingSize;</span><br><span class="line">        <span class="keyword">this</span>.servings = builder.servings;</span><br><span class="line">        <span class="keyword">this</span>.calories = builder.calories;</span><br><span class="line">        <span class="keyword">this</span>.fat = builder.fat;</span><br><span class="line">        <span class="keyword">this</span>.sodium = builder.sodium;</span><br><span class="line">        <span class="keyword">this</span>.carbohydrate = builder.carbohydrate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        NutritionFacts_03_Builder cocaCola = <span class="keyword">new</span> NutritionFacts_03_Builder.Builder(<span class="number">240</span>,<span class="number">9</span>)</span><br><span class="line">                .calories(<span class="number">100</span>).sodium(<span class="number">35</span>).carbohydrate(<span class="number">27</span>).build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id=""><a href="#" class="headerlink" title=""></a></h2><p> 返回的this时怎么替代对象的</p>
<h5 id="对象创建更加灵活"><a href="#对象创建更加灵活" class="headerlink" title="对象创建更加灵活"></a>对象创建更加灵活</h5><p>当 isRef 为 true 的时候，arg 表示 String 类型的 refBeanId，type 不需要设置；当 isRef 为 false 的时候，arg、type 都需要设置</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConstructorArg</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">boolean</span> isRef;</span><br><span class="line">    <span class="keyword">private</span> Class <span class="keyword">type</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Object</span> arg;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="title">ConstructorArg</span>(<span class="params">Builder builder</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.isRef = isRef;</span><br><span class="line">        <span class="built_in">this</span>.type = <span class="keyword">type</span>;</span><br><span class="line">        <span class="built_in">this</span>.arg = arg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">boolean</span> isRef;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> Class <span class="keyword">type</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">Object</span> arg;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="title">Builder</span>(<span class="params"><span class="built_in">boolean</span> isRef</span>)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.isRef = isRef;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Builder <span class="function"><span class="title">setType</span>(<span class="params">Class <span class="keyword">type</span></span>)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.type = <span class="keyword">type</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Builder <span class="function"><span class="title">setArg</span>(<span class="params"><span class="built_in">Object</span> arg</span>)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.arg = arg;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> ConstructorArg <span class="function"><span class="title">build</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (isRef) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!(arg <span class="keyword">instanceof</span> <span class="built_in">String</span>)) &#123;</span><br><span class="line">                    <span class="comment">//这里refBeanId是ConstructorArg吗？只是判断了下arg类型是否为String</span></span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;当 isRef 为 true 的时候，arg 表示 String 类型refBeanId&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">type</span> != <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;当 isRef 为 true 的时候，type 不需要设置&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!isRef) &#123;</span><br><span class="line">                <span class="keyword">if</span> (arg == <span class="literal">null</span> || <span class="keyword">type</span> == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;当 isRef 为 false 的时候，arg、type 都需要设置&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ConstructorArg(<span class="built_in">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/18/index.html">https://noteforme.github.io/page/18/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Fragment" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/05/Fragment/">Fragment</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-05T11:54:50.000Z" itemprop="datePublished">2017年10月05日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2017/10/05/Fragment/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://developer.android.com/reference/android/app/Fragment.html">https://developer.android.com/reference/android/app/Fragment.html</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/components/fragments.html">https://developer.android.com/guide/components/fragments.html</a></p>
<p><a target="_blank" rel="noopener" href="https://wizardforcel.gitbooks.io/w3school-android/content/77.html">https://wizardforcel.gitbooks.io/w3school-android/content/77.html</a><br><a target="_blank" rel="noopener" href="https://juejin.im/post/5901b564570c35005804424b">https://juejin.im/post/5901b564570c35005804424b</a></p>
<h4 id="Lifecycle"><a href="#Lifecycle" class="headerlink" title="Lifecycle"></a>Lifecycle</h4><p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/fragments/lifecycle">https://developer.android.com/guide/fragments/lifecycle</a></p>
<ul>
<li>onViewCreated(View view, Bundle savedInstanceState)</li>
</ul>
<p>Called immediately after <code>onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)</code> has returned, but before any saved state has been restored in to the view.</p>
<img src="/2017/10/05/Fragment/fragment-view-lifecycle.png" alt="ff" style="zoom:67%;">



<h5 id="fragment回调"><a href="#fragment回调" class="headerlink" title="fragment回调"></a>fragment回调</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var mListener: IFeedBackListener? &#x3D; null</span><br><span class="line"></span><br><span class="line">override fun onAttach(context: Context) &#123;</span><br><span class="line">    super.onAttach(context)</span><br><span class="line">    if (parentFragment is IFeedBackListener) &#123;</span><br><span class="line">        mListener &#x3D; parentFragment as IFeedBackListener</span><br><span class="line">    &#125; else if (context is IFeedBackListener) &#123;</span><br><span class="line">        mListener &#x3D; context</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        throw RuntimeException(context?.toString() + &quot; must implement ISelectListener&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://noteforme.github.io/2017/10/05/Fragment/">https://noteforme.github.io/2017/10/05/Fragment/</a></p>
<h4 id="Fragment重叠"><a href="#Fragment重叠" class="headerlink" title="Fragment重叠"></a>Fragment重叠</h4><p> 横竖屏切换</p>
<p>被系统回收（复现 进入开发者选项 -》不保留活动）</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c12a98a36b2b">https://www.jianshu.com/p/c12a98a36b2b</a></p>
<h5 id="BottomNavigationView-error"><a href="#BottomNavigationView-error" class="headerlink" title="BottomNavigationView error"></a>BottomNavigationView error</h5><p>使用BottomNavigationView出现很严重的问题,很久才找到原因</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Caused by: android.view.InflateException: Binary XML file line #16: Binary XML file line #16: Error inflating class com.google.android.material.bottomnavigation.BottomNavigationView</span><br><span class="line">    Caused by: android.view.InflateException: Binary XML file line #16: Error inflating class com.google.android.material.bottomnavigation.BottomNavigationView</span><br></pre></td></tr></table></figure>

<p>因为 AndroidManifest.xml  application下的android:theme=”@style/AppTheme”多出了,把下面的删除了就好了.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;item name&#x3D;&quot;android:textColorSecondary&quot;&gt;#ffffff&lt;&#x2F;item&gt;</span><br><span class="line">&lt;item name&#x3D;&quot;android:actionOverflowButtonStyle&quot;&gt;@style&#x2F;OverflowMenuStyle&lt;&#x2F;item&gt;</span><br><span class="line">&lt;item name&#x3D;&quot;android:listDivider&quot;&gt;@drawable&#x2F;divider&lt;&#x2F;item&gt;</span><br></pre></td></tr></table></figure>

<h5 id="重叠原因"><a href="#重叠原因" class="headerlink" title="重叠原因"></a>重叠原因</h5><blockquote>
<p> 旋转屏幕时候，创建的homeFragment会被回收,在销毁前，执行了onSaveInstanceState(Bundle outState)这个方法。这个方法会保存activity的一些信息，其中就包括添加过的fragment，Activity重建后，再次初始化homeFragment，接着显示，导致了重叠的问题。</p>
</blockquote>
<h5 id="代码验证"><a href="#代码验证" class="headerlink" title="代码验证"></a>代码验证</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">private fun initFragment() &#123;</span><br><span class="line">    if (homeFragment &#x3D;&#x3D; null) &#123;</span><br><span class="line">        homeFragment &#x3D; HomeFragment()</span><br><span class="line">        addFragment(homeFragment!!)</span><br><span class="line">        showFragment(homeFragment)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">    super.onCreate(savedInstanceState)</span><br><span class="line">    Timber.d(&quot;onCreate() $homeFragment&quot;)</span><br><span class="line">    initFragment()</span><br><span class="line">    Timber.d(&quot;initFragment() $homeFragment&quot;)   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> override fun onDestroy() &#123;</span><br><span class="line">        super.onDestroy()</span><br><span class="line">        Timber.tag(TAG).d(&quot;onDestroy() homeFragment $homeFragment&quot;)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>日志</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">D&#x2F;TabBottomActivity LaunchModeActivity: onCreate() taskId  641</span><br><span class="line">D&#x2F;TabBottomActivity LaunchModeActivity: onCreate() homeFragment null</span><br><span class="line">D&#x2F;TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;1adc3fa&#125; (b0660244-39c4-4104-b558-f5384c7adb0d) id&#x3D;0x7f09010e&#125;</span><br><span class="line">D&#x2F;TabBottomActivity LaunchModeActivity: onStart()</span><br><span class="line">D&#x2F;TabBottomActivity LaunchModeActivity: onResume()</span><br><span class="line">D&#x2F;TabBottomActivity LaunchModeActivity: onPause()</span><br><span class="line">D&#x2F;TabBottomActivity LaunchModeActivity: onSaveInstanceState()</span><br><span class="line">D&#x2F;TabBottomActivity LaunchModeActivity: onStop()</span><br><span class="line">D&#x2F;TabBottomActivity LaunchModeActivity: onDestroy()</span><br><span class="line">D&#x2F;TabBottomActivity LaunchModeActivity: onDestroy() homeFragment HomeFragment&#123;1adc3fa&#125; (d84f5956-fa2c-4cd2-8397-0904040d2a6f)&#125;</span><br><span class="line">D&#x2F;TabBottomActivity LaunchModeActivity: onCreate() taskId  641</span><br><span class="line">D&#x2F;TabBottomActivity LaunchModeActivity: onCreate() homeFragment null</span><br><span class="line">D&#x2F;TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;ac076db&#125; (f8ee348b-6ff7-4b1e-ba27-6e47e848f623) id&#x3D;0x7f09010e&#125;</span><br><span class="line">D&#x2F;TabBottomActivity LaunchModeActivity: onStart()</span><br><span class="line">D&#x2F;TabBottomActivity LaunchModeActivity: onRestoreInstanceState()</span><br><span class="line">D&#x2F;TabBottomActivity LaunchModeActivity: onResume()</span><br></pre></td></tr></table></figure>

<p>从 initFragment（） 1adc3fa , ac076db 可以看到，HomeFrgment重新创建了.</p>
<h5 id="处理方法"><a href="#处理方法" class="headerlink" title="处理方法"></a>处理方法</h5><ol>
<li><p>onSaveInstanceState 不保存信息</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onSaveInstanceState</span><span class="params">(outState: <span class="type">Bundle</span>)</span></span> &#123;</span><br><span class="line"><span class="comment">//        super.onSaveInstanceState(outState)</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>这种方式的弊端就是，切换后总是回到首页.</p>
</li>
<li><p>onSaveInstanceState() 保存Fragment</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">    super.onCreate(savedInstanceState)</span><br><span class="line"></span><br><span class="line">    if (savedInstanceState !&#x3D; null) &#123;</span><br><span class="line">        &#x2F;*获取保存的fragment  没有的话返回null*&#x2F;</span><br><span class="line">        homeFragment &#x3D; supportFragmentManager.getFragment(savedInstanceState, HOME_FRAGMENT_KEY) as HomeFragment?</span><br><span class="line">        healthFragment &#x3D; supportFragmentManager.getFragment(savedInstanceState, DASHBOARD_FRAGMENT_KEY) as HealthFragment?</span><br><span class="line">        personFragment &#x3D; supportFragmentManager.getFragment(savedInstanceState, NOTICE_FRAGMENT_KEY) as PersonFragment?</span><br><span class="line">        addToList(homeFragment)</span><br><span class="line">        addToList(healthFragment)</span><br><span class="line">        addToList(personFragment)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        initFragment()</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> override fun onSaveInstanceState(outState: Bundle) &#123;</span><br><span class="line">        super.onSaveInstanceState(outState)</span><br><span class="line">        Timber.d(&quot;MainActivity onSaveInstanceState&quot;)</span><br><span class="line">        &#x2F;*fragment不为空时 保存*&#x2F;if (homeFragment !&#x3D; null) &#123;</span><br><span class="line">            supportFragmentManager.putFragment(outState!!, HOME_FRAGMENT_KEY, homeFragment!!)</span><br><span class="line">        &#125;</span><br><span class="line">        if (healthFragment !&#x3D; null) &#123;</span><br><span class="line">            supportFragmentManager.putFragment(outState!!, DASHBOARD_FRAGMENT_KEY, healthFragment!!)</span><br><span class="line">        &#125;</span><br><span class="line">        if (personFragment !&#x3D; null) &#123;</span><br><span class="line">            supportFragmentManager.putFragment(outState!!, NOTICE_FRAGMENT_KEY, personFragment!!)</span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure></li>
</ol>
<p>这种方式，可以解决问题，但是打印的日志HomeFragment还是不一样，是什么情况？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">D&#x2F;TabBottomActivity LaunchModeActivity: onCreate() taskId  4437</span><br><span class="line"> D&#x2F;TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;dc2914d&#125; (5f30b0dd-a8d2-4b3c-a27f-1d160a9da58e) id&#x3D;0x7f09010e&#125;</span><br><span class="line"> D&#x2F;TabBottomActivity LaunchModeActivity: onStart()</span><br><span class="line"> D&#x2F;TabBottomActivity LaunchModeActivity: onResume()</span><br><span class="line"> D&#x2F;TabBottomActivity$onCreate: navigation_health</span><br><span class="line"> D&#x2F;TabBottomActivity LaunchModeActivity: onPause()</span><br><span class="line"> D&#x2F;TabBottomActivity LaunchModeActivity: onSaveInstanceState()</span><br><span class="line"> D&#x2F;TabBottomActivity: MainActivity onSaveInstanceState</span><br><span class="line"> D&#x2F;TabBottomActivity LaunchModeActivity: onStop()</span><br><span class="line"> D&#x2F;TabBottomActivity LaunchModeActivity: onDestroy()</span><br><span class="line"> D&#x2F;TabBottomActivity LaunchModeActivity: onDestroy() homeFragment HomeFragment&#123;dc2914d&#125; (ab276ea2-5fa2-4d79-b6a6-af7143b114e8)&#125;</span><br><span class="line"> D&#x2F;TabBottomActivity LaunchModeActivity: onCreate() taskId  4437</span><br><span class="line"> D&#x2F;TabBottomActivity: fragmentList数量1</span><br><span class="line"> D&#x2F;TabBottomActivity: fragmentList数量2</span><br><span class="line"> D&#x2F;TabBottomActivity: fragmentList数量2</span><br><span class="line"> D&#x2F;TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;9139494&#125; (5f30b0dd-a8d2-4b3c-a27f-1d160a9da58e) id&#x3D;0x7f09010e&#125;</span><br><span class="line"> D&#x2F;TabBottomActivity LaunchModeActivity: onStart()</span><br><span class="line"> D&#x2F;TabBottomActivity LaunchModeActivity: onRestoreInstanceState()</span><br><span class="line"> D&#x2F;TabBottomActivity LaunchModeActivity: onResume()</span><br><span class="line"> D&#x2F;TabBottomActivity LaunchModeActivity: onPause()</span><br><span class="line"> D&#x2F;TabBottomActivity LaunchModeActivity: onSaveInstanceState()</span><br><span class="line"> D&#x2F;TabBottomActivity: MainActivity onSaveInstanceState</span><br><span class="line"> D&#x2F;TabBottomActivity LaunchModeActivity: onStop()</span><br><span class="line"> D&#x2F;TabBottomActivity LaunchModeActivity: onDestroy()</span><br><span class="line"> D&#x2F;TabBottomActivity LaunchModeActivity: onDestroy() homeFragment HomeFragment&#123;9139494&#125; (cadcb63f-8516-4d44-8f3c-75b0c8e9f27f)&#125;</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/yuzhiqiang_1993/article/details/75014591">https://blog.csdn.net/yuzhiqiang_1993/article/details/75014591</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/78ec81b42f92">https://www.jianshu.com/p/78ec81b42f92</a></p>
<h5 id="下面这种方式没理解"><a href="#下面这种方式没理解" class="headerlink" title="下面这种方式没理解"></a>下面这种方式没理解</h5><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d9143a92ad94">https://www.jianshu.com/p/d9143a92ad94</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c12a98a36b2b">https://www.jianshu.com/p/c12a98a36b2b</a></p>
<h4 id="横竖屏切换，Fragment实例复用"><a href="#横竖屏切换，Fragment实例复用" class="headerlink" title="横竖屏切换，Fragment实例复用"></a>横竖屏切换，Fragment实例复用</h4><p>setRetainInstance=true</p>
<p><strong>retainInstance = true已经过期，改用ViewModel</strong></p>
<p>LifeFragment</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">    super.onCreate(savedInstanceState)</span><br><span class="line">    retainInstance &#x3D; true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">private fun initFragment() &#123;</span><br><span class="line">    var lifeFragment &#x3D; supportFragmentManager.findFragmentById(R.id.fl_content)</span><br><span class="line">    if (lifeFragment &#x3D;&#x3D; null) &#123;</span><br><span class="line">        lifeFragment &#x3D; LifeFragment()</span><br><span class="line">        supportFragmentManager.beginTransaction().add(R.id.fl_content, lifeFragment).commit()</span><br><span class="line">    &#125;</span><br><span class="line">    Timber.d(&quot;LifeFragment $lifeFragment&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>切换屏幕后 LifeFragment,ondestroy()没志行,后面的Oncreate()也没有创建.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">D&#x2F;LifeActivity LaunchModeActivity: onCreate() taskId  599</span><br><span class="line">D&#x2F;LifeActivity: LifeFragment LifeFragment&#123;6a86311&#125; (70133a14-6dcf-4f8b-beee-6cd31d6623ba) id&#x3D;0x7f090109&#125;</span><br><span class="line">D&#x2F;LifeFragment LaunchModeFragment: onAttach(Context context)</span><br><span class="line">D&#x2F;LifeFragment LaunchModeFragment: onCreate() savedInstanceState    null</span><br><span class="line">D&#x2F;LifeFragment LaunchModeFragment: onCreateView()</span><br><span class="line">D&#x2F;LifeFragment LaunchModeFragment: onActivityCreated()</span><br><span class="line">D&#x2F;LifeFragment LaunchModeFragment: onStart()</span><br><span class="line">D&#x2F;LifeFragment LaunchModeFragment: onResume()</span><br><span class="line">D&#x2F;LifeFragment LaunchModeFragment: onPause() </span><br><span class="line">D&#x2F;LifeFragment LaunchModeFragment: onStop()</span><br><span class="line">D&#x2F;LifeFragment LaunchModeFragment: onDestroyView()</span><br><span class="line">D&#x2F;LifeFragment LaunchModeFragment: onDetach()</span><br><span class="line">D&#x2F;LifeFragment LaunchModeFragment: onAttach(Context context)</span><br><span class="line">D&#x2F;LifeActivity LaunchModeActivity: onCreate() taskId  599</span><br><span class="line">D&#x2F;LifeActivity: LifeFragment LifeFragment&#123;6a86311&#125; (70133a14-6dcf-4f8b-beee-6cd31d6623ba) id&#x3D;0x7f090109&#125;</span><br><span class="line">D&#x2F;LifeFragment LaunchModeFragment: onCreateView()</span><br><span class="line">D&#x2F;LifeFragment LaunchModeFragment: onActivityCreated()</span><br><span class="line">D&#x2F;LifeFragment LaunchModeFragment: onStart()</span><br><span class="line">D&#x2F;LifeFragment LaunchModeFragment: onResume()</span><br></pre></td></tr></table></figure>

<h4 id="Fragment懒加载"><a href="#Fragment懒加载" class="headerlink" title="Fragment懒加载"></a>Fragment懒加载</h4><p>Fragment和ViewPager一起使用会有个预加载机制，会把旁白的Fragment的生命周期方法<br>前半段先执行，然后执行自身的生命周期方法</p>
<p>在项目终从其他页面回到MainAcitivty的时候，三个页面的生命周期方法都跑了一遍</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">　  D&#x2F;FinanceFragment         Test: onStart()</span><br><span class="line">D&#x2F;WealthFragment         Test: onStart()</span><br><span class="line">D&#x2F;MineFragment         Test: onStart()</span><br><span class="line">D&#x2F;FinanceFragment         Test: onResume()</span><br><span class="line">D&#x2F;WealthFragment         Test: onResume()</span><br><span class="line">D&#x2F;MineFragment         Test: onResume()</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">     </span><br><span class="line">    private boolean isPrepared;  &#x2F;&#x2F;判断view是否加载完成,在视图未初始化的时候，在lazyLoad当中就使用的话，就会有空指针的异常</span><br><span class="line">    private boolean isVisible;  &#x2F;&#x2F;判断当前Fragment是否可见状态,标志已经初始化完成，因为setUserVisibleHint是在onCreateView之前调用的</span><br><span class="line">	  @Override</span><br><span class="line">    public void onViewCreated(View view, @Nullable Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onViewCreated(view, savedInstanceState);</span><br><span class="line">        isPrepared &#x3D; true;</span><br><span class="line">        lazyLoad();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Nullable</span><br><span class="line">    @Override</span><br><span class="line">    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, Bundle savedInstanceState) &#123;</span><br><span class="line">&#x2F;&#x2F;        Log.d(TAG + &quot;         Test&quot;, &quot; onCreateView()&quot;);</span><br><span class="line"></span><br><span class="line">        if (rootView &#x3D;&#x3D; null) &#123;</span><br><span class="line">            int view &#x3D; setLayoutId();</span><br><span class="line">            if (view !&#x3D; 0) &#123;</span><br><span class="line">                rootView &#x3D; inflater.inflate(view, container, false);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            ViewGroup parent &#x3D; (ViewGroup) rootView.getParent();</span><br><span class="line">            if (parent !&#x3D; null) &#123;</span><br><span class="line">                parent.removeView(rootView);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        initView(rootView);</span><br><span class="line">        return rootView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;  http:&#x2F;&#x2F;www.10tiao.com&#x2F;html&#x2F;565&#x2F;201702&#x2F;2247483988&#x2F;1.html</span><br><span class="line">    &#x2F;&#x2F; 标志位，标志已经初始化完成，因为setUserVisibleHint是在onCreateView之前调用的，</span><br><span class="line">    &#x2F;&#x2F; 在视图未初始化的时候，在lazyLoad当中就使用的话，就会有空指针的异常</span><br><span class="line">    private boolean isPrepared;</span><br><span class="line">    &#x2F;&#x2F;标志当前页面是否可见</span><br><span class="line">    private boolean isVisible;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void setUserVisibleHint(boolean isVisibleToUser) &#123;</span><br><span class="line">        super.setUserVisibleHint(isVisibleToUser);</span><br><span class="line">&#x2F;&#x2F;        Log.d(TAG + &quot;         Test&quot;, &quot; setUserVisibleHint() is Visible : ?  &quot; + isVisibleToUser);</span><br><span class="line"></span><br><span class="line">        if (getUserVisibleHint()) &#123;</span><br><span class="line">            isVisible &#x3D; true;</span><br><span class="line">            onVisible();</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            isVisible &#x3D; false;</span><br><span class="line">            onInvisible();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    protected void onInvisible() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    protected void onVisible() &#123;</span><br><span class="line">        lazyLoad();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void lazyLoad() &#123;</span><br><span class="line">        if (!isVisible || !isPrepared) &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        requestData();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 请求数据</span><br><span class="line">     *&#x2F;</span><br><span class="line">    protected void requestData() &#123;</span><br><span class="line">        Log.d(TAG + &quot;         Test&quot;, &quot; requestData &quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>参考: <a target="_blank" rel="noopener" href="http://www.10tiao.com/html/565/201702/2247483988/1.html">http://www.10tiao.com/html/565/201702/2247483988/1.html</a></p>
<h4 id="Activity-dialogFragment-的事件回调"><a href="#Activity-dialogFragment-的事件回调" class="headerlink" title="Activity  dialogFragment 的事件回调"></a>Activity  dialogFragment 的事件回调</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">interface ISelectListener &#123;</span><br><span class="line">    fun getItemPosition(position: Int)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var mListener: ISelectListener? &#x3D; null</span><br><span class="line"></span><br><span class="line">override fun onAttach(context: Context) &#123;</span><br><span class="line">    super.onAttach(context)</span><br><span class="line">    if (parentFragment is ISelectListener)&#123;</span><br><span class="line">        mListener &#x3D; parentFragment  as ISelectListener</span><br><span class="line">    &#125;else if (context is ISelectListener) &#123;</span><br><span class="line">        mListener &#x3D; context</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        throw RuntimeException(context!!.toString() + &quot; must implement ISelectListener&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/components/fragments.html">https://developer.android.com/guide/components/fragments.html</a></p>
<p>onHiddenChanged切换刷新</p>
<p>使用hide()/show()发现生命周期基本不执行，不过可以用到这个onHiddenChanged();</p>
<p>看下执行的生命周期;   从 SecondFragment 页面开始到 -&gt;FirstFragment </p>
<blockquote>
<p>07-18 15:53:25.128 7758-7758/com.mineutils D/SecondFragment: onAttach(Context context)<br>07-18 15:53:25.129 7758-7758/com.mineutils D/SecondFragment: onCreate()<br>07-18 15:53:25.142 7758-7758/com.mineutils D/SecondFragment: onCreateView()<br>07-18 15:53:25.148 7758-7758/com.mineutils D/SecondFragment:  onViewCreated<br>                                                                onActivityCreated()<br>                                                                onStart()<br>​                                                                  onResume()</p>
<p>07-18 15:53:34.200 7758-7758/com.mineutils D/SecondFragment: onHiddenChanged hidden   true<br>07-18 15:53:34.207 7758-7758/com.mineutils D/FirstFragment:    onCreateView()<br>07-18 15:53:34.208 7758-7758/com.mineutils D/FirstFragment:    onViewCreated<br>                                                              onActivityCreated()<br>​                                                           onStart()</p>
<p>07-18 15:53:53.968 7758-7758/com.mineutils D/FirstFragment: onHiddenChanged hidden   true<br>07-18 15:53:53.968 7758-7758/com.mineutils D/SecondFragment: onHiddenChanged hidden   false</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/cml_blog/article/details/41411451">https://blog.csdn.net/cml_blog/article/details/41411451</a></p>
<h4 id="fragment特性"><a href="#fragment特性" class="headerlink" title="fragment特性"></a>fragment特性</h4><h5 id="commitAllowingStateLoss-VS-commit-区别"><a href="#commitAllowingStateLoss-VS-commit-区别" class="headerlink" title="commitAllowingStateLoss VS  commit()区别"></a>commitAllowingStateLoss VS  commit()区别</h5><p><a target="_blank" rel="noopener" href="https://huxian99.github.io/2016/08/28/cj3qymo360000owxk9zp17alo/">https://huxian99.github.io/2016/08/28/cj3qymo360000owxk9zp17alo/</a></p>
<h5 id="Fragment之间传递数据"><a href="#Fragment之间传递数据" class="headerlink" title="Fragment之间传递数据"></a>Fragment之间传递数据</h5><ol>
<li><p>Fragment.setArguments()方法传递bundle</p>
</li>
<li><p>findFragmentById()找到tag,然后直接操作Framgent</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onArticleSelected</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">      ArticleFragment articleFrag = (ArticleFragment)</span><br><span class="line">              getSupportFragmentManager().findFragmentById(R.id.article_fragment);</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">if</span> (articleFrag != <span class="keyword">null</span>) &#123;</span><br><span class="line">          articleFrag.updateArticleView(position);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          ArticleFragment newFragment = <span class="keyword">new</span> ArticleFragment();</span><br><span class="line">          Bundle args = <span class="keyword">new</span> Bundle();</span><br><span class="line">          args.putInt(ArticleFragment.ARG_POSITION, position);</span><br><span class="line">          newFragment.setArguments(args);</span><br><span class="line">   </span><br><span class="line">          FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();</span><br><span class="line">          transaction.replace(R.id.fragment_container, newFragment);</span><br><span class="line">          transaction.addToBackStack(<span class="keyword">null</span>);</span><br><span class="line">          transaction.commit();</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>接口回调</p>
</li>
<li><p>ViewModel Livedata</p>
</li>
</ol>
<h5 id="给已经创建frament传递数据"><a href="#给已经创建frament传递数据" class="headerlink" title="给已经创建frament传递数据"></a>给已经创建frament传递数据</h5><p>也是直接 Fragment.refresh(),第一行代码第三版P227，也是这样做的。</p>
<h5 id="fragment回退栈"><a href="#fragment回退栈" class="headerlink" title="fragment回退栈"></a>fragment回退栈</h5><p>tx.addToBackStack(null); 添加回退功能，类似Activity压栈的过程</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/fe16553ca2ca">https://www.jianshu.com/p/fe16553ca2ca</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zhiyuan0932/article/details/52593039">https://blog.csdn.net/zhiyuan0932/article/details/52593039</a></p>
<p>Fragment控制父Fragment展示</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/39491655/communication-between-nested-fragments-in-android">Communication between nested fragments in Android</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u011481547/article/details/71552720">https://blog.csdn.net/u011481547/article/details/71552720</a></p>
<p>Fragmet全局流程图</p>
<p><a target="_blank" rel="noopener" href="https://kotlintc.com/articles/5693">https://kotlintc.com/articles/5693</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/MOWdbI5IREjQP1Px-WJY1Q">https://mp.weixin.qq.com/s/MOWdbI5IREjQP1Px-WJY1Q</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5bcd58b6e51d45404c71d23f">https://juejin.im/post/5bcd58b6e51d45404c71d23f</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/_hdbMOA2TVvX4jFnMu15bg">https://mp.weixin.qq.com/s/_hdbMOA2TVvX4jFnMu15bg</a></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/18/index.html">https://noteforme.github.io/page/18/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Fragment/" rel="tag">Fragment</a></li></ul>

          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>



    <nav id="page-nav">

<a class="extend prev" rel="prev" href="/page/17/">Previous</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="page-number" href="/page/17/">17</a><span class="page-number current">18</span><a class="page-number" href="/page/19/">19</a><a class="page-number" href="/page/20/">20</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><a class="extend next" rel="next" href="/page/19/">Next</a>
</nav>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-posts"></i> Recent</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/08/09/LC-DP-BAG/">LC_DP_BAG</a>
          </li>
        
          <li>
            <a href="/2023/04/02/LC-DP/">LC-DP</a>
          </li>
        
          <li>
            <a href="/2023/01/10/RecyclerView-padding/">RecyclerView-padding</a>
          </li>
        
          <li>
            <a href="/2023/01/02/LC-GREEDY/">LC-GREEDY</a>
          </li>
        
          <li>
            <a href="/2022/12/27/viewBinding/">viewBinding</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ANDROID/" style="font-size: 12.86px;">ANDROID</a> <a href="/tags/AOSP/" style="font-size: 18.57px;">AOSP</a> <a href="/tags/Activity/" style="font-size: 10px;">Activity</a> <a href="/tags/AndroidNewFeatures/" style="font-size: 10px;">AndroidNewFeatures</a> <a href="/tags/Assembly/" style="font-size: 10px;">Assembly</a> <a href="/tags/BLOG/" style="font-size: 10px;">BLOG</a> <a href="/tags/ConstraintLayout/" style="font-size: 10px;">ConstraintLayout</a> <a href="/tags/DB/" style="font-size: 11.43px;">DB</a> <a href="/tags/Drawer/" style="font-size: 10px;">Drawer</a> <a href="/tags/Fragment/" style="font-size: 11.43px;">Fragment</a> <a href="/tags/Git/" style="font-size: 11.43px;">Git</a> <a href="/tags/JVM/" style="font-size: 18.57px;">JVM</a> <a href="/tags/LEETCODE/" style="font-size: 20px;">LEETCODE</a> <a href="/tags/Operators/" style="font-size: 10px;">Operators</a> <a href="/tags/Performance/" style="font-size: 14.29px;">Performance</a> <a href="/tags/RecyclerView/" style="font-size: 11.43px;">RecyclerView</a> <a href="/tags/RxJava/" style="font-size: 14.29px;">RxJava</a> <a href="/tags/THINK/" style="font-size: 10px;">THINK</a> <a href="/tags/TOOL/" style="font-size: 11.43px;">TOOL</a> <a href="/tags/TabLayout/" style="font-size: 10px;">TabLayout</a> <a href="/tags/Test/" style="font-size: 14.29px;">Test</a> <a href="/tags/TouchEvent/" style="font-size: 12.86px;">TouchEvent</a> <a href="/tags/VIEW/" style="font-size: 11.43px;">VIEW</a> <a href="/tags/anim/" style="font-size: 10px;">anim</a> <a href="/tags/concurrency/" style="font-size: 14.29px;">concurrency</a> <a href="/tags/coroutie/" style="font-size: 17.14px;">coroutie</a> <a href="/tags/inter/" style="font-size: 15.71px;">inter</a> <a href="/tags/keyboard/" style="font-size: 10px;">keyboard</a> <a href="/tags/proguard/" style="font-size: 10px;">proguard</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-classify"></i> Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ANDROID/">ANDROID</a><span class="category-list-count">59</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/BLE/">BLE</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DataStructure/">DataStructure</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DesignPatterns/">DesignPatterns</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ENGLISH/">ENGLISH</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/">JAVA</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Jetpack/">Jetpack</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kotlin/">Kotlin</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LINUX/">LINUX</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mathematics/">Mathematics</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS/">OS</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Organization/">Organization</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SOURCE/">SOURCE</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TEST/">TEST</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TOOL/">TOOL</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/VIEW/">VIEW</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/anim/">anim</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/flutter/">flutter</a><span class="category-list-count">5</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-archive"></i> Archive</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/">2023年08月</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/">2022年12月</a><span class="archive-list-count">33</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/">2021年12月</a><span class="archive-list-count">23</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020年12月</a><span class="archive-list-count">45</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019年12月</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018年11月</a><span class="archive-list-count">32</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017年12月</a><span class="archive-list-count">57</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ANDROID/" rel="tag">ANDROID</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AOSP/" rel="tag">AOSP</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Activity/" rel="tag">Activity</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AndroidNewFeatures/" rel="tag">AndroidNewFeatures</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Assembly/" rel="tag">Assembly</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BLOG/" rel="tag">BLOG</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ConstraintLayout/" rel="tag">ConstraintLayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DB/" rel="tag">DB</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Drawer/" rel="tag">Drawer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Fragment/" rel="tag">Fragment</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LEETCODE/" rel="tag">LEETCODE</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Operators/" rel="tag">Operators</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Performance/" rel="tag">Performance</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RecyclerView/" rel="tag">RecyclerView</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RxJava/" rel="tag">RxJava</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/THINK/" rel="tag">THINK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TOOL/" rel="tag">TOOL</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TabLayout/" rel="tag">TabLayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Test/" rel="tag">Test</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TouchEvent/" rel="tag">TouchEvent</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VIEW/" rel="tag">VIEW</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/anim/" rel="tag">anim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/concurrency/" rel="tag">concurrency</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/coroutie/" rel="tag">coroutie</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/inter/" rel="tag">inter</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/keyboard/" rel="tag">keyboard</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/proguard/" rel="tag">proguard</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-link"></i> Blogroll</h3>
    <div class="widget">
      <ul>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example1.com/">site-name1</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example2.com/">site-name2</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example3.com/">site-name3</a>
        </li>
      
      </ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <a id="totop" href="#top"></a>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <p>
        <a href="/sitemap.xml">Site Map</a>
        <span> | </span><a href="/atom.xml">Subscribe to this site</a>
        <span> | </span><a href="/about/">Contact the blogger</a>
      </p>
      
        <p>
          <i class="fa fa-visitors"></i>
          <i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>
          ，
          <i class="fa fa-views"></i>
          <i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>
        </p>
      
      <p>
        <span>Copyright &copy; 2023 Jon.</span>
        <span>Theme by <a href="https://github.com/chaooo/hexo-theme-BlueLake/" target="_blank">BlueLake.</a></span>
        
            <span>Count by <a href="http://busuanzi.ibruce.info/" target="_blank">busuanzi.</a></span>
        
        <span>Powered by <a href="https://hexo.io/" target="_blank">Hexo.</a></span>
      </p>
    </div>
  </div>
</footer>

    </div>
    
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/search.json.js"></script>


  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>






  
<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



  
<script src="/localshare/js/social-share.js"></script>

  
<script src="/localshare/js/qrcode.js"></script>




















  </div>
</body>
</html>