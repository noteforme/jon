<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Jon&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  
  
    <link rel="alternate" href="/atom.xml" title="Jon's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="/localshare/css/share.css">

  
  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Jon&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Cease to struggle and you cease to live. - Thomas Carlyle</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/."><i class="fa fa-home"></i> Home</a>
        
          <a class="main-nav-link" href="/archives/"><i class="fa fa-archive"></i> Archive</a>
        
          <a class="main-nav-link" href="/about/"><i class="fa fa-user"></i> About</a>
        
          <a class="main-nav-link" href="/atom.xml"><i class="fa fa-rss"></i> RSS</a>
        
      </nav>
    </div>
    <div id="search-form">
      <div id="result-mask" class="hide"></div>
      <label><input id="search-key" type="text" autocomplete="off" placeholder="search"></label>
      <div id="result-wrap" class="hide">
        <div id="search-result"></div>
      </div>
      <div class="hide">
        <template id="search-tpl">
          <div class="item">
            <a href="/{path}" title="{title}">
              <div class="title">{title}</div>
              <div class="time">{date}</div>
              <div class="tags">{tags}</div>
            </a>
          </div>
        </template>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  <article id="post-INTERVIEW-CONCURRENCY" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/07/02/INTERVIEW-CONCURRENCY/">INTERVIEW_CONCURRENCY</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2018-07-02T08:15:24.000Z" itemprop="datePublished">2018年07月02日</time>
</span>
      
      
      
<a href="/2018/07/02/INTERVIEW-CONCURRENCY/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a href="https://noteforme.github.io/tags/concurrency/">https://noteforme.github.io/tags/concurrency/</a></p>
<h3 id="线程基础"><a href="#线程基础" class="headerlink" title="线程基础"></a>线程基础</h3><h5 id="Java线程模型"><a href="#Java线程模型" class="headerlink" title="Java线程模型"></a>Java线程模型</h5><ol>
<li>用户线程与内核级线程</li>
<li>并发与并行</li>
<li>多线程模型</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://crazyfzw.github.io/2018/06/19/thred-model/">https://crazyfzw.github.io/2018/06/19/thred-model/</a></p>
<p>谈谈对多线程的理解</p>
<ol>
<li>在Android中一个应用程序就是一个单独的进程，一般来说，当我们运行一个应用，系统就会自动创建一个进程，并且为这个进程创建一个主线程–UI线程，这样就可以运行MainActivity。</li>
<li>线程是操作系统能够进行运算调度的最小单位，线程是进程的子集，线程可以并行的执行不同任务，所有的线程共享同一片内存空间，这就为线程间通信提供了基础，线程有五种状态：创建，就绪，运行，阻塞，死亡。</li>
</ol>
<h5 id="多线程有什么要注意的问题？"><a href="#多线程有什么要注意的问题？" class="headerlink" title="多线程有什么要注意的问题？"></a>多线程有什么要注意的问题？</h5><p>并发问题，安全问题，效率问题。</p>
<p>谈谈你对并发编程的理解并举例说明</p>
<p>谈谈你对多线程同步机制的理解？</p>
<h5 id="进程和线程的区别-协程呢"><a href="#进程和线程的区别-协程呢" class="headerlink" title="? 进程和线程的区别 协程呢"></a>? 进程和线程的区别 协程呢</h5><ul>
<li>进程  </li>
</ul>
<p>​    是系统给程序分配资源的基本单位，每个进程都有唯一的地址空间，一个程序至少有一个进程，一个进程至少有一个线程.</p>
<ul>
<li><p>线程</p>
<p>线程是执行操作的基本单位，JVM结构中共享 Method Area ,Heap Area</p>
</li>
</ul>
<p>​    <a target="_blank" rel="noopener" href="https://blog.csdn.net/mxsgoden/article/details/8821936">https://blog.csdn.net/mxsgoden/article/details/8821936</a></p>
<p>​    <a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2013/04/processes_and_threads.html">https://www.ruanyifeng.com/blog/2013/04/processes_and_threads.html</a></p>
<p>进程 : 有很大的独立性</p>
<p>线程 :  所有线程都有完全一样的地址空间,意味着它们也共享同样的全局变量。由于线程可以访问进程地址空间的每一个内存地址，所以一个线程可以读、写甚至清除另一个线程的堆栈。</p>
<p>每个进程中的内容 : 地址空间  全局变量 打开文件 子进程    即将发生的定时器    信号与信号处理程序</p>
<p>每个线程中的内容：程序计数器、寄存器、堆栈、状态.</p>
<p>协程?</p>
<p>​        协程拥有自己的寄存器上下文和栈，协程调度切换时，将寄存器上下文和栈保存到其他地方，在切回来的    时候，恢复先前保存的寄存器上下文和栈，即所有局部状态的一个特定组合），每次过程重入时，就相当于进入上一次调用的状态，换种说法：进入上一次离开时所处逻辑流的位置。</p>
<p>协程的好处:</p>
<ol>
<li>无需线程上下文切换的开销 </li>
<li>无需原子操作锁定及同步的开销</li>
<li>方便切换控制流，简化编程模型</li>
</ol>
<p>​    为什么要有线程，而不是仅仅用进程？</p>
<h5 id="怎么创建一个线程"><a href="#怎么创建一个线程" class="headerlink" title="怎么创建一个线程"></a>怎么创建一个线程</h5><ol>
<li><p>继承Thread类创建线程类.</p>
</li>
<li><p>通过Runnable接口创建线程类</p>
</li>
<li><p>通过Callable和FutureTask创建线程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CallableThreadTest</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        CallableThreadTest ctt = <span class="keyword">new</span> CallableThreadTest();</span><br><span class="line">        FutureTask&lt;Integer&gt; ft = <span class="keyword">new</span> FutureTask&lt;&gt;(ctt);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; 的循环变量i的值&quot;</span> + i);</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">20</span>) &#123;</span><br><span class="line">                <span class="keyword">new</span> Thread(ft, <span class="string">&quot;有返回值的线程&quot;</span>).start();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;子线程的返回值：&quot;</span> + ft.get());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ExecutionException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot; &quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="线程如何关闭？"><a href="#线程如何关闭？" class="headerlink" title="线程如何关闭？"></a>线程如何关闭？</h5><p>​    最正确的停止线程的方式是使用 interrupt,和条件满足.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (!Thread.currentThread().isInterrupted() &amp;&amp; cout&lt;<span class="number">1000</span>) &#123;</span><br><span class="line">    <span class="keyword">do</span> more work</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="在Java中wait和sleep方法的不同"><a href="#在Java中wait和sleep方法的不同" class="headerlink" title="在Java中wait和sleep方法的不同"></a>在Java中wait和sleep方法的不同</h5><pre><code>1. sleep作用Thread上，wait作用object上
2. sleep不会释放锁
3. sleep可以在任何代码块。wait必须在同步方法，持有锁中运行。
</code></pre>
<p>​    </p>
<p>谈谈wait/notify关键字的理解</p>
<ol>
<li>调用之前持有对象锁</li>
<li>wait ,线程进入 waiting状态，释放对象锁</li>
<li>notify,唤醒处于waiting状态的线程。</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://howtodoinjava.com/java/multi-threading/wait-notify-and-notifyall-methods/">https://howtodoinjava.com/java/multi-threading/wait-notify-and-notifyall-methods/</a></p>
<h5 id="如何控制某个方法允许并发访问线程的个数？"><a href="#如何控制某个方法允许并发访问线程的个数？" class="headerlink" title="如何控制某个方法允许并发访问线程的个数？"></a>如何控制某个方法允许并发访问线程的个数？</h5><p>​    信号量</p>
<h5 id="什么导致线程阻塞？"><a href="#什么导致线程阻塞？" class="headerlink" title="什么导致线程阻塞？"></a>什么导致线程阻塞？</h5><ol>
<li> 阻塞指的是暂停一个线程的执行以等待某个条件发生。 Thread.sleep t.join 等待输入</li>
<li>线程执行了一个对象的<code>wait()</code>方法，直接进入阻塞状态，等待其他线程执行<code>notify()</code>或者<code>notifyAll()</code>方法。</li>
</ol>
<h5 id="如何保证线程安全？"><a href="#如何保证线程安全？" class="headerlink" title="如何保证线程安全？"></a>如何保证线程安全？</h5><pre><code>1. 使用线程安全的类。
2. 使用synchronized同步代码块，或者用Lock锁。
</code></pre>
<h5 id="如何实现线程同步？"><a href="#如何实现线程同步？" class="headerlink" title="如何实现线程同步？"></a>如何实现线程同步？</h5><pre><code> 1. Synchronized修饰整个方法或代码块。
 2. Lock
</code></pre>
<h5 id="两个进程同时要求写或者读，能不能实现？如何防止进程的同步？"><a href="#两个进程同时要求写或者读，能不能实现？如何防止进程的同步？" class="headerlink" title="两个进程同时要求写或者读，能不能实现？如何防止进程的同步？"></a>两个进程同时要求写或者读，能不能实现？如何防止进程的同步？</h5><p>​    可以进行同时读写，但为了保证数据的正确，必须要针对进程访问的共享临界区进行处理；两个进程不能同时进入临界区，否则会导致数据错乱。常见的处理方式有：<strong>信号量、管程、会合、分布式系统</strong></p>
<ul>
<li><p><strong>信号量</strong><br> 信号量是一个计数器，它只支持2种操作：P操作（进入临界区）和V操作（退出临界区）。假设有信号量SV，则对它的P、V操作含义如下：<br>   P(SV)，如果SV的值大于0，意味着可以进入临界区，就将它减1；如果SV的值为0，意味着别的进程正在访问临界区，则挂起当前进程的执行；<br>   V(SV)，当前进程退出临界区时，如果有其他进程因为等待SV而挂起，则唤醒之；如果没有，则将SV加1，之后再退出临界区。</p>
</li>
<li><p><strong>管程</strong><br>   提出原因：信号量机制不足，程序编写困难、易出错</p>
<pre><code>   方案：在程序设计语言中引入一种高级维护机制
   定义：是一个特殊的模块；有一个名字；由关于共享资源的数据结构及在其上操作上的一组过程组成。进程只能通过调用管程中的过程间接访问管程中的数据结构
</code></pre>
<p>  1）互斥：管程是互斥进入的 为了保证数据结构的数据完整性<br> 管程的互斥由编译器负责保证的，是一种语言机制<br>  2）同步：设置条件变量及等待唤醒操作以解决同步问题<br> 可以让一个进程或者线程在条件变量上等待（先释放管程的管理权），也可以通过发送信号将等待在条件变量上的进程线程唤醒</p>
</li>
</ul>
<p>  链接：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/72f5017c6649">https://www.jianshu.com/p/72f5017c6649</a></p>
<h5 id="线程间操作List"><a href="#线程间操作List" class="headerlink" title="线程间操作List"></a>线程间操作List</h5><p>​    </p>
<h5 id="怎么中止一个线程，Thread-Interupt一定有效吗？"><a href="#怎么中止一个线程，Thread-Interupt一定有效吗？" class="headerlink" title="怎么中止一个线程，Thread.Interupt一定有效吗？"></a>怎么中止一个线程，Thread.Interupt一定有效吗？</h5><p>不一定 </p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903896339447815#heading-6">https://juejin.cn/post/6844903896339447815#heading-6</a></p>
<h3 id="线程安全-锁"><a href="#线程安全-锁" class="headerlink" title="线程安全 锁"></a>线程安全 锁</h3><h5 id="讲一下java中的同步的方法-结果锁一起"><a href="#讲一下java中的同步的方法-结果锁一起" class="headerlink" title="讲一下java中的同步的方法 结果锁一起"></a>讲一下java中的同步的方法 结果锁一起</h5><ol>
<li><p>synchronized  </p>
</li>
<li><p>wait和notify</p>
</li>
<li><p>volatile</p>
<p>  a. volatile关键字为域变量的访问提供了一种免锁机制<br>  b.使用volatile修饰域相当于告诉虚拟机该域可能会被其他线程更新<br>  c.因此每次使用该域就要重新计算，而不是使用寄存器中的值<br>  d.volatile不会提供任何原子操作，它也不能用来修饰final类型的变量 </p>
</li>
</ol>
<h5 id="synchronize的原理"><a href="#synchronize的原理" class="headerlink" title="synchronize的原理"></a>synchronize的原理</h5><blockquote>
<ol>
<li>原子性：确保线程互斥的访问同步代码；</li>
<li>可见性：保证共享变量的修改能够及时可见，其实是通过Java内存模型中的 “<strong>对一个变量unlock操作之前，必须要同步到主内存中；如果对一个变量进行lock操作，则将会清空工作内存中此变量的值，在执行引擎使用此变量前，需要重新从主内存中load操作或assign操作初始化变量值</strong>” 来保证的；</li>
<li>有序性：有效解决重排序问题，即 “一个unlock操作先行发生(happen-before)于后面对同一个锁的lock操作”；</li>
</ol>
</blockquote>
<h5 id="谈谈对Synchronized关键字，类锁，方法锁，重入锁的理解"><a href="#谈谈对Synchronized关键字，类锁，方法锁，重入锁的理解" class="headerlink" title="谈谈对Synchronized关键字，类锁，方法锁，重入锁的理解"></a>谈谈对Synchronized关键字，类锁，方法锁，重入锁的理解</h5><ol>
<li>当synchronized作用于普通方法是，锁对象是this；</li>
<li>当synchronized作用于静态方法是，锁对象是当前类的Class对象；</li>
<li>当synchronized作用于代码块时，锁对象是synchronized(obj)中的这个obj。</li>
</ol>
<h5 id="static-synchronized-方法的多线程访问和作用"><a href="#static-synchronized-方法的多线程访问和作用" class="headerlink" title="static synchronized 方法的多线程访问和作用"></a>static synchronized 方法的多线程访问和作用</h5><p>也就是两个的区别了,也就是synchronized相当于this.synchronized，而static synchronized相当于Something.synchronized，它可以对类的所有对象实例起作用</p>
<h5 id="synchronized与Lock的区别"><a href="#synchronized与Lock的区别" class="headerlink" title="synchronized与Lock的区别"></a>synchronized与Lock的区别</h5><p>Lock支持的功能:</p>
<p>公平锁：Synchronized是非公平锁，ReentrantLock支持公平锁，默认非公平锁</p>
<p>可中断锁：ReentrantLock提供了lockInterruptibly（）的功能，可以中断争夺锁的操作，抢锁的时候会check是否被中断，中断直接抛出异常，退出抢锁。而Synchronized只有抢锁的过程，不可干预，直到抢到锁以后，才可以编码控制锁的释放。</p>
<p>快速反馈锁：ReentrantLock提供了trylock（）  和 trylock（tryTimes）的功能，不等待或者限定时间等待获取锁，更灵活。可以避免死锁的发生。</p>
<p>读写锁：ReentrantReadWriteLock类实现了读写锁的功能，类似于Mysql，锁自身维护一个计数器，读锁可以并发的获取，写锁只能独占。而synchronized全是独占锁</p>
<p>Condition：ReentrantLock提供了比Sync更精准的线程调度工具，Condition，一个lock可以有多个Condition，比如在生产消费的业务下，一个锁通过控制生产Condition和消费Condition精准控制。</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/09d5ba4bfb7a">https://www.jianshu.com/p/09d5ba4bfb7a</a></p>
<h5 id="ReentrantLock的内部实现"><a href="#ReentrantLock的内部实现" class="headerlink" title="ReentrantLock的内部实现"></a>ReentrantLock的内部实现</h5><p>显式锁ReentrantLock和同步工具类的实现基础都是AQS (AbstractQueuedSynchronizer).AQS内部有一条双向的队列存放等待线程，节点是Node对象。每个Node维护了线程、前后Node的指针和等待状态等参数。</p>
<p>ReentrantLock是可重入锁，也就是同一个线程可以多次获取锁，每获取一次就会进行一次计数，解锁的时候就会递减这个计数，直到计数变为0。</p>
<p>它有两种实现，一种是公平锁，一种是非公平锁，</p>
<h5 id="lock原理"><a href="#lock原理" class="headerlink" title="lock原理"></a>lock原理</h5><p>整体来看Lock主要是通过两个东西来实现的分别是<strong>CAS和AQS(AbstractQueuedSynchronizer)。</strong>通过加锁和解锁的过程来分析锁的实现。</p>
<p>一、整体概述流程</p>
<ol>
<li><p>读取表示锁状态的变量</p>
</li>
<li><p>如果表示状态的变量的值为0，那么当前线程尝试将变量值设置为1（通过CAS操作完成），当多个线程同时将表示状态的变量值由0设置成1时，仅一个线程能成功，其它线程都会失败。失败后进入队列自旋转并阻塞当前线程。</p>
<p>  2.1 若成功，表示获取了锁，</p>
<blockquote>
<p>2.1.1 如果该线程（或者说节点）已位于在队列中，则将其出列（并将下一个节点则变成了队列的头节点）</p>
</blockquote>
<blockquote>
<p>2.1.2 如果该线程未入列，则不用对队列进行维护</p>
</blockquote>
<blockquote>
<p>2.1.3 然后当前线程从lock方法中返回，对共享资源进行访问。           </p>
</blockquote>
<p>   2.2 若失败，则当前线程将自身放入等待（锁的）队列中并阻塞自身，此时线程一直被阻塞在lock方法中，没有从该方法中返回（被唤醒后仍然在lock方法中，并从下一条语句继续执行，这里又会回到第1步重新开始）。</p>
</li>
<li><p>如果表示状态的变量的值为1，那么将当前线程放入等待队列中，然后将自身阻塞<br> <a target="_blank" rel="noopener" href="https://blog.csdn.net/liyantianmin/article/details/54673109">https://blog.csdn.net/liyantianmin/article/details/54673109</a></p>
</li>
</ol>
<h5 id="死锁的四个必要条件？"><a href="#死锁的四个必要条件？" class="headerlink" title="死锁的四个必要条件？"></a>死锁的四个必要条件？</h5><ol>
<li>互斥条件: 指线程对己经获取到的资源进行排它性使用 ，即该资源同时只由 一个线<br>程占用。如果 此时 还有其 他 线程请求获取该资源 ，则 请求者只能等待，直至占有资<br>源 的 线程释放该资源。</li>
<li>请求并持有条件 : 指一个线程己经持有了至少一个资源，但又提出了新的资源请求，<br>而新资源己被其 他 线程占有，所 以 当前线程会被阻塞 ，但 阻塞 的同时 并不释放自 己<br>己经获取的资源。</li>
<li>不可剥夺条件 : 指线程获取到的资源在自己使用完之前不能被其他线程抢占 ， 只有在自己使用完 毕后才 由 自 己释放该资源。</li>
<li>环路等待条件 : 指在发生死锁时 ，必然存在一个线程→资源的环形链 ，即线程集合</li>
</ol>
<h5 id="怎么避免死锁？"><a href="#怎么避免死锁？" class="headerlink" title="怎么避免死锁？"></a>怎么避免死锁？</h5><p>请求并持有和环路等待条件是可 以被破坏.</p>
<h5 id="synchronized是公平锁还是非公平锁-ReteranLock是公平锁吗？是怎么实现的"><a href="#synchronized是公平锁还是非公平锁-ReteranLock是公平锁吗？是怎么实现的" class="headerlink" title="synchronized是公平锁还是非公平锁,ReteranLock是公平锁吗？是怎么实现的"></a>synchronized是公平锁还是非公平锁,ReteranLock是公平锁吗？是怎么实现的</h5><ol>
<li>synchronized只能是非公平锁。</li>
<li>而ReentrantLock可以实现公平锁和非公平锁两种。</li>
<li>公平锁的公平的含义在于如果线程现在拿不到这把锁，那么线程就都会进入等待，开始排队，在等待队列里等待时间长的线程会优先拿到这把锁，有先来先得的意思。而非公平锁就不那么“完美”了，它会在一定情况下，忽略掉已经在排队的线程，发生插队现象</li>
</ol>
<h5 id="synchronized跟ReentranLock有什么区别？"><a href="#synchronized跟ReentranLock有什么区别？" class="headerlink" title="synchronized跟ReentranLock有什么区别？"></a>synchronized跟ReentranLock有什么区别？</h5><p>都是加锁方式同步，而且都是阻塞式的同步，也就是说当如果一个线程获得了对象锁，进入了同步块，其他访问该同步块的线程都必须阻塞在同步块外面等待</p>
<ul>
<li><p>synchronized</p>
<p><strong>自动释放锁</strong>,只有非公平锁。都是可重入的</p>
</li>
<li><p>ReentrantLock</p>
<p> <strong>手动释放锁</strong></p>
</li>
</ul>
<h5 id="对象锁和类锁是否会互相影响？"><a href="#对象锁和类锁是否会互相影响？" class="headerlink" title="对象锁和类锁是否会互相影响？"></a>对象锁和类锁是否会互相影响？</h5><p>不会相互影响</p>
<ul>
<li><p>类锁</p>
<p>在代码中的方法上加了static和synchronized的锁，或者synchronized(xxx.class）的代码段</p>
</li>
<li><p>对象锁</p>
<p>在代码中的方法上加了synchronized的锁，或者synchronized(this）的代码段</p>
</li>
<li><p>私有锁</p>
<p>在类内部声明一个私有属性如private Object lock，在需要加锁的代码段synchronized(lock）</p>
</li>
</ul>
<h5 id="管理线程-提高效率"><a href="#管理线程-提高效率" class="headerlink" title="管理线程 提高效率"></a>管理线程 提高效率</h5><h5 id="volatile的原理"><a href="#volatile的原理" class="headerlink" title="volatile的原理"></a>volatile的原理</h5><p> 有序性.</p>
<p> 可见性 :</p>
<p>　    （1）修改volatile变量时会强制将修改后的值刷新的主内存中。</p>
<p>　　（2）修改volatile变量后会导致其他线程工作内存中对应的变量值失效。因此，再读取该变量值的时候就需要重新从读取主内存中的值。</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/paddix/p/5428507.html">https://www.cnblogs.com/paddix/p/5428507.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1NT4y1G7WE?p=8">https://www.bilibili.com/video/BV1NT4y1G7WE?p=8</a></p>
<h5 id="synchronized-和volatile-关键字的区别"><a href="#synchronized-和volatile-关键字的区别" class="headerlink" title="synchronized 和volatile 关键字的区别"></a>synchronized 和volatile 关键字的区别</h5><ol>
<li>volatile仅能实现变量的修改可见性，不能保证原子性；而synchronized则可以保证变量的修改可见性和原子性</li>
<li>volatile标记的变量不会被编译器优化；synchronized标记的变量可以被编译器优化.</li>
</ol>
<p>多线程断点续传原理</p>
<p>其实原理很简单，只需要保证每个子任务的下载进度能够被即时地记录即可。这样继续下载时只需要读取这些下载记录，从上次下载结束的位置开始下载即可。</p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904013440221198">https://juejin.cn/post/6844904013440221198</a></p>
<h3 id="线程池"><a href="#线程池" class="headerlink" title="线程池"></a>线程池</h3><h5 id="JavaAPI线程池有哪些参数"><a href="#JavaAPI线程池有哪些参数" class="headerlink" title="JavaAPI线程池有哪些参数"></a>JavaAPI线程池有哪些参数</h5><p><img src="https://s0.lgstatic.com/i/image2/M01/AD/A3/CgoB5l3eH8mAAoJCAACEOKMHtpw036.png"></p>
<p><img src="https://s0.lgstatic.com/i/image2/M01/AD/A3/CgoB5l3eH-KAAHpkAAC4vEMOXQ4797.png"></p>
<h5 id="为什么要用线程池"><a href="#为什么要用线程池" class="headerlink" title="为什么要用线程池"></a>为什么要用线程池</h5><ol>
<li>降低资源消耗2. 提高响应速度3. 提高线程的可管理性</li>
</ol>
<h5 id="什么是线程池，如何使用"><a href="#什么是线程池，如何使用" class="headerlink" title="什么是线程池，如何使用?"></a>什么是线程池，如何使用?</h5><p>很多小任务让一组线程来执行，而不是一个任务对应一个新线程。这种能接收大量小任务并进行分发处理的就是线程池</p>
<h5 id="什么是核心线程"><a href="#什么是核心线程" class="headerlink" title="什么是核心线程"></a>什么是核心线程</h5><p>​    常驻线程池的线程数量</p>
<h5 id="怎么销毁核心线程"><a href="#怎么销毁核心线程" class="headerlink" title="怎么销毁核心线程"></a>怎么销毁核心线程</h5><p>​    allowCoreThreadTimeOut</p>
<p>​    <a target="_blank" rel="noopener" href="https://objcoding.com/2019/04/14/threadpool-some-settings/">https://objcoding.com/2019/04/14/threadpool-some-settings/</a></p>
<h5 id="为什么DCL-DOUBLE-CHECK-LOCK要那么写，直接在方法前加synchronized不行吗"><a href="#为什么DCL-DOUBLE-CHECK-LOCK要那么写，直接在方法前加synchronized不行吗" class="headerlink" title="为什么DCL DOUBLE CHECK LOCK要那么写，直接在方法前加synchronized不行吗"></a>为什么DCL DOUBLE CHECK LOCK要那么写，直接在方法前加synchronized不行吗</h5><p>​    不DCL 这样写，就会创建多个实例</p>
<p>​    synchronized可以，这样粒度太大了.</p>
<p>​    <a target="_blank" rel="noopener" href="https://blog.csdn.net/zhaoyajie1011/article/details/106812327">https://blog.csdn.net/zhaoyajie1011/article/details/106812327</a></p>
<h5 id="如何让两个线程循环交替打印"><a href="#如何让两个线程循环交替打印" class="headerlink" title="如何让两个线程循环交替打印"></a>如何让两个线程循环交替打印</h5><p>LockSupport_1A2B.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">char</span>[] aI = <span class="string">&quot;1234567&quot;</span>.toCharArray();</span><br><span class="line">        <span class="keyword">char</span>[] aC = <span class="string">&quot;ABCDEFG&quot;</span>.toCharArray();</span><br><span class="line"></span><br><span class="line">        t1 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">char</span> c : aI) &#123;</span><br><span class="line">                System.out.print(c);</span><br><span class="line">                LockSupport.unpark(t2);</span><br><span class="line">                LockSupport.park();</span><br><span class="line">            &#125;</span><br><span class="line">            LockSupport.unpark(t2);</span><br><span class="line">        &#125;);</span><br><span class="line">        t2 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">char</span> c : aC) &#123;</span><br><span class="line">                System.out.print(c);</span><br><span class="line">                LockSupport.unpark(t1);</span><br><span class="line">                LockSupport.park();</span><br><span class="line">            &#125;</span><br><span class="line">            LockSupport.unpark(t1);</span><br><span class="line">        &#125;);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line"><span class="comment">//        System.out.println(&quot;t1  &quot; + t1.getState());</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;t2  &quot; + t2.getState());</span></span><br><span class="line">        t1.join();</span><br><span class="line">        t2.join();</span><br></pre></td></tr></table></figure>



<p>Notify_1A2B.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">Notify_1A2B o = <span class="keyword">new</span> Notify_1A2B();</span><br><span class="line"><span class="keyword">char</span>[] aI = <span class="string">&quot;1234567&quot;</span>.toCharArray();</span><br><span class="line"><span class="keyword">char</span>[] aC = <span class="string">&quot;ABCDEFG&quot;</span>.toCharArray();</span><br><span class="line">t1 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (o) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> c : aI) &#123;</span><br><span class="line">            System.out.print(c);</span><br><span class="line">            o.notify();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                o.wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line">t2 = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (o) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">char</span> c : aC) &#123;</span><br><span class="line">                System.out.print(c);</span><br><span class="line">                o.notify();</span><br><span class="line">                o.wait();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">t1.start();</span><br><span class="line">t2.start();</span><br><span class="line">t1.join();</span><br><span class="line">t2.join();</span><br></pre></td></tr></table></figure>



<p>协程可以在Java项目中使用吗？</p>
<p>线程池了解多少？拒绝策略有几种,为什么有newSingleThread</p>
<h5 id="跨进程通信了解多少？管道了解吗？"><a href="#跨进程通信了解多少？管道了解吗？" class="headerlink" title="跨进程通信了解多少？管道了解吗？"></a>跨进程通信了解多少？管道了解吗？</h5><pre><code>文件
AIDL （基于 Binder）
    Android 进阶：进程通信之 AIDL 的使用
    Android 进阶：进程通信之 AIDL 解析
Binder
    Android 进阶：进程通信之 Binder 机制浅析
Messenger （基于 Binder）
    Android 进阶：进程通信之 Messenger 使用与解析 
ContentProvider （基于 Binder）
    Android 进阶：进程通信之 ContentProvider 内容提供者 
Socket
    Android 进阶：进程通信之 Socket （顺便回顾 TCP UDP）
</code></pre>
<p><img src="https://img-blog.csdn.net/20170605011532312?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxMTI0MDg3Nw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"><br>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/u011240877/article/details/72863432">https://blog.csdn.net/u011240877/article/details/72863432</a></p>
<h5 id="底层原理"><a href="#底层原理" class="headerlink" title="底层原理"></a>底层原理</h5><ul>
<li>RXJava怎么切换线程</li>
<li>binder进程间通信可以调用原进程方法吗？</li>
<li>SharedPreference原理？读取xml是在哪个线程?</li>
<li>AQS了解吗？</li>
<li>ConcurrentHashMap，线程安全，为何安全。底层实现是怎么样的。</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/63859501">https://www.zhihu.com/question/63859501</a></p>
<h5 id="AQS"><a href="#AQS" class="headerlink" title="AQS"></a>AQS</h5><p><a target="_blank" rel="noopener" href="http://gee.cs.oswego.edu/dl/papers/aqs.pdf">http://gee.cs.oswego.edu/dl/papers/aqs.pdf</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV11Q4y1M7K2?from=search&amp;seid=12598203519866117819">https://www.bilibili.com/video/BV11Q4y1M7K2?from=search&amp;seid=12598203519866117819</a></p>
<p><a target="_blank" rel="noopener" href="https://javadoop.com/post/AbstractQueuedSynchronizer">https://javadoop.com/post/AbstractQueuedSynchronizer</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1yJ411v7er?from=search&amp;seid=12598203519866117819">https://www.bilibili.com/video/BV1yJ411v7er?from=search&amp;seid=12598203519866117819</a></p>
<h5 id="阻塞队列原理"><a href="#阻塞队列原理" class="headerlink" title="阻塞队列原理"></a>阻塞队列原理</h5><p><img src="https://s0.lgstatic.com/i/image3/M01/62/7D/Cgq2xl4le9SAL6enAAGpXZi8Wcg079.jpg"></p>
<p>阻塞功能:阻塞功能使得生产者和消费者两端的能力得以平衡，当有任何一端速度过快时，阻塞队列便会把过快的速度给降下来</p>
<p>是否有界</p>
<ul>
<li> LinkedBlockingQueue 的上限是 Integer.MAX_VALUE，约为 2 的 31 次方,</li>
<li>ArrayBlockingQueue 如果容量满了，也不会扩容，所以一旦满了就无法再往里放数据了。</li>
</ul>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/15/index.html">https://noteforme.github.io/page/15/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/inter/" rel="tag">inter</a></li></ul>

          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-INTERVIEW-SENIOR" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/06/22/INTERVIEW-SENIOR/">INTERVIEW_SENIOR</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2018-06-22T10:56:44.000Z" itemprop="datePublished">2018年06月22日</time>
</span>
      
      
      
<a href="/2018/06/22/INTERVIEW-SENIOR/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <hr>
<h3 id="高端技术面试题"><a href="#高端技术面试题" class="headerlink" title="高端技术面试题"></a>高端技术面试题</h3><p><strong>这里讲的是大公司需要用到的一些高端Android技术，这里专门整理了一个文档，希望大家都可以看看。这些题目有点技术含量，需要好点时间去研究一下的。</strong></p>
<h5 id="（一）图片"><a href="#（一）图片" class="headerlink" title="（一）图片"></a>（一）图片</h5><ul>
<li><p>图片库对比</p>
</li>
<li><p>图片库的源码分析</p>
</li>
<li><p>图片框架缓存实现</p>
</li>
<li><p>LRUCache原理</p>
</li>
<li><p>图片加载原理</p>
</li>
<li><p>自己去实现图片库，怎么做？</p>
</li>
<li><p>Glide源码解析</p>
</li>
<li><p>Glide使用什么缓存？</p>
</li>
<li><p>Glide内存缓存如何控制大小？</p>
</li>
</ul>
<h3 id="框架学习"><a href="#框架学习" class="headerlink" title="框架学习"></a>框架学习</h3><p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=pUV3qZh481k">https://www.youtube.com/watch?v=pUV3qZh481k</a></p>
<h4 id="okhttp"><a href="#okhttp" class="headerlink" title="okhttp"></a>okhttp</h4><p>​    <a href="https://noteforme.github.io/2017/08/07/OKHTTP/">https://noteforme.github.io/2017/08/07/OKHTTP/</a></p>
<h6 id="okhttp怎么支持http2-0"><a href="#okhttp怎么支持http2-0" class="headerlink" title="okhttp怎么支持http2.0"></a>okhttp怎么支持http2.0</h6><p>​    Handshake则会把服务端支持的Tls版本，加密方式等都带回来，然后会把这个没有验证过的HandShake用X509Certificate去验证证书的有效性。然后会通过Platform去从SSLSocket去获取ALPN的协议支持信息，当后端支持的协议内包含Http2.0时，则就会把请求升级到Http2.0阶段。</p>
<p>​    配置合适的适配器，解析json数据。</p>
<p>​    Android 如何编写基于编译时注解的项目</p>
<p>​    编译时注解与运行时注解，为什么retrofit要使用运行时注解？什么时候用运行时注解？</p>
<p>​    在项目中有直接使用tcp,socket来发送消息吗</p>
<p>​    <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1ib4y1f7S1">https://www.bilibili.com/video/BV1ib4y1f7S1</a></p>
<p>Okhttp缓存机制</p>
<h6 id="网络请求缓存处理，okhttp如何处理网络缓存的"><a href="#网络请求缓存处理，okhttp如何处理网络缓存的" class="headerlink" title="网络请求缓存处理，okhttp如何处理网络缓存的"></a>网络请求缓存处理，okhttp如何处理网络缓存的</h6><p>自己去设计网络请求框架，怎么做？</p>
<ul>
<li>从网络加载一个10M的图片，说下注意事项</li>
<li>TCP的3次握手和四次挥手</li>
<li>TCP与UDP的区别</li>
<li>TCP与UDP的应用</li>
<li>HTTP协议</li>
<li>HTTP1.0与2.0的区别</li>
<li>HTTP报文结构</li>
<li>HTTP与HTTPS的区别以及如何实现安全性</li>
<li>如何验证证书的合法性?</li>
<li>https中哪里用了对称加密，哪里用了非对称加密，对加密算法（如RSA）等是否有了解?</li>
<li>client如何确定自己发送的消息被server收到?</li>
<li>谈谈你对安卓签名的理解。</li>
<li>请解释安卓为啥要加签名机制?</li>
<li>视频加密传输</li>
<li>App 是如何沙箱化，为什么要这么做？</li>
<li>权限管理系统（底层的权限是如何进行 grant 的）？</li>
</ul>
<h4 id="Retrofit"><a href="#Retrofit" class="headerlink" title="Retrofit"></a>Retrofit</h4><p>在retrofit中的泛型是怎么解析的</p>
<p><a href="https://noteforme.github.io/2017/09/23/Retrofit/">https://noteforme.github.io/2017/09/23/Retrofit/</a></p>
<h4 id="RxJava"><a href="#RxJava" class="headerlink" title="RxJava"></a>RxJava</h4><p><a href="https://noteforme.github.io/2020/08/04/RxJava/">https://noteforme.github.io/2020/08/04/RxJava/</a></p>
<p>在 RxJava 中， 会遇到被观察者发送消息太快以至于它的操作符或者订阅者不能及时处理相关的消息，这就是典型的背压（ Back Pressure ）场景。</p>
<p>RxJava 是基于 Push 模型 。对于 Pull 模型而言，当消费者请求数据的时候，如果生产者比较慢  ，则消费者会阻塞等待。如果生产者比较快，生产者会等待消费者处理完后再生产新的数据，所以不会出现背压的情况。然而在 RxJava  中，只要生产者数据准备好了就会发射出去。如果生产者比较慢，则消费者会等待新的数据到来。如果生产者比较快，则会有很多数据发射给消费者，而不管消费者当前有没有能力处理数据，这样就会导致背压。</p>
<p>在 RxJava 2.x 中， Observable 不再支持背压，而是改用 Flowable 来专门支持背压。默认队列大小为 128 ，并且要求所有的操作符强制支持背压。</p>
<h5 id="RxJava原理及如何封装使用"><a href="#RxJava原理及如何封装使用" class="headerlink" title="RxJava原理及如何封装使用"></a>RxJava原理及如何封装使用</h5><p>​            使用观察者模式，和装饰器模式。</p>
<p>​            先用Observablex向右构建流，然后向左创建订阅流，最后时间通过观察者回调流发送。</p>
<p>​    </p>
<p>​    你了解协程吗？协程有什么作用？可以完全取代rxjava吗？</p>
<h5 id="rxjava里面用了大量的-lt-super-T-gt-这些，是什么意思。"><a href="#rxjava里面用了大量的-lt-super-T-gt-这些，是什么意思。" class="headerlink" title="rxjava里面用了大量的&lt;? super T&gt;这些，是什么意思。"></a>rxjava里面用了大量的<code>&lt;? super T&gt;</code>这些，是什么意思。</h5><ul>
<li><p>如果要从集合中读取类型T的数据，并且不能写入，可以使用 ? extends 通配符；(Producer Extends)</p>
</li>
<li><p>如果要从集合中写入类型T的数据，并且不需要读取，可以使用 ? super 通配符；(Consumer Super),只能用Object接收。</p>
</li>
<li><p>如果既要存又要取，那么就不要使用任何通配符。</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/86cf908afcb6">https://www.jianshu.com/p/86cf908afcb6</a></p>
</li>
</ul>
<h5 id="RxJava怎么通过被订阅者传给订阅者的过程是什么样的"><a href="#RxJava怎么通过被订阅者传给订阅者的过程是什么样的" class="headerlink" title="RxJava怎么通过被订阅者传给订阅者的过程是什么样的?"></a>RxJava怎么通过被订阅者传给订阅者的过程是什么样的?</h5><h5 id="Observer处理完onComplete后会还能onNext吗"><a href="#Observer处理完onComplete后会还能onNext吗" class="headerlink" title="Observer处理完onComplete后会还能onNext吗?"></a>Observer处理完onComplete后会还能onNext吗?</h5><p>​    onComplete是用来控制不能发送数据的，也就是不能onNext了，包括onError也是不能再发送onNext数据了，该方法中也是调用了     dispose方法。    </p>
<h5 id="RxJava中map、flatMap的区别，你还用过其他哪些操作符"><a href="#RxJava中map、flatMap的区别，你还用过其他哪些操作符" class="headerlink" title="RxJava中map、flatMap的区别，你还用过其他哪些操作符?"></a>RxJava中map、flatMap的区别，你还用过其他哪些操作符?</h5><p>​    map是通过原始数据类型返回另外一种数据类型，而flatMap是通过原始数据类型返回另外一种被观察者。</p>
<h5 id="Maybe、Single、Flowable、Completable几种观察者的区别，以及他们在什么场景用？"><a href="#Maybe、Single、Flowable、Completable几种观察者的区别，以及他们在什么场景用？" class="headerlink" title="Maybe、Single、Flowable、Completable几种观察者的区别，以及他们在什么场景用？"></a>Maybe、Single、Flowable、Completable几种观察者的区别，以及他们在什么场景用？</h5><p>​    如果只想发一条数据，或者不发数据就用Maybe，如果想发多条数据或者不发数据就用Observable，如果只发一条数据或者失败就用Single，如果想用背压策略使用Flowable，如果不发数据就用Completable</p>
<p>也就是说Maybe可能不发送数据，如果发送数据只会发送单条数据。</p>
<p>single也是发送单条数据，但是它要么成功要么失败。</p>
<h5 id="RxJava切换线程是怎么回事"><a href="#RxJava切换线程是怎么回事" class="headerlink" title="RxJava切换线程是怎么回事?"></a>RxJava切换线程是怎么回事?</h5><p>subscribeOn实际是创建了ObservableSubscribeOn的Observable，它的订阅方法里面创建了<code>SubscribeOnObserver</code>，通过线程池执行Runnable，使上游Observable的订阅在子线程中执行，这就是为什么subscribeOn能控制observable在哪个线程中执行的原因 </p>
<h5 id="RxJava的subscribeOn只有第一次生效"><a href="#RxJava的subscribeOn只有第一次生效" class="headerlink" title="RxJava的subscribeOn只有第一次生效?"></a>RxJava的subscribeOn只有第一次生效?</h5><p>subscribeOn对subscribe订阅进行处理，针对是订阅流，从后向前流动，所以最前面的一次生效。</p>
<p>subscribeOn是规定上游的observable在哪个线程中执行，如果我们执行多次的subscribeOn的话，从下游的observer到上游的observable的订阅过程，<strong>最开始调用的subscribeOn返回的observable会把后面执行的subscribeOn返回的observable给覆盖了，因此我们感官的是只有第一次的subscribeOn能生效。</strong></p>
<h5 id="RxJava的observeOn多次调用哪个有效"><a href="#RxJava的observeOn多次调用哪个有效" class="headerlink" title="RxJava的observeOn多次调用哪个有效?"></a>RxJava的observeOn多次调用哪个有效?</h5><p>observeOn在事件发送的 onNext(T t)进行处理，针对的是观察者流，从前向后流动，所以最后一次生效。</p>
<p>observeOn是指定下游的observer在哪个线程中执行，所以这个更好理解，看observeOn下一个observer是哪一个，<strong>所以多次调用observeOn肯定是最后一个observeOn控制有效。</strong></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6900870262062120967">https://juejin.cn/post/6900870262062120967</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/339620311">https://zhuanlan.zhihu.com/p/339620311</a></p>
<p>RxJava中背压是怎么回事？</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c3965e82b164">https://www.jianshu.com/p/c3965e82b164</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/322405376">https://zhuanlan.zhihu.com/p/322405376</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Af4y187b8">https://www.bilibili.com/video/BV1Af4y187b8</a></p>
<h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><ul>
<li>sqlite升级，增加字段的语句</li>
<li>数据库框架对比和源码分析</li>
<li>数据库的优化</li>
<li>数据库数据迁移问题</li>
</ul>
<h3 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h3><h6 id="排序算法有哪些？"><a href="#排序算法有哪些？" class="headerlink" title="排序算法有哪些？"></a>排序算法有哪些？</h6><p>冒泡排序、选择排序、插入排序、归并排序、快速排序、希尔排序、堆排序、计数排序、桶排序、基数排序</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/42586566">https://zhuanlan.zhihu.com/p/42586566</a></p>
<p><img src="https://img-blog.csdn.net/20180912224019565?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM2NzcwNjQx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"></p>
<h6 id="最快的排序算法是哪个？"><a href="#最快的排序算法是哪个？" class="headerlink" title="最快的排序算法是哪个？"></a>最快的排序算法是哪个？</h6><p>快速排序  最好情况O(nlogn)  最坏情况 O(n^2)</p>
<p>为什么不是堆排序  ?</p>
<p> 在堆排序（小根堆）的时候，每次总是将最小的元素移除，然后将最后的元素放到堆顶，再让其自我调整。这样一来，有很多比较将是被浪费的，因为被拿到堆顶的那个元素几乎肯定是很大的，而靠近堆顶的元素又几乎肯定是很小的，最后一个元素能留在堆顶的可能性微乎其微，最后一个元素很有可能最终再被移动到底部。在堆排序里面有大量这种近乎无效的比较。随着数据规模的增长，比较的开销最差情况应该在（线性*对数）级别，如果数据量是原来的10倍，那么用于比较的时间开销可能是原来的10log10倍<br>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_36770641/article/details/82669788">https://blog.csdn.net/qq_36770641/article/details/82669788</a></p>
<ul>
<li>手写一个冒泡排序</li>
</ul>
<ul>
<li>手写快速排序代码</li>
<li>快速排序的过程、时间复杂度、空间复杂度</li>
<li>手写堆排序</li>
<li>堆排序过程、时间复杂度及空间复杂度</li>
<li>写出你所知道的排序算法及时空复杂度，稳定性</li>
</ul>
<p><a href="https://noteforme.github.io/2021/03/21/Data-Sort/">https://noteforme.github.io/2021/03/21/Data-Sort/</a></p>
<ul>
<li>二叉树给出根节点和目标节点，找出从根节点到目标节点的路径</li>
<li>给阿里2万多名员工按年龄排序应该选择哪个算法？</li>
<li>GC算法(各种算法的优缺点以及应用场景)</li>
<li>蚁群算法与蒙特卡洛算法</li>
<li>子串包含问题(KMP 算法)写代码实现</li>
<li>一个无序，不重复数组，输出N个元素，使得N个元素的和相加为M，给出时间复杂度、空间复杂度。手写算法</li>
<li>万亿级别的两个URL文件A和B，如何求出A和B的差集C(提示：Bit映射-&gt;hash分组-&gt;多文件读写效率-&gt;磁盘寻址以及应用层面对寻址的优化)</li>
<li>百度POI中如何试下查找最近的商家功能(提示：坐标镜像+R树)。</li>
<li>两个不重复的数组集合中，求共同的元素。</li>
<li>两个不重复的数组集合中，这两个集合都是海量数据，内存中放不下，怎么求共同的元素？</li>
<li>一个文件中有100万个整数，由空格分开，在程序中判断用户输入的整数是否在此文件中。说出最优的方法</li>
<li>一张Bitmap所占内存以及内存占用的计算</li>
<li>2000万个整数，找出第五十大的数字？</li>
<li>烧一根不均匀的绳，从头烧到尾总共需要1个小时。现在有若干条材质相同的绳子，问如何用烧绳的方法来计时一个小时十五分钟呢？</li>
<li>求1000以内的水仙花数以及40亿以内的水仙花数</li>
<li>5枚硬币，2正3反如何划分为两堆然后通过翻转让两堆中正面向上的硬8币和反面向上的硬币个数相同</li>
<li>时针走一圈，时针分针重合几次</li>
<li>N*N的方格纸,里面有多少个正方形</li>
<li>x个苹果，一天只能吃一个、两个、或者三个，问多少天可以吃完？</li>
</ul>
<h5 id="插件化、模块化、组件化、热修复、增量更新、Gradle"><a href="#插件化、模块化、组件化、热修复、增量更新、Gradle" class="headerlink" title="插件化、模块化、组件化、热修复、增量更新、Gradle"></a>插件化、模块化、组件化、热修复、增量更新、Gradle</h5><ul>
<li>对热修复和插件化的理解</li>
<li>插件化原理分析</li>
<li>模块化实现（好处，原因）</li>
<li>热修复,插件化</li>
<li>项目组件化的理解</li>
<li>描述清点击 Android Studio 的 build 按钮后发生了什么</li>
</ul>
<h3 id="架构设计和设计模式"><a href="#架构设计和设计模式" class="headerlink" title="架构设计和设计模式"></a>架构设计和设计模式</h3><p>​    <a href="https://noteforme.github.io/categories/DesignPatterns/">https://noteforme.github.io/categories/DesignPatterns/</a></p>
<h4 id="设计原则"><a href="#设计原则" class="headerlink" title="设计原则"></a>设计原则</h4><p>​    单一职责</p>
<p>​    一个类应该只负责一项职责。</p>
<p>接口隔离</p>
<p>​    客户端不应该依赖它不需要的接口，即一个类对另一个类的依赖应该建立在最小的接口上。</p>
<p>依赖倒置</p>
<ul>
<li>高层模块不应该依赖低层模块，二者都应该依赖其抽象。</li>
<li>抽象不应该依赖细节，细节应该依赖抽象。</li>
<li>依赖倒置的中心思想是<strong>面向接口编程</strong>。</li>
</ul>
<p>里氏替换</p>
<ul>
<li>所有使用基类的地方必须能透明的使用其子类。</li>
<li>使用继承时，遵循里氏替换原则，<strong>子类尽量不要重写父类的方法</strong>。继承实际上让两个类耦合性增强了，适当情况下可以通过 聚合 组合 依赖来解决问题。</li>
</ul>
<p>​    通用做法是： 原来的父类和子类都继承一个更通俗的基类，原有的继承关系去掉，采用依赖，聚合，组合等关系代替。</p>
<p>开闭原则 ocp</p>
<p>迪米特法则</p>
<p>​    一个对象应该对其他对象保持最少的了解</p>
<h4 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h4><ul>
<li>谈谈你对Android设计模式的理解</li>
<li>MVC MVP MVVM原理和区别</li>
<li>你所知道的设计模式有哪些？</li>
<li>项目中常用的设计模式</li>
<li>手写生产者/消费者模式</li>
<li>写出观察者模式的代码</li>
<li>适配器模式，装饰者模式，外观模式的异同？</li>
<li>用到的一些开源框架，介绍一个看过源码的，内部实现过程。</li>
<li>谈谈对RxJava的理解</li>
<li>RxJava的功能与原理实现</li>
<li>RxJava的作用，与平时使用的异步操作来比的优缺点</li>
<li>说说EventBus作用，实现方式，代替EventBus的方式</li>
<li>从0设计一款App整体架构，如何去做？</li>
<li>说一款你认为当前比较火的应用并设计(比如：直播APP，P2P金融，小视频等)</li>
<li>谈谈对java状态机理解</li>
<li>Fragment如果在Adapter中使用应该如何解耦？</li>
<li>Binder机制及底层实现</li>
<li>对于应用更新这块是如何做的？(解答：灰度，强制更新，分区域更新)？</li>
<li>实现一个Json解析器(可以通过正则提高速度)</li>
<li>统计启动时长,标准</li>
</ul>
<h3 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h3><ul>
<li>如何对Android 应用进行性能分析以及优化?</li>
<li>ddms 和 traceView</li>
<li>性能优化如何分析systrace？</li>
<li>用IDE如何分析内存泄漏？</li>
<li>Java多线程引发的性能问题，怎么解决？</li>
<li>启动页白屏及黑屏解决？</li>
<li>启动太慢怎么解决？</li>
<li>怎么保证应用启动不卡顿？</li>
<li>App启动崩溃异常捕捉</li>
<li>自定义View注意事项</li>
<li>现在下载速度很慢,试从网络协议的角度分析原因,并优化(提示：网络的5层都可以涉及)。</li>
<li>Https请求慢的解决办法（提示：DNS，携带数据，直接访问IP）</li>
<li>如何保持应用的稳定性</li>
<li>RecyclerView和ListView的性能对比</li>
<li>ListView的优化</li>
<li>RecycleView优化</li>
<li>View渲染</li>
<li>Bitmap如何处理大图，如一张30M的大图，如何预防OOM</li>
<li>java中的四种引用的区别以及使用场景</li>
<li>强引用置为null，会不会被回收？</li>
</ul>
<h4 id="NDK、jni、Binder、AIDL、进程通信有关"><a href="#NDK、jni、Binder、AIDL、进程通信有关" class="headerlink" title="NDK、jni、Binder、AIDL、进程通信有关"></a>NDK、jni、Binder、AIDL、进程通信有关</h4><ul>
<li>请介绍一下NDK</li>
<li>什么是NDK库?</li>
<li>jni用过吗？</li>
<li>如何在jni中注册native函数，有几种注册方式?</li>
<li>Java如何调用c、c++语言？</li>
<li>jni如何调用java层代码？</li>
<li>进程间通信的方式？</li>
<li>Binder机制</li>
<li>简述IPC？</li>
<li>什么是AIDL？</li>
<li>AIDL解决了什么问题？</li>
<li>AIDL如何使用？</li>
<li>Android 上的 Inter-Process-Communication 跨进程通信时如何工作的？</li>
<li>多进程场景遇见过么？</li>
<li>Android进程分类？</li>
<li>进程和 Application 的生命周期？</li>
<li>进程调度</li>
<li>谈谈对进程共享和线程安全的认识</li>
<li>谈谈对多进程开发的理解以及多进程应用场景</li>
<li>什么是协程？</li>
</ul>
<h4 id="framework层、ROM定制、Ubuntu、Linux之类的问题"><a href="#framework层、ROM定制、Ubuntu、Linux之类的问题" class="headerlink" title="framework层、ROM定制、Ubuntu、Linux之类的问题"></a>framework层、ROM定制、Ubuntu、Linux之类的问题</h4><ul>
<li>java虚拟机的特性</li>
<li>谈谈对jvm的理解</li>
<li>JVM内存区域，开线程影响哪块内存</li>
<li>对Dalvik、ART虚拟机有什么了解？</li>
<li>Art和Dalvik对比</li>
<li>虚拟机原理，如何自己设计一个虚拟机(内存管理，类加载，双亲委派)</li>
<li>谈谈你对双亲委派模型理解</li>
<li>JVM内存模型，内存区域</li>
<li>类加载机制</li>
<li>谈谈对ClassLoader(类加载器)的理解</li>
<li>谈谈对动态加载（OSGI）的理解</li>
<li>内存对象的循环引用及避免</li>
<li>内存回收机制、GC回收策略、GC原理时机以及GC对象</li>
<li>垃圾回收机制与调用System.gc()区别</li>
<li>系统启动流程是什么？（提示：Zygote进程 –&gt; SystemServer进程 –&gt; 各种系统服务 –&gt; 应用进程）</li>
<li>大体说清一个应用程序安装到手机上时发生了什么</li>
<li>简述Activity启动全部过程</li>
<li>App启动流程，从点击桌面开始</li>
<li>Android中进程内存的分配，能不能自己分配定额内存？</li>
<li>如何保证一个后台服务不被杀死？（相同问题：如何保证service在后台不被kill？）比较省电的方式是什么？</li>
<li>App中唤醒其他进程的实现方式</li>
</ul>
<p>​    <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c3965e82b164">https://www.jianshu.com/p/c3965e82b164</a></p>
<p>​    <a target="_blank" rel="noopener" href="https://www.cnblogs.com/deman/p/5860976.html#_label29">https://www.cnblogs.com/deman/p/5860976.html#_label29</a></p>
<ul>
<li><strong>AMS是如何启动的？</strong></li>
<li><strong>AMS在Android起到什么作用？</strong></li>
<li><strong>AMS有哪些应用场景？我们是如何应用AMS核心原理的？</strong></li>
<li><strong>WMS的工作原理说说？</strong></li>
<li><strong>JVM的核心原理你懂多少？</strong></li>
<li><strong>我们的代码是如何在栈区中运行的？</strong></li>
<li><strong>如何使用字节码研究系统级原理？</strong></li>
</ul>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/15/index.html">https://noteforme.github.io/page/15/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/inter/" rel="tag">inter</a></li></ul>

          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Zigbee" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/06/20/Zigbee/">Zigbee</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2018-06-20T08:51:26.000Z" itemprop="datePublished">2018年06月20日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2018/06/20/Zigbee/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_34581118/article/details/78452316">https://blog.csdn.net/qq_34581118/article/details/78452316</a></p>
<p>0000 0101<br>0001 0000</p>
<p>0001 0101   = 1 * 2^4+ 1*2^2 + 1 = 21  =  0X15<img src="/2018/06/20/Zigbee/Zigbee%5CZigbee_20180620172017.png" alt="Zigbee_20180620172017"></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">01</span> <span class="number">02</span> <span class="number">10</span> <span class="number">11</span> <span class="number">02</span> <span class="number">10</span> <span class="number">02</span> <span class="number">10</span> <span class="number">11</span> <span class="number">03</span></span><br><span class="line">	  <span class="attribute">10</span>       <span class="number">10</span>    <span class="number">10</span> <span class="number">10</span> </span><br><span class="line"><span class="attribute">01</span>    <span class="number">00</span>  <span class="number">11</span>    <span class="number">00</span>   <span class="number">00</span>  <span class="number">11</span> <span class="number">03</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/feiyangxiaomi/article/details/9257375">https://blog.csdn.net/feiyangxiaomi/article/details/9257375</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5b124346e51d450684732790">https://juejin.im/post/5b124346e51d450684732790</a></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/15/index.html">https://noteforme.github.io/page/15/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Architecture" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/06/14/Architecture/">Architecture</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2018-06-14T01:31:59.000Z" itemprop="datePublished">2018年06月14日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/Jetpack/">Jetpack</a>
  </div>

      
      
<a href="/2018/06/14/Architecture/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h5 id="Jetpack"><a href="#Jetpack" class="headerlink" title="Jetpack"></a>Jetpack</h5><p><img src="/2018/06/14/Architecture/2021-08-02_8.15_jetpack.png"></p>
<p>It helps to be familiar with software architectural patterns that separate data from the user interface, such as MVP or MVC</p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/jetpack/docs/getting-started">https://developer.android.com/jetpack/docs/getting-started</a></p>
<ul>
<li>modules should interact</li>
</ul>
<p><img src="/2018/06/14/Architecture/final-architecture.png" alt="final-architecture"></p>
<ul>
<li>NetworkBoundResource</li>
</ul>
<p>It starts by observing the database for the resource. When the entry is loaded from the database for the first time, <code>NetworkBoundResource</code> checks whether the result is good enough to be dispatched or that it  should be re-fetched from the network. Note that both of these  situations can happen at the same time, given that you probably want to  show cached data while updating it from the network.</p>
<p><img src="/2018/06/14/Architecture/network-bound-resource.png" alt="final-architecture"></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/topic/libraries/architecture">https://developer.android.com/topic/libraries/architecture</a></p>
<p>架构学习从codelab开始吧!</p>
<p> <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/19f97654c451">https://www.jianshu.com/p/19f97654c451</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/qingmei2/MVVM-Architecture">https://github.com/qingmei2/MVVM-Architecture</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5dafc49b6fb9a04e17209922">https://juejin.im/post/5dafc49b6fb9a04e17209922</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5d2be05ff265da1bd605d49a">https://juejin.im/post/5d2be05ff265da1bd605d49a</a></p>
<h6 id="LifecycleOwner"><a href="#LifecycleOwner" class="headerlink" title="LifecycleOwner"></a><strong>LifecycleOwner</strong></h6><p><a target="_blank" rel="noopener" href="https://developer.android.com/reference/androidx/lifecycle/LifecycleOwner.html"><code>LifecycleOwner</code> is an interface </a>implemented by the <a target="_blank" rel="noopener" href="https://developer.android.com/reference/androidx/appcompat/app/AppCompatActivity"><code>AppCompatActivity</code></a> and <a target="_blank" rel="noopener" href="https://developer.android.com/reference/androidx/fragment/app/Fragment"><code>Fragment</code></a> classes. You can subscribe other components to owner objects which implement this interface, to observe changes to the lifecycle of the owner.</p>
<p>To read an introductory guide to this topic, see <a target="_blank" rel="noopener" href="https://developer.android.com/topic/libraries/architecture/lifecycle.html">Handling Lifecycles</a>.</p>
<p><a target="_blank" rel="noopener" href="https://codelabs.developers.google.com/codelabs/android-lifecycles/#1">https://codelabs.developers.google.com/codelabs/android-lifecycles/#1</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/gQhBeKA2vGAkh3Tbqn0tEA">https://mp.weixin.qq.com/s/gQhBeKA2vGAkh3Tbqn0tEA</a></p>
<h6 id="ViewModel"><a href="#ViewModel" class="headerlink" title="ViewModel"></a>ViewModel</h6><p><a href="https://noteforme.github.io/2020/04/06/viewmodel/">https://noteforme.github.io/2020/04/06/viewmodel/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/731ca42823ee">https://www.jianshu.com/p/731ca42823ee</a></p>
<p>viewmodelstoreowner</p>
<h6 id="navigation"><a href="#navigation" class="headerlink" title="navigation"></a>navigation</h6><p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/navigation/">https://developer.android.com/guide/navigation/</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/navigation/navigation-getting-started">https://developer.android.com/guide/navigation/navigation-getting-started</a></p>
<p><a target="_blank" rel="noopener" href="https://codelabs.developers.google.com/codelabs/android-navigation/index.html?index=../../index#0">https://codelabs.developers.google.com/codelabs/android-navigation/index.html?index=..%2F..%2Findex#0</a></p>
<p>Codelab 抽屉图标不显示</p>
<ul>
<li><p>BottomNavigationView 导航栏优化  recarete fragment</p>
<p><a target="_blank" rel="noopener" href="https://medium.com/@freedom.chuks7/how-to-use-jet-pack-components-bottomnavigationview-with-navigation-ui-19fb120e3fb9">https://medium.com/@freedom.chuks7/how-to-use-jet-pack-components-bottomnavigationview-with-navigation-ui-19fb120e3fb9</a></p>
</li>
</ul>
<p><strong>NOTICE</strong> :  NavigationView each item ID is matching with fragment ID in navigation</p>
<p> <a target="_blank" rel="noopener" href="https://jiangjiwei.site/post/navigation-zhi-fragment-qie-huan/">https://jiangjiwei.site/post/navigation-zhi-fragment-qie-huan/</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/lwj1994/navigation-keep-state-fragment">https://github.com/lwj1994/navigation-keep-state-fragment</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/STAR-ZERO/navigation-keep-fragment-sample">https://github.com/STAR-ZERO/navigation-keep-fragment-sample</a></p>
<p>Bottom tab定位</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/50577356/android-jetpack-navigation-bottomnavigationview-with-youtube-or-instagram-like">https://stackoverflow.com/questions/50577356/android-jetpack-navigation-bottomnavigationview-with-youtube-or-instagram-like</a></p>
<p>全局共享</p>
<p><a target="_blank" rel="noopener" href="https://github.com/googlesamples/android-architecture-components">googlesamples</a></p>
<h5 id="previously-architecture"><a href="#previously-architecture" class="headerlink" title="previously architecture"></a>previously architecture</h5><p>MVC MVP. MVVM三种架构介绍</p>
<p><a target="_blank" rel="noopener" href="http://www.jcodecraeer.com/a/anzhuokaifa/2017/1024/8636.html">http://www.jcodecraeer.com/a/anzhuokaifa/2017/1024/8636.html</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/Kc1826MQ3ReMkoIWlsQGVw">https://mp.weixin.qq.com/s/Kc1826MQ3ReMkoIWlsQGVw</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5dafc49b6fb9a04e17209922">https://juejin.im/post/5dafc49b6fb9a04e17209922</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5dafc49b6fb9a04e17209922#heading-13">https://juejin.im/post/5dafc49b6fb9a04e17209922#heading-13</a></p>
<ul>
<li>MVP</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://juejin.im/entry/5955e7166fb9a06bc23a8598">https://juejin.im/entry/5955e7166fb9a06bc23a8598</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/yaozs/YzsBaseActivity">https://github.com/yaozs/YzsBaseActivity</a></p>
<p>多个activity对p的复用</p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/599ce8016fb9a0247e4255f4">https://juejin.im/post/599ce8016fb9a0247e4255f4</a></p>
<ul>
<li>Component</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/8_8gGpkpO2QFNkWgSRBwIg">https://mp.weixin.qq.com/s/8_8gGpkpO2QFNkWgSRBwIg</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/6a50ef1ef45c">https://www.jianshu.com/p/6a50ef1ef45c</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/studio/build/dependencies#duplicate_classes">https://developer.android.com/studio/build/dependencies#duplicate_classes</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/studio/build/manifest-merge?hl=zh-cn">https://developer.android.com/studio/build/manifest-merge?hl=zh-cn</a></p>
<p>merge androidmanifest 合并</p>
<p>&lt;<a target="_blank" rel="noopener" href="https://developer.android.com/studio/build/manifest-merge">https://developer.android.com/studio/build/manifest-merge</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/14a822e42151">https://www.jianshu.com/p/14a822e42151</a></p>
<p>compose</p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/0mAbKEuBH5HHYa23EcWalg">https://mp.weixin.qq.com/s/0mAbKEuBH5HHYa23EcWalg</a></p>
<p>lifecycle</p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/6847902220755992589">https://juejin.im/post/6847902220755992589</a></p>
<p>组件化 服务</p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/6884492604370026503">https://juejin.im/post/6884492604370026503</a></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/15/index.html">https://noteforme.github.io/page/15/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-VideoNDK" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/06/14/VideoNDK/">VideoNDK</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2018-06-14T01:21:28.000Z" itemprop="datePublished">2018年06月14日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2018/06/14/VideoNDK/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="/2018/06/14/VideoNDK/2021-03-19_2.55.38_PM.png"></p>
<h4 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span> </span>&#123;</span><br><span class="line">    <span class="comment">// insert code here...</span></span><br><span class="line">    <span class="keyword">char</span>* p = (<span class="keyword">char</span>*)<span class="built_in">malloc</span>(<span class="number">10</span>);    <span class="comment">//字符型指针 malloc堆空间分配内存</span></span><br><span class="line">    *p = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">    *(p+<span class="number">1</span>) = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line">    *(p+<span class="number">2</span>) = <span class="string">&#x27;c&#x27;</span>;</span><br><span class="line">    <span class="built_in">free</span>(p);</span><br><span class="line">    <span class="comment">// p = NULL;</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s \n&quot;</span>,p); </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>输出 abc</p>
<h5 id="指针函数-带指针的函数"><a href="#指针函数-带指针的函数" class="headerlink" title="指针函数:带指针的函数"></a>指针函数:带指针的函数</h5><p> 函数的返回值为指针类型</p>
<p> 函数声明 : <code>int* func(int x,int y)</code></p>
<p>指针函数调用</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> *q;</span><br><span class="line">q = func(m);	<span class="comment">// q与被调用的函数的返回类型一致</span></span><br></pre></td></tr></table></figure>



<h6 id="示例1"><a href="#示例1" class="headerlink" title="示例1"></a>示例1</h6><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">getWord</span><span class="params">(<span class="keyword">char</span> c)</span></span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (c) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;A&#x27;</span>: <span class="keyword">return</span> <span class="string">&quot;Apple&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;B&#x27;</span>: <span class="keyword">return</span> <span class="string">&quot;Banana&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;C&#x27;</span>: <span class="keyword">return</span> <span class="string">&quot;Cat&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;D&#x27;</span>: <span class="keyword">return</span> <span class="string">&quot;Dog&quot;</span>;</span><br><span class="line">        <span class="keyword">default</span>:<span class="keyword">return</span> <span class="string">&quot;None&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> input;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;please input a charactar:&quot;</span>);</span><br><span class="line">    input = getchar();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>,input);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,getWord(input));</span><br><span class="line">    getchar();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>运行结果</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">please</span> <span class="selector-tag">input</span> <span class="selector-tag">a</span> <span class="selector-tag">charactar</span>:<span class="selector-tag">A</span></span><br><span class="line"><span class="selector-tag">A</span></span><br><span class="line"><span class="selector-tag">Apple</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p> 输入A ，getWord()返回值为 Apple的首地址,printf(“%s\n),输出首地址所指向的值</p>
</blockquote>
<h6 id="示例2"><a href="#示例2" class="headerlink" title="示例2"></a>示例2</h6><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">getWord2</span><span class="params">(<span class="keyword">char</span> c)</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> str1[] = <span class="string">&quot;Apple&quot;</span>;</span><br><span class="line">    <span class="keyword">char</span> str2[] = <span class="string">&quot;Banana&quot;</span>;</span><br><span class="line">    <span class="keyword">char</span> str3[] = <span class="string">&quot;Cat&quot;</span>;</span><br><span class="line">    <span class="keyword">char</span> str4[] = <span class="string">&quot;Dog&quot;</span>;</span><br><span class="line">    <span class="keyword">char</span> str5[] = <span class="string">&quot;None&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (c) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;A&#x27;</span>: <span class="keyword">return</span> str1;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;B&#x27;</span>: <span class="keyword">return</span> str2;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;C&#x27;</span>: <span class="keyword">return</span> str3;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;D&#x27;</span>: <span class="keyword">return</span> str4;</span><br><span class="line">        <span class="keyword">default</span>:<span class="keyword">return</span> str5;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//#if (0)</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> input;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;please input a charactar:&quot;</span>);</span><br><span class="line">    input = getchar();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>,input);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,getWord2(input));</span><br><span class="line">    getchar();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//#endif</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>注意: 不要返回局部变量的指针</strong></p>
<p>例子2中,str1数组是局部变量，这个字符数组在子程序结束后，它对应的存储空间会被释放.</p>
<h5 id="函数指针：指向函数的指针"><a href="#函数指针：指向函数的指针" class="headerlink" title="函数指针：指向函数的指针"></a>函数指针：指向函数的指针</h5><p>指向函数起始地址的指针</p>
<h6 id="函数指针的定义"><a href="#函数指针的定义" class="headerlink" title="函数指针的定义"></a>函数指针的定义</h6><ul>
<li><p><code>int (*fptr)(int,int)</code>  // (*func)中括号是必要的，这会告诉编译器我们声明的是函数指针而不是声明一个具有返回型为指针的函数</p>
</li>
<li><p>指针变量 :  *fptr , </p>
</li>
<li><p>如果*fptr变为函数名，整个就是一个函数</p>
</li>
</ul>
<h6 id="函数指针的使用"><a href="#函数指针的使用" class="headerlink" title="函数指针的使用"></a>函数指针的使用</h6><p><code> fptr = func;</code></p>
<p>int x = fptr(5,8);</p>
<blockquote>
<p>“%x “ 打印指针本身</p>
</blockquote>
<ol>
<li>示例</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">square</span><span class="params">(<span class="keyword">int</span> num)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span>  num * num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num;</span><br><span class="line">    <span class="keyword">int</span> (*fp)(<span class="keyword">int</span>); <span class="comment">// fp是一个指针，指向返回类型为int，参数为int的函数.</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;please input a number:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;num);</span><br><span class="line">    fp = square;	<span class="comment">// 函数与指针的联系</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;fp = 0x%x, %d\n&quot;</span>,fp,(*fp)(num));	<span class="comment">//&#x27;0x%x&#x27; 打印指针本身</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;fp = 0x%x, %d\n&quot;</span>,fp,fp(num));		<span class="comment">// fp直接调用也可以</span></span><br><span class="line">    <span class="keyword">return</span>  <span class="number">0</span>;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>square内存中占据的位置，fp保存square指针的入口地址,fp指向square(),*fp代表 调用square().</p>
<p><img src="/2018/06/14/VideoNDK/2021-03-06_9.54.34_PM.png"></p>
<ol start="2">
<li>用法</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> num1,<span class="keyword">int</span> num2)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num1+num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sub</span><span class="params">(<span class="keyword">int</span> num1,<span class="keyword">int</span> num2)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> num1-num2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="keyword">int</span> (*fp)(<span class="keyword">int</span>,<span class="keyword">int</span>),<span class="keyword">int</span> num1,<span class="keyword">int</span> num2)</span></span>&#123;	<span class="comment">//通用功能的函数</span></span><br><span class="line">    <span class="keyword">return</span> (*fp)(num1,num2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;3+5=%d\n&quot;</span>,calculate(add,<span class="number">3</span>,<span class="number">5</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;3-5=%d\n&quot;</span>,calculate(sub,<span class="number">3</span>,<span class="number">5</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<ol start="3">
<li>函数指针数组</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">function1</span><span class="params">(<span class="keyword">int</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">function2</span><span class="params">(<span class="keyword">int</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">function3</span><span class="params">(<span class="keyword">int</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">function1</span><span class="params">(<span class="keyword">int</span> choice)</span></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;input %d, run function1().\n &quot;</span>,choice);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">function2</span><span class="params">(<span class="keyword">int</span> choice)</span></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;input %d, run function2().\n &quot;</span>,choice);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">function3</span><span class="params">(<span class="keyword">int</span> choice)</span></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;input %d, run function3().\n &quot;</span>,choice);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span>(1)</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[])</span> </span>&#123;</span><br><span class="line">    <span class="keyword">void</span> (*f[<span class="number">3</span>])(<span class="keyword">int</span>) = &#123;function1,function2,function3&#125;;<span class="comment">//f[3] f是有3个元素的数组，数组的每个元素是指针类型,每个指针指向 参数为(int)类型的函数</span></span><br><span class="line">    <span class="keyword">int</span> choice;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;please enter a digit : [0-2]: &quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;choice);</span><br><span class="line">    <span class="keyword">while</span> (choice&gt;<span class="number">0</span>&amp;&amp;choice&lt;<span class="number">3</span>) &#123;</span><br><span class="line">        (*f[choice])(choice);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;please enter a digit : [0-2]: &quot;</span>);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;choice);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;run end&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2018/06/14/VideoNDK/2021-03-06_10.12.11_PM.png"></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV15J411Q7t9?from=search&amp;seid=1110914330533311902">https://www.bilibili.com/video/BV15J411Q7t9?from=search&amp;seid=1110914330533311902</a></p>
<p>函数指针pft指向了一个已经声明的函数bar()，然后通过pft来实现输出字符和整型的目的。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bar</span><span class="params">(<span class="keyword">char</span>, <span class="keyword">int</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">typedef</span>  <span class="title">void</span> <span class="params">(*PFT)</span><span class="params">(<span class="keyword">char</span>, <span class="keyword">int</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    PFT pft;</span><br><span class="line">    pft = bar;</span><br><span class="line">    <span class="built_in">pft</span>(<span class="string">&#x27;e&#x27;</span>,<span class="number">91</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bar</span><span class="params">(<span class="keyword">char</span> ch,<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">    cout&lt;&lt; <span class="string">&quot; bar &quot;</span>&lt;&lt;ch&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;i&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>函数指针作为函数的参数，我们可以在一个函数的形参列表中传入一个函数指针， 然后便可以在这个函数中使用这个函数指针所指向的函数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">void</span> <span class="params">(*PFT)</span><span class="params">(<span class="keyword">char</span>, <span class="keyword">int</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bar</span><span class="params">(<span class="keyword">char</span> ch, <span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;bar &quot;</span> &lt;&lt; ch &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">(<span class="keyword">char</span> ch, <span class="keyword">int</span> i, PFT pf)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">pf</span>(ch, i);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    PFT pft;</span><br><span class="line">    pft = bar;</span><br><span class="line">    <span class="built_in">foo</span>(<span class="string">&#x27;e&#x27;</span>, <span class="number">12</span>, pft);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>函数对象</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> x; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    A a;</span><br><span class="line">    cout&lt;&lt;<span class="built_in">a</span>(<span class="number">5</span>)&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Func</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        cout &lt;&lt; a &lt;&lt; <span class="string">&#x27;+&#x27;</span> &lt;&lt; b &lt;&lt; <span class="string">&#x27;=&#x27;</span> &lt;&lt; a + b &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">addFunc</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, Func &amp;func)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">func</span>(a, b);</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    Func func;</span><br><span class="line">    <span class="built_in">addFunc</span>(<span class="number">1</span>, <span class="number">3</span>, func);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h4><h5 id="结构指针"><a href="#结构指针" class="headerlink" title="结构指针"></a>结构指针</h5><p>point</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span>  *<span class="title">pp</span>;</span></span><br><span class="line"> <span class="class"><span class="keyword">struct</span> <span class="title">point</span> <span class="title">pt</span> =</span> &#123;<span class="number">400</span>,<span class="number">600</span>&#125;;</span><br><span class="line"> pp = &amp;pt;</span><br><span class="line"> </span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;pt  %d, %d   \n&quot;</span>,pt.x, pt.y);<span class="comment">//(*pp.x)中的圆括号是必须的，因为结构成员运算符的 &quot;.&quot; 的优先级比先级高</span></span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;*pp %d, %d    \n&quot;</span>,(*pp).x, (*pp).y);</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;pp-&gt;  %d, %d  \n&quot;</span>,pp-&gt;x, pp-&gt;y);</span><br></pre></td></tr></table></figure>

<p>运行</p>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pt  400,<span class="number"> 600 </span>  </span><br><span class="line">*pp 400,<span class="number"> 600 </span>   </span><br><span class="line">pp-&gt;  400,<span class="number"> 600 </span> </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>结构指针的使用频度非常高，C语言提供了另一种简写方式，假定P指向一个结构的指针，可以用</p>
<p>p-&gt; 结构成员  ==  *p.结构成员</p>
<p>代码表达式<code>printf(&quot;origin is (%d,%d)\n&quot;, pp-&gt;x, pp-&gt;y);</code></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">rect</span> <span class="title">r</span> =</span> &#123;&#123;<span class="number">200</span>,<span class="number">300</span>&#125;,&#123;<span class="number">400</span>,<span class="number">500</span>&#125;&#125;;</span><br><span class="line"> <span class="class"><span class="keyword">struct</span> <span class="title">rect</span> *<span class="title">rp</span> =</span> &amp;r;</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;pt1.x %d         \n&quot;</span>,r.pt1.x);</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;(*rp).pt1.x %d  \n&quot;</span>,(*rp).pt1.x);</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot; rp-&gt;pt1.x %d   \n&quot;</span>,rp-&gt;pt1.x);</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;r.pt1.x %d  \n&quot;</span>,r.pt1.x);</span><br></pre></td></tr></table></figure>

<p>运行结果</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pt1<span class="selector-class">.x</span> <span class="number">200</span>         </span><br><span class="line">(*rp)<span class="selector-class">.pt1</span><span class="selector-class">.x</span> <span class="number">200</span>  </span><br><span class="line"> rp-&gt;pt1<span class="selector-class">.x</span> <span class="number">200</span>   </span><br><span class="line">r<span class="selector-class">.pt1</span><span class="selector-class">.x</span> <span class="number">200</span>  </span><br></pre></td></tr></table></figure>



<h4 id="动态内存分配"><a href="#动态内存分配" class="headerlink" title="动态内存分配"></a>动态内存分配</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">int</span> a[<span class="number">5</span>] = &#123;<span class="number">4</span>,<span class="number">10</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">6</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> len;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;请输入你需要分配的数组的长度：len = &quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;len);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * sizeof(int) *len 分配len个int字节的长度，len =5时，就是20个字节</span></span><br><span class="line"><span class="comment">     * malloc返回 指向 第一个字节的地址</span></span><br><span class="line"><span class="comment">     * int * 第一个字节的地址，代表Int类型地址， pArr等价于a， pArr+1代表第二个Int地址</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">int</span> *pArr = (<span class="keyword">int</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>) *len);</span><br><span class="line">    *pArr = <span class="number">5</span>; <span class="comment">//类似于 a[0] =4;</span></span><br><span class="line">     pArr[<span class="number">1</span>] = <span class="number">10</span>; <span class="comment">//类似于a[1]=10;</span></span><br><span class="line"><span class="comment">//     printf(&quot;%d %d &quot;,*pArr,pArr[1]);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;len ; ++i) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span> , &amp;pArr[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;  i&lt;len ; ++i) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n &quot;</span> , *(pArr+i));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">free</span>(pArr); <span class="comment">//把pArr所代表的动态分配的20个字节的内存释放</span></span><br></pre></td></tr></table></figure>

<p><img src="/2018/06/14/VideoNDK/point_diagram.png"></p>
<h5 id="结构体变量-hao"><a href="#结构体变量-hao" class="headerlink" title="结构体变量(hao)"></a>结构体变量(hao)</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;memory.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> sid;</span><br><span class="line">    <span class="keyword">char</span> name[<span class="number">200</span>];</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">g</span><span class="params">(struct Student student)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">g2</span><span class="params">(struct Student *pst)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(struct Student *pst)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Student</span> <span class="title">st</span> =</span> &#123;<span class="number">1000</span>, <span class="string">&quot;张三&quot;</span>, <span class="number">20</span>&#125;;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d   %s   %d\n&quot;</span>, st.sid, st.name, st.age);</span><br><span class="line">    st.sid = <span class="number">99</span>;</span><br><span class="line"><span class="comment">//    st.name = &quot;lili&quot;; //error</span></span><br><span class="line">    <span class="built_in">strcpy</span>(st.name, <span class="string">&quot;lili&quot;</span>);<span class="comment">//复制</span></span><br><span class="line">    st.age = <span class="number">22</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d   %s   %d\n&quot;</span>, st.sid, st.name, st.age);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Student</span> *<span class="title">pst</span>;</span></span><br><span class="line">    pst = &amp;st;</span><br><span class="line">    pst-&gt;sid = <span class="number">99</span>; <span class="comment">//  pst -&gt; sid 等价于 (*pst).sid 而(*pst).sid 等价于 st.sid</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// pst -&gt; sid</span></span><br><span class="line">    <span class="comment">// 所指向的结构体变量的sid这个成员</span></span><br><span class="line"></span><br><span class="line">    g(st);</span><br><span class="line">    g2(&amp;st);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">g2</span><span class="params">(struct Student *pst)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;g2  %d   %s   %d\n&quot;</span>, pst-&gt;sid, pst-&gt;name, pst-&gt;age);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//这种方式多耗 208 内存，耗时间 不推荐</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">g</span><span class="params">(struct Student st)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;g  %d   %s   %d\n&quot;</span>, st.sid, st.name, st.age);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="跨函数使用内存"><a href="#跨函数使用内存" class="headerlink" title="跨函数使用内存"></a>跨函数使用内存</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;malloc.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> sid;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">struct Student *<span class="title">createStudent</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">showStudent</span><span class="params">(struct Student *pst)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span>  <span class="title">Student</span> *<span class="title">ps</span>;</span></span><br><span class="line">    ps = <span class="built_in">createStudent</span>();</span><br><span class="line">    <span class="built_in">showStudent</span>(ps);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">showStudent</span><span class="params">(struct Student *pst)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d %d\n&quot;</span>,pst-&gt;sid,pst-&gt;age);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">struct Student *<span class="title">createStudent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span>  <span class="title">Student</span> *<span class="title">p</span> =</span> <span class="built_in">malloc</span>(<span class="built_in"><span class="keyword">sizeof</span></span>(struct Student)); <span class="comment">//表示   struct Student整体的数据类型代表的字节数</span></span><br><span class="line">            p-&gt;sid = <span class="number">99</span>;</span><br><span class="line">            p-&gt;age = <span class="number">88</span>;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="运算符优先级"><a href="#运算符优先级" class="headerlink" title="运算符优先级"></a>运算符优先级</h5><ul>
<li><p>java运算符优先级</p>
<blockquote>
<p>!   &amp;&amp;    ||</p>
</blockquote>
</li>
</ul>
<h4 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h4><p><a target="_blank" rel="noopener" href="https://space.bilibili.com/501486236/video">https://space.bilibili.com/501486236/video</a></p>
<h5 id="typedef-别名"><a href="#typedef-别名" class="headerlink" title="typedef  别名"></a>typedef  别名</h5><p>type_1</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> ZHANGSAN;<span class="comment">//为int再重新多取一个名字，ZHANGSAN等价于int</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Student</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> sid;</span><br><span class="line">    <span class="keyword">char</span> name[<span class="number">100</span>];</span><br><span class="line">    <span class="keyword">char</span> sex;</span><br><span class="line">&#125; ST;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">10</span>; <span class="comment">//等价于 ZHANGSAN i = 10;</span></span><br><span class="line">    ZHANGSAN j = <span class="number">20</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, j);</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Student</span> <span class="title">st</span>;</span><span class="comment">//等价于 ST st;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Student</span> *<span class="title">ps</span> =</span> &amp;st; <span class="comment">// 等价于 ST * ps</span></span><br><span class="line">    ST st2;</span><br><span class="line">    st2.sid = <span class="number">200</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,st2.sid);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>type_2</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Student</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> sid;</span><br><span class="line">    <span class="keyword">char</span> name[<span class="number">100</span>];</span><br><span class="line">    <span class="keyword">char</span> sex;</span><br><span class="line">&#125; * PST ; <span class="comment">//PST等价于 struct Student * ,这样就是一个指针类型了</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span>  <span class="title">Student</span> <span class="title">st</span>;</span></span><br><span class="line">    PST ps  = &amp;st;</span><br><span class="line">    ps-&gt;sid = <span class="number">99</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ps-&gt;sid);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>type_3</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Student</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> sid;</span><br><span class="line">    <span class="keyword">char</span> name[<span class="number">100</span>];</span><br><span class="line">    <span class="keyword">char</span> sex;</span><br><span class="line">&#125; * PSTU, STU; <span class="comment">//等价于 ST代表了 struct Student st, PST 代表了struct Student *;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    STU st; <span class="comment">//等价于 struct Student st;</span></span><br><span class="line">    PSTU  ps = &amp;st; <span class="comment">//struct Student * ps = &amp;st;</span></span><br><span class="line">    ps-&gt;sid = <span class="number">99</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,ps-&gt;sid);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h4><h5 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h5><blockquote>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">C</span>++ <span class="comment">引用引用变量是一个别名，也就是说，它是某个已存在变量的另一个名字。一旦把引用初始化为某个变量，就可以使用该引用名称或变量名称来指向变量</span></span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> &amp;x, <span class="keyword">int</span> &amp;y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t = x;</span><br><span class="line">    x = y;</span><br><span class="line">    y = t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">3</span>, b = <span class="number">4</span>;</span><br><span class="line">    cout &lt;&lt; a &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">swap</span>(a, b);</span><br><span class="line">    cout &lt;&lt; a &lt;&lt; <span class="string">&quot;\t&quot;</span> &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="函数模板"><a href="#函数模板" class="headerlink" title="函数模板"></a>函数模板</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span>  T&gt;</span><br><span class="line"><span class="function">T <span class="title">add</span><span class="params">(T x,T y)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span>  x+y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">    cout&lt;&lt;add&lt;<span class="keyword">int</span>&gt;(<span class="number">5</span>,<span class="number">3</span>)&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;add&lt;<span class="keyword">double</span> &gt;(<span class="number">5.3</span>,<span class="number">7.8</span>)&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;add&lt;<span class="keyword">int</span>&gt;(<span class="number">4</span>,<span class="number">6</span>)&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;add&lt;string&gt;(<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;world&quot;</span>)&lt;&lt;endl;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line">    <span class="comment">//类型自动推断</span></span><br><span class="line">    cout&lt;&lt;<span class="built_in">add</span>(<span class="number">5</span>,<span class="number">3</span>)&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="built_in">add</span>(<span class="number">5.3</span>,<span class="number">7.8</span>)&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="built_in">add</span>(<span class="number">4</span>,<span class="number">6</span>)&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="built_in">add</span>((<span class="keyword">double</span>)<span class="number">5</span>,<span class="number">7.8</span>)&lt;&lt;endl;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<h4 id="swift语法"><a href="#swift语法" class="headerlink" title="swift语法"></a>swift语法</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a <span class="operator">=</span> <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> b: <span class="type">Int</span> <span class="operator">=</span> <span class="number">20</span></span><br><span class="line"><span class="keyword">let</span> aa <span class="operator">=</span> <span class="number">40</span> <span class="comment">//const</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> a<span class="operator">&lt;</span><span class="number">20</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;a &lt; 20 , true&quot;</span> )</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;a &gt;= 20&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> a &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;a equals 10&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">20</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;a equals 20&quot;</span>)</span><br><span class="line"><span class="keyword">default</span> :</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;other&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello, World!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">25</span><span class="operator">..&lt;</span><span class="number">100</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;aa,i=&quot;</span>,i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> list  <span class="operator">=</span> [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> list&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;aa, i=&quot;</span>,i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> loop <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> loop<span class="operator">&lt;</span><span class="number">10</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;loop, xxx = &quot;</span>,loop)</span><br><span class="line">    loop <span class="operator">=</span> loop <span class="operator">+</span> <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">myFunc</span>(<span class="params">a</span> : <span class="type">Int</span>)</span> -&gt; <span class="type">Int</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;this is a function&quot;</span>,a)</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> mm  <span class="operator">=</span> myFunc(a: <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello, World!&quot;</span>,a,b,aa,mm)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>environment<br><a target="_blank" rel="noopener" href="https://juejin.im/post/5ad98412518825670960c13c">https://juejin.im/post/5ad98412518825670960c13c</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/ndk/">https://developer.android.com/ndk/</a></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/15/index.html">https://noteforme.github.io/page/15/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Bluetooth03" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/06/11/Bluetooth03/">Bluetooth03</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2018-06-11T01:41:39.000Z" itemprop="datePublished">2018年06月11日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/BLE/">BLE</a>
  </div>

      
      
<a href="/2018/06/11/Bluetooth03/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="经典蓝牙-低功耗蓝牙的区别"><a href="#经典蓝牙-低功耗蓝牙的区别" class="headerlink" title="经典蓝牙 低功耗蓝牙的区别"></a>经典蓝牙 低功耗蓝牙的区别</h4><p><a target="_blank" rel="noopener" href="http://www.loverobots.cn/the-analysis-is-simple-compared-with-the-classic-bluetooth-and-bluetooth-low-energy-in-android.html">http://www.loverobots.cn/the-analysis-is-simple-compared-with-the-classic-bluetooth-and-bluetooth-low-energy-in-android.html</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/59964187f265da249600af68">蓝牙适配建议</a></p>
<ul>
<li> 蓝牙低功耗</li>
</ul>
<p>  ​    Android 4.3 为发挥核心作用的<a target="_blank" rel="noopener" href="https://developer.android.com/guide/topics/connectivity/bluetooth-le.html?hl=zh-cn">蓝牙低功耗</a>（<em>蓝牙 LE</em>）引入了平台支持。在 Android 5.0 中，Android 设备现在可以发挥蓝牙 LE <em>外围设备</em>的作用。应用可以利用此功能让附近设备发现它。例如，您可以开发这样的应用：让设备发挥计步器或健康监测仪的作用，并与其他蓝牙 LE 设备进行数据通信。</p>
<p>  新增的 <code>android.bluetooth.le</code> API 让您的应用可以发布广告、扫描响应以及与附近的蓝牙 LE 设备建立连接。要使用新增的广告和扫描功能，请在您的清单中添加 <code>BLUETOOTH_ADMIN</code> 权限。当用户更新您的应用或从 Play 商店下载您的应用时，会被要求向您的应用授予以下权限：“Bluetooth connection information:Allows the app to control Bluetooth, including broadcasting to or getting information about nearby Bluetooth devices.”</p>
<p>  要启动蓝牙 LE 广播，以便其他设备能发现您的应用，请调用 <code>startAdvertising()</code>，并传入 <code>AdvertiseCallback</code> 类的实现。回调对象会收到广播操作成功或失败的报告。</p>
<p>  Android 5.0 引入了 <code>ScanFilter</code> 类，让您的应用可以只扫描其感兴趣的特定类型设备。要开始扫描蓝牙 LE 设备，请调用 <code>startScan()</code>，并传入筛选器列表。在方法调用中，您还必须提供 <code>ScanCallback</code> 的实现，以便在发现蓝牙 LE 广播时进行报告。</p>
<h3 id="蓝牙基本操作"><a href="#蓝牙基本操作" class="headerlink" title="蓝牙基本操作"></a>蓝牙基本操作</h3><h4 id="蓝牙权限"><a href="#蓝牙权限" class="headerlink" title="蓝牙权限"></a>蓝牙权限</h4><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;uses-permission android:<span class="built_in">name</span>=<span class="string">&quot;android.permission.BLUETOOTH&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>如果您希望您的应用启动设备发现或操作蓝牙设置，则还必须声明 <code>BLUETOOTH_ADMIN</code> 权限。 大多数应用需要此权限仅仅为了能够发现本地蓝牙设备。 除非该应用是将要应用户请求修改蓝牙设置的“超级管理员”，否则不应使用此权限所授予的其他能力。 <strong>注</strong>：如果要使用 <code>BLUETOOTH_ADMIN</code> 权限，则还必须拥有 <code>BLUETOOTH</code> 权限。 如打开关闭蓝牙</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;uses-permission android:<span class="built_in">name</span>=<span class="string">&quot;android.permission.BLUETOOTH_ADMIN&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<h5 id="6-0权限"><a href="#6-0权限" class="headerlink" title="6.0权限"></a>6.0权限</h5><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;uses-permission android:<span class="attribute">name</span>=<span class="string">&quot;android.permission.ACCESS_COARSE_LOCATION&quot;</span>/&gt;</span><br><span class="line">&lt;uses-permission android:<span class="attribute">name</span>=<span class="string">&quot;android.permission.ACCESS_FINE_LOCATION&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>

<h5 id="设置蓝牙"><a href="#设置蓝牙" class="headerlink" title="设置蓝牙"></a>设置蓝牙</h5><ol>
<li><p>判断设备是否支持</p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html?hl=zh-cn">BluetoothAdapter</a> </p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mBluetoothAdapter = <span class="module-access"><span class="module"><span class="identifier">BluetoothAdapter</span>.</span></span>get<span class="constructor">DefaultAdapter()</span>;</span><br><span class="line">BluetoothAdapter mBluetoothAdapter = <span class="module-access"><span class="module"><span class="identifier">BluetoothAdapter</span>.</span></span>get<span class="constructor">DefaultAdapter()</span>;</span><br><span class="line"><span class="keyword">if</span> (mBluetoothAdapter<span class="operator"> == </span>null) &#123;</span><br><span class="line">    <span class="comment">// Device does not support Bluetooth</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>启用蓝牙</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (mBluetoothAdapter==<span class="keyword">null</span>||!mBluetoothAdapter.isEnabled())&#123;</span><br><span class="line">       Toast.makeText(<span class="keyword">this</span>,<span class="string">&quot;设备不支持蓝牙权限&quot;</span>,Toast.LENGTH_SHORT).<span class="keyword">show</span>();</span><br><span class="line"> &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">       Toast.makeText(<span class="keyword">this</span>,<span class="string">&quot;支持设备&quot;</span>,Toast.LENGTH_SHORT).<span class="keyword">show</span>();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="查找设备"><a href="#查找设备" class="headerlink" title="查找设备"></a>查找设备</h4><p>5.0以下的方式就不贴出来了，代码里有</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * android5.0以上使用</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  @<span class="constructor">RequiresApi(<span class="params">api</span> = Build.VERSION_CODES.LOLLIPOP)</span></span><br><span class="line">  <span class="keyword">private</span>  void  scan<span class="constructor">Devices()</span>&#123;</span><br><span class="line">      BluetoothLeScanner mBluetoothScanner = mBluetoothAdapter.get<span class="constructor">BluetoothLeScanner()</span>;</span><br><span class="line">      mBluetoothScanner.start<span class="constructor">Scan(<span class="params">scanCallback</span>)</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ScanCallback scanCallback = <span class="keyword">new</span> <span class="constructor">ScanCallback()</span> &#123;</span><br><span class="line">      @Override</span><br><span class="line">      public void on<span class="constructor">ScanResult(<span class="params">int</span> <span class="params">callbackType</span>, ScanResult <span class="params">result</span>)</span> &#123;</span><br><span class="line">          super.on<span class="constructor">ScanResult(<span class="params">callbackType</span>, <span class="params">result</span>)</span>;</span><br><span class="line">          <span class="comment">//把byte数组转成16进制字符串，方便查看</span></span><br><span class="line">          <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>e(TAG,<span class="string">&quot;onScanResult :&quot;</span>+result.get<span class="constructor">ScanRecord()</span>.<span class="keyword">to</span><span class="constructor">String()</span>);</span><br><span class="line">          BluetoothDevice device = result.get<span class="constructor">Device()</span>;</span><br><span class="line">          blueAdapter.add<span class="constructor">Device(<span class="params">device</span>)</span>;</span><br><span class="line">          </span><br><span class="line">          ScanRecord scanRecord = result.get<span class="constructor">ScanRecord()</span>;</span><br><span class="line">          <span class="built_in">int</span> rssi = result.get<span class="constructor">Rssi()</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      @Override</span><br><span class="line">      public void on<span class="constructor">BatchScanResults(List&lt;ScanResult&gt; <span class="params">results</span>)</span> &#123;</span><br><span class="line">          super.on<span class="constructor">BatchScanResults(<span class="params">results</span>)</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      @Override</span><br><span class="line">      public void on<span class="constructor">ScanFailed(<span class="params">int</span> <span class="params">errorCode</span>)</span> &#123;</span><br><span class="line">          super.on<span class="constructor">ScanFailed(<span class="params">errorCode</span>)</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="连接设备"><a href="#连接设备" class="headerlink" title="连接设备"></a>连接设备</h5><p>蓝牙设备经常处于关机状态，先调用下面方法</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BluetoothDevice remoteDevice = adapter.get<span class="constructor">RemoteDevice(<span class="params">address</span>)</span>;</span><br></pre></td></tr></table></figure>

 <figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">remoteDevice.connect<span class="constructor">Gatt(<span class="params">context</span>, <span class="params">true</span>, <span class="params">mGattCallback</span>)</span>;<span class="comment">//参数1：上下文。</span></span><br><span class="line">                                                       <span class="comment">//参数2：是否自动连接（当设备可以用时）</span></span><br><span class="line">                                                       <span class="comment">//参数3：连接回调。</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/Free-Thinker/p/11507349.html">https://www.cnblogs.com/Free-Thinker/p/11507349.html</a></p>
<p><strong>6、关于autoConnect参数为true的意义？</strong></p>
<p>在蓝牙核心文档Vol3: Core System Package[Host volume]-&gt;Part C: Generic  Access Profile的Connection Modes and Procedures章节中有涉及到自动连接建立规程(Auto  Connection Establishment Procedure)的定义。</p>
<p>自动连接建立规程用来向多个设备同时发起连接。一个中央设备的主机与多个外围设备绑定，只要它们开始广播，便立刻与其建立连接。跟多细节请参考蓝牙核心文档和协议栈源码。</p>
<p>回调</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> BluetoothGattCallback mGattCallback = <span class="keyword">new</span> <span class="constructor">BluetoothGattCallback()</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Callback indicating when GATT client has connected/disconnected to/from a remote GATT server</span></span><br><span class="line"><span class="comment">     * @param gatt     返回连接建立的gatt对象</span></span><br><span class="line"><span class="comment">     * @param status   返回的是此次gatt操作的结果，成功了返回0</span></span><br><span class="line"><span class="comment">     * @param newState 每次client连接或断开连接状态变化，STATE_CONNECTED 0，STATE_CONNECTING 1,STATE_DISCONNECTED 2,STATE_DISCONNECTING 3</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    @Override</span><br><span class="line">    public void on<span class="constructor">ConnectionStateChange(BluetoothGatt <span class="params">gatt</span>, <span class="params">int</span> <span class="params">status</span>, <span class="params">int</span> <span class="params">newState</span>)</span> &#123;</span><br><span class="line">        super.on<span class="constructor">ConnectionStateChange(<span class="params">gatt</span>, <span class="params">status</span>, <span class="params">newState</span>)</span>;</span><br><span class="line">        <span class="keyword">if</span> (newState<span class="operator"> == </span>BluetoothProfile.STATE_CONNECTED) &#123;</span><br><span class="line">            gatt.discover<span class="constructor">Services()</span>;        <span class="comment">//连接成功， 开始搜索服务</span></span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>i(TAG, <span class="string">&quot;onConnectionStateChange  连接成功&quot;</span> + status);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Callback invoked when the list of remote services, characteristics and descriptors for the remote device have been updated, ie new services have been discovered.</span></span><br><span class="line"><span class="comment">     * @param gatt   返回的是本次连接的gatt对象</span></span><br><span class="line"><span class="comment">     * @param status</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    @Override</span><br><span class="line">    public void on<span class="constructor">ServicesDiscovered(BluetoothGatt <span class="params">gatt</span>, <span class="params">int</span> <span class="params">status</span>)</span> &#123;</span><br><span class="line">        super.on<span class="constructor">ServicesDiscovered(<span class="params">gatt</span>, <span class="params">status</span>)</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>i(TAG, <span class="string">&quot;onServicesDiscovered status&quot;</span> + status);</span><br><span class="line">        List&lt;BluetoothGattService&gt; mServiceList = gatt.get<span class="constructor">Services()</span>;</span><br><span class="line">        <span class="keyword">for</span> (BluetoothGattService service : mServiceList) &#123;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>i(TAG, <span class="string">&quot;onServicesDiscovered &quot;</span> + service.get<span class="constructor">Uuid()</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        BluetoothGattService service = gatt.get<span class="constructor">Service(UUID.<span class="params">fromString</span>(GATT_SERVICE_PRIMARY_1)</span>);</span><br><span class="line">        BluetoothGattCharacteristic characterisetic = service.get<span class="constructor">Characteristic(UUID.<span class="params">fromString</span>(CHARACTERISTIC_NOTIFY_1)</span>);</span><br><span class="line">        <span class="comment">//调用以便当命令发送后返回信息可以自动返回</span></span><br><span class="line">        BluetoothGattDescriptor descriptor = characterisetic.get<span class="constructor">Descriptor(CCC)</span>;</span><br><span class="line">        descriptor.set<span class="constructor">Value(BluetoothGattDescriptor.ENABLE_NOTIFICATION_VALUE)</span>;</span><br><span class="line">        gatt.write<span class="constructor">Descriptor(<span class="params">descriptor</span>)</span>;</span><br><span class="line">        boolean isNotify = gatt.set<span class="constructor">CharacteristicNotification(<span class="params">characterisetic</span>, <span class="params">true</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//回调响应特征写操作的结果。</span></span><br><span class="line">    @Override</span><br><span class="line">    public void on<span class="constructor">CharacteristicWrite(BluetoothGatt <span class="params">gatt</span>, BluetoothGattCharacteristic <span class="params">characteristic</span>, <span class="params">int</span> <span class="params">status</span>)</span> &#123;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>i(TAG, gatt.get<span class="constructor">Device()</span>.get<span class="constructor">Name()</span> + <span class="string">&quot; write successfully&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="comment">//回调响应特征读操作的结果。</span></span><br><span class="line">    @Override</span><br><span class="line">    public void on<span class="constructor">CharacteristicRead(BluetoothGatt <span class="params">gatt</span>, BluetoothGattCharacteristic <span class="params">characteristic</span>, <span class="params">int</span> <span class="params">status</span>)</span> &#123;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>i(TAG, gatt.get<span class="constructor">Device()</span>.get<span class="constructor">Name()</span> + <span class="string">&quot; recieved &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void on<span class="constructor">CharacteristicChanged(BluetoothGatt <span class="params">gatt</span>, BluetoothGattCharacteristic <span class="params">characteristic</span>)</span> &#123;</span><br><span class="line">        super.on<span class="constructor">CharacteristicChanged(<span class="params">gatt</span>, <span class="params">characteristic</span>)</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>i(TAG, <span class="string">&quot;The response is &quot;</span> + <span class="string">&quot;onCharacteristicChanged&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><img src="/2018/06/11/Bluetooth03/E:/noteforme.github.io\source_posts\Bluetooth03\Android-BLE-in-Action.026.jpeg"></p>
<h5 id="Android-中-GATT-操作的流程"><a href="#Android-中-GATT-操作的流程" class="headerlink" title="Android 中 GATT 操作的流程"></a>Android 中 GATT 操作的流程</h5><p><img src="/2018/06/11/Bluetooth03/Bluetooth03%5CAndroid-BLE-in-Action.028.jpeg" alt="droid-BLE-in-Acti"></p>
<p> Android 中 GATT 操作的流程。右边这个图，APP 是我们的应用，右边蓝牙服务端，从左向右箭头是 APP 发起的请求，从右向左的箭头是回调。我们看到所有的操作都是异步的完成的。连接过程是，首先使用 gattConnect 发起连接，收到 onConnectionStateChange() 通知连接是否成功，若成功，则进行下一步的 discoverService()，这一步就是发现设备所有的 GATT Service，若发现成功，通过 onServiceDiscovered() 回调，这时才算真正的连接成功。然后可以通过 BluetoothGatt 的 getService() 来获得BluetoothGattService，进而获得BluetoothGattCharacteristic 等，然后对 Characteristic 进行读写。 </p>
<ul>
<li><p>office</p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/topics/connectivity/bluetooth?hl=zh-cn">https://developer.android.com/guide/topics/connectivity/bluetooth?hl=zh-cn</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/topics/connectivity/bluetooth-le?hl=zh-cn">https://developer.android.com/guide/topics/connectivity/bluetooth-le?hl=zh-cn</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/googlesamples/android-BluetoothLeGatt">官方demo android5.0已过时</a></p>
<p><a target="_blank" rel="noopener" href="https://source.android.google.cn/devices/bluetooth/">https://source.android.google.cn/devices/bluetooth/</a></p>
</li>
<li><p>un</p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/entry/5919630444d904006c6e14ca">https://juejin.im/entry/5919630444d904006c6e14ca</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/29a730795294">https://www.jianshu.com/p/29a730795294</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/046c1f5a7163">https://www.jianshu.com/p/046c1f5a7163</a></p>
</li>
</ul>
<h4 id="设备通知手机"><a href="#设备通知手机" class="headerlink" title="设备通知手机"></a>设备通知手机</h4><p>5 当你从文档看到遍历出来的UUID有接送通知的功能。这时你就可以设置可以接收通知。通过拿到对应通知UUID的BluetoothGattCharacteristic，调用setCharacteristicNotification().其中00002902-0000-1000-8000-00805f9b34fb是系统提供接受通知自带的UUID，通过设置BluetoothGattDescriptor相当于设置BluetoothGattCharacteristic的Descriptor属性来实现通知，这样只要蓝牙设备发送通知信号，就会回调onCharacteristicChanged(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic) 方法，这你就可以在这方法做相应的逻辑处理。 </p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/entry/58c74fc42f301e006bce23fb">https://juejin.im/entry/58c74fc42f301e006bce23fb</a></p>
<h4 id="经典蓝牙开发"><a href="#经典蓝牙开发" class="headerlink" title="经典蓝牙开发"></a>经典蓝牙开发</h4><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/453a5cda5646">https://www.jianshu.com/p/453a5cda5646</a></p>
<ul>
<li><p>设置 00002902-0000-1000-8000-00805f9b34fb</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 设置特征信息推送 */</span></span><br><span class="line">··· BluetoothGattCharacteristic characteristic;</span><br><span class="line">    mGatt.set<span class="constructor">CharacteristicNotification(<span class="params">characteristic</span>,<span class="params">true</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* CCCD 的UUID */</span></span><br><span class="line"><span class="keyword">private</span> UUID ID_CCCD = <span class="module-access"><span class="module"><span class="identifier">UUID</span>.</span></span>from<span class="constructor">String(<span class="string">&quot;00002902-0000-1000-8000-00805f9b34fb&quot;</span>)</span>;  </span><br><span class="line"></span><br><span class="line"><span class="comment">/* 获取CCCD */</span></span><br><span class="line">BluetoothGattDescriptor cccd = characteristic.get<span class="constructor">Descriptor(ID_CCCD)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 设置推送通知，参考值为：</span></span><br><span class="line"><span class="comment"> * BluetoothGattDescriptor.ENABLE_NOTIFICATION_VALUE:   通知</span></span><br><span class="line"><span class="comment"> * BluetoothGattDescriptor.ENABLE_INDICATION_VALUE:     指示</span></span><br><span class="line"><span class="comment"> * BluetoothGattDescriptor.DISABLE_NOTIFICATION_VALUE:  关闭</span></span><br><span class="line"><span class="comment"> */</span>  </span><br><span class="line">cccd.set<span class="constructor">Value(参考值)</span>;</span><br><span class="line"><span class="comment">/* 写入CCCD */</span></span><br><span class="line">mGatt.write<span class="constructor">Descriptor(<span class="params">descriptor</span>)</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/43b1956d9f5c">https://www.jianshu.com/p/43b1956d9f5c</a></p>
<p>官方三个蓝牙示例 :<a target="_blank" rel="noopener" href="https://github.com/googlesamples?utf8=%E2%9C%93&amp;q=bluetooth&amp;type=&amp;language=">https://github.com/googlesamples?utf8=%E2%9C%93&amp;q=bluetooth&amp;type=&amp;language=</a></p>
<h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><p>扫描不到任何设备</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/39646253/android-stops-finding-ble-devices-onclientregistered-status-133-clientif-0">https://stackoverflow.com/questions/39646253/android-stops-finding-ble-devices-onclientregistered-status-133-clientif-0</a></p>
</li>
</ul>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/15/index.html">https://noteforme.github.io/page/15/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-DesignPatterns_Observer" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/06/06/DesignPatterns_Observer/">DesignPatterns_Observer</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2018-06-06T08:09:58.000Z" itemprop="datePublished">2018年06月06日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/DesignPatterns/">DesignPatterns</a>
  </div>

      
      
<a href="/2018/06/06/DesignPatterns_Observer/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="原理图"><a href="#原理图" class="headerlink" title="原理图"></a>原理图</h4><p><img src="https://user-gold-cdn.xitu.io/2020/3/23/171064de21df41e0?imageView2/0/w/1280/h/960/ignore-error/1"></p>
<p>​                    奶站\天气站                                                                                                                           用户</p>
<h4 id="Observer观察者模式-订阅模式"><a href="#Observer观察者模式-订阅模式" class="headerlink" title="Observer观察者模式/订阅模式"></a>Observer观察者模式/订阅模式</h4><ul>
<li>PUSH 模式</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//主题对象变化，通知所有的观察者</span></span><br><span class="line"><span class="comment">//抽象观察者</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Observer</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String str)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//具体观察者</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteObserver</span> <span class="keyword">implements</span> <span class="title">Observer</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        System.out.println(str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//抽象主题</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Subject</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addObserver</span><span class="params">(Observer observer)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeObserver</span><span class="params">(Observer observer)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyObservers</span><span class="params">(String str)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//具体主题</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteSubject</span> <span class="keyword">implements</span> <span class="title">Subject</span></span>&#123;</span><br><span class="line">    <span class="comment">// 存放观察者</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Observer&gt; list = <span class="keyword">new</span> ArrayList&lt;Observer&gt;();</span><br><span class="line">  </span><br><span class="line">  	<span class="comment">//注册观察者</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addObserver</span><span class="params">(Observer observer)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        list.add(observer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">//移除观察者</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeObserver</span><span class="params">(Observer observer)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        list.remove(observer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// 遍历所有观察者，并通知</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyObservers</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="keyword">for</span>(Observer observer:list)&#123;</span><br><span class="line">            observer.update(str);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//一个主题</span></span><br><span class="line">        ConcreteSubject eatSubject = <span class="keyword">new</span> ConcreteSubject();</span><br><span class="line">        <span class="comment">//两个观察者</span></span><br><span class="line">        ConcreteObserver p1 = <span class="keyword">new</span> ConcreteObserver();</span><br><span class="line">        ConcreteObserver p2 = <span class="keyword">new</span> ConcreteObserver();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//观察者订阅主题</span></span><br><span class="line">        eatSubject.addObserver(p1);</span><br><span class="line">        eatSubject.addObserver(p2);</span><br><span class="line">        eatSubject.notifyOBservers(<span class="string">&quot;起来敲代码啦！！！&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5bc96afff265da0aa94a4493">https://juejin.im/post/5bc96afff265da0aa94a4493</a></p>
<p><a target="_blank" rel="noopener" href="https://www.tutorialspoint.com/design_pattern/bridge_pattern.htm">https://www.tutorialspoint.com/design_pattern/bridge_pattern.htm</a></p>
<ul>
<li><p>PULL模式</p>
<p>而拉模型是主题对象不知道观察者具体需要什么数据，没有办法的情况下，干脆把自身传递给观察者，让观察者自己去按需要取值。</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1W4411c77E?p=120">https://www.bilibili.com/video/BV1W4411c77E?p=120</a></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/15/index.html">https://noteforme.github.io/page/15/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-DesignPatterns_Singleton" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/06/06/DesignPatterns_Singleton/">Singleton</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2018-06-06T07:43:06.000Z" itemprop="datePublished">2018年06月06日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/DesignPatterns/">DesignPatterns</a>
  </div>

      
      
<a href="/2018/06/06/DesignPatterns_Singleton/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>单例模式</p>
<p>　作用：一个类只有一个实例，减少内存开销
　</p>
<h4 id="kotlin"><a href="#kotlin" class="headerlink" title="kotlin"></a>kotlin</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> <span class="keyword">private</span> <span class="keyword">constructor</span></span>() &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">object</span> HOLDER &#123;</span><br><span class="line">        <span class="keyword">val</span> INSTANCE = Singleton()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> instance: Singleton <span class="keyword">by</span> lazy &#123; HOLDER.INSTANCE &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://medium.com/swlh/singleton-class-in-kotlin-c3398e7fd76b">https://medium.com/swlh/singleton-class-in-kotlin-c3398e7fd76b</a></p>
<p>常用方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</span><br><span class="line">     <span class="comment">// 持有私有静态实例，防止被引用，此处赋值为null，目的是实现延迟加载</span></span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">static</span> Singleton singleton=<span class="keyword">null</span>;</span><br><span class="line">     <span class="comment">//私有构造方法，防止被实例化</span></span><br><span class="line">     <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">     <span class="keyword">if</span>(singleton==<span class="keyword">null</span>)&#123;           </span><br><span class="line">     								 							<span class="comment">//多个线程在这里聚集就会产生多个对象</span></span><br><span class="line">           synonzied(Singleton.class)&#123;</span><br><span class="line">           Thread.sleel(<span class="number">1</span>)</span><br><span class="line">          singleton = <span class="keyword">new</span> Singleton();</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> singleton;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</span><br><span class="line">     <span class="comment">// 持有私有静态实例，防止被引用，此处赋值为null，目的是实现延迟加载</span></span><br><span class="line">     <span class="keyword">private</span> <span class="keyword">static</span> Singleton singleton=<span class="keyword">null</span>;</span><br><span class="line">     <span class="comment">//私有构造方法，防止被实例化</span></span><br><span class="line">     <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;  <span class="comment">//这里加锁 粒度有问题</span></span><br><span class="line">      synonzied(Singleton.class)&#123; <span class="comment">//这样会产生效率问题，多个线程在这空转等待获得锁</span></span><br><span class="line">     <span class="keyword">if</span>(singleton==<span class="keyword">null</span>)&#123;           </span><br><span class="line">           Thread.sleel(<span class="number">1</span>)</span><br><span class="line">          singleton = <span class="keyword">new</span> Singleton();</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> singleton;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<p>源码有类似的　InputMethodManager，当然我们常用的方式是要传个Context上下文对象给单例类，记得有次面试的时候面试官说单例里面使用弱引用，如果是是为了避免内存泄漏我觉得是可以的，但是我觉得用这种方式更好　<code>Context applicationContext = context.getApplicationContext();</code>　刚无意中发现Glide单例也是这样使用的。</p>
<h4 id="双重检查模式"><a href="#双重检查模式" class="headerlink" title="双重检查模式"></a>双重检查模式</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;  </span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> Singleton singleton;   <span class="comment">//volatile 防止指令重排序,指令半初始化，CPU执行指令顺序可能不同</span></span><br><span class="line">      <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span> <span class="params">()</span></span>&#123;</span><br><span class="line">      &#125;   </span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">      <span class="keyword">if</span> (singleton== <span class="keyword">null</span>) &#123;  						</span><br><span class="line">          <span class="keyword">synchronized</span> (Singleton.class) &#123;  </span><br><span class="line">          <span class="keyword">if</span> (singleton== <span class="keyword">null</span>) &#123;  </span><br><span class="line">              instance= <span class="keyword">new</span> Singleton();  </span><br><span class="line">          &#125;  </span><br><span class="line">         &#125;  </span><br><span class="line">     &#125;  </span><br><span class="line">     <span class="keyword">return</span> singleton;  </span><br><span class="line">     &#125;  </span><br><span class="line"> &#125;  </span><br></pre></td></tr></table></figure>



<h5 id="第1个if-singleton-null"><a href="#第1个if-singleton-null" class="headerlink" title="第1个if (singleton==null)"></a>第1个if (singleton==null)</h5><p>如果去掉它，那么所有线程都会串行执行，效率低下，这样会产生效率问题，多个线程在这空转等待获得锁，所以两个 check 都是需要保留的。</p>
<h5 id="第2个if-singleton-null"><a href="#第2个if-singleton-null" class="headerlink" title="第2个if (singleton==null)"></a>第2个if (singleton==null)</h5><p>假如两个线程同时调用 getInstance() ,由于instance是空的，两个线程都通过<strong>第1个if (singleton null)</strong>,接着锁机制存在，线程1先进入同步语句，并进入第二重if判断,线程2在外面等待. 线程1执行完 <code>new Singleton()</code>后退出synchronized,这时候如果没有 <strong>第2个if (singleton== null)</strong>  线程2也会创建一个实例，此时就破坏了单例原则.</p>
<h5 id="volatile作用"><a href="#volatile作用" class="headerlink" title="volatile作用"></a>volatile作用</h5><p>防止 new Singleton()重排序</p>
<p>在 JVM 中上述语句至少做了以下这 3 件事</p>
<p><img src="https://s0.lgstatic.com/i/image3/M01/7E/CC/Cgq2xl6BpWCAMBaVAACFIdffjfM852.png"></p>
<ol>
<li>第一步是给 singleton 分配内存空间；</li>
<li>然后第二步开始调用 Singleton 的构造函数等，来初始化 singleton；</li>
<li>最后第三步，将 singleton 对象指向分配的内存空间（执行完这步 singleton 就不是 null 了）。</li>
</ol>
<p>因为存在指令重排序的优化，也就是说第2 步和第 3 步的顺序是不能保证的，最终的执行顺序，可能是 1-2-3，也有可能是 1-3-2。</p>
<p>如果是 1-3-2，那么在第 3 步执行完以后，singleton 就不是 null 了，可是这时第 2 步并没有执行，singleton 对象未完成初始化，它的属性的值可能不是我们所预期的值。假设此时线程 2 进入 getInstance 方法，由于 singleton 已经不是 null 了，所以会通过第一重<code>if (singleton==null) </code>检查并直接返回，但其实这时的 singleton 并没有完成初始化，所以使用这个实例的时候会报错.</p>
<p><img src="https://s0.lgstatic.com/i/image3/M01/7E/CC/Cgq2xl6BpWCAB6QQAAEKacFd0CE542.png"></p>
<h4 id="Enum方式"><a href="#Enum方式" class="headerlink" title="Enum方式"></a>Enum方式</h4><p>和公有域方法在功能上相近，但是更简洁，无偿提供了序列化机制，绝对的防止多次实例化，可以面对复杂的序列化或者反射攻击，虽然没有广泛采用，但是　单元素的枚举类型<br>已经成为实现　Singleton的最佳方法.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Elvis_03</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Elvis.INSTANCE.leaveTheBuilding();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这种方法太NB了,</span></span><br><span class="line"><span class="comment"> * Effective Java pag15</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Elvis</span> </span>&#123;</span><br><span class="line">    INSTANCE;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">leaveTheBuilding</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="嵌套类"><a href="#嵌套类" class="headerlink" title="嵌套类"></a>嵌套类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton3</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton3</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="comment">// 主要是使用了 嵌套类可以访问外部类的静态属性和静态方法 的特性</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Holder</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> Singleton3 instance = <span class="keyword">new</span> Singleton3();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton3 <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Holder.instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5bc96afff265da0aa94a4493">https://juejin.im/post/5bc96afff265da0aa94a4493</a></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/15/index.html">https://noteforme.github.io/page/15/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-HashMap" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/05/31/HashMap/">HashMap</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2018-05-31T14:54:44.000Z" itemprop="datePublished">2018年05月31日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/JAVA/">JAVA</a>
  </div>

      
      
<a href="/2018/05/31/HashMap/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h4><p>Hash函数是指把⼀个⼤范围映射到⼀个⼩范围。把⼤范围映射到⼀个⼩范围的⽬的往往是为了 节省空间，使得数据容易保存。</p>
<h5 id="HashMap扩容机制"><a href="#HashMap扩容机制" class="headerlink" title="HashMap扩容机制"></a>HashMap扩容机制</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">     <span class="keyword">int</span> threshold;             <span class="comment">// 所能容纳的key-value对极限 </span></span><br><span class="line">     <span class="keyword">final</span> <span class="keyword">float</span> loadFactor;    <span class="comment">// 负载因子</span></span><br><span class="line">     <span class="keyword">int</span> modCount;  </span><br><span class="line">     <span class="keyword">int</span> size;  </span><br><span class="line"><span class="keyword">new</span> HashMap&lt;Integer,String&gt;(<span class="number">2</span>,<span class="number">0.75f</span>)</span><br></pre></td></tr></table></figure>



<p>Node[] table的初始化长度length(默认值是16)，Load  factor为负载因子(默认值是0.75)，threshold是HashMap所能容纳的最大数据量的Node(键值对)个数。threshold = length * Load factor。也就是说，在数组定义好长度之后，负载因子越大，所能容纳的键值对个数越多。</p>
<p>map初始化为一个长度为2的数组，loadFactor=0.75，threshold=2*0.75=1，也就是说当put第二个key的时候，map就需要进行resize。</p>
<p><a target="_blank" rel="noopener" href="https://tech.meituan.com/2016/06/24/java-hashmap.html">https://tech.meituan.com/2016/06/24/java-hashmap.html</a></p>
<h5 id="HashMap和HashTable的区别"><a href="#HashMap和HashTable的区别" class="headerlink" title="HashMap和HashTable的区别"></a>HashMap和HashTable的区别</h5><ol>
<li>HashTable是线程安全的    </li>
<li>HashTable key不能为空，HashMap可以.存在数组为0的位置</li>
</ol>
<h5 id="HashMap的实现原理-HashMap数据结构？"><a href="#HashMap的实现原理-HashMap数据结构？" class="headerlink" title="HashMap的实现原理 HashMap数据结构？"></a>HashMap的实现原理 HashMap数据结构？</h5><ol>
<li><p>JDK1.7 Table数组+ Entry链表</p>
</li>
<li><p>JDK1.8 Table数组+ Entry链表/红黑树（ 为什么用红黑树）</p>
<p><strong>红黑树有自平衡</strong>的特点，可以防止不平衡情况的发生，所以可以始终将查找的<strong>时间复杂度控制在 O(log(n))</strong></p>
</li>
</ol>
<img src="https://pic1.zhimg.com/80/v2-3e203e5dcf8c12e7ebf137c344615aa4_1440w.jpg" style="zoom: 67%;">



<p>​    HashMap采用Entry数组存放key-value,每个 key value组成一个实体，Entry类实际上是一个单向的链表结构，它有next指针指向下一    个实体， 1.8中链表大于8时会转成红黑树.长度降到 6 就转换回去.</p>
<p>​    </p>
<p>HashMap源码理解</p>
<h5 id="HashMap如何"><a href="#HashMap如何" class="headerlink" title="HashMap如何"></a>HashMap如何</h5><h5 id="put数据（从HashMap源码角度讲解）？"><a href="#put数据（从HashMap源码角度讲解）？" class="headerlink" title="put数据（从HashMap源码角度讲解）？"></a>put数据（从HashMap源码角度讲解）？</h5><ol>
<li><p>对key的Dashcode()做hash运算，计算index.</p>
</li>
<li><p>如果没碰撞直接放到bucket⾥</p>
</li>
<li><p>如果碰撞了，以链表的形式存在buckets后</p>
</li>
<li><p>如果节点已经存在就替换old value(保证key的唯⼀性)</p>
</li>
<li><p>如果bucket满了(超过load factor*current capacity)，就要resize</p>
</li>
</ol>
<p>get数据</p>
<ol>
<li><p>对key的hashCode()做hash运算，计算index;</p>
</li>
<li><p>如果在bucket⾥的第⼀个节点⾥直接命中，则直接返回；</p>
</li>
<li><p>如果有冲突，则通过key.equals(k)去查找对应的Entry;分为下面两种方式.</p>
</li>
<li><p>若为树，则在树中通过key.equals(k)查找，O(logn)；</p>
</li>
<li><p>若为链表，则在链表中通过key.equals(k)查找，O(n)。</p>
</li>
</ol>
<p>HashMap怎么手写实现？</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/985534b21089">https://www.jianshu.com/p/985534b21089</a></p>
<p>HashTable实现原理</p>
<p>ConcurrentHashMap的实现原理</p>
<h4 id=""><a href="#" class="headerlink" title=""></a></h4><h5 id="HashTable-ConcurrentHashMap-区别"><a href="#HashTable-ConcurrentHashMap-区别" class="headerlink" title="HashTable  ConcurrentHashMap 区别"></a>HashTable  ConcurrentHashMap 区别</h5><p>Hashtable的实现是基于Dictionary抽象类的。Java5提供了ConcurrentHashMap，它是HashTable的替代，比HashTable的扩展性更好。</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1kJ411C7hC?p=9&amp;spm_id_from=pageDriver">https://www.bilibili.com/video/BV1kJ411C7hC?p=9&amp;spm_id_from=pageDriver</a></p>
<h5 id="TreeMap具体实现"><a href="#TreeMap具体实现" class="headerlink" title="TreeMap具体实现"></a>TreeMap具体实现</h5><p>TreeMap是一个有序的key-value集合，是非线程安全的，基于红黑树（Red-Black tree）实现。其映射根据<strong>键的自然顺序</strong>进行排序，或者根据<strong>创建映射时提供的 Comparator</strong> 进行排序，具体取决于使用的构造方法。其基本操作 containsKey、get、put 和 remove 的时间复杂度是 log(n) 。TreeMap是非同步的。 它的iterator 方法返回的迭代器是fail-fastl的。</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/nananana/p/10426377.html">https://www.cnblogs.com/nananana/p/10426377.html</a></p>
<h5 id="HashMap与HashSet的区别"><a href="#HashMap与HashSet的区别" class="headerlink" title="HashMap与HashSet的区别"></a>HashMap与HashSet的区别</h5><ol>
<li><p>基于 HashMap 实现的，底层采用 HashMap 来保存元素</p>
</li>
<li><p>HashSet实现了Set接口，它不允许集合中有重复的值</p>
</li>
</ol>
<p>HashSet与HashMap怎么判断集合元素重复？</p>
<h5 id="l-nn为什么不一开始就使用红黑树"><a href="#l-nn为什么不一开始就使用红黑树" class="headerlink" title="l nn为什么不一开始就使用红黑树"></a>l nn为什么不一开始就使用红黑树</h5><p>因为红⿊树需要进⾏左旋，右旋，变⾊这些操作来保持平衡，⽽单链表不需要。<br>当元素⼩于8个当时候，此时做查询操作，链表结构已经能保证查询性能。<br>当元素⼤于8个的时候，此时需要红⿊树来加快查 询速度，但是新增节点的效率变慢了。<br>因此，如果⼀开始就⽤红⿊树结构，元素太少，新增效率⼜⽐较慢，⽆疑这是浪费性能的。</p>
<h5 id="什么时候退化为链表"><a href="#什么时候退化为链表" class="headerlink" title="什么时候退化为链表"></a>什么时候退化为链表</h5><p>为6的时候退转为链表。中间有个差值7可以防⽌链表和树之间频繁的转换。<br>假设⼀下，如果设计成链表个数超过8则链表转 换成树结构，链表个数⼩于8则树结构转换成链表，<br>如果⼀个HashMap不停的插⼊、删除元素，链表个数在8左右徘徊，就会 频繁的发⽣树转链表、链表转树，效率会很低。</p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=jwL1W8zEuX4">https://www.youtube.com/watch?v=jwL1W8zEuX4</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1if4y167eE?p=4">https://www.bilibili.com/video/BV1if4y167eE?p=4</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/127147909">https://zhuanlan.zhihu.com/p/127147909</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/348756860">https://zhuanlan.zhihu.com/p/348756860</a></p>
<h4 id="ArrayMap"><a href="#ArrayMap" class="headerlink" title="ArrayMap"></a>ArrayMap</h4><p>ArrayMap类有两个非常重要的静态成员变量mBaseCache和mTwiceBaseCacheSize，用于ArrayMap所在进程的全局缓存功能：</p>
<p><img src="http://gityuan.com/images/arraymap/cache_add.jpg"></p>
<p>传入ArrayMap(4) 或者ArrayMap(8),性能会有变化吗</p>
<h5 id="构造方法"><a href="#构造方法" class="headerlink" title="构造方法"></a>构造方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayMap</span><span class="params">(<span class="keyword">int</span> capacity, <span class="keyword">boolean</span> identityHashCode)</span> </span>&#123; <span class="comment">// 如果传入一个 capacity =4</span></span><br><span class="line">    mIdentityHashCode = identityHashCode;</span><br><span class="line">    <span class="keyword">if</span> (capacity &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        mHashes = EMPTY_IMMUTABLE_INTS;</span><br><span class="line">        mArray = EmptyArray.OBJECT;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (capacity == <span class="number">0</span>) &#123;</span><br><span class="line">        mHashes = EmptyArray.INT;</span><br><span class="line">        mArray = EmptyArray.OBJECT;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        allocArrays(capacity); <span class="comment">// 走到这里</span></span><br><span class="line">    &#125;</span><br><span class="line">    mSize = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">allocArrays</span><span class="params">(<span class="keyword">final</span> <span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (mHashes == EMPTY_IMMUTABLE_INTS) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException(<span class="string">&quot;ArrayMap is immutable&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (size == (BASE_SIZE*<span class="number">2</span>)) &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (ArrayMap.class) &#123;</span><br><span class="line">            <span class="keyword">if</span> (mTwiceBaseCache != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">final</span> Object[] array = mTwiceBaseCache;</span><br><span class="line">                mArray = array;</span><br><span class="line">                mTwiceBaseCache = (Object[])array[<span class="number">0</span>];</span><br><span class="line">                mHashes = (<span class="keyword">int</span>[])array[<span class="number">1</span>];</span><br><span class="line">                array[<span class="number">0</span>] = array[<span class="number">1</span>] = <span class="keyword">null</span>;</span><br><span class="line">                mTwiceBaseCacheSize--;</span><br><span class="line">                <span class="keyword">if</span> (DEBUG) Log.d(TAG, <span class="string">&quot;Retrieving 2x cache &quot;</span> + mHashes</span><br><span class="line">                        + <span class="string">&quot; now have &quot;</span> + mTwiceBaseCacheSize + <span class="string">&quot; entries&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (size == BASE_SIZE) &#123; <span class="comment">// 走到这里</span></span><br><span class="line">        <span class="keyword">synchronized</span> (ArrayMap.class) &#123;</span><br><span class="line">            <span class="keyword">if</span> (mBaseCache != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">final</span> Object[] array = mBaseCache;</span><br><span class="line">                mArray = array;</span><br><span class="line">                mBaseCache = (Object[])array[<span class="number">0</span>];</span><br><span class="line">                mHashes = (<span class="keyword">int</span>[])array[<span class="number">1</span>];</span><br><span class="line">                array[<span class="number">0</span>] = array[<span class="number">1</span>] = <span class="keyword">null</span>;</span><br><span class="line">                mBaseCacheSize--;</span><br><span class="line">                <span class="keyword">if</span> (DEBUG) Log.d(TAG, <span class="string">&quot;Retrieving 1x cache &quot;</span> + mHashes</span><br><span class="line">                        + <span class="string">&quot; now have &quot;</span> + mBaseCacheSize + <span class="string">&quot; entries&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    mHashes = <span class="keyword">new</span> <span class="keyword">int</span>[size];</span><br><span class="line">    mArray = <span class="keyword">new</span> Object[size&lt;&lt;<span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>









<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7049631659116888094">https://juejin.cn/post/7049631659116888094</a></p>
<p><a target="_blank" rel="noopener" href="http://gaozhipeng.me/posts/arraymap/">http://gaozhipeng.me/posts/arraymap/</a></p>
<p><a target="_blank" rel="noopener" href="http://gityuan.com/2019/01/13/arraymap/">http://gityuan.com/2019/01/13/arraymap/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=I16lz26WyzQ">https://www.youtube.com/watch?v=I16lz26WyzQ</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904119098982414">https://juejin.cn/post/6844904119098982414</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903762470060045">https://juejin.cn/post/6844903762470060045</a></p>
<h4 id="ArrayMap和HashMap的区别"><a href="#ArrayMap和HashMap的区别" class="headerlink" title="ArrayMap和HashMap的区别"></a>ArrayMap和HashMap的区别</h4><p>ArrayMap相比传统的HashMap速度更慢，因为其查找方法是二分法，并且当删除或添加数据时，会对空间重新调整，可以说ArrayMap是牺牲了时间来换空间，ArrayMap与HashMap的区别主要在：</p>
<p>存储方式不同：HashMap内部有一个HashMapEntry&lt;K,V&gt;[ ]对象，而ArrayMap是一个&lt;key,value&gt;映射的数据结构，内部使用两个数组进行数据存储，一个数组记录key的hash值，另一个数组记录value值。</p>
<p>添加数据时扩容的处理不一样：HashMap进行了new操作，重新创建对象，开销很大，而ArrayMap用的是copy数据，效率相对高很多。</p>
<p>ArrayMap提供了数组收缩的功能，在clear或remove之后，会重新收缩数组，释放空间。</p>
<p>ArrayMap采用的是二分法查找。</p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7049631659116888094">https://juejin.cn/post/7049631659116888094</a></p>
<h4 id="SparseArray"><a href="#SparseArray" class="headerlink" title="SparseArray"></a>SparseArray</h4><p> key是int类型的Map，Android再次提供效率更高的数据结构SparseArray，可避免自动装箱过程,SparseArray不需要保存key所对应的哈希值，所以比ArrayMap还能再节省1/3的内存。</p>
<p><img src="http://gityuan.com/images/arraymap/SparseArray.jpg"></p>
<p>SparseArray构造mKeys     mValues两个数组，默认长度10，也可以自己定义initialCapacity</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">SparseArray</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (initialCapacity == <span class="number">0</span>) &#123;</span><br><span class="line">          mKeys = EmptyArray.INT;</span><br><span class="line">          mValues = EmptyArray.OBJECT;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          mValues = ArrayUtils.newUnpaddedObjectArray(initialCapacity);</span><br><span class="line">          mKeys = <span class="keyword">new</span> <span class="keyword">int</span>[mValues.length];</span><br><span class="line">      &#125;</span><br><span class="line">      mSize = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, E value)</span> </span>&#123;</span><br><span class="line">   	<span class="comment">// 二分查找,key在mKeys列表中对应的index,注意binarySearch返回做了 ~操作.</span></span><br><span class="line">  	<span class="comment">//如果没找到，返回的是当前元素将要插入的位置</span></span><br><span class="line">    <span class="keyword">int</span> i = ContainerHelpers.binarySearch(mKeys, mSize, key); </span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (i &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        mValues[i] = value;  <span class="comment">//找到后给对应的value数组赋值</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        i = ~i;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (i &lt; mSize &amp;&amp; mValues[i] == DELETED) &#123;</span><br><span class="line">            mKeys[i] = key;</span><br><span class="line">            mValues[i] = value;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (mGarbage &amp;&amp; mSize &gt;= mKeys.length) &#123;</span><br><span class="line">            gc();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Search again because indices may have changed.</span></span><br><span class="line">            i = ~ContainerHelpers.binarySearch(mKeys, mSize, key);</span><br><span class="line">        &#125;</span><br><span class="line">				<span class="comment">//插入数据，内部做了排序</span></span><br><span class="line">        mKeys = GrowingArrayUtils.insert(mKeys, mSize, i, key);</span><br><span class="line">        mValues = GrowingArrayUtils.insert(mValues, mSize, i, value);</span><br><span class="line">        mSize++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = ContainerHelpers.binarySearch(mKeys, mSize, key);</span><br><span class="line">    <span class="keyword">if</span> (i &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (mValues[i] != DELETED) &#123;</span><br><span class="line">            mValues[i] = DELETED;  <span class="comment">//标记该数据为DELETE</span></span><br><span class="line">            mGarbage = <span class="keyword">true</span>; <span class="comment">// 设置存在GC</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zxt0601/article/details/78333328">https://blog.csdn.net/zxt0601/article/details/78333328</a></p>
<p><a target="_blank" rel="noopener" href="http://www.jcodecraeer.com/a/anzhuokaifa/2017/0912/8504.html">http://www.jcodecraeer.com/a/anzhuokaifa/2017/0912/8504.html</a></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/15/index.html">https://noteforme.github.io/page/15/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-INTERVIEW-JAVA" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/05/24/INTERVIEW-JAVA/">INTERVIEW-JAVA</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2018-05-24T14:31:57.000Z" itemprop="datePublished">2018年05月24日</time>
</span>
      
      
      
<a href="/2018/05/24/INTERVIEW-JAVA/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://interview-q-a-1gdnkgkla15afdbe-1258598664.tcloudbaseapp.com/Java/HashMap%E5%8E%9F%E7%90%86-%E7%BE%8E%E5%9B%A2.html">https://interview-q-a-1gdnkgkla15afdbe-1258598664.tcloudbaseapp.com/Java/HashMap%E5%8E%9F%E7%90%86-%E7%BE%8E%E5%9B%A2.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/huangjialin/p/12411842.html">面试题含答案</a></p>
<h3 id="java基础面试知识点"><a href="#java基础面试知识点" class="headerlink" title="java基础面试知识点"></a>java基础面试知识点</h3><h5 id="java中-和equals和hashCode的区别"><a href="#java中-和equals和hashCode的区别" class="headerlink" title="java中==和equals和hashCode的区别"></a>java中==和equals和hashCode的区别</h5><p>类型</p>
<ul>
<li>基本类型：比较的是值是否相同；</li>
<li>引用类型：如果是 类、接口、数组的话,当他们用双等号（==）进行比较的时候，比较的是他们的引用，如果要比较堆中对象是否相同，那么就要重写equals方法了；</li>
<li>默认情况下（没有覆写equals方法）的equals方法都是调用Object类的equals方法，而Object的equals方法主要是用于判断<strong>对象的内存地址引用是不是同一个地址</strong>（是不是同一个对象）。</li>
</ul>
<h5 id="int、char、long各占多少字节数"><a href="#int、char、long各占多少字节数" class="headerlink" title="int、char、long各占多少字节数"></a>int、char、long各占多少字节数</h5><p>   byte   1字节       short   2字节         int    4字节           long   8字节          </p>
<p>   char   2字节       float   4字节         double  8字节      boolean  false/true(理论上占用1bit,1/8字节，实际处理按1byte处理) </p>
<h5 id="int与integer的区别"><a href="#int与integer的区别" class="headerlink" title="int与integer的区别"></a>int与integer的区别</h5><p>​    Integer 是int的包装类；int是基本数据类型;</p>
<p>​    Integer实际是对象的引用，int是直接存储数据值</p>
<h5 id="谈谈对java多态-polymorphism-的理解-Java中实现多态的机制是什么"><a href="#谈谈对java多态-polymorphism-的理解-Java中实现多态的机制是什么" class="headerlink" title="谈谈对java多态(polymorphism)的理解,Java中实现多态的机制是什么"></a>谈谈对java多态(polymorphism)的理解,Java中实现多态的机制是什么</h5><p> 实现的机制是，父类或者接口定义的引用变量指向子类或者子类的实现， 执行期间判断所引用对象的实际类型，根据其实际的类型调用相应的方法。</p>
<ol>
<li><p>编译时多态(静态多态)==重载</p>
</li>
<li><p>运行时多态（动态多态）</p>
<p>无论哪种方法，核心之处在对父类方法的改写或对接口方法的实现，以取得运行时不同的执行效果.</p>
</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html">https://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1447574">https://cloud.tencent.com/developer/article/1447574</a></p>
<h5 id="String、StringBuffer、StringBuilder区别"><a href="#String、StringBuffer、StringBuilder区别" class="headerlink" title="String、StringBuffer、StringBuilder区别"></a>String、StringBuffer、StringBuilder区别</h5><ul>
<li>都是fianl类，不能被继承,底层都是 char[] value实现</li>
<li>String类长度是不可变的，substring()、  concat(),最终实现都是通过  new String(buf, true)实现的,StringBuffer,StringBuilder是通过操作本类的value实现的</li>
<li>StringBuffer类是线程安全的，StringBuilder不是线程安全的</li>
<li>String：字符串常量。</li>
</ul>
<p>​    </p>
<h5 id="什么是内部类？内部类的作用"><a href="#什么是内部类？内部类的作用" class="headerlink" title="什么是内部类？内部类的作用"></a>什么是内部类？内部类的作用</h5><p>​    内部类:    一个类定义在另一个类的内部，就叫内部类</p>
<p>​    作用: </p>
<ul>
<li><p>内部类  拥有外部类的所有访问权限，包括被private修饰的私有数据</p>
</li>
<li><p>内部类可以很好的隐藏实现</p>
</li>
<li><p>内部类可以实现多重继承</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//类一</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassA</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;liutao&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">doSomeThing</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// doSomeThing</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//类二</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassB</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">age</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">25</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//类三</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainExample</span></span>&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Test1</span> <span class="keyword">extends</span> <span class="title">ClassA</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span></span>&#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">super</span>.name();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Test2</span> <span class="keyword">extends</span> <span class="title">ClassB</span></span>&#123;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">age</span><span class="params">()</span></span>&#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">super</span>.age();</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Test1().name();</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">age</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> Test2().age();</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">       MainExample mi=<span class="keyword">new</span> MainExample();</span><br><span class="line">       System.out.println(<span class="string">&quot;姓名:&quot;</span>+mi.name());</span><br><span class="line">       System.out.println(<span class="string">&quot;年龄:&quot;</span>+mi.age());</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p> MainExample 类通过内部类拥有了 ClassA 和 ClassB 的两个类的继承关系。 而无需关注 ClassA 中的 doSomeThing 方法的实现。这就是比接口实现更有戏的地方</p>
<p> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903566293860366">https://juejin.cn/post/6844903566293860366</a></p>
</li>
</ul>
<h5 id="抽象类和接口区别"><a href="#抽象类和接口区别" class="headerlink" title="抽象类和接口区别"></a>抽象类和接口区别</h5><table>
<thead>
<tr>
<th>Abstract class</th>
<th>Interface</th>
</tr>
</thead>
<tbody><tr>
<td>1) Abstract class can <strong>have abstract and non-abstract</strong> methods.</td>
<td>Interface can have <strong>only abstract</strong> methods. Since Java 8, it can have <strong>default and static methods</strong> also.</td>
</tr>
<tr>
<td>2) Abstract class <strong>doesn’t support multiple inheritance</strong>.</td>
<td>Interface <strong>supports multiple inheritance</strong>.</td>
</tr>
<tr>
<td>3) Abstract class <strong>can have final, non-final, static and non-static variables</strong>.</td>
<td>Interface has <strong>only static and final variables</strong>.</td>
</tr>
<tr>
<td>4) Abstract class <strong>can provide the implementation of interface</strong>.</td>
<td>Interface <strong>can’t provide the implementation of abstract class</strong>.</td>
</tr>
<tr>
<td>5) The <strong>abstract keyword</strong> is used to declare abstract class.</td>
<td>The <strong>interface keyword</strong> is used to declare interface.</td>
</tr>
<tr>
<td>6) An <strong>abstract class</strong> can extend another Java class and implement multiple Java interfaces.</td>
<td>An <strong>interface</strong> can extend another Java interface only.</td>
</tr>
<tr>
<td>7) An <strong>abstract class</strong> can be extended using keyword “extends”.</td>
<td>An <strong>interface</strong> can be implemented using keyword “implements”.</td>
</tr>
<tr>
<td>8) A Java <strong>abstract class</strong> can have class members like private, protected, etc.</td>
<td>Members of a Java interface are public by default.</td>
</tr>
<tr>
<td>9)<strong>Example:</strong>  public abstract class Shape{ public abstract void draw(); }</td>
<td><strong>Example:</strong>  public interface Drawable{ void draw(); }</td>
</tr>
</tbody></table>
<p><a target="_blank" rel="noopener" href="https://www.javatpoint.com/difference-between-abstract-class-and-interface">https://www.javatpoint.com/difference-between-abstract-class-and-interface</a></p>
<h5 id="泛型中extends和super的区别"><a href="#泛型中extends和super的区别" class="headerlink" title="? 泛型中extends和super的区别"></a>? 泛型中extends和super的区别</h5><ul>
<li><p>上界&lt;? extends T&gt;不能往里存，只能往外取，适合频繁往外面读取内容的场景。</p>
</li>
<li><p>下界&lt;? super T&gt;不影响往里存，但往外取只能放在Object对象里，适合经常往里面插入数据的场景</p>
<p><a href="https://noteforme.github.io/2018/04/16/Generics/">https://noteforme.github.io/2018/04/16/Generics/</a></p>
</li>
</ul>
<h5 id="string-转换成-integer的方式及原理"><a href="#string-转换成-integer的方式及原理" class="headerlink" title="string 转换成 integer的方式及原理"></a>string 转换成 integer的方式及原理</h5><ol>
<li>判断是否null或””</li>
<li>判断第一位正负数，逐位获取值 ?</li>
</ol>
<p>  <a target="_blank" rel="noopener" href="https://blog.csdn.net/nobody_1/article/details/91488686">https://blog.csdn.net/nobody_1/article/details/91488686</a></p>
<h5 id="静态内部类的设计意图"><a href="#静态内部类的设计意图" class="headerlink" title="静态内部类的设计意图"></a>静态内部类的设计意图</h5><p>​    非静态内部类编译后会隐含的保存着一个引用，改引用指向创建它的外围类，静态内部类没有，</p>
<p>​    它不能使用任何外围类的非static成员变量和方法.</p>
<h5 id="final，finally，finalize的区别"><a href="#final，finally，finalize的区别" class="headerlink" title="final，finally，finalize的区别"></a>final，finally，finalize的区别</h5><p>  Final : 用于申明属性，方法，类，表示属性不可变，方法不可以覆盖，类不能继承</p>
<ol>
<li><p>final数组</p>
<p><strong>Java 中数组也是对象</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">int</span> arr[] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;  <span class="comment">//  注意，数组 arr 是 final 的</span></span><br><span class="line">     <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">         arr[i] = arr[i]*<span class="number">10</span>;</span><br><span class="line">         System.out.println(arr[i]);</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>

<p>数组是对象的一种，现在数组是被 final 修饰的，所以它的意思是一旦被赋值之后，变量的引用不能修改。但是我们现在想证明的是，数组对象里面的内容可以修改</p>
</li>
<li><p>非数组对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123; </span><br><span class="line">    <span class="keyword">int</span> p = <span class="number">20</span>; </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123; </span><br><span class="line">       <span class="keyword">final</span> Test t = <span class="keyword">new</span> Test();</span><br><span class="line">       t.p = <span class="number">30</span>; </span><br><span class="line">       System.out.println(t.p);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>把它用 final 修饰，然后去尝试改它里面成员变量 p 的值，并打印出结果，程序会打印出“30”。一开始 p 的值是 20，但是最后修改完毕变成了 30，说明这次修改是成功的。</p>
<p>以上我们就得出了一个结论，<strong>final 修饰一个指向对象的变量的时候，对象本身的内容依然是可以变化的</strong>。</p>
<p><a target="_blank" rel="noopener" href="https://kaiwu.lagou.com/course/courseInfo.htm?courseId=16#/detail/pc?id=311">https://kaiwu.lagou.com/course/courseInfo.htm?courseId=16#/detail/pc?id=311</a></p>
</li>
</ol>
<ul>
<li><p>Finally: 异常语句处理机构中，与try{}进行配合使用，不论try中的代码是否执行完，表示总是执行的部分</p>
</li>
<li><p>Finalize: Object类的一个方法，用于对象”消失”时，由JVM进行调用用于对对象进行垃圾回收，释放对象占用的资源.</p>
</li>
</ul>
<h5 id="Serializable-和Parcelable-的区别，如何将一个Java对象序列化到文件里？"><a href="#Serializable-和Parcelable-的区别，如何将一个Java对象序列化到文件里？" class="headerlink" title="Serializable 和Parcelable 的区别，如何将一个Java对象序列化到文件里？"></a>Serializable 和Parcelable 的区别，如何将一个Java对象序列化到文件里？</h5><ol>
<li><p>两者最大的区别在于 <strong>存储媒介的不同</strong>，<code>Serializable</code> 使用 <strong>I/O 读写存储在硬盘上</strong>，而 <code>Parcelable</code> 是直接 <strong>在内存中读写</strong>。很明显，内存的读写速度通常大于 IO 读写，所以在 Android 中传递数据优先选择 <code>Parcelable</code>。</p>
</li>
<li><p><code>Serializable</code> 会使用反射，序列化和反序列化过程需要大量 I/O 操作，也会创建很多临时对象， <code>Parcelable</code> 自已实现封送和解封（marshalled &amp;unmarshalled）操作不需要用反射，数据也存放在 Native 内存中，效率要快很多。</p>
<p> <a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903518826921991">https://juejin.cn/post/6844903518826921991</a></p>
</li>
</ol>
<p>父类的静态方法能否被子类重写</p>
<p> 不能，静态方法只和类有关,JVM加载后先初始化static相关属性方法,重写依赖于类的实例.</p>
<h5 id="成员内部类、局部内部类以及项目中的应用"><a href="#成员内部类、局部内部类以及项目中的应用" class="headerlink" title="成员内部类、局部内部类以及项目中的应用"></a>成员内部类、局部内部类以及项目中的应用</h5><p>成员内部类 : 普通的内部类，不存在任何static的变量和方法；</p>
<p>局部内部类： 嵌套于方法和作用域内</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Parcel5</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Destionation <span class="title">destionation</span><span class="params">(String str)</span></span>&#123;</span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">PDestionation</span> <span class="keyword">implements</span> <span class="title">Destionation</span></span>&#123;</span><br><span class="line">            <span class="keyword">private</span> String label;</span><br><span class="line">            <span class="function"><span class="keyword">private</span> <span class="title">PDestionation</span><span class="params">(String whereTo)</span></span>&#123;</span><br><span class="line">                label = whereTo;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">readLabel</span><span class="params">()</span></span>&#123;</span><br><span class="line">                <span class="keyword">return</span> label;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PDestionation(str);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">      Parcel5 parcel5 = <span class="keyword">new</span> Parcel5();</span><br><span class="line">      Destionation d = parcel5.destionation(<span class="string">&quot;chenssy&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>闭包和局部内部类的区别</p>
<h5 id="Java中对象的生命周期"><a href="#Java中对象的生命周期" class="headerlink" title="Java中对象的生命周期"></a>Java中对象的生命周期</h5><p>​    <strong>1、创建阶段(Created)</strong><br>  <code>检测类是否被加载没有加载的先加载</code>→<code>为新生对象分配内存</code>→<code>将分配到的内存空间都初始化为零值</code>→<code>对对象进行必要的设置</code>→<code>执行&lt;init&gt;方法把对象进行初始化</code><br> 对象的加载大小是类加载中就已经确定好了的，类加载过程就相当复杂了，如下图：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/4345692-846543b5bed56265.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/452" alt="img"></p>
<p>类加载过程.png</p>
<p><strong>2、应用阶段(In Use)</strong><br>  至少有一个强引用使用着</p>
<p><strong>3、不可见阶段(Invisible)</strong><br>  程序的执行已经超出了该对象的作用域了</p>
<p><strong>4、不可达阶段(Unreachable)</strong><br>  程序不再持有该对象的任何强引用，这种情况下，该对象仍可能被JVM等系统下的某些已装载的静态变量或线程或JNI等强引用持有着，这些特殊的强引用被称为”GC root”</p>
<p><strong>5、收集阶段(Collected)</strong><br>  垃圾回收器发现该对象已经处于“不可达阶段”并且垃圾回收器已经对该对象的内存空间重新分配做好准备时，则对象进入了“收集阶段”。如果该对象已经重写了finalize()方法，则会去执行该方法的终端操作。</p>
<p><strong>6、终结阶段(Finalized)</strong><br>  当对象执行完finalize()方法后仍然处于不可达状态时，则该对象进入终结阶段。在该阶段是等待垃圾回收器对该对象空间进行回收。</p>
<p><strong>7、对象空间重分配阶段(De-allocated)</strong><br>  垃圾回收器对该对象的所占用的内存空间进行回收或者再分配了，则该对象彻底消失了，称之为“对象空间重新分配阶段”。</p>
<p>链接：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/72f5017c6649">https://www.jianshu.com/p/72f5017c6649</a></p>
<h3 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h3><h5 id="String特性"><a href="#String特性" class="headerlink" title="String特性"></a>String特性</h5><p>Java虚拟机在内存中开辟出一块单独的区域</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/60643031">https://zhuanlan.zhihu.com/p/60643031</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1PJ411n7xZ?p=118">https://www.bilibili.com/video/BV1PJ411n7xZ?p=118</a>   几个视频讲到用法，最好能用图画出来</p>
<p><a target="_blank" rel="noopener" href="https://www.iteye.com/blog/rednaxelafx-774673">https://www.iteye.com/blog/rednaxelafx-774673</a></p>
<h5 id="哪些情况下的对象会被垃圾回收机制处理掉？"><a href="#哪些情况下的对象会被垃圾回收机制处理掉？" class="headerlink" title="哪些情况下的对象会被垃圾回收机制处理掉？"></a>哪些情况下的对象会被垃圾回收机制处理掉？</h5><ol>
<li>可达性分析,GC Root向下搜索，产生一个reference chain 。当一个对象不能和任何GC Root产生关系时就被回收.</li>
<li><ul>
<li>强引用 ：那<strong>垃圾回收器</strong>绝不会回收</li>
<li>软引用: 内存溢出时候对象回收</li>
<li>弱引用:下一次GC时候对象回收</li>
<li>虚引用：随时可能被回收</li>
</ul>
</li>
<li>当前商业虚拟机的垃圾回收都采用分代收集算法，这种算法并没有什么新的思想，只是根据对象的存活周期将内存划分为几块。一般是把Java堆分为新生代和老年代，这样就可以根据各个年代的特点采用最适当的收集算法。在新生代中，每次垃圾回收都有大批对象死去，只有少量存活，那就选用复制算法，只要付出少量存活对象的复制成本就可以完成收集。而老年代中因为对象存活率高，没有额外的空间对它进行分配担保，那就使用标记清理或者标记整理算法来进行回收。</li>
</ol>
<p><a href="https://noteforme.github.io/2021/01/05/JVM-GC/">https://noteforme.github.io/2021/01/05/JVM-GC/</a></p>
<p><a href="https://noteforme.github.io/2020/04/18/JVM/">https://noteforme.github.io/2020/04/18/JVM/</a></p>
<h5 id="String为什么要设计成不可变的？"><a href="#String为什么要设计成不可变的？" class="headerlink" title="String为什么要设计成不可变的？"></a>String为什么要设计成不可变的？</h5><ol>
<li><p>便于实现字符串池</p>
<p>由于会大量的使用String常量，如果每一次声明一个String都创建一个String对象，那将会造成极大的空间资源的浪费。Java提出了String pool的概念，在堆中开辟一块存储空间String  pool，当初始化一个String变量时，如果该字符串已经存在了，就不会去创建一个新的字符串变量，而是会返回已经存在了的字符串的引用。</p>
<p>如果字符串是可变的，某一个字符串变量改变了其值，那么其指向的变量的值也会改变，String pool将不能够实现！</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wkfvawl/p/11693260.html">https://www.cnblogs.com/wkfvawl/p/11693260.html</a></p>
</li>
</ol>
<h3 id="java深入源码级的面试题"><a href="#java深入源码级的面试题" class="headerlink" title="java深入源码级的面试题"></a>java深入源码级的面试题</h3><h5 id="讲一下常见编码方式？"><a href="#讲一下常见编码方式？" class="headerlink" title="讲一下常见编码方式？"></a>讲一下常见编码方式？</h5><ol>
<li><p>ASCII码:  用一个字节的低7位表示，总共128个,0<del>31 是控制字符如换行回车删除等；32</del>126 是打印字符，可以通过键盘输入并且能够显示出来</p>
</li>
<li><p>UTF-16:  固定两个字节表示一个字符：说到 UTF 必须要提到 Unicode（Universal Code 统一码），ISO  试图想创建一个全新的超语言字典，世界上所有的语言都可以通过这本字典来相互翻译。可想而知这个字典是多么的复杂，关于 Unicode  的详细规范可以参考相应文档。Unicode 是 Java 和 XML 的基础，下面详细介绍 Unicode 在计算机中的存储形式。<br>UTF-16 具体定义了 Unicode 字符在计算机中存取方法。UTF-16 用两个字节来表示 Unicode  转化格式，这个是定长的表示方法，不论什么字符都可以用两个字节表示，两个字节是 16 个 bit，所以叫 UTF-16。UTF-16  表示字符非常方便，每两个字节表示一个字符，这个在字符串操作时就大大简化了操作，这也是 Java 以 UTF-16  作为内存的字符存储格式的一个很重要的原因。</p>
</li>
<li><p>UTF-8:  优化UTF-16,UTF-16  统一采用两个字节表示一个字符，虽然在表示上非常简单方便，但是也有其缺点，有很大一部分字符用一个字节就可以表示的现在要两个字节表示，存储空间放大了一倍，在现在的网络带宽还非常有限的今天，这样会增大网络传输的流量，而且也没必要。而 UTF-8 采用了一种变长技术，每个编码区域有不同的字码长度。不同类型的字符可以是由 1~6 个字节组成。<br>UTF-8 有以下编码规则：<br>如果一个字节，最高位（第 8 位）为 0，表示这是一个 ASCII 字符（00 - 7F）。可见，所有 ASCII 编码已经是 UTF-8 了。<br>如果一个字节，以 11 开头，连续的 1 的个数暗示这个字符的字节数，例如：110xxxxx 代表它是双字节 UTF-8 字符的首字节。<br>如果一个字节，以 10 开始，表示它不是首字节，需要向前查找才能得到当前字符的首字节 </p>
</li>
<li><p>GBK 、ISO-8859-1、GB2312</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/mlan/p/7823375.html">https://www.cnblogs.com/mlan/p/7823375.html</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/mlan/p/7823375.html">https://www.cnblogs.com/mlan/p/7823375.html</a></p>
</li>
</ol>
<h5 id="utf-8编码中的中文占几个字节；int型几个字节？"><a href="#utf-8编码中的中文占几个字节；int型几个字节？" class="headerlink" title="utf-8编码中的中文占几个字节；int型几个字节？"></a>utf-8编码中的中文占几个字节；int型几个字节？</h5><p>​    少数是汉字每个占用3个字节，多数占用4个字节。</p>
<p>​    <a target="_blank" rel="noopener" href="https://blog.csdn.net/hellokatewj/article/details/24325653">https://blog.csdn.net/hellokatewj/article/details/24325653</a></p>
<p>​    int类型 4个字节</p>
<h5 id="静态代理和动态代理的区别，什么场景使用？"><a href="#静态代理和动态代理的区别，什么场景使用？" class="headerlink" title="静态代理和动态代理的区别，什么场景使用？"></a>静态代理和动态代理的区别，什么场景使用？</h5><p>​    静态代理 :  编译的时候就已经存在，</p>
<p>​    动态代理 ： 通过反射机制生成的代理对象</p>
<p>​    <a href="https://noteforme.github.io/2021/01/14/DesignPattern-Proxy/">https://noteforme.github.io/2021/01/14/DesignPattern-Proxy/</a></p>
<p>​    <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/2f518a4a4c2b">https://www.jianshu.com/p/2f518a4a4c2b</a></p>
<h5 id="Java的异常体系"><a href="#Java的异常体系" class="headerlink" title="Java的异常体系"></a>Java的异常体系</h5><p>非运行时异常 :编译期间可以检查到的异常, 像IoException,DataFormatException,CertificateException</p>
<p>运行时异常 : NullPointerException, ClassCastException,IndexOutOfBoundsException</p>
<h5 id="谈谈你对解析与分派的认识。"><a href="#谈谈你对解析与分派的认识。" class="headerlink" title="? 谈谈你对解析与分派的认识。"></a>? 谈谈你对解析与分派的认识。</h5><h5 id="说说你对Java反射的理解"><a href="#说说你对Java反射的理解" class="headerlink" title="说说你对Java反射的理解"></a>说说你对Java反射的理解</h5><p>​    对于任何一个类都可以通过反射知道的它的属性和方法。</p>
<h5 id="说说你对Java注解的理解"><a href="#说说你对Java注解的理解" class="headerlink" title="说说你对Java注解的理解"></a>说说你对Java注解的理解</h5><p>​    注解，对代码进行注明。使得程序在编译或者运行时，读取到注解并加以处理，以间接的改变程序的运行。</p>
<h5 id="为什么Java里的匿名内部类只能访问final修饰的外部变量？"><a href="#为什么Java里的匿名内部类只能访问final修饰的外部变量？" class="headerlink" title="为什么Java里的匿名内部类只能访问final修饰的外部变量？"></a>为什么Java里的匿名内部类只能访问final修饰的外部变量？</h5><p>​    因为匿名内部类最终会被编译成一个单独的类，而被该类使用的变量会以构造函数参数的形式传递给该类。如果变量不定义为final的，参数在匿名内部类中可以被修改，进而造成和外部的变量不一致的问题，为了避免这种不一致的情况，规定匿名内部类只能访问final修饰的外部变量。</p>
<h5 id="说说你对依赖注入的理解"><a href="#说说你对依赖注入的理解" class="headerlink" title="说说你对依赖注入的理解?"></a>说说你对依赖注入的理解?</h5><p>​    给予调用方它所需要的对象</p>
<h4 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h4><h5 id="说一下泛型原理，并举例说明"><a href="#说一下泛型原理，并举例说明" class="headerlink" title="说一下泛型原理，并举例说明"></a>说一下泛型原理，并举例说明</h5><p>​    泛型实现了参数化类型的概念，使代码可以应用于多种类型。</p>
<p>​    在泛型代码内部，无法获得任何有关泛型参数类型的信息。    </p>
<h3 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h3><h5 id="常用数据结构简介"><a href="#常用数据结构简介" class="headerlink" title="常用数据结构简介"></a>常用数据结构简介</h5><p>数组 栈 队列  链表 图 树 哈希表</p>
<h5 id="并发集合了解哪些？"><a href="#并发集合了解哪些？" class="headerlink" title="并发集合了解哪些？"></a>并发集合了解哪些？</h5><p>ConcurrentHashMap  CopyOnWriteArrayList  CopyOnWriteArraySet  ArrayBlockingQueue  LinkedBlockingQueue</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u010942020/article/details/73610121">https://blog.csdn.net/u010942020/article/details/73610121</a></p>
<h5 id="列举java的集合以及集合之间的继承关系"><a href="#列举java的集合以及集合之间的继承关系" class="headerlink" title="列举java的集合以及集合之间的继承关系"></a>列举java的集合以及集合之间的继承关系</h5><img src="/2018/05/24/INTERVIEW-JAVA/colltetcion_map.png">



<p><img src="https://images4.pianshen.com/887/c1/c1abbb330519fa244799ae0923a2f3cf.png"></p>
<h5 id="List-Set-Map的区别"><a href="#List-Set-Map的区别" class="headerlink" title="List,Set,Map的区别"></a>List,Set,Map的区别</h5><p>容器类介绍以及之间的区别（容器类估计很多人没听这个词，Java容器主要可以划分为4个部分：List列表、Set集合、Map映射、工具类（Iterator迭代器、Enumeration枚举类、Arrays和Collections），具体的可以看看这篇博文 <a target="_blank" rel="noopener" href="http://alexyyek.github.io/2015/04/06/Collection/">Java容器类</a>）</p>
<ol>
<li>List是一个有序的队列，每一个元素都有它的索引。Set是一个不允许有重复元素的集合。</li>
<li>Map是一个映射接口，即key-value键值对。</li>
</ol>
<h5 id="List和Map的实现方式以及存储方式"><a href="#List和Map的实现方式以及存储方式" class="headerlink" title="List和Map的实现方式以及存储方式"></a>List和Map的实现方式以及存储方式</h5><ol>
<li><p>list</p>
<p>ArrayList    查询快 .  LinkedList  插入删除快</p>
</li>
</ol>
<p>修改对象A的equals方法的签名，那么使用HashMap存放这个对象实例的时候，会调用哪个equals方法？</p>
<h5 id="集合Set实现Hash怎么防止碰撞"><a href="#集合Set实现Hash怎么防止碰撞" class="headerlink" title="集合Set实现Hash怎么防止碰撞"></a>集合Set实现Hash怎么防止碰撞</h5><p>1，如果hash码值不相同，说明是一个新元素，存储；</p>
<p>如果没有元素和传入对象（也就是add的元素）的hash值相等，那么就认为这个元素在table中不存在，将其添加进table；</p>
<p>2.1，如果hash码值相同，且equles判断相等，说明元素已经存在，不存；</p>
<p>2.2，如果hash码值相同，且equles判断不相等，说明元素不存在，存；</p>
<p>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/github_37130188/article/details/96508272">https://blog.csdn.net/github_37130188/article/details/96508272</a></p>
<p>​                    <a href="https://noteforme.github.io/2018/05/31/HashMap/">https://noteforme.github.io/2018/05/31/HashMap/</a></p>
<h5 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h5><ol>
<li>对key的Dashcode()做hash运算，计算index.</li>
<li>如果没碰撞直接放到bucket⾥</li>
<li>如果碰撞了，以链表的形式存在buckets后</li>
<li>如果节点已经存在就替换old value(保证key的唯⼀性)</li>
<li>如果bucket满了(超过load factor*current capacity)，就要resize</li>
</ol>
<p>get数据</p>
<ol>
<li><p>对key的hashCode()做hash运算，计算index;</p>
</li>
<li><p>如果在bucket⾥的第⼀个节点⾥直接命中，则直接返回；</p>
</li>
<li><p>如果有冲突，则通过key.equals(k)去查找对应的Entry;分为下面两种方式.</p>
</li>
<li><p>若为树，则在树中通过key.equals(k)查找，O(logn)；</p>
</li>
<li><p>若为链表，则在链表中通过key.equals(k)查找，O(n)。</p>
</li>
</ol>
<h5 id="ArrayMap"><a href="#ArrayMap" class="headerlink" title="ArrayMap"></a>ArrayMap</h5><p>ArrayMap相比传统的HashMap速度更慢，因为其查找方法是二分法，并且当删除或添加数据时，会对空间重新调整，可以说ArrayMap是牺牲了时间来换空间，ArrayMap与HashMap的区别主要在：</p>
<p>存储方式不同：HashMap内部有一个HashMapEntry&lt;K,V&gt;[ ]对象，而ArrayMap是一个&lt;key,value&gt;映射的数据结构，内部使用两个数组进行数据存储，一个数组记录key的hash值，另一个数组记录value值。</p>
<p>添加数据时扩容的处理不一样：HashMap进行了new操作，重新创建对象，开销很大，而ArrayMap用的是copy数据，效率相对高很多。</p>
<p>ArrayMap提供了数组收缩的功能，在clear或remove之后，会重新收缩数组，释放空间。</p>
<p>ArrayMap采用的是二分法查找。</p>
<h5 id="hashmap-hashtable区别"><a href="#hashmap-hashtable区别" class="headerlink" title="hashmap hashtable区别"></a>hashmap hashtable区别</h5><p>堆的结构</p>
<p>​    堆分为两种：<em>最大堆</em>和<em>最小堆</em>，两者的差别在于节点的排序方式。</p>
<p>在最大堆中，父节点的值比每一个子节点的值都要大。在最小堆中，父节点的值比每一个子节点的值都要小。这就是所谓的“堆属性”，并且这个属性对堆中的每一个节点都成立。<br><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/6b526aa481b1">https://www.jianshu.com/p/6b526aa481b1</a></p>
<h5 id="堆和树的区别"><a href="#堆和树的区别" class="headerlink" title="堆和树的区别"></a>堆和树的区别</h5><p>​    左子节点必须比父节点小，右子节点必须必比父节点大。但是在堆中并非如此。在最大堆中两个子节点都必须比父节点小，而在最小堆中，它们都必须比父节点大。</p>
<p>堆和栈在内存中的区别是什么(解答提示：可以从数据结构方面以及实际实现方面两个方面去回答)？</p>
<h5 id="什么是深拷贝和浅拷贝"><a href="#什么是深拷贝和浅拷贝" class="headerlink" title="什么是深拷贝和浅拷贝"></a>什么是深拷贝和浅拷贝</h5><ul>
<li><p>浅拷贝</p>
<p>是一个传址,也就是把a的值赋给b的时候同时也把a的地址赋给了b，当b（a）的值改变的时候，a（b）的值同时也会改变</p>
</li>
<li><p>深拷贝</p>
<p>​    深拷贝是指，拷贝对象的具体内容，二内存地址是自主分配的，拷贝结束之后俩个对象虽然存的值是一样的，但是内存地址不一样，俩个对象页互相不影响，互不干涉</p>
</li>
</ul>
<p>手写链表逆序代码</p>
<p>讲一下对树，B+树的理解</p>
<p>讲一下对图的理解</p>
<p>判断单链表成环与否？</p>
<p>链表翻转（即：翻转一个单项链表）</p>
<p>合并多个单有序链表（假设都是递增的）</p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/15/index.html">https://noteforme.github.io/page/15/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/inter/" rel="tag">inter</a></li></ul>

          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>



    <nav id="page-nav">

<a class="extend prev" rel="prev" href="/page/14/">Previous</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="page-number" href="/page/14/">14</a><span class="page-number current">15</span><a class="page-number" href="/page/16/">16</a><a class="page-number" href="/page/17/">17</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><a class="extend next" rel="next" href="/page/16/">Next</a>
</nav>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-posts"></i> Recent</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/09/03/Android-itnerview-algorithm/">Android_itnerview_algorithm</a>
          </li>
        
          <li>
            <a href="/2023/09/03/Android_interview%20organize/">Android_itnerview_organize</a>
          </li>
        
          <li>
            <a href="/2023/08/20/compose-layout/">compose_layout</a>
          </li>
        
          <li>
            <a href="/2023/08/19/compose/">compose</a>
          </li>
        
          <li>
            <a href="/2023/08/09/LC-DP-BAG/">LC_DP_BAG</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ANDROID/" style="font-size: 13.33px;">ANDROID</a> <a href="/tags/AOSP/" style="font-size: 16.67px;">AOSP</a> <a href="/tags/Activity/" style="font-size: 10px;">Activity</a> <a href="/tags/AndroidNewFeatures/" style="font-size: 10px;">AndroidNewFeatures</a> <a href="/tags/Assembly/" style="font-size: 10px;">Assembly</a> <a href="/tags/BLOG/" style="font-size: 10px;">BLOG</a> <a href="/tags/ConstraintLayout/" style="font-size: 10px;">ConstraintLayout</a> <a href="/tags/DB/" style="font-size: 11.67px;">DB</a> <a href="/tags/Drawer/" style="font-size: 10px;">Drawer</a> <a href="/tags/Fragment/" style="font-size: 11.67px;">Fragment</a> <a href="/tags/Git/" style="font-size: 11.67px;">Git</a> <a href="/tags/JVM/" style="font-size: 18.33px;">JVM</a> <a href="/tags/LEETCODE/" style="font-size: 20px;">LEETCODE</a> <a href="/tags/Operators/" style="font-size: 10px;">Operators</a> <a href="/tags/Performance/" style="font-size: 15px;">Performance</a> <a href="/tags/RecyclerView/" style="font-size: 11.67px;">RecyclerView</a> <a href="/tags/RxJava/" style="font-size: 15px;">RxJava</a> <a href="/tags/THINK/" style="font-size: 10px;">THINK</a> <a href="/tags/TOOL/" style="font-size: 11.67px;">TOOL</a> <a href="/tags/TabLayout/" style="font-size: 10px;">TabLayout</a> <a href="/tags/Test/" style="font-size: 15px;">Test</a> <a href="/tags/TouchEvent/" style="font-size: 13.33px;">TouchEvent</a> <a href="/tags/VIEW/" style="font-size: 11.67px;">VIEW</a> <a href="/tags/XML/" style="font-size: 10px;">XML</a> <a href="/tags/anim/" style="font-size: 10px;">anim</a> <a href="/tags/compose/" style="font-size: 11.67px;">compose</a> <a href="/tags/concurrency/" style="font-size: 15px;">concurrency</a> <a href="/tags/coroutie/" style="font-size: 16.67px;">coroutie</a> <a href="/tags/inter/" style="font-size: 18.33px;">inter</a> <a href="/tags/keyboard/" style="font-size: 10px;">keyboard</a> <a href="/tags/proguard/" style="font-size: 10px;">proguard</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-classify"></i> Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ANDROID/">ANDROID</a><span class="category-list-count">59</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/BLE/">BLE</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DataStructure/">DataStructure</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DesignPatterns/">DesignPatterns</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ENGLISH/">ENGLISH</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/">JAVA</a><span class="category-list-count">27</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Jetpack/">Jetpack</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kotlin/">Kotlin</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LINUX/">LINUX</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mathematics/">Mathematics</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS/">OS</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Organization/">Organization</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SOURCE/">SOURCE</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TEST/">TEST</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TOOL/">TOOL</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/VIEW/">VIEW</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/anim/">anim</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/flutter/">flutter</a><span class="category-list-count">5</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-archive"></i> Archive</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/">2023年09月</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/">2022年12月</a><span class="archive-list-count">33</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/">2021年12月</a><span class="archive-list-count">23</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020年12月</a><span class="archive-list-count">46</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019年12月</a><span class="archive-list-count">21</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018年11月</a><span class="archive-list-count">32</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017年12月</a><span class="archive-list-count">57</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ANDROID/" rel="tag">ANDROID</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AOSP/" rel="tag">AOSP</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Activity/" rel="tag">Activity</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AndroidNewFeatures/" rel="tag">AndroidNewFeatures</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Assembly/" rel="tag">Assembly</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BLOG/" rel="tag">BLOG</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ConstraintLayout/" rel="tag">ConstraintLayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DB/" rel="tag">DB</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Drawer/" rel="tag">Drawer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Fragment/" rel="tag">Fragment</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LEETCODE/" rel="tag">LEETCODE</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Operators/" rel="tag">Operators</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Performance/" rel="tag">Performance</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RecyclerView/" rel="tag">RecyclerView</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RxJava/" rel="tag">RxJava</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/THINK/" rel="tag">THINK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TOOL/" rel="tag">TOOL</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TabLayout/" rel="tag">TabLayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Test/" rel="tag">Test</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TouchEvent/" rel="tag">TouchEvent</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VIEW/" rel="tag">VIEW</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XML/" rel="tag">XML</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/anim/" rel="tag">anim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/compose/" rel="tag">compose</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/concurrency/" rel="tag">concurrency</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/coroutie/" rel="tag">coroutie</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/inter/" rel="tag">inter</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/keyboard/" rel="tag">keyboard</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/proguard/" rel="tag">proguard</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-link"></i> Blogroll</h3>
    <div class="widget">
      <ul>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example1.com/">site-name1</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example2.com/">site-name2</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example3.com/">site-name3</a>
        </li>
      
      </ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <a id="totop" href="#top"></a>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <p>
        <a href="/sitemap.xml">Site Map</a>
        <span> | </span><a href="/atom.xml">Subscribe to this site</a>
        <span> | </span><a href="/about/">Contact the blogger</a>
      </p>
      
        <p>
          <i class="fa fa-visitors"></i>
          <i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>
          ，
          <i class="fa fa-views"></i>
          <i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>
        </p>
      
      <p>
        <span>Copyright &copy; 2023 Jon.</span>
        <span>Theme by <a href="https://github.com/chaooo/hexo-theme-BlueLake/" target="_blank">BlueLake.</a></span>
        
            <span>Count by <a href="http://busuanzi.ibruce.info/" target="_blank">busuanzi.</a></span>
        
        <span>Powered by <a href="https://hexo.io/" target="_blank">Hexo.</a></span>
      </p>
    </div>
  </div>
</footer>

    </div>
    
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/search.json.js"></script>


  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>






  
<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



  
<script src="/localshare/js/social-share.js"></script>

  
<script src="/localshare/js/qrcode.js"></script>




















  </div>
</body>
</html>