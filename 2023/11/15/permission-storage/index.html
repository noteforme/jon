

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Jon">
  <meta name="keywords" content="">
  
    <meta name="description" content="The answer is NO it is not required if you are simply capturing image from camera or by gallery by calling an intent (calling other app to perform some task for you ) in our case this other app would">
<meta property="og:type" content="article">
<meta property="og:title" content="permission_storage">
<meta property="og:url" content="https://noteforme.github.io/2023/11/15/permission-storage/index.html">
<meta property="og:site_name" content="Jon&#39;s Blog">
<meta property="og:description" content="The answer is NO it is not required if you are simply capturing image from camera or by gallery by calling an intent (calling other app to perform some task for you ) in our case this other app would">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://noteforme.github.io/2023/11/15/permission-storage//b699ef581b9e92de2ecf20ac6ca6c5278c439c98.png">
<meta property="og:image" content="https://developer.android.google.cn/static/about/versions/14/images/partial-photo-video-access.png">
<meta property="article:published_time" content="2023-11-15T14:52:48.000Z">
<meta property="article:modified_time" content="2024-02-18T13:27:09.324Z">
<meta property="article:author" content="Jon">
<meta property="article:tag" content="permission">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://noteforme.github.io/2023/11/15/permission-storage//b699ef581b9e92de2ecf20ac6ca6c5278c439c98.png">
  
  
  
  <title>permission_storage - Jon&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"noteforme.github.io","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="permission_storage"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-11-15 22:52" pubdate>
          November 15, 2023 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          1.1k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          10 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">permission_storage</h1>
            
            
              <div class="markdown-body">
                
                <p>The answer is NO it is not required if you are simply capturing image from camera or by gallery by calling an intent (calling other app to perform some task for you ) in our case this other app would be the camera application in your mobile</p>
<p><a target="_blank" rel="noopener" href="https://medium.com/@bilalhameed0800/is-permission-required-for-android-capture-image-from-camera-and-gallery-intent-4812964e8c9a">https://medium.com/@bilalhameed0800/is-permission-required-for-android-capture-image-from-camera-and-gallery-intent-4812964e8c9a</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/training/data-storage">https://developer.android.com/training/data-storage</a></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=UnJ3amzJM94">Preparing for scoped storage (Android Dev Summit &#39;19) - YouTube</a></p>
<p>android SD卡主要有两种存储方式 Internal  、  External Storage</p>
<p>external storage permission</p>
<p>自己创建的文件，不需要权限 ，不是自己的 需要 READ_EXTERNAL_STORAGE</p>
<h4 id="photo-picker"><a href="#photo-picker" class="headerlink" title="photo picker"></a>photo picker</h4><p><a target="_blank" rel="noopener" href="https://developer.android.com/about/versions/14/changes/partial-photo-video-access">https://developer.android.com/about/versions/14/changes/partial-photo-video-access</a></p>
<p>if your app is running on a device with Android 14 (API level 34) or higher, limit access to selected photos and videos, request “Manifest.permission.READ_MEDIA_IMAGES” will show </p>
<img src="/2023/11/15/permission-storage//b699ef581b9e92de2ecf20ac6ca6c5278c439c98.png" srcset="/img/loading.gif" lazyload title alt="Screenshot 2023-11-22 at 21.36.55.png" width="259">

<h5 id><a href="#" class="headerlink" title></a></h5><h4 id="Internal"><a href="#Internal" class="headerlink" title="Internal"></a>Internal</h4><ul>
<li>It’s always available.</li>
<li>Files saved here are accessible by only your app.</li>
<li>When the user uninstalls your app, the system removes all your app’s files from internal storage. </li>
</ul>
<p>内部存储不需要申请任何权限</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-type">String</span> fileInnerName = <span class="hljs-string">&quot;/inner/img&quot;</span>; <span class="hljs-comment">//目录名</span><br>                <span class="hljs-comment">//内置存储缓存目录</span><br><span class="hljs-built_in">File</span> fileCache = <span class="hljs-keyword">new</span> <span class="hljs-built_in">File</span>(<span class="hljs-built_in">getActivity</span>().<span class="hljs-built_in">getCacheDir</span>(), fileInnerName); <br><span class="hljs-comment">//     /data/data/com.android.imageloaderstorage/cache/inner/img</span><br> <span class="hljs-keyword">if</span> (!fileCache.<span class="hljs-built_in">exists</span>()) &#123;<br>    <span class="hljs-type">boolean</span> isInner = fileCache.<span class="hljs-built_in">mkdirs</span>();<br>  &#125;<br> Log.<span class="hljs-built_in">i</span>(<span class="hljs-string">&quot; FileFragment &quot;</span>,  <span class="hljs-string">&quot;  &quot;</span> + fileCache.<span class="hljs-built_in">getAbsolutePath</span>());<br></code></pre></td></tr></table></figure>

<p>  由此可以看到 绝对路径：</p>
<blockquote>
<p>Context.getCacheDir()：/data/data/应用包名/cache/ fileInnerName</p>
</blockquote>
<h3 id="External-Storage"><a href="#External-Storage" class="headerlink" title="External Storage"></a>External Storage</h3><p> 外部存储也分两种 Private files (外部私有存储)  、Public files  (外部公有存储)</p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/topics/manifest/uses-permission-element.html">https://developer.android.com/guide/topics/manifest/uses-permission-element.html</a></p>
<p>  (context.getExternalCacheDir())</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-comment">/* Checks if external storage is available for read and write */</span><br> String fileOutName = <span class="hljs-string">&quot;/AutDir/fileOut&quot;</span>;<br>                <span class="hljs-keyword">if</span> (!isExternalStorageWritable()) &#123;<br>                    <span class="hljs-keyword">return</span>;<br>                &#125;<br>                <span class="hljs-keyword">if</span> (android.os.Build.<span class="hljs-keyword">VERSION</span>.SDK_INT &gt;= android.os.Build.VERSION_CODES.KITKAT) &#123;<br>                    <span class="hljs-keyword">File</span> fileOut = new <span class="hljs-keyword">File</span>(getActivity().getExternalFilesDir(Environment.DIRECTORY_PICTURES) + fileOutName);  <span class="hljs-comment">//   /storage/emulated/0/Android/data/com.android.imageloaderstorage/files/Pictures/AutDir/fileOut</span><br>                    boolean flag = fileOut.mkdirs();<br>                    <span class="hljs-keyword">Log</span>.<span class="hljs-built_in">i</span>(<span class="hljs-string">&quot;FileFragment&quot;</span>, fileOut.getAbsolutePath());<br>                &#125;<br>                <span class="hljs-comment">//缓存目录</span><br>                <span class="hljs-keyword">File</span> fileOutCache = new <span class="hljs-keyword">File</span>(getActivity().getExternalCacheDir() + fileOutName); <span class="hljs-comment">//  /storage/emulated/0/Android/data/com.android.imageloaderstorage/cache/AutDir/fileOut</span><br>                Boolean isInner = fileOutCache.mkdirs();<br>                <span class="hljs-keyword">Log</span>.<span class="hljs-built_in">i</span>(<span class="hljs-string">&quot;FileFragment&quot;</span>, <span class="hljs-string">&quot; 路径 &quot;</span> + fileOutCache.getAbsolutePath());    <br></code></pre></td></tr></table></figure>

<p><strong>特别注意</strong> mkdir(),mkdirs(),createNewFile()的区别</p>
<ul>
<li><p>createNewFile:新建文件（非目录）</p>
</li>
<li><p>mkdir：新建目录</p>
</li>
<li><p>mkdirs：新建目录，与mkdir的区别是：比如   mkdirs（“D:/test/test2”) 如果test  ,   不存在会创建，然后创建test2，如果是  mkdir（“D:/test/test2”) ，如果 </p>
<pre><code class="hljs">test不存在，会失败。
</code></pre>
</li>
<li><p>android io输入文件</p>
<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vhdl"><span class="hljs-keyword">new</span> <span class="hljs-keyword">File</span>(param1,param2); param1 <span class="hljs-keyword">File</span>,param2  <span class="hljs-built_in">String</span>类型<br><br><span class="hljs-built_in">String</span> dir = StorageUtils.getCacheDirectory(this);<br><span class="hljs-built_in">String</span> apkDIR = <span class="hljs-string">&quot;apkdir.apk&quot;</span>;<br><span class="hljs-keyword">File</span> apkFile = <span class="hljs-keyword">new</span> <span class="hljs-keyword">File</span>(dir, apkDIR);<br></code></pre></td></tr></table></figure></li>
</ul>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/training/permissions/requesting.html">https://developer.android.com/training/permissions/requesting.html</a><br><a target="_blank" rel="noopener" href="https://developer.android.com/guide/topics/permissions/requesting.html">https://developer.android.com/guide/topics/permissions/requesting.html</a><br><a target="_blank" rel="noopener" href="https://developer.android.com/training/basics/data-storage/files.html?hl=zh-cn">https://developer.android.com/training/basics/data-storage/files.html?hl=zh-cn</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/github_27263697/article/details/131633314">Android 13媒体文件访问权限适配_read_media_images-CSDN博客</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7159999910748618766">Android 13 媒体权限适配指南 - 掘金</a></p>
<h3 id="READ-MEDIA-VISUAL-USER-SELECTED"><a href="#READ-MEDIA-VISUAL-USER-SELECTED" class="headerlink" title="READ_MEDIA_VISUAL_USER_SELECTED"></a>READ_MEDIA_VISUAL_USER_SELECTED</h3><p>这个限制和 iOS 相似，Android 14 提供了对照片和视频的部分访问权限。当您访问媒体数据时，用户将看到一个对话框，提示用户授予对所有媒体的访问、或者授予单个照片/视频的访问权限，该新功能将适用于 Android 14 上所有应用程序，无论其 targetSdkVersion 是多少</p>
<p><img src="https://developer.android.google.cn/static/about/versions/14/images/partial-photo-video-access.png" srcset="/img/loading.gif" lazyload alt="The ."></p>
<p>    谷歌在 API 33（Android 13）上面引入了 READ_MEDIA_IMAGES 和 READ_MEDIA_VIDEO 这两个权限，目前针对这两个权限在 Android 14 上面有新的变动，具体的变动点就是新增了 READ_MEDIA_VISUAL_USER_SELECTED权限，那么这个权限的作用是什么呢？</p>
<p>我们都知道 READ_MEDIA_IMAGES 和 READ_MEDIA_VIDEO 是申请图片和视频权限的，但是这样会有一个问题，当第三方应用申请到权限后，就拥有了手机相册中所有照片和视频的访问权限，这是十分危险的，也是非常不可控的，因为用户也无法知道第三方应用会干什么，所以谷歌在 API 34（Android 14）引入了这个权限，这样用户拥有了更多的选择，可以将相册中所有的图片和视频授予给第三方应用，也可以将部分的图片和视频给第三方应用。</p>
<p>讲完了这个特性的来龙去脉，那么接下来讲讲这个权限如何适配，如果你的应用申请了 READ_MEDIA_IMAGES 或者 READ_MEDIA_VIDEO 权限，并且 targetSdkVersion 大于等于 33（Android 13），那么需要在申请权限时携带上 READ_MEDIA_VISUAL_USER_SELECTED 权限方能正常申请，如果不携带上 READ_MEDIA_VISUAL_USER_SELECTED 权限就申请 READ_MEDIA_IMAGES 或者 READ_MEDIA_VIDEO 权限，会弹出权限询问对话框，但是如果用户是选择全部授予，那么 READ_MEDIA_IMAGES 或者 READ_MEDIA_VIDEO 权限状态是已授予的状态，如果用户是选择部分授予，那么 READ_MEDIA_IMAGES 或者 READ_MEDIA_VIDEO 权限状态是已拒绝的状态，假设此时有携带了 READ_MEDIA_VISUAL_USER_SELECTED 权限的情况下，那么 READ_MEDIA_VISUAL_USER_SELECTED 权限是已授予的状态。</p>
<p>看到这里，脑洞大的同学可能有想法了，那我不申请 READ_MEDIA_IMAGES 或者 READ_MEDIA_VIDEO 权限，我就只申请 READ_MEDIA_VISUAL_USER_SELECTED 权限行不行啊？答案也是不行的，我替大家试验过了，这个权限申请会在不会询问用户的情况下，被系统直接拒绝掉。</p>
<p>另外需要的一点是 READ_MEDIA_VISUAL_USER_SELECTED 属于危险权限，除了在运行时动态申请外，还需要在清单文件中进行注册。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/getActivity/XXPermissions/issues/244">[Bug]：安卓14，申请READ_MEDIA_IMAGES时，当用户选择部分允许后，READ_MEDIA_IMAGES的isGranted=true · Issue #244 · getActivity/XXPermissions · GitHub</a></p>
<p>=======</p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/training/data-storage/shared/photopicker#kotlin">https://developer.android.com/training/data-storage/shared/photopicker#kotlin</a></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-selector-tag">var</span> <span class="hljs-attribute">filter</span> by remember &#123; mutableStateOf&lt;VisualMediaType&gt;(ImageAndVideo) &#125;<br><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment">  * [PickMultipleVisualMedia] is an ActivityResultContract that will launch the photo picker</span><br><span class="hljs-comment">  * intent while providing an enhanced API over the available customisations options (media type,</span><br><span class="hljs-comment">  * max number of items).</span><br><span class="hljs-comment">  *</span><br><span class="hljs-comment">  * If you&#x27;re looking for single selection only, use PickVisualMedia ActivityResultContract</span><br><span class="hljs-comment">  * instead.</span><br><span class="hljs-comment">  */</span><br> val pickMultipleMedia =<br>     <span class="hljs-built_in">rememberLauncherForActivityResult</span>(<span class="hljs-built_in">PickMultipleVisualMedia</span>(maxItems)) &#123; uris -&gt;<br>         selectedMedia = uris<br>     &#125;<br><br><br><br> pickMultipleMedia<span class="hljs-selector-class">.launch</span>(<span class="hljs-built_in">PickVisualMediaRequest</span>(<span class="hljs-attribute">filter</span>))   <br></code></pre></td></tr></table></figure>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/permission/" class="print-no-link">#permission</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>permission_storage</div>
      <div>https://noteforme.github.io/2023/11/15/permission-storage/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Jon</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>November 15, 2023</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/11/15/notification/" title="notification">
                        <span class="hidden-mobile">notification</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
