<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Jon&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  
  
    <link rel="alternate" href="/atom.xml" title="Jon's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="/localshare/css/share.css">

  
  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Jon&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Cease to struggle and you cease to live. - Thomas Carlyle</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/."><i class="fa fa-home"></i> Inicio</a>
        
          <a class="main-nav-link" href="/archives/"><i class="fa fa-archive"></i> Archivo</a>
        
          <a class="main-nav-link" href="/about/"><i class="fa fa-user"></i> Acerca de</a>
        
          <a class="main-nav-link" href="/atom.xml"><i class="fa fa-rss"></i> RSS</a>
        
      </nav>
    </div>
    <div id="search-form">
      <div id="result-mask" class="hide"></div>
      <label><input id="search-key" type="text" autocomplete="off" placeholder="Búsqueda"></label>
      <div id="result-wrap" class="hide">
        <div id="search-result"></div>
      </div>
      <div class="hide">
        <template id="search-tpl">
          <div class="item">
            <a href="/{path}" title="{title}">
              <div class="title">{title}</div>
              <div class="time">{date}</div>
              <div class="tags">{tags}</div>
            </a>
          </div>
        </template>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  <article id="post-Git_SSKEY" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/19/Git_SSKEY/">GIT_SSHKEY</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-19T01:28:15.000Z" itemprop="datePublished">2017年10月19日</time>
</span>
      
      
      
<a href="/2017/10/19/Git_SSKEY/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Libro de visitas
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4><p><a target="_blank" rel="noopener" href="http://skypegnu1.blog.51cto.com/8991766/1641064">http://skypegnu1.blog.51cto.com/8991766/1641064</a></p>
<h5 id="多平台配置SSH"><a href="#多平台配置SSH" class="headerlink" title="多平台配置SSH"></a>多平台配置SSH</h5><p>正常情况会哟几个平台的配置情况,ssh操作方式</p>
<h5 id="用户信息设置"><a href="#用户信息设置" class="headerlink" title="用户信息设置"></a>用户信息设置</h5><p>在config后加上 –global 即可全局设置用户名和邮箱，否则就是局部的。有时候用手输入才有用</p>
<blockquote>
<p> $ git config –global user.name “John Doe”<br> $ git config –global user.email <a href="mailto:&#x6a;&#111;&#104;&#x6e;&#100;&#111;&#x65;&#x40;&#x65;&#120;&#97;&#109;&#x70;&#108;&#101;&#x2e;&#x63;&#x6f;&#109;">&#x6a;&#111;&#104;&#x6e;&#100;&#111;&#x65;&#x40;&#x65;&#120;&#97;&#109;&#x70;&#108;&#101;&#x2e;&#x63;&#x6f;&#109;</a></p>
</blockquote>
<p>　　检查配置信息　<code>git config --list</code></p>
<h4 id="生成sshkey"><a href="#生成sshkey" class="headerlink" title="生成sshkey"></a>生成sshkey</h4><p>如果视其他平台生成时就要修改名称了</p>
<blockquote>
<p>ssh-keygen -t rsa -b 4096 -C “<a href="mailto:&#x79;&#111;&#x75;&#x72;&#x5f;&#101;&#x6d;&#x61;&#x69;&#x6c;&#x40;&#x65;&#120;&#97;&#109;&#x70;&#x6c;&#x65;&#46;&#x63;&#111;&#109;">&#x79;&#111;&#x75;&#x72;&#x5f;&#101;&#x6d;&#x61;&#x69;&#x6c;&#x40;&#x65;&#120;&#97;&#109;&#x70;&#x6c;&#x65;&#46;&#x63;&#111;&#109;</a>“<br>Enter file in which to save the key (/home/jon/.ssh/id_rsa): /home/jon/.ssh/id_rsa.Oschina<br>cat ~/.ssh/id_rsa.li | clip</p>
</blockquote>
<p>Adding your SSH key to the ssh-agent</p>
<p>start the ssh-agent in the background</p>
<pre><code>  $ eval $(ssh-agent -s)
    Agent pid 59566
  $ ssh-add ~/.ssh/id_rsa.li
</code></pre>
<p>gitbash下把生成的id_rsa.pub 添加到sshkey</p>
<p>oschina 测试连接：<code>$ ssh -T git@git.oschina.net</code>　　</p>
<p>github 测试连接:    <code> $ ssh -T git@github.com</code><br>如果出现:</p>
<blockquote>
<p>Hi username! You’ve successfully authenticated, but GitHub does not<br> provide shell access.<br> 配置成功</p>
</blockquote>
<h5 id="不同平台-不同的rsa-key"><a href="#不同平台-不同的rsa-key" class="headerlink" title="不同平台　不同的rsa.key"></a>不同平台　不同的rsa.key</h5><p>　我前面的key重新命名，clone项目还是有问题</p>
<p>  解决方法: 在 .ssh目录下　新建config文件 添加</p>
<blockquote>
<p>  Host github<br>    HostName github.com<br>    User Jon<br>    IdentityFile ~/.ssh/id_rsa.li</p>
</blockquote>
<h5 id="不同的平台，相同的rsa-key-推荐"><a href="#不同的平台，相同的rsa-key-推荐" class="headerlink" title="不同的平台，相同的rsa.key (推荐)"></a>不同的平台，相同的rsa.key (推荐)</h5><p>复制id_rsa.pub填入</p>
<blockquote>
<p>clip &lt; ~/.ssh/id_rsa.pub</p>
</blockquote>
<p>参考：<br>github生成方式<br><a target="_blank" rel="noopener" href="https://help.github.com/articles/about-ssh/">https://help.github.com/articles/about-ssh/</a></p>
<p>gitlab生成方式<br><a target="_blank" rel="noopener" href="https://gitlab.com/help/ssh/README">https://gitlab.com/help/ssh/README</a></p>
<p>oschina方式:<br><a target="_blank" rel="noopener" href="http://git.mydoc.io/?t=154712">http://git.mydoc.io/?t=154712</a></p>
<p>gogs:参考github,配置sskey后还需要用账号登陆</p>
<h5 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h5><ol>
<li> 类似下面错误使用　git push -u origin master</li>
</ol>
<p>   <code>git push -f origin master</code></p>
<blockquote>
<p>! [rejected]        master -&gt; master (fetch first)<br>error: failed to push some refs to ‘<a target="_blank" rel="noopener" href="https://github.com/aniruddhabarapatre/learn-rails.git&#39;">https://github.com/aniruddhabarapatre/learn-rails.git&#39;</a><br>hint: Updates were rejected because the remote contains work that you do<br>hint: not have locally. This is usually caused by another repository pushing</p>
</blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/20939648/issue-pushing-new-code-in-github">https://stackoverflow.com/questions/20939648/issue-pushing-new-code-in-github</a></p>
<ol start="2">
<li>生成key时，我改成了　id_rsaOschina<br> android studio 最后push 时<br> authentication id_rsaOschina　using key failed报错<br> 方法: AndroidStudio -&gt; File -&gt; Settings -&gt;Git -&gt; SSH executable : built-in 改成Native</li>
</ol>
<p>参考:<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/24688700/android-studio-push-failed-fatal-could-not-read-from-remote-repository">https://stackoverflow.com/questions/24688700/android-studio-push-failed-fatal-could-not-read-from-remote-repository</a></p>
<h5 id="GitHub-CLI-配置"><a href="#GitHub-CLI-配置" class="headerlink" title="GitHub CLI  配置"></a>GitHub CLI  配置</h5><p> 在windows平台 <code>git auth login</code> 授权    要用windows命令行工具。 </p>

        
        
          <blockquote id="copyright">
              <p>Enlace original: <a href="http://noteforme.github.io.com/page/14/index.html">http://noteforme.github.io.com/page/14/index.html</a></p>
              <p>Declaración de copyright: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/" rel="tag">Git</a></li></ul>

          
    <div class="social-share">
      <span>Cuota:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Git_BRANCH" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/19/Git_BRANCH/">GIT_BRANCH</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-19T01:24:09.000Z" itemprop="datePublished">2017年10月19日</time>
</span>
      
      
      
<a href="/2017/10/19/Git_BRANCH/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Libro de visitas
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>官方文档<br><a target="_blank" rel="noopener" href="https://git-scm.com/book/en/v2">https://git-scm.com/book/en/v2</a><br><a target="_blank" rel="noopener" href="http://iissnan.com/progit/">http://iissnan.com/progit/</a></p>
<h4 id="Git基本操作"><a href="#Git基本操作" class="headerlink" title="Git基本操作"></a>Git基本操作</h4><h5 id="github上传项目"><a href="#github上传项目" class="headerlink" title="github上传项目"></a>github上传项目</h5><ul>
<li> 分支创建</li>
</ul>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> branch Dev<span class="number">1</span>.<span class="number">10</span> </span><br><span class="line"><span class="attribute">git</span> push origin Dev<span class="number">1</span>.<span class="number">10</span> 　　　// 提交该分支到远程仓库</span><br><span class="line"><span class="attribute">git</span> pull origin dev          //从远程获取分支</span><br><span class="line">      </span><br></pre></td></tr></table></figure>

<ul>
<li> 下面是对已有项目的提交</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mkdir EffectiveJava</span><br><span class="line">cd EffectiveJava</span><br><span class="line">git init</span><br><span class="line">touch <span class="module-access"><span class="module"><span class="identifier">README</span>.</span></span>md</span><br><span class="line">git add <span class="module-access"><span class="module"><span class="identifier">README</span>.</span></span>md</span><br><span class="line">git commit -m <span class="string">&quot;first commit&quot;</span></span><br><span class="line">git remote add origin git@gitee.com:huaiyi/<span class="module-access"><span class="module"><span class="identifier">EffectiveJava</span>.</span></span>git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>

<p>分支提交到远程仓库<br><code>$ git push origin v1.0.0 </code></p>
<ul>
<li><p>commit</p>
<p>Git撤销git commit 但是未git push的修改</p>
<ol>
<li><p>找到上次git commit的 id</p>
<p>  git log </p>
<p>  找到你想撤销的commit_id</p>
</li>
<li><p>git reset –hard commit_id</p>
<pre><code>完成撤销,同时将代码恢复到前一commit_id 对应的版本。
</code></pre>
</li>
<li><p>git reset commit_id </p>
<p>  完成Commit命令的撤销，但是不对代码修改进行撤销，可以直接通过git commit 重新提交对本地代码的修改。</p>
</li>
</ol>
</li>
</ul>
<p> <a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%AE%80%E4%BB%8B">git分支简介</a><br> <a target="_blank" rel="noopener" href="http://blog.csdn.net/hyr83960944/article/details/36185231">http://blog.csdn.net/hyr83960944/article/details/36185231</a></p>
<p>合并分支<br>合并hotfix到dev</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">$</span> git checkout            <span class="comment">// 先切换到dev </span></span><br><span class="line"><span class="symbol">$</span> git merge hotfix</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%9A%84%E6%96%B0%E5%BB%BA%E4%B8%8E%E5%90%88%E5%B9%B6">合并分支</a></p>
<h5 id="获取本地没有的远程分支"><a href="#获取本地没有的远程分支" class="headerlink" title="获取本地没有的远程分支"></a>获取本地没有的远程分支</h5><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">branch </span>-r <span class="comment">#查看远程分支  或 git branch -a #查看所有分支</span></span><br></pre></td></tr></table></figure>

<p>会显示</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">origin</span>/HEAD -&gt; origin/master</span><br><span class="line"><span class="attribute">origin</span>/daily/<span class="number">1</span>.<span class="number">2</span>.<span class="number">2</span></span><br><span class="line"><span class="attribute">origin</span>/daily/<span class="number">1</span>.<span class="number">3</span>.<span class="number">0</span></span><br><span class="line"><span class="attribute">origin</span>/daily/<span class="number">1</span>.<span class="number">4</span>.<span class="number">1</span></span><br><span class="line"><span class="attribute">origin</span>/develop</span><br><span class="line"><span class="attribute">origin</span>/feature/daily-<span class="number">1</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line"><span class="attribute">origin</span>/master</span><br></pre></td></tr></table></figure>

<p>然后直接 </p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> checkout origin/daily/<span class="number">1</span>.<span class="number">4</span>.<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://gaohaoyang.github.io/2016/07/07/git-clone-not-master-branch/">https://gaohaoyang.github.io/2016/07/07/git-clone-not-master-branch/</a></p>
<p><a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v1/Git-%E5%88%86%E6%94%AF-%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF" title="官方参考">官方</a></p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8">显示远程仓库</a><br> <code>$ git remote show origin </code></p>
<p> <strong>1. 本地分支重命名(还没有推送到远程)</strong></p>
 <figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git branch -m oldName newName</span></span><br></pre></td></tr></table></figure>
<p> <strong>2. 远程分支重命名 (已经推送远程-假设本地分支和远程对应分支名称相同)</strong><br>  a. 重命名远程分支对应的本地分支</p>
 <figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git branch -m oldName newName</span></span><br></pre></td></tr></table></figure>
<p> b. 删除远程分支</p>
 <figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">push</span> --<span class="built_in">delete</span> <span class="built_in">origin</span> oldName</span><br></pre></td></tr></table></figure>
<p> c. 删除本地分支</p>
<pre><code>   `    git branch -d v1.0.0    `
</code></pre>
</li>
<li><blockquote>
<p>获取远程其他分支</p>
</blockquote>
</li>
</ul>
<p>​     </p>
<h5 id="修复已发布版本bug"><a href="#修复已发布版本bug" class="headerlink" title="修复已发布版本bug"></a>修复已发布版本bug</h5><p>修复bug主要以下几步:</p>
<ul>
<li><p>使用git reset –hard <commit id="">命令退回到发布标签对应的版本</commit></p>
</li>
<li><p>使用git checkout -b BugFix新建一个BugFix的分支，原分支前进到最新提交版本</p>
</li>
<li><p>使用git checkout BugFix切换到BugFix分支，修改bug，重新发布并使用git tag打标签</p>
</li>
<li><p>git reaset –hard <head commit="" id=""> 切换主干最新的分支</head></p>
</li>
<li><p>使用git merge合并BugFix分支到主分支</p>
<p>参考:<a target="_blank" rel="noopener" href="https://blog.masterliu.net/git-retag/">https://blog.masterliu.net/git-retag/</a></p>
<p>标签是一个文件快照，并不是真拉出一份代码放在了那里</p>
</li>
</ul>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">D:\Project\ASProjects\cqianjia&gt;git <span class="keyword">tag</span></span><br><span class="line">v1.<span class="number">0.2</span></span><br></pre></td></tr></table></figure>

<p>参考: <a target="_blank" rel="noopener" href="http://gepeiyu.com/2017/06/28/git-tag-oldversion-debug/">http://gepeiyu.com/2017/06/28/git-tag-oldversion-debug/</a></p>
<p>还有一种情况是在最新提交版本修复bug</p>
<ul>
<li><p>git stash</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/54b8ea4317cc">https://www.jianshu.com/p/54b8ea4317cc</a></p>
<p><a target="_blank" rel="noopener" href="https://qiita.com/hudichao/items/d665cd769ed1d2ce832a">https://qiita.com/hudichao/items/d665cd769ed1d2ce832a</a></p>
</li>
</ul>
<h5 id="远程仓库更新到本地"><a href="#远程仓库更新到本地" class="headerlink" title="远程仓库更新到本地"></a>远程仓库更新到本地</h5><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>git fetch origin</span><br><span class="line"><span class="variable">$ </span>git merge origin/hexo</span><br></pre></td></tr></table></figure>

<p>或者合并</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>git pull origin hexo </span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2014/06/git_remote.html">http://www.ruanyifeng.com/blog/2014/06/git_remote.html</a></p>
<h6 id="fork后的项目处理"><a href="#fork后的项目处理" class="headerlink" title="fork后的项目处理"></a>fork后的项目处理</h6><p>  <a target="_blank" rel="noopener" href="https://gaohaoyang.github.io/2015/04/12/Syncing-a-fork/">https://gaohaoyang.github.io/2015/04/12/Syncing-a-fork/</a></p>
<h5 id="忽略文件已提交的文件"><a href="#忽略文件已提交的文件" class="headerlink" title="忽略文件已提交的文件"></a>忽略文件已提交的文件</h5><p> 对于单个文件处理<br>  假如要忽略 .idea/misc.xml文件，.gitignore可以添加 <code>/.idea/* </code>把.idea文件过滤<br> 主要是　<code>git rm --cached　.idea/misc.xml </code> 然后提交修改,每次手输入才有用?</p>
<p> 对文件夹的处理,比如common-bankcard</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git rm -r --<span class="keyword">cached </span>common-<span class="keyword">bankcard</span></span><br><span class="line"><span class="keyword">git </span>rm --<span class="keyword">cached </span> *idea<span class="comment">/*</span></span><br></pre></td></tr></table></figure>


<h4 id="Git仓库迁移"><a href="#Git仓库迁移" class="headerlink" title="Git仓库迁移"></a>Git仓库迁移</h4><p> 迁移git仓库</p>
<ul>
<li><p>原来托管于github,clone一份裸版本库</p>
<pre><code>git clone --bare git@gitee.com:huaiyi/CQJ.git
</code></pre>
</li>
<li><p>在新的版本库(gitlab)里面创建一个新的项目，例如 cqianjia</p>
</li>
<li><p>推送刚才clone的镜像到gitlab服务器</p>
</li>
</ul>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd CQJ.git/</span><br><span class="line">git push --mirror git<span class="variable">@45</span>.<span class="number">77.22</span>.<span class="number">97</span><span class="symbol">:root/cqianjia</span>.git</span><br></pre></td></tr></table></figure>

<p> mirror 克隆出来的裸版本对上游版本库进行了注册，这样可以在裸版本库中使用git fetch命令和上游版本库进行持续同步</p>
<ul>
<li>  删除本地代码</li>
</ul>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">cd</span></span> ..</span><br><span class="line">rm -rf project.git</span><br></pre></td></tr></table></figure>


<ul>
<li> 到新的服务器clone到本地就Ok了</li>
</ul>
<p>  <code>  git clone git@45.77.22.97:root/cqianjia.git</code> </p>
<p>  参考: <a target="_blank" rel="noopener" href="https://my.oschina.net/kind790/blog/510601">https://my.oschina.net/kind790/blog/510601</a></p>
<ul>
<li>  git clone 所有分支</li>
</ul>
<pre><code>这种方式有一个弊端，切换分支后　工程名没了， 还是慢慢摸索吧　!
</code></pre>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git branch -r | grep -v <span class="string">&#x27;\-&gt;&#x27;</span> | <span class="keyword">while</span> <span class="built_in">read</span> remote; <span class="keyword">do</span> git branch --track <span class="string">&quot;<span class="variable">$&#123;remote#origin/&#125;</span>&quot;</span> <span class="string">&quot;<span class="variable">$remote</span>&quot;</span>; <span class="keyword">done</span></span><br><span class="line">git fetch --all</span><br><span class="line">git pull --all</span><br></pre></td></tr></table></figure>

<p>参考: <a target="_blank" rel="noopener" href="http://blog.csdn.net/allangold/article/details/78028709">http://blog.csdn.net/allangold/article/details/78028709</a></p>
<h5 id="修改远程仓库地址"><a href="#修改远程仓库地址" class="headerlink" title="修改远程仓库地址"></a>修改远程仓库地址</h5><ul>
<li>github创建 New项目，项目地址是 <a href="mailto:&#x67;&#x69;&#116;&#64;&#103;&#x69;&#116;&#104;&#117;&#98;&#x2e;&#99;&#x6f;&#109;">&#x67;&#x69;&#116;&#64;&#103;&#x69;&#116;&#104;&#117;&#98;&#x2e;&#99;&#x6f;&#109;</a>:BlogForMe/News.git</li>
<li>修改远程服务器地址 ：<code>git remote set-url origin git@github.com:BlogForMe/News.git</code></li>
<li>推送到远程服务器 : <code>git push origin </code></li>
</ul>
<p><a target="_blank" rel="noopener" href="http://jcpplus.github.io/2015/07/23/modify-remote-url/">http://jcpplus.github.io/2015/07/23/modify-remote-url/</a></p>
<h4 id="GIT标签"><a href="#GIT标签" class="headerlink" title="GIT标签"></a>GIT标签</h4><p>  查看所有的版本<br>​    <code>git tag</code></p>
<ul>
<li>查看远程分支  <code>git ls-remote --tags</code></li>
<li>创建标签 <code>git tag -a v1.0.2 -m &quot;my version 1.0.2&quot;  </code><br>-m 选项指定了一条将会存储在标签中的信息</li>
</ul>
<ul>
<li>创建Tag</li>
</ul>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> tag -a v<span class="number">1</span>.<span class="number">0</span>.<span class="number">0</span> -m <span class="string">&quot;my version 1.0.0&quot;</span></span><br><span class="line"><span class="attribute">git</span> push origin v<span class="number">1</span>.<span class="number">0</span>.<span class="number">0</span>    //推送到远程分支</span><br><span class="line"><span class="attribute">git</span> push origin --tags       //推送所有的标签</span><br></pre></td></tr></table></figure>

<ul>
<li>删除tag </li>
</ul>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> git tag -d &lt;tagname&gt; </span><br><span class="line"> git push origin <span class="symbol">:refs/tags/&lt;tagname&gt;</span></span><br><span class="line"></span><br><span class="line">例如</span><br><span class="line"> git push origin <span class="symbol">:refs/tags/v1</span>.0.<span class="number">2</span></span><br><span class="line"> git tag -d  v1.0.<span class="number">2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E6%89%93%E6%A0%87%E7%AD%BE">检出标签</a> 检出标签</p>
<h5 id="Checkout-Git-Tags"><a href="#Checkout-Git-Tags" class="headerlink" title="Checkout Git Tags"></a>Checkout Git Tags</h5><p><a target="_blank" rel="noopener" href="https://devconnected.com/how-to-checkout-git-tags/">https://devconnected.com/how-to-checkout-git-tags/</a></p>
<blockquote>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">git</span> fetch --all --tags</span><br><span class="line"><span class="symbol">git</span> checkout tags/<span class="built_in">v1</span>.<span class="number">0</span> -<span class="keyword">b</span> <span class="built_in">v1</span>.<span class="number">0</span>-branch	<span class="comment">//git checkout tags/v2.1.1 -b v2.1.1-branch</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">git</span> log --oneline --graph		<span class="comment">//You can inspect the state of your branch by using the “git log” command. Make sure that the HEAD pointer (the latest commit) is pointing to your annotated tag.</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h5 id="checkout-remote-tag"><a href="#checkout-remote-tag" class="headerlink" title="checkout remote tag"></a>checkout remote tag</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">git fetch --all --tags</span><br><span class="line"></span><br><span class="line">git ls-remote --tags</span><br><span class="line"> </span><br><span class="line">  refs<span class="regexp">/tags/</span>v2.<span class="number">5.8</span>^&#123;&#125;</span><br><span class="line">  refs<span class="regexp">/tags/</span>v2.<span class="number">5.9</span></span><br><span class="line">  refs<span class="regexp">/tags/</span>v2.<span class="number">5.9</span>^&#123;&#125;</span><br><span class="line"></span><br><span class="line">git checkout  refs<span class="regexp">/tags/</span>v2.<span class="number">5.9</span> -b v2.<span class="number">5.9</span>-branch					<span class="regexp">//</span>-b 后面是自定义的分支名称</span><br><span class="line"> 																				这个自定义</span><br></pre></td></tr></table></figure>



<p>在 Git 中你并不能真的检出一个标签，因为它们并不能像分支一样来回移动。 如果你想要工作目录与仓库中特定的标签版本完全一样，可以使用 git checkout -b [branchname] [tagname] 在特定的标签上创建一个新分支：</p>
<pre><code>    $ git checkout -b version2 v2.0.0
</code></pre>
<p>Switched to a new branch ‘version2’</p>
<p>当然，如果在这之后又进行了一次提交，version2 分支会因为改动向前移动了，那么 version2 分支就会和 v2.0.0 标签稍微有些不同，这时就应该当心了。</p>
<p>修复已发布版本Bug<br><a target="_blank" rel="noopener" href="http://gepeiyu.com/2017/06/28/git-tag-oldversion-debug/">http://gepeiyu.com/2017/06/28/git-tag-oldversion-debug/</a></p>
<h5 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h5><p>经常有这样的事情发生，当你正在进行项目中某一部分的工作，里面的东西处于一个比较杂乱的状态，而你想转到其他分支上进行一些工作。问题是，你不想提交进行了一半的工作，否则以后你无法回到这个工作点。解决这个问题的办法就是<code>git stash</code>命令。</p>
<ol>
<li><p><code>git stash  save  &#39;暂存备注信息&#39; </code> //进入暂存状态,此时执行 git status 已经没有要提交的了</p>
</li>
<li><p>git checkout  切换到要修改的分支上 ,修改完</p>
</li>
<li><p>  完成后回到原来的开发分支上，git stash apply 获取最近暂存内容</p>
</li>
<li><p><code>git stash drop  stash@&#123;1&#125; </code></p>
<blockquote>
<p>apply 选项只尝试应用储藏的工作——储藏的内容仍然在栈上。要移除它，你可以运行 <code>git stash drop</code>，加上你希望移除的储藏的名字：</p>
</blockquote>
</li>
</ol>
<ul>
<li><p>git stash 可以进行多次暂存,多次存后 git stash list长下面这样,可以用 · git stash apply stash@{1}· 获取某次暂存的内容</p>
<blockquote>
<p>stash@{0}: WIP on dev: 3d01a6c Patient Entity数据库删除<br>stash@{1}: WIP on dev: b6a688e 跑起来提交</p>
</blockquote>
</li>
<li><p>取消储藏  <code>git stash show -p stash@&#123;0&#125; | git apply -R</code>  如果没指定具体的标签 取消最近的</p>
<p>这个和<code>git stash drop</code>的区别是 取消的是文件内容，stash标签还在</p>
<p><a target="_blank" rel="noopener" href="https://git-scm.com/docs/git-stash">https://git-scm.com/docs/git-stash</a></p>
<blockquote>
<p> 注意是 stash@{0}  不是  3d01a6c</p>
</blockquote>
<p>git branch 分支名 hash(历史版本)</p>
</li>
<li><p>update forked project</p>
<p> <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq1332479771/article/details/56087333">https://blog.csdn.net/qq1332479771/article/details/56087333</a> </p>
</li>
<li><p>获取暂存</p>
<blockquote>
<p>git stash apply stash@{0}   // don‘t remove stash</p>
<p>git stash pop stash@{0}</p>
</blockquote>
</li>
</ul>
<h5 id="SVN"><a href="#SVN" class="headerlink" title="SVN"></a>SVN</h5><ul>
<li>SVN不能添加文件:<a target="_blank" rel="noopener" href="https://blog.csdn.net/yujiayinshi/article/details/51381942">https://blog.csdn.net/yujiayinshi/article/details/51381942</a></li>
</ul>
<h5 id="github提速"><a href="#github提速" class="headerlink" title="github提速"></a>github提速</h5><p><a href="https://link.zhihu.com/?target=http://www.github.com/">www.github.com</a> 替换为   <a target="_blank" rel="noopener" href="http://www.github.com.cnpmjs.org/">www.github.com.cnpmjs.org</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/flutter/flutter.git">https://github.com/flutter/flutter.git</a></p>
<p>git clone <a target="_blank" rel="noopener" href="https://github.com.cnpmjs.org/love-flutter/flutter-column.git">https://github.com.cnpmjs.org/love-flutter/flutter-column.git</a></p>

        
        
          <blockquote id="copyright">
              <p>Enlace original: <a href="http://noteforme.github.io.com/page/14/index.html">http://noteforme.github.io.com/page/14/index.html</a></p>
              <p>Declaración de copyright: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/" rel="tag">Git</a></li></ul>

          
    <div class="social-share">
      <span>Cuota:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-hot-patch" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/17/hot-patch/">hot_patch（热更新）</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-17T07:25:56.000Z" itemprop="datePublished">2017年10月17日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2017/10/17/hot-patch/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Libro de visitas
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>为了预防项目紧急问题，使用热更新比发版要好点</p>
<h5 id="热更新选择"><a href="#热更新选择" class="headerlink" title="热更新选择"></a>热更新选择</h5><ul>
<li><p>VitrualApk  滴滴开源的方案，之前的dynamic-load-apk推动的热更新的发展,不过这个开源没多久，准备后面迁移到这上面来</p>
</li>
<li><p>Tinker-Bugly      这个很不错免费，就是只支持 冷启动，配合bugly教程用起来方便</p>
</li>
<li><p>sophix         这个支持热启动 配置也方便，不过5万设备以上就要收费，对于收费我觉得也无可厚非，毕竟是别人的劳动成果，</p>
<pre><code>           作为开发者的角度，还是开源最好，以后可以学习下。
</code></pre>
</li>
</ul>
<p>所以先选择Tinker-Bugly</p>
<h5 id="接入"><a href="#接入" class="headerlink" title="接入"></a>接入</h5><p> 按照<a target="_blank" rel="noopener" href="https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix/" title="bugly">接入文档</a> 配合Demo接入配置，然后就开始做自己的app 定义</p>
<ol>
<li>修改appid </li>
</ol>
<p> bugly平台申请后的 AppId</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里实现SDK初始化，appId替换成你的在Bugly平台申请的appId</span></span><br><span class="line">       <span class="comment">// 调试时，将第三个参数改为true</span></span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">Bugly</span>.</span></span>init(get<span class="constructor">Application()</span>, <span class="string">&quot;f7b6508f55&quot;</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<p> 第三个参数设置  log是否展示</p>
<ol start="2">
<li>tinkerId</li>
</ol>
<p>每次修改 基线版本和 补丁版本都要修改 tinkerId</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">tinkerId</span> = <span class="string">&quot;1.0.6-patch&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>点击 assembleDebug</li>
</ol>
<p>生成 基线版本</p>
<p><a target="_blank" rel="noopener" href="https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix-demo/">https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix-demo/</a></p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">实际应用中，请注意保存线上发布版本的基准apk包、mapping文件、<span class="type">R</span>.txt文件，如果线上版本有bug，就可以借助我们tinker-sup<span class="keyword">port</span>插件进行补丁包的生成。</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>修改 def baseApkDir , 修改 tinkerId</li>
</ol>
<ul>
<li>修改bug</li>
<li>baseApkDir是根据基线版本生成的目录</li>
<li>修改tinkerId</li>
</ul>
<ol start="5">
<li>编译patch包 </li>
</ol>
<p>  点击 buildTinkerPatchRelease，生成patch_signed_7zip.apk上传,然后重启就可以了</p>
<ol start="6">
<li>对于开发设备和全量设备</li>
</ol>
<p>修改</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//指定为开发设备</span></span><br><span class="line">   <span class="module-access"><span class="module"><span class="identifier">Bugly</span>.</span></span>set<span class="constructor">IsDevelopmentDevice(<span class="params">getApplication</span>()</span>,<span class="literal">true</span>);</span><br></pre></td></tr></table></figure>

<p> 参考 ：<br>  <a target="_blank" rel="noopener" href="https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix/">https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix/</a><br>  <a target="_blank" rel="noopener" href="https://github.com/Tencent/tinker">https://github.com/Tencent/tinker</a><br>  <a target="_blank" rel="noopener" href="https://github.com/BuglyDevTeam/Bugly-Android-Demo">https://github.com/BuglyDevTeam/Bugly-Android-Demo</a></p>
<h5 id="UncaughtExceptionHandler-Bugly冲突-不上报日志"><a href="#UncaughtExceptionHandler-Bugly冲突-不上报日志" class="headerlink" title="UncaughtExceptionHandler Bugly冲突 不上报日志"></a>UncaughtExceptionHandler Bugly冲突 不上报日志</h5><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/ZPCrobot/article/details/97390156">https://blog.csdn.net/ZPCrobot/article/details/97390156</a></p>
<h5 id="从零开始实现一个插件化框架"><a href="#从零开始实现一个插件化框架" class="headerlink" title="从零开始实现一个插件化框架"></a>从零开始实现一个插件化框架</h5><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_22090073/article/details/103946596">https://blog.csdn.net/qq_22090073/article/details/103946596</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/af8c47fabb12">https://www.jianshu.com/p/af8c47fabb12</a></p>

        
        
          <blockquote id="copyright">
              <p>Enlace original: <a href="http://noteforme.github.io.com/page/14/index.html">http://noteforme.github.io.com/page/14/index.html</a></p>
              <p>Declaración de copyright: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Cuota:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-ConstraintLayout" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-15T02:37:39.000Z" itemprop="datePublished">2017年10月15日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2017/10/15/ConstraintLayout/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Libro de visitas
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h5 id="introduce"><a href="#introduce" class="headerlink" title="introduce"></a>introduce</h5><p><a target="_blank" rel="noopener" href="https://developer.android.com/reference/androidx/constraintlayout/widget/ConstraintLayout">https://developer.android.com/reference/androidx/constraintlayout/widget/ConstraintLayout</a></p>
<h5 id="Here-is-the-list-of-available-constraints-Fig-2"><a href="#Here-is-the-list-of-available-constraints-Fig-2" class="headerlink" title="Here is the list of available constraints (Fig. 2):"></a>Here is the list of available constraints (Fig. 2):</h5><p>layout_constraintLeft_toLeftOf<br>layout_constraintLeft_toRightOf<br>layout_constraintRight_toLeftOf<br>layout_constraintRight_toRightOf<br>layout_constraintTop_toTopOf<br>layout_constraintTop_toBottomOf<br>layout_constraintBottom_toTopOf<br>layout_constraintBottom_toBottomOf<br>layout_constraintBaseline_toBaselineOf         //元素对齐<br>layout_constraintStart_toEndOf        控件开始位置 相对另一控件的结束位置<br>layout_constraintStart_toStartOf<br>layout_constraintEnd_toStartOf<br>layout_constraintEnd_toEndOf</p>
<p>They all take a reference id to another widget, or the parent (which will reference the parent container, i.e. the ConstraintLayout):</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button android:<span class="attribute">id</span>=<span class="string">&quot;@+id/buttonB&quot;</span> <span class="built_in">..</span>.</span><br><span class="line">                 app:<span class="attribute">layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>layout_constraintBaseline_toBaselineOf : 表示此控件与某个空间水平对齐</p>
<h5 id="Margins"><a href="#Margins" class="headerlink" title="Margins"></a>Margins</h5><p>If side margins are set, they will be applied to the corresponding constraints (if they exist) (Fig. 3), enforcing the margin as a space between the target and the source side. The usual layout margin attributes can be used to this effect:</p>
<p>android:layout_marginStart<br>android:layout_marginEnd<br>android:layout_marginLeft<br>android:layout_marginTop<br>android:layout_marginRight<br>android:layout_marginBottom<br>Note that a margin can only be positive or equals to zero, and takes a Dimension.</p>
<p>Margins when connected to a GONE widget<br>When a position constraint target’s visibility is View.GONE, you can also indicate a different margin value to be used using the following attributes:</p>
<p>layout_goneMarginStart<br>layout_goneMarginEnd<br>layout_goneMarginLeft<br>layout_goneMarginTop<br>layout_goneMarginRight<br>layout_goneMarginBottom</p>
<p>Centering positioning and bias<br>A useful aspect of ConstraintLayout is in how it deals with “impossible” constrains. For example, if we have something like:</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;android.support.constraint.ConstraintLayout <span class="built_in">..</span>.&gt;</span><br><span class="line">  &lt;Button android:<span class="attribute">id</span>=<span class="string">&quot;@+id/button&quot;</span> <span class="built_in">..</span>.</span><br><span class="line">      app:<span class="attribute">layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span><br><span class="line">      app:<span class="attribute">layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent/&gt;</span></span><br><span class="line"><span class="string">&lt;/&gt;</span></span><br><span class="line"><span class="string">         </span></span><br></pre></td></tr></table></figure>

<h5 id="Start-End"><a href="#Start-End" class="headerlink" title="Start_End"></a>Start_End</h5><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml <span class="keyword">version</span>=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;android.support.<span class="keyword">constraint</span>.ConstraintLayout</span><br><span class="line">    xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="line">    xmlns:<span class="keyword">app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;match_parent&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//全局居中</span></span><br><span class="line">    &lt;android.support.v7.widget.AppCompatButton</span><br><span class="line">        android:id=<span class="string">&quot;@+id/button1&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;100dp&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;100dp&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;button1&quot;</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintBottom_toBottomOf=<span class="string">&quot;parent&quot;</span> <span class="comment">//底部以父布局的底部为约束</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintEnd_toEndOf=<span class="string">&quot;parent&quot;</span> <span class="comment">//右侧结束以父布局的右侧为约束</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintStart_toStartOf=<span class="string">&quot;parent&quot;</span> <span class="comment">//左侧起始以父布局的左侧为约束</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintTop_toTopOf=<span class="string">&quot;parent&quot;</span>/&gt; <span class="comment">//顶部以父布局的顶部为约束</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;android.support.v7.widget.AppCompatButton</span><br><span class="line">        android:id=<span class="string">&quot;@+id/button2&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;100dp&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;100dp&quot;</span></span><br><span class="line">        android:layout_marginLeft=<span class="string">&quot;30dp&quot;</span></span><br><span class="line">        android:layout_marginTop=<span class="string">&quot;30dp&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;button2&quot;</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintStart_toStartOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintTop_toTopOf=<span class="string">&quot;parent&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 以 button2 为约束的纵向居中</span></span><br><span class="line">    &lt;android.support.v7.widget.AppCompatButton</span><br><span class="line">        android:id=<span class="string">&quot;@+id/button3&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;button3&quot;</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintBottom_toBottomOf=<span class="string">&quot;@id/button2&quot;</span> <span class="comment">//底部以button2的底部为约束</span></span><br><span class="line">        <span class="keyword">app</span>:layout_constraintStart_toEndOf=<span class="string">&quot;@id/button2&quot;</span> </span><br><span class="line">        <span class="keyword">app</span>:layout_constraintTop_toTopOf=<span class="string">&quot;@id/button2&quot;</span>/&gt;  <span class="comment">//顶部以button2的顶部为约束</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/android.support.<span class="keyword">constraint</span>.ConstraintLayout&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h5 id="Guideline使用"><a href="#Guideline使用" class="headerlink" title="Guideline使用"></a>Guideline使用</h5><p><a target="_blank" rel="noopener" href="https://developer.android.com/reference/android/support/constraint/Guideline.html">https://developer.android.com/reference/android/support/constraint/Guideline.html</a></p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">app:</span>layout_constraintGuide_percent=<span class="string">&quot;0.2&quot;</span></span><br><span class="line"><span class="symbol">app:</span>layout_constraintGuide_begin=<span class="string">&quot;100dp&quot;</span></span><br></pre></td></tr></table></figure>

<h5 id="特色属性"><a href="#特色属性" class="headerlink" title="特色属性"></a>特色属性</h5><ul>
<li><p>layout_constraintDimensionRatio</p>
<p>指定高度，宽度随着宽高比自适应</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;ImageView</span><br><span class="line">    android:<span class="attribute">id</span>=<span class="string">&quot;@+id/iv_img01&quot;</span></span><br><span class="line">    android:<span class="attribute">layout_width</span>=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">    android:<span class="attribute">layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">    android:<span class="attribute">src</span>=<span class="string">&quot;@mipmap/img_1&quot;</span></span><br><span class="line">    app:<span class="attribute">layout_constraintDimensionRatio</span>=<span class="string">&quot;1:1&quot;</span></span><br><span class="line">    app:<span class="attribute">layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<!--指定高度，宽度随着宽高比自适应 app:layout_constraintDimensionRatio="H,16:9"  H: 表示高宽比-->     </li>
<li><p>layout_constraintHorizontal_bias  先设置约束</p>
</li>
</ul>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">app:</span>layout_constraintLeft_toLeftOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line"><span class="symbol">app:</span>layout_constraintRight_toRightOf=<span class="string">&quot;parent&quot;</span></span><br></pre></td></tr></table></figure>

<h5 id="然后是比例"><a href="#然后是比例" class="headerlink" title="然后是比例"></a>然后是比例</h5><h5 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h5><ul>
<li>居中显示 : 四个方向添加约束</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.ConstraintLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/constraint_layout&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:background=&quot;@color/white&quot;</span><br><span class="line">        app:layout_constraintBottom_toBottomOf=&quot;@+id/constraint_layout&quot;</span><br><span class="line">        app:layout_constraintEnd_toEndOf=&quot;@id/constraint_layout&quot;</span><br><span class="line">        app:layout_constraintStart_toStartOf=&quot;@id/constraint_layout&quot;</span><br><span class="line">        app:layout_constraintTop_toTopOf=&quot;@+id/constraint_layout&quot;&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.constraint.ConstraintLayout</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>相对邻里控件 居中</li>
</ul>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;android.support.constraint.ConstraintLayout</span><br><span class="line">    android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:layout_height=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:paddingLeft=<span class="string">&quot;@dimen/dimen_16&quot;</span></span><br><span class="line">    android:paddingRight=<span class="string">&quot;@dimen/dimen_16&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id=<span class="string">&quot;@+id/tv_calculate_date&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:background=<span class="string">&quot;@drawable/bg_rectangle_blue&quot;</span></span><br><span class="line">        android:paddingBottom=<span class="string">&quot;4dp&quot;</span></span><br><span class="line">        android:paddingLeft=<span class="string">&quot;@dimen/dimen_16&quot;</span></span><br><span class="line">        android:paddingRight=<span class="string">&quot;@dimen/dimen_16&quot;</span></span><br><span class="line">        android:paddingTop=<span class="string">&quot;4dp&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;三个月&quot;</span></span><br><span class="line">        android:textColor=<span class="string">&quot;@color/white&quot;</span></span><br><span class="line">        android:textSize=<span class="string">&quot;@dimen/text_size_12&quot;</span></span><br><span class="line">        app:layout_constraintStart_toStartOf=<span class="string">&quot;parent&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id=<span class="string">&quot;@+id/tv_calculate_money&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_marginLeft=<span class="string">&quot;@dimen/dimen_16&quot;</span></span><br><span class="line">        android:text=<span class="string">&quot;￥ 2000&quot;</span></span><br><span class="line">        android:textColor=<span class="string">&quot;#0097fc&quot;</span></span><br><span class="line">        android:textSize=<span class="string">&quot;@dimen/text_size_12&quot;</span></span><br><span class="line">        app:layout_constraintBottom_toBottomOf=<span class="string">&quot;@+id/tv_calculate_date&quot;</span></span><br><span class="line">        app:layout_constraintTop_toTopOf=<span class="string">&quot;@+id/tv_calculate_date&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/android.support.constraint.ConstraintLayout&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h5 id="chain"><a href="#chain" class="headerlink" title="chain"></a>chain</h5><p> 3个Button 两两依赖,相当于组成了一个链</p>
<ul>
<li>Button均分 width = match_constraint (0dp)</li>
</ul>
<p> <img src="/2017/10/15/ConstraintLayout/ConstraintLayout_000.png" alt="图"></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">       android:<span class="attribute">id</span>=<span class="string">&quot;@+id/bt_00&quot;</span></span><br><span class="line">       android:<span class="attribute">layout_width</span>=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">       android:<span class="attribute">layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">       android:<span class="attribute">text</span>=<span class="string">&quot;Button_00&quot;</span></span><br><span class="line">       app:<span class="attribute">layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span><br><span class="line">       app:<span class="attribute">layout_constraintRight_toLeftOf</span>=<span class="string">&quot;@+id/bt_01&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">   &lt;Button</span><br><span class="line">       android:<span class="attribute">id</span>=<span class="string">&quot;@+id/bt_01&quot;</span></span><br><span class="line">       android:<span class="attribute">layout_width</span>=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">       android:<span class="attribute">layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">       android:<span class="attribute">text</span>=<span class="string">&quot;Button_01&quot;</span></span><br><span class="line">       app:<span class="attribute">layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/bt_00&quot;</span></span><br><span class="line">       app:<span class="attribute">layout_constraintRight_toLeftOf</span>=<span class="string">&quot;@+id/bt_02&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">   &lt;Button</span><br><span class="line">       android:<span class="attribute">id</span>=<span class="string">&quot;@+id/bt_02&quot;</span></span><br><span class="line">       android:<span class="attribute">layout_width</span>=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">       android:<span class="attribute">layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">       android:<span class="attribute">text</span>=<span class="string">&quot;Button_02&quot;</span></span><br><span class="line">       app:<span class="attribute">layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/bt_01&quot;</span></span><br><span class="line">       app:<span class="attribute">layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<h2 id="app-layout-constraintHorizontal-weight-quot-2-quot"><a href="#app-layout-constraintHorizontal-weight-quot-2-quot" class="headerlink" title="  app:layout_constraintHorizontal_weight=&quot;2&quot;"></a><code>  app:layout_constraintHorizontal_weight=&quot;2&quot;</code></h2><p>看属性也可以猜到是干嘛用的了.<br><img src="/2017/10/15/ConstraintLayout/ConstraintLayout_001.png" alt="宽度为wrap_content"></p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;androidx.constraintlayout.widget.ConstraintLayout</span><br><span class="line">       android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">       <span class="keyword">app</span>:layout_constraintTop_toBottomOf=<span class="string">&quot;@+id/guideline_00&quot;</span></span><br><span class="line">       android:layout_height=<span class="string">&quot;wrap_content&quot;</span>&gt;</span><br><span class="line">       &lt;Button</span><br><span class="line">           android:id=<span class="string">&quot;@+id/bt_00&quot;</span></span><br><span class="line">           android:layout_width=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">           android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">           android:text=<span class="string">&quot;Button_00&quot;</span></span><br><span class="line">           <span class="keyword">app</span>:layout_constraintHorizontal_weight=<span class="string">&quot;2&quot;</span></span><br><span class="line">           <span class="keyword">app</span>:layout_constraintLeft_toLeftOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">           <span class="keyword">app</span>:layout_constraintRight_toLeftOf=<span class="string">&quot;@+id/bt_01&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">       &lt;Button</span><br><span class="line">           android:id=<span class="string">&quot;@+id/bt_01&quot;</span></span><br><span class="line">           android:layout_width=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">           android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">           android:text=<span class="string">&quot;Button_01&quot;</span></span><br><span class="line">           <span class="keyword">app</span>:layout_constraintHorizontal_weight=<span class="string">&quot;1&quot;</span></span><br><span class="line">           <span class="keyword">app</span>:layout_constraintLeft_toRightOf=<span class="string">&quot;@+id/bt_00&quot;</span></span><br><span class="line">           <span class="keyword">app</span>:layout_constraintRight_toLeftOf=<span class="string">&quot;@+id/bt_02&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">       &lt;Button</span><br><span class="line">           android:id=<span class="string">&quot;@+id/bt_02&quot;</span></span><br><span class="line">           android:layout_width=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">           android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">           <span class="keyword">app</span>:layout_constraintHorizontal_weight=<span class="string">&quot;1&quot;</span></span><br><span class="line">           android:text=<span class="string">&quot;Button_02&quot;</span></span><br><span class="line">           <span class="keyword">app</span>:layout_constraintLeft_toRightOf=<span class="string">&quot;@+id/bt_01&quot;</span></span><br><span class="line">           <span class="keyword">app</span>:layout_constraintRight_toRightOf=<span class="string">&quot;parent&quot;</span> /&gt;</span><br><span class="line">   &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span><br></pre></td></tr></table></figure>







<ul>
<li>Button均份　宽度不为match_constraint</li>
</ul>
<p><img src="/2017/10/15/ConstraintLayout/ConstraintLayout_10.png" alt="宽度为wrap_content"></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">           android:<span class="attribute">id</span>=<span class="string">&quot;@+id/bt_10&quot;</span></span><br><span class="line">           android:<span class="attribute">layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">           android:<span class="attribute">layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">           android:<span class="attribute">text</span>=<span class="string">&quot;Button_00&quot;</span></span><br><span class="line">           app:<span class="attribute">layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span><br><span class="line">           app:<span class="attribute">layout_constraintRight_toLeftOf</span>=<span class="string">&quot;@+id/bt_11&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">       &lt;Button</span><br><span class="line">           android:<span class="attribute">id</span>=<span class="string">&quot;@+id/bt_11&quot;</span></span><br><span class="line">           android:<span class="attribute">layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">           android:<span class="attribute">layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">           android:<span class="attribute">text</span>=<span class="string">&quot;Button_01&quot;</span></span><br><span class="line">           app:<span class="attribute">layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/bt_10&quot;</span></span><br><span class="line">           app:<span class="attribute">layout_constraintRight_toLeftOf</span>=<span class="string">&quot;@+id/bt_12&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">       &lt;Button</span><br><span class="line">           android:<span class="attribute">id</span>=<span class="string">&quot;@+id/bt_12&quot;</span></span><br><span class="line">           android:<span class="attribute">layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">           android:<span class="attribute">layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">           android:<span class="attribute">text</span>=<span class="string">&quot;Button_02&quot;</span></span><br><span class="line">           app:<span class="attribute">layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/bt_11&quot;</span></span><br><span class="line">           app:<span class="attribute">layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>layout_constraintHorizontal_chainStyle</p>
<p>  这个属性默认是　spread，还有另外两种方式 packed 和spread_inside</p>
</li>
<li><p>packed</p>
</li>
</ul>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">          android:<span class="attribute">id</span>=<span class="string">&quot;@+id/bt_20&quot;</span></span><br><span class="line">          android:<span class="attribute">layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          android:<span class="attribute">layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          android:<span class="attribute">text</span>=<span class="string">&quot;Button_20&quot;</span></span><br><span class="line">          app:<span class="attribute">layout_constraintHorizontal_chainStyle</span>=<span class="string">&quot;packed&quot;</span></span><br><span class="line">          app:<span class="attribute">layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span><br><span class="line">          app:<span class="attribute">layout_constraintRight_toLeftOf</span>=<span class="string">&quot;@+id/bt_21&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">      &lt;Button</span><br><span class="line">          android:<span class="attribute">id</span>=<span class="string">&quot;@+id/bt_21&quot;</span></span><br><span class="line">          android:<span class="attribute">layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          android:<span class="attribute">layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          android:<span class="attribute">text</span>=<span class="string">&quot;Button_21&quot;</span></span><br><span class="line">          app:<span class="attribute">layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/bt_20&quot;</span></span><br><span class="line">          app:<span class="attribute">layout_constraintRight_toLeftOf</span>=<span class="string">&quot;@+id/bt_22&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">      &lt;Button</span><br><span class="line">          android:<span class="attribute">id</span>=<span class="string">&quot;@+id/bt_22&quot;</span></span><br><span class="line">          android:<span class="attribute">layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          android:<span class="attribute">layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          android:<span class="attribute">text</span>=<span class="string">&quot;Button_22&quot;</span></span><br><span class="line">          app:<span class="attribute">layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/bt_21&quot;</span></span><br><span class="line">          app:<span class="attribute">layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>


<p><img src="/2017/10/15/ConstraintLayout/ConstraintLayout_20.png" alt="宽度为wrap_content"></p>
<ul>
<li><p>spread_inside     :  width = wrap_content<br>  <img src="/2017/10/15/ConstraintLayout/ConstraintLayout_300.png" alt="宽度为wrap_content"></p>
</li>
<li><p>spread_inside     :  width = 0dp<br>  <img src="/2017/10/15/ConstraintLayout/ConstraintLayout_301.png" alt="宽度为wrap_content"></p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://45.77.222.97:3000/root/MineUtils/src/master/app/src/main/java/com/jonzhou/mineutils/layout">代码</a> </p>
<ul>
<li>概述</li>
</ul>
<p>经过上面的实践，再来张官方的图就好理解了<br><img src="/2017/10/15/ConstraintLayout/constraint-chain-styles_2x.png" alt="宽度为wrap_content"></p>
<blockquote>
<p>1、 Spread: The views are evenly distributed (after margins are accounted for). This is the default.<br>2 、 Spread inside: The first and last view are affixed to the constraints on each end of the chain and the rest are evenly distributed.<br>３、Weighted: When the chain is set to either spread or spread inside, you can fill the remaining space by setting one or more views to “match constraints” (0dp). By default, the space is evenly distributed between each view that’s set to “match constraints,” but you can assign a weight of importance to each view using the layout_constraintHorizontal_weight and layout_constraintVertical_weight attributes. If you’re familiar with layout_weight in a linear layout, this works the same way. So the view with the highest weight value gets the most amount of space; views that have the same weight get the same amount of space.<br>４、Packed: The views are packed together (after margins are accounted for). You can then adjust the whole chain’s bias (left/right or up/down) by changing the chain’s head view bias.</p>
</blockquote>
<p>参考:<a target="_blank" rel="noopener" href="https://developer.android.com/training/constraint-layout/index.html">https://developer.android.com/training/constraint-layout/index.html</a><br>最后就是边应用边理解了</p>
<h5 id="Barrier"><a href="#Barrier" class="headerlink" title="Barrier"></a>Barrier</h5><p>用于控制 Barrier 相对于给定的 View 的位置， app:barrierDirection=”right”,表示barrier在constraint_referenced_ids给定ID的右侧,constraint_referenced_ids的id就是左侧的这些控件</p>
<p>输入信息挺有用的 </p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/QIuww9b0TsNjajEUS8c2fg">https://mp.weixin.qq.com/s/QIuww9b0TsNjajEUS8c2fg</a></p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">&lt;android.support.<span class="keyword">constraint</span>.ConstraintLayout</span><br><span class="line">      android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">      android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">      android:layout_margin=<span class="string">&quot;@dimen/dimen_11&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">      &lt;TextView</span><br><span class="line">          android:id=<span class="string">&quot;@+id/tv_order_num&quot;</span></span><br><span class="line">          android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          android:text=<span class="string">&quot;订单编号：10002220000001234&quot;</span></span><br><span class="line">          android:textColor=<span class="string">&quot;#ff999999&quot;</span></span><br><span class="line">          android:textSize=<span class="string">&quot;19sp&quot;</span></span><br><span class="line">          <span class="keyword">app</span>:layout_constraintTop_toTopOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">          <span class="keyword">app</span>:layout_constraintStart_toStartOf=<span class="string">&quot;parent&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">      &lt;TextView</span><br><span class="line">          android:id=<span class="string">&quot;@+id/tv_order_pro&quot;</span></span><br><span class="line">          android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          android:layout_marginTop=<span class="string">&quot;@dimen/dimen_11&quot;</span></span><br><span class="line">          android:text=<span class="string">&quot;订购产品：爱达康高血压监护服务&quot;</span></span><br><span class="line">          android:textColor=<span class="string">&quot;#ff666666&quot;</span></span><br><span class="line">          android:textSize=<span class="string">&quot;21sp&quot;</span></span><br><span class="line">          <span class="keyword">app</span>:layout_constraintLeft_toLeftOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">          <span class="keyword">app</span>:layout_constraintTop_toBottomOf=<span class="string">&quot;@+id/tv_order_num&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">      &lt;TextView</span><br><span class="line">          android:id=<span class="string">&quot;@+id/tv_service_team&quot;</span></span><br><span class="line">          android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          android:text=<span class="string">&quot;服务团队：爱达康远程监护团队&quot;</span></span><br><span class="line">          android:textColor=<span class="string">&quot;#ff666666&quot;</span></span><br><span class="line">          android:textSize=<span class="string">&quot;21sp&quot;</span></span><br><span class="line">          <span class="keyword">app</span>:layout_constraintLeft_toLeftOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">          <span class="keyword">app</span>:layout_constraintTop_toBottomOf=<span class="string">&quot;@+id/tv_order_pro&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">      &lt;TextView</span><br><span class="line">          android:id=<span class="string">&quot;@+id/tv_period_valid&quot;</span></span><br><span class="line">          android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          android:text=<span class="string">&quot;有效期：2019-03-01至2019-12-31&quot;</span></span><br><span class="line">          android:textColor=<span class="string">&quot;#ff999999&quot;</span></span><br><span class="line">          android:textSize=<span class="string">&quot;19sp&quot;</span></span><br><span class="line">          <span class="keyword">app</span>:layout_constraintStart_toEndOf=<span class="string">&quot;@+id/barrier&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">      &lt;TextView</span><br><span class="line">          android:id=<span class="string">&quot;@+id/tv_order_time&quot;</span></span><br><span class="line">          android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          android:layout_marginTop=<span class="string">&quot;@dimen/dimen_11&quot;</span></span><br><span class="line">          android:text=<span class="string">&quot;订购时间：2019-03-11 12:00:00&quot;</span></span><br><span class="line">          android:textColor=<span class="string">&quot;#ff666666&quot;</span></span><br><span class="line">          android:textSize=<span class="string">&quot;21sp&quot;</span></span><br><span class="line">          <span class="keyword">app</span>:layout_constraintStart_toEndOf=<span class="string">&quot;@+id/barrier&quot;</span></span><br><span class="line">          <span class="keyword">app</span>:layout_constraintTop_toBottomOf=<span class="string">&quot;@+id/tv_period_valid&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">      &lt;TextView</span><br><span class="line">          android:id=<span class="string">&quot;@+id/tv_order_count&quot;</span></span><br><span class="line">          android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          android:text=<span class="string">&quot;订购数量：500次&quot;</span></span><br><span class="line">          android:textColor=<span class="string">&quot;#ff666666&quot;</span></span><br><span class="line">          android:textSize=<span class="string">&quot;21sp&quot;</span></span><br><span class="line">          <span class="keyword">app</span>:layout_constraintStart_toEndOf=<span class="string">&quot;@+id/barrier&quot;</span></span><br><span class="line">          <span class="keyword">app</span>:layout_constraintTop_toBottomOf=<span class="string">&quot;@+id/tv_order_time&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      &lt;android.support.<span class="keyword">constraint</span>.Barrier</span><br><span class="line">          android:id=<span class="string">&quot;@+id/barrier&quot;</span></span><br><span class="line">          android:layout_width=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">          <span class="keyword">app</span>:barrierDirection=<span class="string">&quot;right&quot;</span></span><br><span class="line">          <span class="keyword">app</span>:constraint_referenced_ids=<span class="string">&quot;tv_order_num,tv_order_pro,tv_service_team&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/android.support.<span class="keyword">constraint</span>.ConstraintLayout&gt;</span><br></pre></td></tr></table></figure>



<p>对chain讲解详细<br><a target="_blank" rel="noopener" href="http://blog.csdn.net/zxt0601/article/details/72683379">http://blog.csdn.net/zxt0601/article/details/72683379</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lmj623565791/article/details/78011599">https://blog.csdn.net/lmj623565791/article/details/78011599</a></p>
<h5 id="Group"><a href="#Group" class="headerlink" title="Group"></a>Group</h5><p>​        </p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;androidx.constraintlayout.widget.Group</span><br><span class="line">      android:<span class="attribute">id</span>=<span class="string">&quot;@+id/gp_1&quot;</span></span><br><span class="line">      android:<span class="attribute">layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">      android:<span class="attribute">layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">      android:<span class="attribute">visibility</span>=<span class="string">&quot;gone&quot;</span></span><br><span class="line">      app:<span class="attribute">constraint_referenced_ids</span>=<span class="string">&quot;cl_h4,cl_h2&quot;</span> /&gt;</span><br><span class="line">   </span><br></pre></td></tr></table></figure>

<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">((Group)find<span class="constructor">ViewById(R.<span class="params">id</span>.<span class="params">gp_1</span>)</span>).set<span class="constructor">Visibility(View.GONE)</span>;</span><br></pre></td></tr></table></figure>

<p>​    <code>findViewById(R.id.gp_2).setVisibility(View.INVISIBLE);  doesnt not work</code></p>

        
        
          <blockquote id="copyright">
              <p>Enlace original: <a href="http://noteforme.github.io.com/page/14/index.html">http://noteforme.github.io.com/page/14/index.html</a></p>
              <p>Declaración de copyright: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ConstraintLayout/" rel="tag">ConstraintLayout</a></li></ul>

          
    <div class="social-share">
      <span>Cuota:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-tool-miflash" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/13/tool-miflash/">tool_pc_phone</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-13T15:22:47.000Z" itemprop="datePublished">2017年10月13日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/TOOL/">TOOL</a>
  </div>

      
      
<a href="/2017/10/13/tool-miflash/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Libro de visitas
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="mi救砖"><a href="#mi救砖" class="headerlink" title="mi救砖"></a>mi救砖</h2><p>前两天不小心把　新买的小米４给刷成黑砖了，我的操作是<br><strong>双击磁盘模式工具目录里的“清除fastboot进磁盘操作.bat”进入磁盘模式</strong><br> 使用这种方式把fastboot清掉了，然后手机都没法进入fastboot模式，插入电脑无法识别</p>
<h1 id="我的方法"><a href="#我的方法" class="headerlink" title="我的方法"></a>我的方法</h1><h2 id="进入方法三：通过线刷升级"><a href="#进入方法三：通过线刷升级" class="headerlink" title="进入方法三：通过线刷升级"></a>进入方法三：通过线刷升级</h2><p>　　点以下链接 <a target="_blank" rel="noopener" href="http://www.miui.com/shuaji-393.html,%E4%B8%8B%E8%BD%BD%E9%80%9A%E7%94%A8%E5%88%B7%E6%9C%BA%E5%B7%A5%E5%85%B7%EF%BC%8C%E5%AE%89%E8%A3%85%E5%90%8E">http://www.miui.com/shuaji-393.html,下载通用刷机工具，安装后</a>(需要<br>　　一段时间)，插上已成砖手机，windows设备管理器　端口我的显示9006
　　</p>
<h2 id="下载fastboot完整包"><a href="#下载fastboot完整包" class="headerlink" title="下载fastboot完整包"></a>下载fastboot完整包</h2><pre><code>   也是在上面链接路径下面
</code></pre>
<h2 id="下载-miflash"><a href="#下载-miflash" class="headerlink" title="下载 miflash"></a>下载 miflash</h2><p>   我下载的是15版的miflash　新版 .bat文件不同会报各种错误<br>    链接: <a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1pKPLJdD">https://pan.baidu.com/s/1pKPLJdD</a> 密码: 94mi</p>
<h2 id="救活"><a href="#救活" class="headerlink" title="救活"></a>救活</h2><p>  选择下载的fastboot包，刷机，然后是等待</p>
<p>   看到一篇文章高通下教程　<a target="_blank" rel="noopener" href="http://www.miui.com/thread-2689657-1-1.html">http://www.miui.com/thread-2689657-1-1.html</a></p>
<h2 id="Thinkpad更换固态硬盘"><a href="#Thinkpad更换固态硬盘" class="headerlink" title="Thinkpad更换固态硬盘"></a>Thinkpad更换固态硬盘</h2><ul>
<li>视频教程:</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://v.qq.com/x/page/k0157zxhob1.html">https://v.qq.com/x/page/k0157zxhob1.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=Qgh5v6ccMOg">https://www.youtube.com/watch?v=Qgh5v6ccMOg</a></p>
<p><a target="_blank" rel="noopener" href="http://v.youku.com/v_show/id_XMzE3NTU5MjA4OA==.html?spm=a2hzp.8244740.0.0">http://v.youku.com/v_show/id_XMzE3NTU5MjA4OA==.html?spm=a2hzp.8244740.0.0</a></p>
<ul>
<li>文字教程:</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://www.xinxunwei.com/bjbcj/2016/0119/5261.html">http://www.xinxunwei.com/bjbcj/2016/0119/5261.html</a></p>
<ul>
<li>Ubuntu系统安装:</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/dkh_321/article/details/79304377">https://blog.csdn.net/dkh_321/article/details/79304377</a></p>
<p>　　</p>

        
        
          <blockquote id="copyright">
              <p>Enlace original: <a href="http://noteforme.github.io.com/page/14/index.html">http://noteforme.github.io.com/page/14/index.html</a></p>
              <p>Declaración de copyright: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Cuota:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Toolbar" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/12/Toolbar/">Toolbar</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-12T08:35:05.000Z" itemprop="datePublished">2017年10月12日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2017/10/12/Toolbar/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Libro de visitas
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="官网教程"><a href="#官网教程" class="headerlink" title="官网教程"></a>官网教程</h4><p> <a target="_blank" rel="noopener" href="https://developer.android.com/training/appbar/setting-up.html?hl=zh-cn">https://developer.android.com/training/appbar/setting-up.html?hl=zh-cn</a></p>
<h5 id="toolbar整体设置"><a href="#toolbar整体设置" class="headerlink" title="toolbar整体设置"></a>toolbar整体设置</h5><p> <img src="/2017/10/12/Toolbar/tool_color.png" alt="tool设置"></p>
<p> 参考:<a target="_blank" rel="noopener" href="http://blog.csdn.net/a553181867/article/details/51336899">http://blog.csdn.net/a553181867/article/details/51336899</a></p>
<h5 id="颜色设置"><a href="#颜色设置" class="headerlink" title="颜色设置"></a>颜色设置</h5><p>  AppTheme下的设置</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;application</span><br><span class="line">      android:<span class="attribute">name</span>=<span class="string">&quot;.application.NBBApplication&quot;</span></span><br><span class="line">      android:<span class="attribute">allowBackup</span>=<span class="string">&quot;true&quot;</span></span><br><span class="line">      android:<span class="attribute">icon</span>=<span class="string">&quot;@mipmap/icon&quot;</span></span><br><span class="line">      android:<span class="attribute">label</span>=<span class="string">&quot;@string/app_name&quot;</span></span><br><span class="line">      android:<span class="attribute">supportsRtl</span>=<span class="string">&quot;true&quot;</span></span><br><span class="line">      android:<span class="attribute">theme</span>=<span class="string">&quot;@style/AppTheme&quot;</span>&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>Toolbar颜色:<br><code>&lt;item name=&quot;colorPrimary&quot;&gt;@color/toolbar_color&lt;/item&gt;</code></p>
</li>
<li><p>状态栏设置 :<br><code>&lt;item name=&quot;android:windowTranslucentStatus&quot;&gt;true&lt;/item&gt;</code><br> 在 API 19 及更高版本上，Toolbar 内容延伸至状态栏上去了, statebar把toolbar给覆盖了<br> 要解决这个问题就需要下面的属性</p>
</li>
<li><p>android:fitsSystemWindows =”true”<br>  这个属性能保持与statebar一定 的padding,能解决上面windowTranslucentStatus的重叠问题</p>
<p>   参考: <a target="_blank" rel="noopener" href="http://yifeng.studio/2017/02/19/android-statusbar/">亦枫</a> </p>
</li>
<li><p>去掉阴影线</p>
<p>   toolbar底部会有一条阴影线,通过AppBarLayout标签下的app:elevation=”0dp”去掉</p>
</li>
</ul>
<h5 id="自定义返回键"><a href="#自定义返回键" class="headerlink" title="自定义返回键"></a>自定义返回键</h5><p><code> mToolbar.setNavigationIcon(R.mipmap.ic_back);//自定义返回键</code></p>
<p>或者这样设置<br> <code>app:navigationIcon=&quot;@mipmap/ic_back&quot;</code></p>
<h5 id="toolbar-xml解读"><a href="#toolbar-xml解读" class="headerlink" title="toolbar.xml解读"></a>toolbar.xml解读</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.design.widget.AppBarLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:elevation</span>=<span class="string">&quot;0dp&quot;</span>&gt;</span>                    			 //设置仰角,0dp可以去掉底部的线</span><br><span class="line"></span><br><span class="line">    &lt;android.support.v7.widget.Toolbar</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;?attr/actionBarSize&quot;</span><br><span class="line">        android:minHeight=&quot;?actionBarSize&quot;</span><br><span class="line">        android:theme=&quot;@style/ThemeOverlay.AppCompat.ActionBar&quot;			//toolbar主题</span><br><span class="line">        app:popupTheme=&quot;@style/ThemeOverlay.AppCompat.Light&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:id=&quot;@+id/tb_title&quot;</span><br><span class="line">            style=&quot;@style/TextAppearance.AppCompat.Widget.ActionBar.Title&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_gravity=&quot;center&quot;</span><br><span class="line">            android:text=&quot;标题&quot;</span><br><span class="line">            android:textColor=&quot;#333333&quot;</span><br><span class="line">            android:textSize=&quot;18sp&quot; /&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.v7.widget.Toolbar</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.design.widget.AppBarLayout</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>








<p>还有一种方式是在application设置，这样就不用集成baseActivity<br><a target="_blank" rel="noopener" href="https://www.diycode.cc/topics/783">https://www.diycode.cc/topics/783</a></p>
<h4 id="menu设置"><a href="#menu设置" class="headerlink" title="menu设置"></a>menu设置</h4><p>AppBarLayout下的 <code>app:theme=&quot;@style/toolbar_menu&quot;</code>用于设置menu</p>
<h5 id="menu字体颜色"><a href="#menu字体颜色" class="headerlink" title="menu字体颜色"></a>menu字体颜色</h5><p>需要设置 app:theme ,用 android:theme不起作用.</p>
<p><code>&lt;item name=&quot;android:actionMenuTextColor&quot;&gt;@color/text_my_black&lt;/item&gt;</code></p>
<h5 id="menu事件"><a href="#menu事件" class="headerlink" title="menu事件"></a>menu事件</h5><pre><code>@Override
public boolean onCreateOptionsMenu(Menu menu) &#123;
    getMenuInflater().inflate(R.menu.menu_login, menu);
    menu.findItem(R.id.item_right_text).setTitle(&quot;注册&quot;); //设置文字
    return true;
&#125;

@Override
public boolean onOptionsItemSelected(MenuItem item) &#123;
    switch (item.getItemId()) &#123;
        
            break;
    &#125;
    return super.onOptionsItemSelected(item);
&#125;
</code></pre>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/guyuealian/article/details/51721167">https://blog.csdn.net/guyuealian/article/details/51721167</a></p>
<h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><p>使用toolbar过程中遇到了一些问题</p>
<ul>
<li>问题 1</li>
</ul>
<p>弹出键盘后 editext不见了，应该是toolbar被拉伸了</p>
<p>暂时解决方式:</p>
<pre><code>     &lt;activity
        android:name=&quot;.activity.WebActivity&quot;
        android:hardwareAccelerated=&quot;true&quot;
        android:screenOrientation=&quot;portrait&quot;
        android:windowSoftInputMode=&quot;adjustPan&quot; /&gt;
</code></pre>
<p><a target="_blank" rel="noopener" href="https://github.com/CoolThink/StatusBarAdapt/issues/2">https://github.com/CoolThink/StatusBarAdapt/issues/2</a></p>
<h5 id="fragment使用toolbar"><a href="#fragment使用toolbar" class="headerlink" title="fragment使用toolbar"></a>fragment使用toolbar</h5><p><a target="_blank" rel="noopener" href="http://wuxiaolong.me/2015/12/21/fragmentToolbar/">http://wuxiaolong.me/2015/12/21/fragmentToolbar/</a></p>
<h5 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h5><p>郭霖公号:<a target="_blank" rel="noopener" href="http://blog.csdn.net/james_shu/article/details/61661217">http://blog.csdn.net/james_shu/article/details/61661217</a></p>
<p><a target="_blank" rel="noopener" href="http://yifeng.studio/2016/10/12/android-toolbar/">http://yifeng.studio/2016/10/12/android-toolbar/</a><br><a target="_blank" rel="noopener" href="http://www.bijishequ.com/detail/239876">http://www.bijishequ.com/detail/239876</a></p>
<h4 id="三条线的颜色修改"><a href="#三条线的颜色修改" class="headerlink" title="三条线的颜色修改"></a>三条线的颜色修改</h4><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;style <span class="built_in">name</span>=<span class="string">&quot;DrawerArrowStyle&quot;</span> parent=<span class="string">&quot;Base.Widget.AppCompat.DrawerArrowToggle&quot;</span>&gt;</span><br><span class="line">    &lt;<span class="built_in">item</span> <span class="built_in">name</span>=<span class="string">&quot;spinBars&quot;</span>&gt;<span class="literal">true</span>&lt;/<span class="built_in">item</span>&gt;</span><br><span class="line">    &lt;<span class="built_in">item</span> <span class="built_in">name</span>=<span class="string">&quot;color&quot;</span>&gt;@android:color/white&lt;/<span class="built_in">item</span>&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>具体可以查看mineutil:PopupWindowActivity</p>
<ul>
<li>溢出菜单三个点离右边的距离</li>
</ul>
<p> AppTheme中设置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:actionOverflowButtonStyle&quot;</span>&gt;</span>@style/OverflowMenuStyle<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;OverflowMenuStyle&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Widget.AppCompat.Light.PopupMenu.Overflow&quot;</span>&gt;</span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;overlapAnchor&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span>  <span class="comment">&lt;!--把该属性改为false即可使menu位置位于toolbar之下--&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:src&quot;</span>&gt;</span>@mipmap/doc_ic_new_patient<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:paddingRight&quot;</span>&gt;</span>15dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/hard_working1/article/details/77333893">https://blog.csdn.net/hard_working1/article/details/77333893</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5e5898346fb9a07cd248d179">https://juejin.im/post/5e5898346fb9a07cd248d179</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/luckybilly/Gloading/blob/master/README-zh-CN.md">https://github.com/luckybilly/Gloading/blob/master/README-zh-CN.md</a></p>

        
        
          <blockquote id="copyright">
              <p>Enlace original: <a href="http://noteforme.github.io.com/page/14/index.html">http://noteforme.github.io.com/page/14/index.html</a></p>
              <p>Declaración de copyright: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Cuota:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-DesignPattern_Builder" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/07/DesignPattern_Builder/">DesignPattern-Builder</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-07T09:45:46.000Z" itemprop="datePublished">2017年10月07日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/DesignPatterns/">DesignPatterns</a>
  </div>

      
      
<a href="/2017/10/07/DesignPattern_Builder/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Libro de visitas
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Builder模式"><a href="#Builder模式" class="headerlink" title="Builder模式"></a>Builder模式</h1><p>不直接生成想要的对象，而是让客户端利用所有必要的参数调用构造器（或者静态工厂），得到一个builder对象，然后客户端在builder对象上调用类似于setter的方法，来设置每个相关的可选参数</p>
<p> 既能保证像重叠构造器模式那样的安全性，也能保证像JavaBeans模式那么好的可读性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NutritionFacts_03_Builder</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> servingSize;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> servings;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> calories;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> fat;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> sodium;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> carbohydrate;</span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">static</span>  <span class="class"><span class="keyword">class</span>  <span class="title">Builder</span></span>&#123;</span><br><span class="line">        <span class="comment">//Required parameters</span></span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> servingSize;</span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> servings;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Optional parameters = initialized to default values</span></span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">int</span> calories     = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">int</span> fat          = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">int</span> carbohydrate = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">int</span> sodium       = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Builder</span><span class="params">(<span class="keyword">int</span> servingSize, <span class="keyword">int</span> servings)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.servingSize = servingSize;</span><br><span class="line">            <span class="keyword">this</span>.servings = servings;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span>  Builder <span class="title">calories</span><span class="params">(<span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">            calories = val;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span>  Builder <span class="title">fat</span><span class="params">(<span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.fat = fat;</span><br><span class="line">            <span class="keyword">return</span>  <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span>  Builder <span class="title">carbohydrate</span><span class="params">(<span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">            carbohydrate = val;</span><br><span class="line">            <span class="keyword">return</span>  <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span>  Builder <span class="title">sodium</span><span class="params">(<span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">            sodium = val;</span><br><span class="line">            <span class="keyword">return</span>  <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span>  NutritionFacts_03_Builder <span class="title">build</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span>  <span class="keyword">new</span> NutritionFacts_03_Builder(<span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">NutritionFacts_03_Builder</span><span class="params">(Builder builder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.servingSize = builder.servingSize;</span><br><span class="line">        <span class="keyword">this</span>.servings = builder.servings;</span><br><span class="line">        <span class="keyword">this</span>.calories = builder.calories;</span><br><span class="line">        <span class="keyword">this</span>.fat = builder.fat;</span><br><span class="line">        <span class="keyword">this</span>.sodium = builder.sodium;</span><br><span class="line">        <span class="keyword">this</span>.carbohydrate = builder.carbohydrate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        NutritionFacts_03_Builder cocaCola = <span class="keyword">new</span> NutritionFacts_03_Builder.Builder(<span class="number">240</span>,<span class="number">9</span>)</span><br><span class="line">                .calories(<span class="number">100</span>).sodium(<span class="number">35</span>).carbohydrate(<span class="number">27</span>).build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id=""><a href="#" class="headerlink" title=""></a></h2><p> 返回的this时怎么替代对象的</p>
<h5 id="对象创建更加灵活"><a href="#对象创建更加灵活" class="headerlink" title="对象创建更加灵活"></a>对象创建更加灵活</h5><p>当 isRef 为 true 的时候，arg 表示 String 类型的 refBeanId，type 不需要设置；当 isRef 为 false 的时候，arg、type 都需要设置</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConstructorArg</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">boolean</span> isRef;</span><br><span class="line">    <span class="keyword">private</span> Class <span class="keyword">type</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Object</span> arg;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="title">ConstructorArg</span>(<span class="params">Builder builder</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.isRef = isRef;</span><br><span class="line">        <span class="built_in">this</span>.type = <span class="keyword">type</span>;</span><br><span class="line">        <span class="built_in">this</span>.arg = arg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">boolean</span> isRef;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> Class <span class="keyword">type</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">Object</span> arg;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="title">Builder</span>(<span class="params"><span class="built_in">boolean</span> isRef</span>)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.isRef = isRef;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Builder <span class="function"><span class="title">setType</span>(<span class="params">Class <span class="keyword">type</span></span>)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.type = <span class="keyword">type</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Builder <span class="function"><span class="title">setArg</span>(<span class="params"><span class="built_in">Object</span> arg</span>)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.arg = arg;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> ConstructorArg <span class="function"><span class="title">build</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (isRef) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!(arg <span class="keyword">instanceof</span> <span class="built_in">String</span>)) &#123;</span><br><span class="line">                    <span class="comment">//这里refBeanId是ConstructorArg吗？只是判断了下arg类型是否为String</span></span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;当 isRef 为 true 的时候，arg 表示 String 类型refBeanId&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">type</span> != <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;当 isRef 为 true 的时候，type 不需要设置&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!isRef) &#123;</span><br><span class="line">                <span class="keyword">if</span> (arg == <span class="literal">null</span> || <span class="keyword">type</span> == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;当 isRef 为 false 的时候，arg、type 都需要设置&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ConstructorArg(<span class="built_in">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
        
          <blockquote id="copyright">
              <p>Enlace original: <a href="http://noteforme.github.io.com/page/14/index.html">http://noteforme.github.io.com/page/14/index.html</a></p>
              <p>Declaración de copyright: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Cuota:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Fragment" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/05/Fragment/">Fragment</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-05T11:54:50.000Z" itemprop="datePublished">2017年10月05日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2017/10/05/Fragment/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Libro de visitas
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://developer.android.com/reference/android/app/Fragment.html">https://developer.android.com/reference/android/app/Fragment.html</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/components/fragments.html">https://developer.android.com/guide/components/fragments.html</a></p>
<p><a target="_blank" rel="noopener" href="https://wizardforcel.gitbooks.io/w3school-android/content/77.html">https://wizardforcel.gitbooks.io/w3school-android/content/77.html</a><br><a target="_blank" rel="noopener" href="https://juejin.im/post/5901b564570c35005804424b">https://juejin.im/post/5901b564570c35005804424b</a></p>
<h4 id="Lifecycle"><a href="#Lifecycle" class="headerlink" title="Lifecycle"></a>Lifecycle</h4><p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/fragments/lifecycle">https://developer.android.com/guide/fragments/lifecycle</a></p>
<ul>
<li>onViewCreated(View view, Bundle savedInstanceState)</li>
</ul>
<p>Called immediately after <code>onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)</code> has returned, but before any saved state has been restored in to the view.</p>
<p><img src="/2017/10/05/Fragment/fragment-view-lifecycle.png"></p>
<h5 id="fragment回调"><a href="#fragment回调" class="headerlink" title="fragment回调"></a>fragment回调</h5><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mListener: IFeedBackListener? = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onAttach</span><span class="params">(context: <span class="type">Context</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onAttach(context)</span><br><span class="line">    <span class="keyword">if</span> (parentFragment <span class="keyword">is</span> IFeedBackListener) &#123;</span><br><span class="line">        mListener = parentFragment <span class="keyword">as</span> IFeedBackListener</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (context <span class="keyword">is</span> IFeedBackListener) &#123;</span><br><span class="line">        mListener = context</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> RuntimeException(context?.toString() + <span class="string">&quot; must implement ISelectListener&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://noteforme.github.io/2017/10/05/Fragment/">https://noteforme.github.io/2017/10/05/Fragment/</a></p>
<h4 id="Fragment重叠"><a href="#Fragment重叠" class="headerlink" title="Fragment重叠"></a>Fragment重叠</h4><p> 横竖屏切换</p>
<p>被系统回收（复现 进入开发者选项 -》不保留活动）</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c12a98a36b2b">https://www.jianshu.com/p/c12a98a36b2b</a></p>
<h5 id="BottomNavigationView-error"><a href="#BottomNavigationView-error" class="headerlink" title="BottomNavigationView error"></a>BottomNavigationView error</h5><p>使用BottomNavigationView出现很严重的问题,很久才找到原因</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Caused <span class="keyword">by</span>: android.<span class="keyword">view</span>.InflateException: Binary XML <span class="keyword">file</span> <span class="keyword">line</span> #16: Binary XML <span class="keyword">file</span> <span class="keyword">line</span> #16: <span class="keyword">Error</span> inflating <span class="keyword">class</span> com.google.android.material.bottomnavigation.BottomNavigationView</span><br><span class="line">    Caused <span class="keyword">by</span>: android.<span class="keyword">view</span>.InflateException: Binary XML <span class="keyword">file</span> <span class="keyword">line</span> #16: <span class="keyword">Error</span> inflating <span class="keyword">class</span> com.google.android.material.bottomnavigation.BottomNavigationView</span><br></pre></td></tr></table></figure>

<p>因为 AndroidManifest.xml  application下的android:theme=”@style/AppTheme”多出了,把下面的删除了就好了.</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="built_in">item</span> <span class="built_in">name</span>=<span class="string">&quot;android:textColorSecondary&quot;</span>&gt;<span class="comment">#ffffff&lt;/item&gt;</span></span><br><span class="line">&lt;<span class="built_in">item</span> <span class="built_in">name</span>=<span class="string">&quot;android:actionOverflowButtonStyle&quot;</span>&gt;@style/OverflowMenuStyle&lt;/<span class="built_in">item</span>&gt;</span><br><span class="line">&lt;<span class="built_in">item</span> <span class="built_in">name</span>=<span class="string">&quot;android:listDivider&quot;</span>&gt;@drawable/divider&lt;/<span class="built_in">item</span>&gt;</span><br></pre></td></tr></table></figure>

<h5 id="重叠原因"><a href="#重叠原因" class="headerlink" title="重叠原因"></a>重叠原因</h5><blockquote>
<p> 旋转屏幕时候，创建的homeFragment会被回收,在销毁前，执行了onSaveInstanceState(Bundle outState)这个方法。这个方法会保存activity的一些信息，其中就包括添加过的fragment，Activity重建后，再次初始化homeFragment，接着显示，导致了重叠的问题。</p>
</blockquote>
<h5 id="代码验证"><a href="#代码验证" class="headerlink" title="代码验证"></a>代码验证</h5><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">initFragment</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (homeFragment == <span class="literal">null</span>) &#123;</span><br><span class="line">        homeFragment = HomeFragment()</span><br><span class="line">        addFragment(homeFragment!!)</span><br><span class="line">        showFragment(homeFragment)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">    Timber.d(<span class="string">&quot;onCreate() <span class="variable">$homeFragment</span>&quot;</span>)</span><br><span class="line">    initFragment()</span><br><span class="line">    Timber.d(<span class="string">&quot;initFragment() <span class="variable">$homeFragment</span>&quot;</span>)   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onDestroy</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy()</span><br><span class="line">        Timber.tag(TAG).d(<span class="string">&quot;onDestroy() homeFragment <span class="variable">$homeFragment</span>&quot;</span>)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>日志</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onCreate() taskId  <span class="number">641</span></span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onCreate() homeFragment null</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;<span class="number">1</span>adc<span class="number">3</span>fa&#125; (b<span class="number">0660244</span>-<span class="number">39</span>c<span class="number">4</span>-<span class="number">4104</span>-b<span class="number">558</span>-f<span class="number">5384</span>c<span class="number">7</span>adb<span class="number">0</span>d) id=<span class="number">0</span>x<span class="number">7</span>f<span class="number">09010</span>e&#125;</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStart()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onResume()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onPause()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onSaveInstanceState()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStop()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onDestroy()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onDestroy() homeFragment HomeFragment&#123;<span class="number">1</span>adc<span class="number">3</span>fa&#125; (d<span class="number">84</span>f<span class="number">5956</span>-fa<span class="number">2</span>c-<span class="number">4</span>cd<span class="number">2</span>-<span class="number">8397</span>-<span class="number">0904040</span>d<span class="number">2</span>a<span class="number">6</span>f)&#125;</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onCreate() taskId  <span class="number">641</span></span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onCreate() homeFragment null</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;ac<span class="number">076</span>db&#125; (f<span class="number">8</span>ee<span class="number">348</span>b-<span class="number">6</span>ff<span class="number">7</span>-<span class="number">4</span>b<span class="number">1</span>e-ba<span class="number">27</span>-<span class="number">6</span>e<span class="number">47</span>e<span class="number">848</span>f<span class="number">623</span>) id=<span class="number">0</span>x<span class="number">7</span>f<span class="number">09010</span>e&#125;</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStart()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onRestoreInstanceState()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onResume()</span><br></pre></td></tr></table></figure>

<p>从 initFragment（） 1adc3fa , ac076db 可以看到，HomeFrgment重新创建了.</p>
<h5 id="处理方法"><a href="#处理方法" class="headerlink" title="处理方法"></a>处理方法</h5><ol>
<li><p>onSaveInstanceState 不保存信息</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onSaveInstanceState</span><span class="params">(outState: <span class="type">Bundle</span>)</span></span> &#123;</span><br><span class="line"><span class="comment">//        super.onSaveInstanceState(outState)</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>这种方式的弊端就是，切换后总是回到首页.</p>
</li>
<li><p>onSaveInstanceState() 保存Fragment</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">override <span class="keyword">fun</span> on<span class="constructor">Create(<span class="params">savedInstanceState</span>: Bundle?)</span> &#123;</span><br><span class="line">    super.on<span class="constructor">Create(<span class="params">savedInstanceState</span>)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (savedInstanceState != null) &#123;</span><br><span class="line">        <span class="comment">/*获取保存的fragment  没有的话返回null*/</span></span><br><span class="line">        homeFragment = supportFragmentManager.get<span class="constructor">Fragment(<span class="params">savedInstanceState</span>, HOME_FRAGMENT_KEY)</span> <span class="keyword">as</span> HomeFragment?</span><br><span class="line">        healthFragment = supportFragmentManager.get<span class="constructor">Fragment(<span class="params">savedInstanceState</span>, DASHBOARD_FRAGMENT_KEY)</span> <span class="keyword">as</span> HealthFragment?</span><br><span class="line">        personFragment = supportFragmentManager.get<span class="constructor">Fragment(<span class="params">savedInstanceState</span>, NOTICE_FRAGMENT_KEY)</span> <span class="keyword">as</span> PersonFragment?</span><br><span class="line">        add<span class="constructor">ToList(<span class="params">homeFragment</span>)</span></span><br><span class="line">        add<span class="constructor">ToList(<span class="params">healthFragment</span>)</span></span><br><span class="line">        add<span class="constructor">ToList(<span class="params">personFragment</span>)</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        init<span class="constructor">Fragment()</span></span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> override <span class="keyword">fun</span> on<span class="constructor">SaveInstanceState(<span class="params">outState</span>: Bundle)</span> &#123;</span><br><span class="line">        super.on<span class="constructor">SaveInstanceState(<span class="params">outState</span>)</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>d(<span class="string">&quot;MainActivity onSaveInstanceState&quot;</span>)</span><br><span class="line">        <span class="comment">/*fragment不为空时 保存*/</span><span class="keyword">if</span> (homeFragment != null) &#123;</span><br><span class="line">            supportFragmentManager.put<span class="constructor">Fragment(<span class="params">outState</span>!!, HOME_FRAGMENT_KEY, <span class="params">homeFragment</span>!!)</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (healthFragment != null) &#123;</span><br><span class="line">            supportFragmentManager.put<span class="constructor">Fragment(<span class="params">outState</span>!!, DASHBOARD_FRAGMENT_KEY, <span class="params">healthFragment</span>!!)</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (personFragment != null) &#123;</span><br><span class="line">            supportFragmentManager.put<span class="constructor">Fragment(<span class="params">outState</span>!!, NOTICE_FRAGMENT_KEY, <span class="params">personFragment</span>!!)</span></span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure></li>
</ol>
<p>这种方式，可以解决问题，但是打印的日志HomeFragment还是不一样，是什么情况？</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onCreate() taskId  <span class="number">4437</span></span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;dc<span class="number">2914</span>d&#125; (<span class="number">5</span>f<span class="number">30</span>b<span class="number">0</span>dd-a<span class="number">8</span>d<span class="number">2</span>-<span class="number">4</span>b<span class="number">3</span>c-a<span class="number">27</span>f-<span class="number">1</span>d<span class="number">160</span>a<span class="number">9</span>da<span class="number">58</span>e) id=<span class="number">0</span>x<span class="number">7</span>f<span class="number">09010</span>e&#125;</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStart()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onResume()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity$onCreate: navigation_health</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onPause()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onSaveInstanceState()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity: MainActivity onSaveInstanceState</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStop()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onDestroy()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onDestroy() homeFragment HomeFragment&#123;dc<span class="number">2914</span>d&#125; (ab<span class="number">276</span>ea<span class="number">2</span>-<span class="number">5</span>fa<span class="number">2</span>-<span class="number">4</span>d<span class="number">79</span>-b<span class="number">6</span>a<span class="number">6</span>-af<span class="number">7143</span>b<span class="number">114</span>e<span class="number">8</span>)&#125;</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onCreate() taskId  <span class="number">4437</span></span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity: fragmentList数量<span class="number">1</span></span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity: fragmentList数量<span class="number">2</span></span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity: fragmentList数量<span class="number">2</span></span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;<span class="number">9139494</span>&#125; (<span class="number">5</span>f<span class="number">30</span>b<span class="number">0</span>dd-a<span class="number">8</span>d<span class="number">2</span>-<span class="number">4</span>b<span class="number">3</span>c-a<span class="number">27</span>f-<span class="number">1</span>d<span class="number">160</span>a<span class="number">9</span>da<span class="number">58</span>e) id=<span class="number">0</span>x<span class="number">7</span>f<span class="number">09010</span>e&#125;</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStart()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onRestoreInstanceState()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onResume()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onPause()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onSaveInstanceState()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity: MainActivity onSaveInstanceState</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStop()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onDestroy()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onDestroy() homeFragment HomeFragment&#123;<span class="number">9139494</span>&#125; (cadcb<span class="number">63</span>f-<span class="number">8516</span>-<span class="number">4</span>d<span class="number">44</span>-<span class="number">8</span>f<span class="number">3</span>c-<span class="number">75</span>b<span class="number">0</span>c<span class="number">8</span>e<span class="number">9</span>f<span class="number">27</span>f)&#125;</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/yuzhiqiang_1993/article/details/75014591">https://blog.csdn.net/yuzhiqiang_1993/article/details/75014591</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/78ec81b42f92">https://www.jianshu.com/p/78ec81b42f92</a></p>
<h5 id="下面这种方式没理解"><a href="#下面这种方式没理解" class="headerlink" title="下面这种方式没理解"></a>下面这种方式没理解</h5><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d9143a92ad94">https://www.jianshu.com/p/d9143a92ad94</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c12a98a36b2b">https://www.jianshu.com/p/c12a98a36b2b</a></p>
<h4 id="横竖屏切换，Fragment实例复用"><a href="#横竖屏切换，Fragment实例复用" class="headerlink" title="横竖屏切换，Fragment实例复用"></a>横竖屏切换，Fragment实例复用</h4><h5 id="setRetainInstance-true"><a href="#setRetainInstance-true" class="headerlink" title="setRetainInstance=true"></a>setRetainInstance=true</h5><p><strong>retainInstance = true已经过期，改用ViewModel</strong></p>
<p>LifeFragment</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">    retainInstance = <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">fun</span> init<span class="constructor">Fragment()</span> &#123;</span><br><span class="line">    var lifeFragment = supportFragmentManager.find<span class="constructor">FragmentById(R.<span class="params">id</span>.<span class="params">fl_content</span>)</span></span><br><span class="line">    <span class="keyword">if</span> (lifeFragment<span class="operator"> == </span>null) &#123;</span><br><span class="line">        lifeFragment = <span class="constructor">LifeFragment()</span></span><br><span class="line">        supportFragmentManager.<span class="keyword">begin</span><span class="constructor">Transaction()</span>.add(<span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>id.fl_content, lifeFragment).commit<span class="literal">()</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>d(<span class="string">&quot;LifeFragment $lifeFragment&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>切换屏幕后 LifeFragment,ondestroy()没志行,后面的Oncreate()也没有创建.</p>
<figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">D</span>/<span class="variable">LifeActivity</span> <span class="variable">LaunchModeActivity</span>: <span class="function"><span class="title">onCreate</span>() <span class="variable">taskId</span>  <span class="number">599</span></span></span><br><span class="line"><span class="function"><span class="variable">D</span>/<span class="variable">LifeActivity</span>: <span class="variable">LifeFragment</span> <span class="variable">LifeFragment</span>&#123;<span class="number">6</span><span class="variable">a86311</span>&#125; (<span class="number">70133</span><span class="variable">a14</span>-<span class="number">6</span><span class="variable">dcf</span>-<span class="number">4</span><span class="variable">f8b</span>-<span class="variable">beee</span>-<span class="number">6</span><span class="variable">cd31d6623ba</span>) <span class="variable">id</span>=<span class="number">0</span><span class="variable">x7f090109</span>&#125;</span></span><br><span class="line"><span class="function"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="title">onAttach</span>(<span class="variable">Context</span> <span class="variable">context</span>)</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onCreate</span>() <span class="variable">savedInstanceState</span>    <span class="variable"><span class="literal">null</span></span></span></span><br><span class="line"><span class="function"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="title">onCreateView</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onActivityCreated</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onStart</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onResume</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onPause</span>() </span></span><br><span class="line"><span class="function"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="title">onStop</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onDestroyView</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onDetach</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onAttach</span>(<span class="variable">Context</span> <span class="variable">context</span>)</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeActivity</span> <span class="variable">LaunchModeActivity</span>: <span class="function"><span class="title">onCreate</span>() <span class="variable">taskId</span>  <span class="number">599</span></span></span><br><span class="line"><span class="function"><span class="variable">D</span>/<span class="variable">LifeActivity</span>: <span class="variable">LifeFragment</span> <span class="variable">LifeFragment</span>&#123;<span class="number">6</span><span class="variable">a86311</span>&#125; (<span class="number">70133</span><span class="variable">a14</span>-<span class="number">6</span><span class="variable">dcf</span>-<span class="number">4</span><span class="variable">f8b</span>-<span class="variable">beee</span>-<span class="number">6</span><span class="variable">cd31d6623ba</span>) <span class="variable">id</span>=<span class="number">0</span><span class="variable">x7f090109</span>&#125;</span></span><br><span class="line"><span class="function"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="title">onCreateView</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onActivityCreated</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onStart</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onResume</span>()</span></span><br></pre></td></tr></table></figure>

<h4 id="Fragment懒加载"><a href="#Fragment懒加载" class="headerlink" title="Fragment懒加载"></a>Fragment懒加载</h4><p>Fragment和ViewPager一起使用会有个预加载机制，会把旁白的Fragment的生命周期方法<br>前半段先执行，然后执行自身的生命周期方法</p>
<p>在项目终从其他页面回到MainAcitivty的时候，三个页面的生命周期方法都跑了一遍</p>
<figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">　  <span class="variable">D</span>/<span class="variable">FinanceFragment</span>         <span class="variable">Test</span>: <span class="function"><span class="title">onStart</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">WealthFragment</span>         <span class="variable">Test</span>: <span class="function"><span class="title">onStart</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">MineFragment</span>         <span class="variable">Test</span>: <span class="function"><span class="title">onStart</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">FinanceFragment</span>         <span class="variable">Test</span>: <span class="function"><span class="title">onResume</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">WealthFragment</span>         <span class="variable">Test</span>: <span class="function"><span class="title">onResume</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">MineFragment</span>         <span class="variable">Test</span>: <span class="function"><span class="title">onResume</span>()</span></span><br></pre></td></tr></table></figure>


<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">     </span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">boolean</span> isPrepared;  <span class="comment">//判断view是否加载完成,在视图未初始化的时候，在lazyLoad当中就使用的话，就会有空指针的异常</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">boolean</span> isVisible;  <span class="comment">//判断当前Fragment是否可见状态,标志已经初始化完成，因为setUserVisibleHint是在onCreateView之前调用的</span></span><br><span class="line">	  <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="function"><span class="title">onViewCreated</span>(<span class="params">View view, <span class="meta">@Nullable</span> Bundle savedInstanceState</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onViewCreated(view, savedInstanceState);</span><br><span class="line">        isPrepared = <span class="literal">true</span>;</span><br><span class="line">        lazyLoad();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="function"><span class="title">onCreateView</span>(<span class="params">LayoutInflater inflater, <span class="meta">@Nullable</span> ViewGroup container, Bundle savedInstanceState</span>)</span> &#123;</span><br><span class="line"><span class="comment">//        Log.d(TAG + &quot;         Test&quot;, &quot; onCreateView()&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (rootView == <span class="literal">null</span>) &#123;</span><br><span class="line">            int view = setLayoutId();</span><br><span class="line">            <span class="keyword">if</span> (view != <span class="number">0</span>) &#123;</span><br><span class="line">                rootView = inflater.inflate(view, container, <span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ViewGroup parent = (ViewGroup) rootView.getParent();</span><br><span class="line">            <span class="keyword">if</span> (parent != <span class="literal">null</span>) &#123;</span><br><span class="line">                parent.removeView(rootView);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        initView(rootView);</span><br><span class="line">        <span class="keyword">return</span> rootView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  http://www.10tiao.com/html/565/201702/2247483988/1.html</span></span><br><span class="line">    <span class="comment">// 标志位，标志已经初始化完成，因为setUserVisibleHint是在onCreateView之前调用的，</span></span><br><span class="line">    <span class="comment">// 在视图未初始化的时候，在lazyLoad当中就使用的话，就会有空指针的异常</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">boolean</span> isPrepared;</span><br><span class="line">    <span class="comment">//标志当前页面是否可见</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">boolean</span> isVisible;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="function"><span class="title">setUserVisibleHint</span>(<span class="params"><span class="built_in">boolean</span> isVisibleToUser</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.setUserVisibleHint(isVisibleToUser);</span><br><span class="line"><span class="comment">//        Log.d(TAG + &quot;         Test&quot;, &quot; setUserVisibleHint() is Visible : ?  &quot; + isVisibleToUser);</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (getUserVisibleHint()) &#123;</span><br><span class="line">            isVisible = <span class="literal">true</span>;</span><br><span class="line">            onVisible();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            isVisible = <span class="literal">false</span>;</span><br><span class="line">            onInvisible();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">void</span> <span class="function"><span class="title">onInvisible</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">void</span> <span class="function"><span class="title">onVisible</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        lazyLoad();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">void</span> <span class="function"><span class="title">lazyLoad</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!isVisible || !isPrepared) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        requestData();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 请求数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">void</span> <span class="function"><span class="title">requestData</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        Log.d(TAG + <span class="string">&quot;         Test&quot;</span>, <span class="string">&quot; requestData &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>参考: <a target="_blank" rel="noopener" href="http://www.10tiao.com/html/565/201702/2247483988/1.html">http://www.10tiao.com/html/565/201702/2247483988/1.html</a></p>
<h4 id="Activity-dialogFragment-的事件回调"><a href="#Activity-dialogFragment-的事件回调" class="headerlink" title="Activity  dialogFragment 的事件回调"></a>Activity  dialogFragment 的事件回调</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">ISelectListener</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">getItemPosition</span><span class="params">(position: <span class="type">Int</span>)</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mListener: ISelectListener? = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onAttach</span><span class="params">(context: <span class="type">Context</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onAttach(context)</span><br><span class="line">    <span class="keyword">if</span> (parentFragment <span class="keyword">is</span> ISelectListener)&#123;</span><br><span class="line">        mListener = parentFragment  <span class="keyword">as</span> ISelectListener</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (context <span class="keyword">is</span> ISelectListener) &#123;</span><br><span class="line">        mListener = context</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> RuntimeException(context!!.toString() + <span class="string">&quot; must implement ISelectListener&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/components/fragments.html">https://developer.android.com/guide/components/fragments.html</a></p>
<h4 id="onHiddenChanged切换刷新"><a href="#onHiddenChanged切换刷新" class="headerlink" title="onHiddenChanged切换刷新"></a>onHiddenChanged切换刷新</h4><p>使用hide()/show()发现生命周期基本不执行，不过可以用到这个onHiddenChanged();</p>
<p>看下执行的生命周期;   从 SecondFragment 页面开始到 -&gt;FirstFragment </p>
<blockquote>
<p>07-18 15:53:25.128 7758-7758/com.mineutils D/SecondFragment: onAttach(Context context)<br>07-18 15:53:25.129 7758-7758/com.mineutils D/SecondFragment: onCreate()<br>07-18 15:53:25.142 7758-7758/com.mineutils D/SecondFragment: onCreateView()<br>07-18 15:53:25.148 7758-7758/com.mineutils D/SecondFragment:  onViewCreated<br>                                                                onActivityCreated()<br>                                                                onStart()<br>​                                                                  onResume()</p>
<p>07-18 15:53:34.200 7758-7758/com.mineutils D/SecondFragment: onHiddenChanged hidden   true<br>07-18 15:53:34.207 7758-7758/com.mineutils D/FirstFragment:    onCreateView()<br>07-18 15:53:34.208 7758-7758/com.mineutils D/FirstFragment:    onViewCreated<br>                                                              onActivityCreated()<br>​                                                           onStart()</p>
<p>07-18 15:53:53.968 7758-7758/com.mineutils D/FirstFragment: onHiddenChanged hidden   true<br>07-18 15:53:53.968 7758-7758/com.mineutils D/SecondFragment: onHiddenChanged hidden   false</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/cml_blog/article/details/41411451">https://blog.csdn.net/cml_blog/article/details/41411451</a></p>
<h4 id="fragment常用特性"><a href="#fragment常用特性" class="headerlink" title="fragment常用特性"></a>fragment常用特性</h4><h5 id="commitAllowingStateLoss-VS-commit-区别"><a href="#commitAllowingStateLoss-VS-commit-区别" class="headerlink" title="commitAllowingStateLoss VS  commit()区别"></a>commitAllowingStateLoss VS  commit()区别</h5><p><a target="_blank" rel="noopener" href="https://huxian99.github.io/2016/08/28/cj3qymo360000owxk9zp17alo/">https://huxian99.github.io/2016/08/28/cj3qymo360000owxk9zp17alo/</a></p>
<h5 id="Fragment之间传递数据"><a href="#Fragment之间传递数据" class="headerlink" title="Fragment之间传递数据"></a>Fragment之间传递数据</h5><ol>
<li><p>Fragment.setArguments()方法传递bundle</p>
</li>
<li><p>findFragmentById()找到tag,然后直接操作Framgent</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onArticleSelected</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">      ArticleFragment articleFrag = (ArticleFragment)</span><br><span class="line">              getSupportFragmentManager().findFragmentById(R.id.article_fragment);</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">if</span> (articleFrag != <span class="keyword">null</span>) &#123;</span><br><span class="line">          articleFrag.updateArticleView(position);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          ArticleFragment newFragment = <span class="keyword">new</span> ArticleFragment();</span><br><span class="line">          Bundle args = <span class="keyword">new</span> Bundle();</span><br><span class="line">          args.putInt(ArticleFragment.ARG_POSITION, position);</span><br><span class="line">          newFragment.setArguments(args);</span><br><span class="line">   </span><br><span class="line">          FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();</span><br><span class="line">          transaction.replace(R.id.fragment_container, newFragment);</span><br><span class="line">          transaction.addToBackStack(<span class="keyword">null</span>);</span><br><span class="line">          transaction.commit();</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>接口回调</p>
</li>
<li><p>ViewModel Livedata</p>
</li>
</ol>
<h5 id="给已经创建frament传递数据"><a href="#给已经创建frament传递数据" class="headerlink" title="给已经创建frament传递数据"></a>给已经创建frament传递数据</h5><p>也是直接 Fragment.refresh(),第一行代码第三版P227，也是这样做的。</p>
<h5 id="fragment回退栈"><a href="#fragment回退栈" class="headerlink" title="fragment回退栈"></a>fragment回退栈</h5><p>tx.addToBackStack(null); 添加回退功能，类似Activity压栈的过程</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/fe16553ca2ca">https://www.jianshu.com/p/fe16553ca2ca</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zhiyuan0932/article/details/52593039">https://blog.csdn.net/zhiyuan0932/article/details/52593039</a></p>
<p>Fragment控制父Fragment展示</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/39491655/communication-between-nested-fragments-in-android">Communication between nested fragments in Android</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u011481547/article/details/71552720">https://blog.csdn.net/u011481547/article/details/71552720</a></p>
<p>Fragmet全局流程图</p>
<p><a target="_blank" rel="noopener" href="https://kotlintc.com/articles/5693">https://kotlintc.com/articles/5693</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/MOWdbI5IREjQP1Px-WJY1Q">https://mp.weixin.qq.com/s/MOWdbI5IREjQP1Px-WJY1Q</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5bcd58b6e51d45404c71d23f">https://juejin.im/post/5bcd58b6e51d45404c71d23f</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/_hdbMOA2TVvX4jFnMu15bg">https://mp.weixin.qq.com/s/_hdbMOA2TVvX4jFnMu15bg</a></p>

        
        
          <blockquote id="copyright">
              <p>Enlace original: <a href="http://noteforme.github.io.com/page/14/index.html">http://noteforme.github.io.com/page/14/index.html</a></p>
              <p>Declaración de copyright: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Cuota:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-onActivityResult" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/09/26/onActivityResult/">onActivityResult</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-09-26T06:01:53.000Z" itemprop="datePublished">2017年09月26日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2017/09/26/onActivityResult/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Libro de visitas
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="传统方式"><a href="#传统方式" class="headerlink" title="传统方式"></a>传统方式</h4><h6 id="单个页面跳转"><a href="#单个页面跳转" class="headerlink" title="单个页面跳转"></a>单个页面跳转</h6><p> 主要有三个方法实现</p>
<ul>
<li> startActivityForResult(@RequiresPermission Intent intent, int requestCode)</li>
<li> setResult(int resultCode, Intent data)</li>
<li> onActivityResult(int requestCode, int resultCode, Intent data)</li>
</ul>
<p>下面是简单例子<br>跳转MainActivity</p>
<p>目标SecondAcitivty</p>
<p>其中数据传递很简单,特别注意requestCode，resultCode不同的区分的区别</p>
<ul>
<li><p>requestCode：假设  MainActivity　button1 button2到SecondAcitivty,回来的在onActivityResult就需要</p>
<pre><code>   判断是哪个button点击的
</code></pre>
</li>
<li><p>resultCode: 假设MainActivity　button1跳转到SecondAcitivty,  button2到ThirdActiivty,回来后onActivityResult</p>
<pre><code>   就需要判断是哪个Activity回来的
</code></pre>
<p>   参考:<a target="_blank" rel="noopener" href="http://blog.csdn.net/jiangwei0910410003/article/details/16983049">http://blog.csdn.net/jiangwei0910410003/article/details/16983049</a></p>
</li>
</ul>
<p><em>注意</em>:onActivityResult方法用的算比较普遍，刚好有个困惑，回传数据时<code>intent.putExtra(&quot;text&quot;,122);</code>  使用 <code>  String couponId = data.getStringExtra(&quot;text&quot;);</code> 接收时为null,里面跳转和回传,存的值是int类型，获取string类型</p>
<h6 id="Fragment接收onActivityResult"><a href="#Fragment接收onActivityResult" class="headerlink" title="Fragment接收onActivityResult"></a>Fragment接收onActivityResult</h6><p><em>必须使用Fragment 的 startActivityForResult()</em>*</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">startForResult</span><span class="params">(Activity activity, Fragment fragment)</span> </span>&#123;</span><br><span class="line">       Intent intent = <span class="keyword">new</span> Intent(activity, LoginActivity.class);</span><br><span class="line">       fragment.startActivityForResult(intent, REQUEST_CODE_MINE_FRAGMENT);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>setResult(RESULT_OK, result); ,finish()后 onActivityResult 返回 resultCode </p>
<h4 id="Activity嵌套Fragment-他们各自发起startActivityForResult发起数据请求"><a href="#Activity嵌套Fragment-他们各自发起startActivityForResult发起数据请求" class="headerlink" title="Activity嵌套Fragment,他们各自发起startActivityForResult发起数据请求"></a>Activity嵌套Fragment,他们各自发起startActivityForResult发起数据请求</h4><h5 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h5><p> <img src="/2017/09/26/onActivityResult/20161119124707067.jpg"></p>
<ul>
<li><p>Fragment发起</p>
<p> Fragment onActivityResult能接收。Activity onActivityResult能接收,但是requestCode不正确。</p>
</li>
<li><p>Activity发起</p>
<p> Fragment不能接收。 Activity onActivityResult能接收。</p>
</li>
</ul>
<h5 id="代码验证"><a href="#代码验证" class="headerlink" title="代码验证"></a>代码验证</h5><p>FirstResultActivity</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> requestCode = <span class="number">1000</span></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">initView</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="keyword">super</span>.initView()</span><br><span class="line">      <span class="keyword">val</span> intent = Intent(<span class="keyword">this</span>, SecondResultActivity::<span class="keyword">class</span>.java)</span><br><span class="line">      findViewById&lt;View&gt;(R.id.bt_activity).setOnClickListener &#123;</span><br><span class="line">          startActivityForResult(intent, requestCode)</span><br><span class="line">          Timber.i(<span class="string">&quot;startActivityForResult <span class="variable">$requestCode</span>&quot;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onActivityResult</span><span class="params">(requestCode: <span class="type">Int</span>, resultCode: <span class="type">Int</span>, <span class="keyword">data</span>: <span class="type">Intent</span>?)</span></span> &#123;</span><br><span class="line">      <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, <span class="keyword">data</span>)</span><br><span class="line">      Timber.d(<span class="string">&quot;onActivityResult resultCode <span class="variable">$requestCode</span> resultCode <span class="variable">$resultCode</span>  data  <span class="subst">$&#123;data?.getStringExtra(SecondResultActivity.sData)&#125;</span>&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">initFragment</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="keyword">val</span> ftn = supportFragmentManager.beginTransaction().replace(R.id.fl_content, newInstance(<span class="string">&quot;数据&quot;</span>))</span><br><span class="line">      ftn.commit()</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>ResultOkFragment</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">val</span> requestCode: <span class="built_in">Int</span> = <span class="number">2000</span></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onActivityCreated</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onActivityCreated(savedInstanceState)</span><br><span class="line">    <span class="keyword">val</span> intent = Intent(context, SecondResultActivity::<span class="keyword">class</span>.java)</span><br><span class="line"></span><br><span class="line">    bt_fragment.setOnClickListener &#123;</span><br><span class="line">        startActivityForResult(intent, requestCode)</span><br><span class="line">        Timber.d(<span class="string">&quot;startActivityForResult <span class="variable">$requestCode</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onActivityResult</span><span class="params">(requestCode: <span class="type">Int</span>, resultCode: <span class="type">Int</span>, <span class="keyword">data</span>: <span class="type">Intent</span>?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, <span class="keyword">data</span>)</span><br><span class="line">    Timber.d(<span class="string">&quot;onActivityResult resultCode <span class="variable">$requestCode</span> resultCode <span class="variable">$resultCode</span>  data 			<span class="subst">$&#123;data?.getStringExtra(SecondResultActivity.sData)&#125;</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>SecondResultActivity</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setResult(<span class="number">21</span>, <span class="keyword">new</span> Intent().putExtra(sData, <span class="string">&quot;我要回调啦!!!&quot;</span>));</span><br><span class="line">finish();</span><br></pre></td></tr></table></figure>



<ul>
<li><p>Activity发起</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">I</span>/FirstResultActivity$initView: startActivityForResult <span class="number">1000</span></span><br><span class="line"><span class="attribute">D</span>/FirstResultActivity: onActivityResult resultCode <span class="number">1000</span> resultCode <span class="number">21</span>  data  我要回调啦!!!</span><br></pre></td></tr></table></figure></li>
<li><p>Fragment发起</p>
<figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">D/ResultOkFragment$onActivityCreated: startActivityForResult <span class="number">2000</span></span><br><span class="line">D/ResultOkFragment: onActivityResult resultCode <span class="number">2000</span> resultCode <span class="number">21</span>  data 我要回调啦!!!</span><br><span class="line">D/FirstResultActivity: onActivityResult resultCode <span class="number">329680</span> resultCode <span class="number">21</span>  data  我要回调啦!!!</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="跳转多个页面-回来"><a href="#跳转多个页面-回来" class="headerlink" title="跳转多个页面 回来"></a>跳转多个页面 回来</h4><p>中间页面不能finish，也需要在onActivityResult方法内部 起到桥梁作用，回传数据</p>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/lanyachuanshu/article/details/52172143">http://blog.csdn.net/lanyachuanshu/article/details/52172143</a><br><a target="_blank" rel="noopener" href="https://developer.android.com/training/basics/intents/result.html">https://developer.android.com/training/basics/intents/result.html</a></p>
<p><a target="_blank" rel="noopener" href="http://45.77.222.97:3000/root/MineUtils/src/master/app/src/main/java/com/jonzhou/mineutils/result/FirstResultActivity.java">http://45.77.222.97:3000/root/MineUtils/src/master/app/src/main/java/com/jonzhou/mineutils/result/FirstResultActivity.java</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzAxMTI4MTkwNQ==&amp;mid=2650826252&amp;idx=1&amp;sn=9ec620d630706c9f8de328e87bb8a0f1&amp;chksm=80b7b292b">https://mp.weixin.qq.com/s?__biz=MzAxMTI4MTkwNQ==&amp;mid=2650826252&amp;idx=1&amp;sn=9ec620d630706c9f8de328e87bb8a0f1&amp;chksm=80b7b292b</a></p>
<h5 id="ActivityResultContract新方式"><a href="#ActivityResultContract新方式" class="headerlink" title="ActivityResultContract新方式"></a>ActivityResultContract新方式</h5><p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/o2_2DeAIcJGYSvm2WlhUxg">https://mp.weixin.qq.com/s/o2_2DeAIcJGYSvm2WlhUxg</a></p>

        
        
          <blockquote id="copyright">
              <p>Enlace original: <a href="http://noteforme.github.io.com/page/14/index.html">http://noteforme.github.io.com/page/14/index.html</a></p>
              <p>Declaración de copyright: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Cuota:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-DevicesScreenSupport" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/09/23/DevicesScreenSupport/">DevicesScreenSupport</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-09-23T13:41:20.000Z" itemprop="datePublished">2017年09月23日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2017/09/23/DevicesScreenSupport/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Libro de visitas
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Android屏幕的一些技巧</p>
<h5 id="官网适配方案"><a href="#官网适配方案" class="headerlink" title="官网适配方案"></a>官网适配方案</h5><p><a target="_blank" rel="noopener" href="https://developer.android.com/training/basics/supporting-devices/index.html">https://developer.android.com/training/basics/supporting-devices/index.html</a><br><a target="_blank" rel="noopener" href="https://developer.android.com/training/multiscreen/screensizes.html">https://developer.android.com/training/multiscreen/screensizes.html</a></p>
<h5 id="资源图片适配"><a href="#资源图片适配" class="headerlink" title="资源图片适配"></a>资源图片适配</h5><p>Provide alternative bitmaps</p>
<p>To provide good graphical qualities on devices with different pixel densities, you should provide multiple versions of each bitmap in your app—one for each density bucket, at a corresponding resolution. Otherwise, Android must scale your bitmap so it occupies the same visible space on each screen, resulting in scaling artifacts such as blurring.</p>
<p><img src="https://developer.android.com/images/screens_support/devices-density_2x.png" alt="img"></p>
<p><strong>Figure 2.</strong> Relative sizes for bitmaps at different density sizes</p>
<p>There are several density buckets available for use in your apps. Table 1 describes the different configuration qualifiers available and what screen types they apply to.</p>
<p><strong>Table 1.</strong> Configuration qualifiers for different pixel densities.</p>
<table>
<thead>
<tr>
<th align="left">Density qualifier</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>ldpi</code></td>
<td align="left">Resources for low-density (<em>ldpi</em>) screens (~120dpi).</td>
</tr>
<tr>
<td align="left"><code>mdpi</code></td>
<td align="left">Resources for medium-density (<em>mdpi</em>) screens (~160dpi). (This is the baseline density.)</td>
</tr>
<tr>
<td align="left"><code>hdpi</code></td>
<td align="left">Resources for high-density (<em>hdpi</em>) screens (~240dpi).</td>
</tr>
<tr>
<td align="left"><code>xhdpi</code></td>
<td align="left">Resources for extra-high-density (<em>xhdpi</em>) screens (~320dpi).</td>
</tr>
<tr>
<td align="left"><code>xxhdpi</code></td>
<td align="left">Resources for extra-extra-high-density (<em>xxhdpi</em>) screens (~480dpi).</td>
</tr>
<tr>
<td align="left"><code>xxxhdpi</code></td>
<td align="left">Resources for extra-extra-extra-high-density (<em>xxxhdpi</em>) uses (~640dpi).</td>
</tr>
<tr>
<td align="left"><code>nodpi</code></td>
<td align="left">Resources for all densities. These are density-independent resources. The system does not scale resources tagged with this qualifier, regardless of the current screen’s density.</td>
</tr>
<tr>
<td align="left"><code>tvdpi</code></td>
<td align="left">Resources for screens somewhere between mdpi and hdpi; approximately 213dpi. This is not considered a “primary” density group. It is mostly intended for televisions and most apps shouldn’t need it—providing mdpi and hdpi resources is sufficient for most apps and the system will scale them as appropriate. If you find it necessary to provide tvdpi resources, you should size them at a factor of 1.33*mdpi. For example, a 100px x 100px image for mdpi screens should be 133px x 133px for tvdpi.</td>
</tr>
</tbody></table>
<p>To create alternative bitmap drawables for different densities, you should follow the <strong>3:4:6:8:12:16 scaling ratio</strong> between the six primary densities. For example, if you have a bitmap drawable that’s 48x48 pixels for medium-density screens, all the different sizes should be:</p>
<ul>
<li>36x36 (0.75x) for low-density (ldpi)</li>
<li>48x48 (1.0x baseline) for medium-density (mdpi)</li>
<li>72x72 (1.5x) for high-density (hdpi)</li>
<li>96x96 (2.0x) for extra-high-density (xhdpi)</li>
<li>144x144 (3.0x) for extra-extra-high-density (xxhdpi)</li>
<li>192x192 (4.0x) for extra-extra-extra-high-density (xxxhdpi)</li>
</ul>
<p>Then, place the generated image files in the appropriate subdirectory under <code>res/</code> and the system will pick the correct one automatically based on the pixel density of the device your app is running on:</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">res/</span><br><span class="line">  drawable-xxxhdpi/</span><br><span class="line">    awesome-image.png</span><br><span class="line">  drawable-xxhdpi/</span><br><span class="line">    awesome-image.png</span><br><span class="line">  drawable-xhdpi/</span><br><span class="line">    awesome-image.png</span><br><span class="line">  drawable-hdpi/</span><br><span class="line">    awesome-image.png</span><br><span class="line">  drawable-mdpi/</span><br><span class="line">    awesome-image.png</span><br></pre></td></tr></table></figure>

<p>Then, any time you reference <code>@drawable/awesomeimage</code>, the system selects the appropriate bitmap based on the screen’s dpi. If you don’t provide a density-specific resource for that density, the system picks the next best match and scales it to fit the screen.</p>
<p>This means that if you generate a 200x200 image for xhdpi devices, you should generate the same resource in 150x150 for hdpi, 100x100 for mdpi, and 75x75 for ldpi devices.<br>而UI问我们需要多少大小的图，如果效果图根据750*1334的话，可以告诉他，不过PS有个叫<br>cutterman的工具可以自动生成不同分辨率的图片</p>
<ul>
<li>PX转 dp</li>
</ul>
<p>以5X 为例: 5X的dpi =420,   PPI = 420/160 = 2.625<br>设置view的宽度我们用　match_parent,那么在5X上，他是多少dp呢？</p>
<p>5X : width = 1080 px<br>dp = 1080 / PPI = 411.428571429,<br>所以411dp就是5X的match_parent</p>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/u010983881/article/details/51993157">http://blog.csdn.net/u010983881/article/details/51993157</a></p>
<h5 id="实际应用"><a href="#实际应用" class="headerlink" title="实际应用"></a>实际应用</h5><ul>
<li>开发中的实际转化</li>
</ul>
<p>　　生成主流屏幕的values，安宽分成320份,高400份<br>　　<br>　　假设ＵＩ根据 iphone6(750×1334)设计的效果图<br>　　根据下图公式计算　Dpi</p>
<p>　   iphone6是4.7寸的 分辨率 750 * 1334,　它的dpi 就是　√(750²+1334²)/4.7 =  325 </p>
<p>​       和drawable-xhdpi 320接近<br>　　<br>　　drawable-xhdpi　480上做的图就是大概是1.5倍的样子 ,分辨率在1920 *1080上的也是一样的</p>
<p>​    然而pixel 2的模拟器是420 真机是441，这是什么原因呢!!!</p>
<p>　　<a target="_blank" rel="noopener" href="http://blog.csdn.net/zengd0/article/details/52464627">http://blog.csdn.net/zengd0/article/details/52464627</a><br>　　所以说　给的1334 * 750 　图就是<br>　　10px  我们写5dp</p>
<p>​    参考:　<a target="_blank" rel="noopener" href="http://www.jianshu.com/p/ec5a1a30694b">http://www.jianshu.com/p/ec5a1a30694b</a><br>　<a target="_blank" rel="noopener" href="http://blog.csdn.net/lmj623565791/article/details/45460089">http://blog.csdn.net/lmj623565791/article/details/45460089</a>
　</p>
<ul>
<li>DPI参考</li>
</ul>
<p>自己计算按照上面的公式很简单，最棘手的还是手机尺寸给出一个手机dpi网站 get what you want<br><a target="_blank" rel="noopener" href="http://dpi.lv/">http://dpi.lv/</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/v_aauFjx-f91WrpCAaNMVQ">https://mp.weixin.qq.com/s/v_aauFjx-f91WrpCAaNMVQ</a>)</p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/practices/screens_support">https://developer.android.com/guide/practices/screens_support</a></p>
<p>今日头条适配 </p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/55e0fca23b4f">https://www.jianshu.com/p/55e0fca23b4f</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/JessYanCoding/AndroidAutoSize">https://github.com/JessYanCoding/AndroidAutoSize</a></p>
<p>为什么原来长度 ic_launcher.png 192*192  到了nexus5 中显示是216 * 216 而不是原来的尺寸</p>

        
        
          <blockquote id="copyright">
              <p>Enlace original: <a href="http://noteforme.github.io.com/page/14/index.html">http://noteforme.github.io.com/page/14/index.html</a></p>
              <p>Declaración de copyright: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Cuota:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>



    <nav id="page-nav">

<a class="extend prev" rel="prev" href="/page/13/">Anterior</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="page-number" href="/page/13/">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/">15</a><a class="page-number" href="/page/16/">16</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/15/">Siguiente</a>
</nav>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-posts"></i> Recientes</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/09/11/kotlin-senior2/">kotlin-senior2</a>
          </li>
        
          <li>
            <a href="/2021/08/30/Leetcode/">Leetcode_Linklist</a>
          </li>
        
          <li>
            <a href="/2021/08/29/Dagger/">Dagger</a>
          </li>
        
          <li>
            <a href="/2021/08/22/kotlin-senior/">kotlin-senior</a>
          </li>
        
          <li>
            <a href="/2021/08/21/kotlin-object/">kotlin-object</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> Nube de etiquetas</h3>
    <div class="widget tagcloud">
      <a href="/tags/AOSP/" style="font-size: 20px;">AOSP</a> <a href="/tags/Activity/" style="font-size: 10px;">Activity</a> <a href="/tags/AndroidNewFeatures/" style="font-size: 10px;">AndroidNewFeatures</a> <a href="/tags/Assembly/" style="font-size: 10px;">Assembly</a> <a href="/tags/BLOG/" style="font-size: 10px;">BLOG</a> <a href="/tags/ConstraintLayout/" style="font-size: 10px;">ConstraintLayout</a> <a href="/tags/DB/" style="font-size: 11.67px;">DB</a> <a href="/tags/DataStructure/" style="font-size: 10px;">DataStructure</a> <a href="/tags/Drawer/" style="font-size: 10px;">Drawer</a> <a href="/tags/Git/" style="font-size: 11.67px;">Git</a> <a href="/tags/JVM/" style="font-size: 18.33px;">JVM</a> <a href="/tags/Kotlin/" style="font-size: 16.67px;">Kotlin</a> <a href="/tags/RxJava/" style="font-size: 15px;">RxJava</a> <a href="/tags/THINK/" style="font-size: 10px;">THINK</a> <a href="/tags/TabLayout/" style="font-size: 10px;">TabLayout</a> <a href="/tags/Test/" style="font-size: 15px;">Test</a> <a href="/tags/TouchEvent/" style="font-size: 13.33px;">TouchEvent</a> <a href="/tags/VIEW/" style="font-size: 13.33px;">VIEW</a> <a href="/tags/concurrency/" style="font-size: 15px;">concurrency</a> <a href="/tags/inter/" style="font-size: 16.67px;">inter</a> <a href="/tags/keyboard/" style="font-size: 10px;">keyboard</a> <a href="/tags/operators/" style="font-size: 10px;">operators</a> <a href="/tags/proguard/" style="font-size: 10px;">proguard</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-classify"></i> Categorías</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ANDROID/">ANDROID</a><span class="category-list-count">54</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/BLE/">BLE</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DataStructure/">DataStructure</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DesignPatterns/">DesignPatterns</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ENGLISH/">ENGLISH</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/">JAVA</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Jetpack/">Jetpack</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kotlin/">Kotlin</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LINUX/">LINUX</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mathematics/">Mathematics</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS/">OS</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Organization/">Organization</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TEST/">TEST</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TOOL/">TOOL</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/VIEW/">VIEW</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/anim/">anim</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/flutter/">flutter</a><span class="category-list-count">5</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-archive"></i> Archivo</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/">2021年09月</a><span class="archive-list-count">18</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020年12月</a><span class="archive-list-count">45</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019年12月</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018年11月</a><span class="archive-list-count">32</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017年12月</a><span class="archive-list-count">57</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> Etiquetas</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AOSP/" rel="tag">AOSP</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Activity/" rel="tag">Activity</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AndroidNewFeatures/" rel="tag">AndroidNewFeatures</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Assembly/" rel="tag">Assembly</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BLOG/" rel="tag">BLOG</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ConstraintLayout/" rel="tag">ConstraintLayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DB/" rel="tag">DB</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DataStructure/" rel="tag">DataStructure</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Drawer/" rel="tag">Drawer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kotlin/" rel="tag">Kotlin</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RxJava/" rel="tag">RxJava</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/THINK/" rel="tag">THINK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TabLayout/" rel="tag">TabLayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Test/" rel="tag">Test</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TouchEvent/" rel="tag">TouchEvent</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VIEW/" rel="tag">VIEW</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/concurrency/" rel="tag">concurrency</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/inter/" rel="tag">inter</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/keyboard/" rel="tag">keyboard</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/operators/" rel="tag">operators</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/proguard/" rel="tag">proguard</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-link"></i> Blogroll</h3>
    <div class="widget">
      <ul>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example1.com/">site-name1</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example2.com/">site-name2</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example3.com/">site-name3</a>
        </li>
      
      </ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <a id="totop" href="#top"></a>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <p>
        <a href="/sitemap.xml">Mapa del sitio</a>
        <span> | </span><a href="/atom.xml">suscribirse a este sitio</a>
        <span> | </span><a href="/about/">Contacta al blogger</a>
      </p>
      
        <p>
          <i class="fa fa-visitors"></i>
          <i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>
          ，
          <i class="fa fa-views"></i>
          <i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>
        </p>
      
      <p>
        <span>Copyright &copy; 2021 Jon.</span>
        <span>Theme by <a href="https://github.com/chaooo/hexo-theme-BlueLake/" target="_blank">BlueLake.</a></span>
        
            <span>Count by <a href="http://busuanzi.ibruce.info/" target="_blank">busuanzi.</a></span>
        
        <span>Powered by <a href="https://hexo.io/" target="_blank">Hexo.</a></span>
      </p>
    </div>
  </div>
</footer>

    </div>
    
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/search.json.js"></script>


  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>






  
<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



  
<script src="/localshare/js/social-share.js"></script>

  
<script src="/localshare/js/qrcode.js"></script>




















  </div>
</body>
</html>