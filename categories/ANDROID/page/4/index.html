<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>Category: ANDROID - Hexo</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Hexo"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Hexo"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Hexo"><meta property="og:url" content="http://example.com/"><meta property="og:site_name" content="Hexo"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://example.com/img/og_image.png"><meta property="article:author" content="John Doe"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://example.com/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com"},"headline":"Hexo","image":["http://example.com/img/og_image.png"],"author":{"@type":"Person","name":"John Doe"},"publisher":{"@type":"Organization","name":"Hexo","logo":{"@type":"ImageObject","url":"http://example.com/img/logo.svg"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="Hexo" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">Categories</a></li><li class="is-active"><a href="#" aria-current="page">ANDROID</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2017-12-27T07:05:34.000Z" title="12/27/2017, 3:05:34 PM">2017-12-27</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-08-19T11:11:44.128Z" title="8/19/2021, 7:11:44 PM">2021-08-19</time></span><span class="level-item"><a class="link-muted" href="/categories/ANDROID/">ANDROID</a></span><span class="level-item">4 minutes read (About 565 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/12/27/NavigationDrawer/">Navigation_Drawer</a></p><div class="content"><h2 id="Drawer使用"><a href="#Drawer使用" class="headerlink" title="Drawer使用"></a>Drawer使用</h2><ul>
<li> 业务</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> void init<span class="constructor">View()</span> &#123;</span><br><span class="line">        mPlanetTitles = get<span class="constructor">Resources()</span>.get<span class="constructor">StringArray(R.<span class="params">array</span>.<span class="params">recycle_array</span>)</span>;</span><br><span class="line">        mDrawerLayout = find<span class="constructor">ViewById(R.<span class="params">id</span>.<span class="params">drawer_layout</span>)</span>;</span><br><span class="line">        mDrawerList = find<span class="constructor">ViewById(R.<span class="params">id</span>.<span class="params">left_drawer</span>)</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Set the adapter for the list view</span></span><br><span class="line">        mDrawerList.set<span class="constructor">Adapter(<span class="params">new</span> ArrayAdapter&lt;String&gt;(<span class="params">this</span>, R.<span class="params">layout</span>.<span class="params">drawer_list_item</span>, <span class="params">mPlanetTitles</span>)</span>);</span><br><span class="line">        mDrawerList.set<span class="constructor">OnItemClickListener(<span class="params">new</span> DrawerItemClickListener()</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> DrawerItemClickListener implements ListView.OnItemClickListener &#123;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void on<span class="constructor">ItemClick(AdapterView&lt;?&gt; <span class="params">adapterView</span>, View <span class="params">view</span>, <span class="params">int</span> <span class="params">position</span>, <span class="params">long</span> <span class="params">l</span>)</span> &#123;</span><br><span class="line">            select<span class="constructor">Item(<span class="params">position</span>)</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Swaps fragments in the main content view</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> void select<span class="constructor">Item(<span class="params">int</span> <span class="params">position</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// Create a new fragment and specify the planet to show based on position</span></span><br><span class="line">        Fragment fragment = <span class="keyword">new</span> <span class="constructor">PullToRefreshFragment()</span>;</span><br><span class="line">        <span class="comment">// Insert the fragment by replacing any existing fragment</span></span><br><span class="line">        FragmentManager fragmentManager = get<span class="constructor">FragmentManager()</span>;</span><br><span class="line">        fragmentManager.<span class="keyword">begin</span><span class="constructor">Transaction()</span>.replace(<span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>id.content_frame, fragment)</span><br><span class="line">        .commit<span class="literal">()</span>;</span><br><span class="line">        set<span class="constructor">Title(<span class="params">mPlanetTitles</span>[<span class="params">position</span>])</span>;</span><br><span class="line">        mDrawerLayout.close<span class="constructor">Drawer(<span class="params">mDrawerList</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void set<span class="constructor">Title(CharSequence <span class="params">title</span>)</span> &#123;</span><br><span class="line">        super.set<span class="constructor">Title(<span class="params">title</span>)</span>;</span><br><span class="line"><span class="comment">//        getActionBar().setTitle(title);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.v4.widget.DrawerLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/drawer_layout&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;com.jonzhou.mineutils.RecycleView.RecycleViewActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &lt;FrameLayout</span><br><span class="line">        android:id=&quot;@+id/content_frame&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;ListView</span><br><span class="line">        android:id=&quot;@+id/left_drawer&quot;</span><br><span class="line">        android:layout_width=&quot;240dp&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot;</span><br><span class="line">        android:layout_gravity=&quot;start&quot;</span><br><span class="line">        android:background=&quot;#111&quot;</span><br><span class="line">        android:choiceMode=&quot;singleChoice&quot;</span><br><span class="line">        android:divider=&quot;@android:color/transparent&quot;</span><br><span class="line">        android:dividerHeight=&quot;0dp&quot; /&gt;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.v4.widget.DrawerLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="原生用法"><a href="#原生用法" class="headerlink" title="原生用法"></a>原生用法</h2><p>　    一般情况抽屉内容都不会很多所以就可以用　　<em>NavigationView替换ListView</em></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">	<span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.v4.widget.DrawerLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/drawer_layout&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:fitsSystemWindows</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:openDrawer</span>=<span class="string">&quot;start&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &lt;include</span><br><span class="line">        layout=&quot;@layout/app_bar_navigation&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;android.support.design.widget.NavigationView</span><br><span class="line">        android:id=&quot;@+id/nav_view&quot;</span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot;</span><br><span class="line">        android:layout_gravity=&quot;start&quot;</span><br><span class="line">        android:fitsSystemWindows=&quot;true&quot;</span><br><span class="line">        app:headerLayout=&quot;@layout/nav_header_navigation&quot;</span><br><span class="line">        app:menu=&quot;@menu/activity_navigation_drawer&quot; /&gt;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.v4.widget.DrawerLayout</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>  查看NavigationView,可以看到　headerLayout，menu分别时抽屉的上下两部分，activity_navigation_drawer最好别用这个名称，否则可能加载系统默认布局怎么改都没用</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">	</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="built_in">void</span> <span class="function"><span class="title">onCreate</span>(<span class="params">Bundle savedInstanceState</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.activity_navigation);</span><br><span class="line">    Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);</span><br><span class="line">    setSupportActionBar(toolbar);</span><br><span class="line"></span><br><span class="line">    FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.fab);</span><br><span class="line">    fab.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">void</span> <span class="function"><span class="title">onClick</span>(<span class="params">View view</span>)</span> &#123;</span><br><span class="line">            Snackbar.make(view, <span class="string">&quot;Replace with your own action&quot;</span>, Snackbar.LENGTH_LONG)</span><br><span class="line">                    .setAction(<span class="string">&quot;Action&quot;</span>, <span class="literal">null</span>).show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    DrawerLayout drawer = (DrawerLayout) findViewById(R.id.drawer_layout);</span><br><span class="line">    ActionBarDrawerToggle toggle = <span class="keyword">new</span> ActionBarDrawerToggle(</span><br><span class="line">            <span class="built_in">this</span>, drawer, toolbar, R.string.navigation_drawer_open, R.string.navigation_drawer_close);</span><br><span class="line">    drawer.addDrawerListener(toggle);</span><br><span class="line">    toggle.syncState();</span><br><span class="line"></span><br><span class="line">    NavigationView navigationView = (NavigationView) findViewById(R.id.nav_view);</span><br><span class="line">    navigationView.setNavigationItemSelectedListener(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">void</span> <span class="function"><span class="title">onBackPressed</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    DrawerLayout drawer = (DrawerLayout) findViewById(R.id.drawer_layout);</span><br><span class="line">    <span class="keyword">if</span> (drawer.isDrawerOpen(GravityCompat.START)) &#123;</span><br><span class="line">        drawer.closeDrawer(GravityCompat.START);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onBackPressed();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">boolean</span> <span class="function"><span class="title">onCreateOptionsMenu</span>(<span class="params">Menu menu</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// Inflate the menu; this adds items to the action bar if it is present.</span></span><br><span class="line">    getMenuInflater().inflate(R.menu.navigation, menu);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">boolean</span> <span class="function"><span class="title">onOptionsItemSelected</span>(<span class="params">MenuItem item</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// Handle action bar item clicks here. The action bar will</span></span><br><span class="line">    <span class="comment">// automatically handle clicks on the Home/Up button, so long</span></span><br><span class="line">    <span class="comment">// as you specify a parent activity in AndroidManifest.xml.</span></span><br><span class="line">    int id = item.getItemId();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//noinspection SimplifiableIfStatement</span></span><br><span class="line">    <span class="keyword">if</span> (id == R.id.action_settings) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">super</span>.onOptionsItemSelected(item);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">&quot;StatementWithEmptyBody&quot;</span>)</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">boolean</span> <span class="function"><span class="title">onNavigationItemSelected</span>(<span class="params">MenuItem item</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// Handle navigation view item clicks here.</span></span><br><span class="line">    int id = item.getItemId();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (id == R.id.nav_camera) &#123;</span><br><span class="line">        <span class="comment">// Handle the camera action</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (id == R.id.nav_gallery) &#123;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (id == R.id.nav_slideshow) &#123;</span><br><span class="line"></span><br><span class="line">    &#125; </span><br><span class="line">    DrawerLayout drawer = (DrawerLayout) findViewById(R.id.drawer_layout);</span><br><span class="line">    drawer.closeDrawer(GravityCompat.START);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>动态修改　headLayout的内容</p>
<pre><code>   View headerLayout = navView.getHeaderView(0);
  TextView tevtView = headerLayout.findViewById(R.id.textView);
  tevtView.setText(&quot;nishiminglema &quot;);
</code></pre>
</li>
</ul>
<p>注意　NavigationView也可以添加头部<br>参考：　　<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000004151222">https://segmentfault.com/a/1190000004151222</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/reference/android/support/design/widget/NavigationView.html">https://developer.android.com/reference/android/support/design/widget/NavigationView.html</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/reference/android/support/v4/widget/DrawerLayout.html">https://developer.android.com/reference/android/support/v4/widget/DrawerLayout.html</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/training/implementing-navigation/nav-drawer.html?hl=zh-cn">https://developer.android.com/training/implementing-navigation/nav-drawer.html?hl=zh-cn</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2017-12-26T07:32:39.000Z" title="12/26/2017, 3:32:39 PM">2017-12-26</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-08-19T11:11:44.238Z" title="8/19/2021, 7:11:44 PM">2021-08-19</time></span><span class="level-item"><a class="link-muted" href="/categories/ANDROID/">ANDROID</a></span><span class="level-item">2 minutes read (About 312 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/12/26/TAB_VIEWPAGER/">TAB_VIEWPAGER</a></p><div class="content"><p><a target="_blank" rel="noopener" href="https://developer.android.com/reference/com/google/android/material/tabs/TabLayout">https://developer.android.com/reference/com/google/android/material/tabs/TabLayout</a></p>
<h4 id="ViewPager"><a href="#ViewPager" class="headerlink" title="ViewPager"></a>ViewPager</h4><h5 id="TabLayout方式"><a href="#TabLayout方式" class="headerlink" title="TabLayout方式"></a>TabLayout方式</h5><ul>
<li>动态</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">TabLayout tabLayout = ...;</span><br><span class="line"> tabLayout.add<span class="constructor">Tab(<span class="params">tabLayout</span>.<span class="params">newTab</span>()</span>.set<span class="constructor">Text(<span class="string">&quot;Tab 1&quot;</span>)</span>);</span><br><span class="line"> tabLayout.add<span class="constructor">Tab(<span class="params">tabLayout</span>.<span class="params">newTab</span>()</span>.set<span class="constructor">Text(<span class="string">&quot;Tab 2&quot;</span>)</span>);</span><br><span class="line"> tabLayout.add<span class="constructor">Tab(<span class="params">tabLayout</span>.<span class="params">newTab</span>()</span>.set<span class="constructor">Text(<span class="string">&quot;Tab 3&quot;</span>)</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>静态</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;com<span class="selector-class">.google</span><span class="selector-class">.android</span><span class="selector-class">.material</span><span class="selector-class">.tabs</span>.TabLayout</span><br><span class="line">        android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">        android:layout_width=<span class="string">&quot;match_parent&quot;</span>&gt;</span><br><span class="line">  </span><br><span class="line">    &lt;com<span class="selector-class">.google</span><span class="selector-class">.android</span><span class="selector-class">.material</span><span class="selector-class">.tabs</span>.TabItem</span><br><span class="line">            android:text=<span class="string">&quot;@string/tab_text&quot;</span>/&gt;</span><br><span class="line">  </span><br><span class="line">    &lt;com<span class="selector-class">.google</span><span class="selector-class">.android</span><span class="selector-class">.material</span><span class="selector-class">.tabs</span>.TabItem</span><br><span class="line">            android:<span class="attribute">icon</span>=<span class="string">&quot;@drawable/ic_android&quot;</span>/&gt;</span><br><span class="line">  </span><br><span class="line">&lt;/com<span class="selector-class">.google</span><span class="selector-class">.android</span><span class="selector-class">.material</span><span class="selector-class">.tabs</span>.TabLayout&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="滑动TAB"><a href="#滑动TAB" class="headerlink" title="滑动TAB"></a>滑动TAB</h5><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;androidx<span class="selector-class">.viewpager</span><span class="selector-class">.widget</span>.ViewPager</span><br><span class="line">     android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">     android:layout_height=<span class="string">&quot;match_parent&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">     &lt;com<span class="selector-class">.google</span><span class="selector-class">.android</span><span class="selector-class">.material</span><span class="selector-class">.tabs</span>.TabLayout</span><br><span class="line">         android:layout_width=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">         android:layout_height=<span class="string">&quot;wrap_content&quot;</span></span><br><span class="line">         android:layout_gravity=<span class="string">&quot;top&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"> &lt;/androidx<span class="selector-class">.viewpager</span><span class="selector-class">.widget</span>.ViewPager&gt;</span><br></pre></td></tr></table></figure>

<p>设置Tab</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">TabLayout tabVp = rootView.find<span class="constructor">ViewById(R.<span class="params">id</span>.<span class="params">tab_vp</span>)</span>;</span><br><span class="line">viewPager = rootView.find<span class="constructor">ViewById(R.<span class="params">id</span>.<span class="params">view_pager</span>)</span>;</span><br><span class="line">  framgents = <span class="keyword">new</span> LinkedHashMap&lt;&gt;<span class="literal">()</span>;</span><br><span class="line">framgents.put(<span class="string">&quot;项目详情&quot;</span>, introFragment);</span><br><span class="line">framgents.put(<span class="string">&quot;相关图片&quot;</span>, imageFragment);</span><br><span class="line">framgents.put(<span class="string">&quot;投资记录&quot;</span>, rankFragment);</span><br><span class="line"></span><br><span class="line">titles = <span class="keyword">new</span> LinkedList&lt;&gt;<span class="literal">()</span>;</span><br><span class="line">titles.add<span class="constructor">All(<span class="params">framgents</span>.<span class="params">keySet</span>()</span>);</span><br><span class="line"></span><br><span class="line">viewPager.set<span class="constructor">Adapter(<span class="params">new</span> MyPagerAdapter(<span class="params">getFragmentManager</span>()</span>));</span><br><span class="line">tabVp.setup<span class="constructor">WithViewPager(<span class="params">viewPager</span>)</span>;</span><br></pre></td></tr></table></figure>



<ul>
<li><p>默认设置</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">mTabLayout</span><span class="selector-class">.getTabAt</span>(roomType)<span class="selector-class">.select</span>();</span><br><span class="line"><span class="selector-tag">viewpager</span><span class="selector-class">.setCurrentItem</span>(<span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000008753052">https://segmentfault.com/a/1190000008753052</a></p>
</li>
</ul>
<h5 id="自定义TabItem"><a href="#自定义TabItem" class="headerlink" title="自定义TabItem"></a>自定义TabItem</h5><ul>
<li><p>tab_item.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id=&quot;@+id/tv_item_title&quot;</span><br><span class="line">        android:layout_width=&quot;40dp&quot;</span><br><span class="line">        android:layout_height=&quot;40dp&quot;</span><br><span class="line">        android:layout_gravity=&quot;center_horizontal&quot;</span><br><span class="line">        android:background=&quot;@drawable/bg_tab_item_select&quot;</span><br><span class="line">        android:gravity=&quot;center&quot;</span><br><span class="line">        android:textColor=&quot;@drawable/bg_tab_item_select_txt&quot;</span><br><span class="line">        android:textSize=&quot;@dimen/text_size_14&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;View</span><br><span class="line">        android:id=&quot;@+id/view_line&quot;</span><br><span class="line">        android:layout_width=&quot;0dp&quot;</span><br><span class="line">        android:layout_height=&quot;1dp&quot;</span><br><span class="line">        android:layout_gravity=&quot;center_vertical&quot;</span><br><span class="line">        android:layout_marginLeft=&quot;@dimen/dimen_10&quot;</span><br><span class="line">        android:layout_weight=&quot;1&quot;</span><br><span class="line">        android:background=&quot;@android:color/darker_gray&quot; /&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">tabLayout = find<span class="constructor">ViewById(R.<span class="params">id</span>.<span class="params">tb_layout</span>)</span>;</span><br><span class="line">     <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; tabTitles.length; i++) &#123;</span><br><span class="line">         tabLayout.add<span class="constructor">Tab(<span class="params">tabLayout</span>.<span class="params">newTab</span>()</span>);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; tabTitles.length; i++) &#123;</span><br><span class="line">         TabLayout.Tab tab = tabLayout.get<span class="constructor">TabAt(<span class="params">i</span>)</span>;</span><br><span class="line">         tab.set<span class="constructor">CustomView(R.<span class="params">layout</span>.<span class="params">tab_item</span>)</span>;</span><br><span class="line">         TextView tvItemTitle = tab.get<span class="constructor">CustomView()</span>.find<span class="constructor">ViewById(R.<span class="params">id</span>.<span class="params">tv_item_title</span>)</span>;</span><br><span class="line">         tvItemTitle.set<span class="constructor">Text(<span class="params">tabTitles</span>[<span class="params">i</span>])</span>;</span><br><span class="line">         <span class="keyword">if</span> (i<span class="operator"> == </span>tabTitles.length - <span class="number">1</span>) &#123;</span><br><span class="line">             tab.get<span class="constructor">CustomView()</span>.find<span class="constructor">ViewById(R.<span class="params">id</span>.<span class="params">view_line</span>)</span>.set<span class="constructor">Visibility(View.GONE)</span>;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ed129686f2cc">https://www.jianshu.com/p/ed129686f2cc</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/android_zhengyongbo/article/details/74726176">https://blog.csdn.net/android_zhengyongbo/article/details/74726176</a></p>
<h5 id="修改指示器颜色"><a href="#修改指示器颜色" class="headerlink" title="修改指示器颜色"></a>修改指示器颜色</h5><p><a target="_blank" rel="noopener" href="https://codeday.me/bug/20170629/35704.html">https://codeday.me/bug/20170629/35704.html</a></p>
<h5 id="设置Tab选择背景"><a href="#设置Tab选择背景" class="headerlink" title="设置Tab选择背景"></a>设置Tab选择背景</h5><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/jdsjlzx/article/details/52171075">https://blog.csdn.net/jdsjlzx/article/details/52171075</a></p>
<p> <img src="/2017/12/26/TAB_VIEWPAGER/TAB_VIEWPAGER%5CtabLayout_20190603110418.png" alt="tabLayout_20190603110418"></p>
<p>首先设置 </p>
<ul>
<li><p>tabGravity fill模式 center是居中</p>
</li>
<li><p>通过layer-list设置间距</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selector</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:state_selected</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layer-list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">shape</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;@android:color/transparent&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:left</span>=<span class="string">&quot;@dimen/dimen_10&quot;</span> <span class="attr">android:right</span>=<span class="string">&quot;@dimen/dimen_10&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">shape</span> <span class="attr">android:shape</span>=<span class="string">&quot;rectangle&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">&quot;3dp&quot;</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;#ffa2cb79&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layer-list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">shape</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;@android:color/transparent&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">solid</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:left</span>=<span class="string">&quot;@dimen/dimen_10&quot;</span> <span class="attr">android:right</span>=<span class="string">&quot;@dimen/dimen_10&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">shape</span> <span class="attr">android:shape</span>=<span class="string">&quot;rectangle&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">&quot;3dp&quot;</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">&quot;#ffdddddd&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">layer-list</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">selector</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="ViewPager2"><a href="#ViewPager2" class="headerlink" title="ViewPager2"></a>ViewPager2</h4><h5 id="migration"><a href="#migration" class="headerlink" title="migration"></a>migration</h5><p><a target="_blank" rel="noopener" href="https://developer.android.com/training/animation/screen-slide-2#kotlin">https://developer.android.com/training/animation/screen-slide-2#kotlin</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/training/animation/vp2-migration">https://developer.android.com/training/animation/vp2-migration</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/android/views-widgets-samples/tree/master/ViewPager2">https://github.com/android/views-widgets-samples/tree/master/ViewPager2</a></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;androidx.viewpager2.widget.ViewPager2</span><br><span class="line">    android:<span class="attribute">id</span>=<span class="string">&quot;@+id/view_pater2&quot;</span></span><br><span class="line">    android:<span class="attribute">layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span><br><span class="line">    android:<span class="attribute">layout_height</span>=<span class="string">&quot;0dp&quot;</span></span><br><span class="line">    android:<span class="attribute">layout_marginTop</span>=<span class="string">&quot;27dp&quot;</span></span><br><span class="line">    app:<span class="attribute">layout_constraintBottom_toBottomOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">view_pater2.adapter</span> = ScreenSlidePagerAdapter(this)</span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">inner</span> <span class="class"><span class="keyword">class</span> <span class="title">ScreenSlidePagerAdapter</span></span>(fa: Fragment) : FragmentStateAdapter(fa) &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">getItemCount</span><span class="params">()</span></span>: <span class="built_in">Int</span> = <span class="number">2</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">createFragment</span><span class="params">(position: <span class="type">Int</span>)</span></span>: Fragment&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">if</span> (position==<span class="number">1</span>)&#123;</span><br><span class="line">            BodyDataFragment.newInstance()</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            SleepFragment.newInstance()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2017-12-21T06:49:56.000Z" title="12/21/2017, 2:49:56 PM">2017-12-21</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-08-19T11:11:44.095Z" title="8/19/2021, 7:11:44 PM">2021-08-19</time></span><span class="level-item"><a class="link-muted" href="/categories/ANDROID/">ANDROID</a></span><span class="level-item">a few seconds read (About 65 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/12/21/Keyboard/">Keyboard</a></p><div class="content"><p><a target="_blank" rel="noopener" href="https://developer.android.com/training/keyboard-input/style.html">https://developer.android.com/training/keyboard-input/style.html</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">static</span> Timer timer = <span class="keyword">new</span> Timer();</span><br><span class="line"></span><br><span class="line">     timer.schedule(<span class="keyword">new</span> TimerTask() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">               showSoftKeyboard(etInvestMoney);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;, <span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showSoftKeyboard</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (view.requestFocus()) &#123;</span><br><span class="line">           InputMethodManager imm = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);</span><br><span class="line">           imm.showSoftInput(view, InputMethodManager.RESULT_UNCHANGED_SHOWN);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/215b388a6e7d">http://www.jianshu.com/p/215b388a6e7d</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5eddf8456fb9a04804041738">https://juejin.im/post/5eddf8456fb9a04804041738</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2017-12-18T23:29:23.000Z" title="12/19/2017, 7:29:23 AM">2017-12-19</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-01-02T03:31:39.310Z" title="1/2/2023, 11:31:39 AM">2023-01-02</time></span><span class="level-item"><a class="link-muted" href="/categories/ANDROID/">ANDROID</a></span><span class="level-item">3 minutes read (About 425 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/12/19/proguard/">proguard</a></p><div class="content"><h1 id="ProGuard中间文件"><a href="#ProGuard中间文件" class="headerlink" title="ProGuard中间文件"></a>ProGuard中间文件</h1><p>开启ProGuard，Android工程被Build后，会生成以下文件：<project_root>\app\build\outputs\mapping\release </project_root></p>
<ul>
<li><p>dump.txt<br>apk文件中所有类的构成一览 </p>
</li>
<li><p>mapping.txt<br>记录了混淆后的名字与混淆前的名字的对应关系，每一次混淆结果和映射关系都不一样。<br>当遇到Bug是，查看到的堆信息，要和混淆前的源码关联起来，所以管理这个文件很重要。<br>retrace.bat -verbose mapping.txt stacktrace.txt </p>
<blockquote>
<p>com.rensanning.example.androidsample.User -&gt; com.rensanning.example.androidsample.g:<br>  java.lang.String name -&gt; a<br>  java.lang.String hometown -&gt; b<br>  java.util.ArrayList getUsers() -&gt; a</p>
</blockquote>
</li>
<li><p>seeds.txt<br>未被混淆的类和方法一览 </p>
</li>
<li><p>usage.txt<br>记录了从apk文件中删掉的代码。这个文件一定要认真确认，是否这些代码真的是多余的。</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/6a07046e65f4">https://www.jianshu.com/p/6a07046e65f4</a></p>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/guolin_blog/article/details/50451259">http://blog.csdn.net/guolin_blog/article/details/50451259</a><br><a target="_blank" rel="noopener" href="https://developer.android.com/studio/build/shrink-code.html?hl=zh-cn">https://developer.android.com/studio/build/shrink-code.html?hl=zh-cn</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/WmJyiA3fDNriw5qXuoA9MA">https://mp.weixin.qq.com/s/WmJyiA3fDNriw5qXuoA9MA</a></p>
<h5 id="apktool-判断是否混淆"><a href="#apktool-判断是否混淆" class="headerlink" title="apktool 判断是否混淆"></a>apktool 判断是否混淆</h5><ul>
<li><p>最快的方式</p>
<p>把Apk后缀改成 zip ,解压后把 classes.dex 文件拖到 jadx里面</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/xiaohai695943820/article/details/72367896">https://blog.csdn.net/xiaohai695943820/article/details/72367896</a></p>
<p><a target="_blank" rel="noopener" href="https://www.itread01.com/content/1548717866.html">https://www.itread01.com/content/1548717866.html</a></p>
<ul>
<li>反编译工具介绍</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhen-android/p/7830249.html">https://www.cnblogs.com/zhen-android/p/7830249.html</a></p>
<p><strong>脱糖</strong> 即在编译阶段将在语法层面一些底层字节码不支持的特性转换为基础的字节码结构，(比如List上的泛型脱糖后在字节码层面实际为Object)； Android工具链对Java8语法特性脱糖的过程可谓丰富多彩，当然他们的最终目的是一致的：使更新的语法可以在所有的设备上运行。</p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903828756643854">https://juejin.cn/post/6844903828756643854</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2017-12-17T14:26:11.000Z" title="12/17/2017, 10:26:11 PM">2017-12-17</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-02-23T14:17:11.781Z" title="2/23/2023, 10:17:11 PM">2023-02-23</time></span><span class="level-item"><a class="link-muted" href="/categories/ANDROID/">ANDROID</a></span><span class="level-item">3 minutes read (About 431 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/12/17/NewFeatures/">NewFeatures</a></p><div class="content"><p> ANDROID新特性</p>
<h3 id="apk安装"><a href="#apk安装" class="headerlink" title="apk安装"></a>apk安装</h3><pre><code>   StrictMode API政策
</code></pre>
<ul>
<li>在AndroidManifest.xml添加</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;provider</span><br><span class="line">         android:name&#x3D;&quot;android.support.v4.content.FileProvider&quot;   </span><br><span class="line">         android:authorities&#x3D;&quot;$&#123;applicationId&#125;.fileProvider&quot;         &#x2F;&#x2F; com.cqian是包名</span><br><span class="line">         android:grantUriPermissions&#x3D;&quot;true&quot;</span><br><span class="line">         android:exported&#x3D;&quot;false&quot;&gt;</span><br><span class="line">         &lt;meta-data android:name&#x3D;&quot;android.support.FILE_PROVIDER_PATHS&quot;</span><br><span class="line">             android:resource&#x3D;&quot;@xml&#x2F;provider_install&quot;&#x2F;&gt;</span><br><span class="line">     &lt;&#x2F;provider&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>编写provider_install.xml文件　<br> 新建xml指定共享目录</p>
<p> 有下面几种存储方式, name不变，path就是下面得apkCacheFile</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;files-path name&#x3D;&quot;name&quot; path&#x3D;&quot;path&quot; &#x2F;&gt; 物理路径相当于Context.getFilesDir() + &#x2F;path&#x2F;  </span><br><span class="line">  </span><br><span class="line">&lt;cache-path name&#x3D;&quot;name&quot; path&#x3D;&quot;path&quot; &#x2F;&gt; 物理路径相当于Context.getCacheDir() + &#x2F;path&#x2F;  </span><br><span class="line">  </span><br><span class="line">&lt;external-path name&#x3D;&quot;name&quot; path&#x3D;&quot;path&quot; &#x2F;&gt; 物理路径相当于Environment.getExternalStorageDirectory() + &#x2F;path&#x2F;  </span><br><span class="line">  </span><br><span class="line">&lt;external-files-path name&#x3D;&quot;name&quot; path&#x3D;&quot;path&quot; &#x2F;&gt; 物理路径相当于Context.getExternalFilesDir(String) + &#x2F;path&#x2F;  </span><br><span class="line">  </span><br><span class="line">&lt;external-cache-path name&#x3D;&quot;name&quot; path&#x3D;&quot;path&quot; &#x2F;&gt; 物理路径相当于Context.getExternalCacheDir() + &#x2F;path&#x2F;  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p> 由于我的存储目录用这个，apkCacheFile是SDk卡上得目录名称</p>
<p> <code>String downFile = context.getExternalCacheDir() + &quot;apkCacheFile&quot;</code> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;external-cache-path</span><br><span class="line">     name&#x3D;&quot;name&quot;</span><br><span class="line">     path&#x3D;&quot;apkCacheFile&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>安装APK</p>
<p>就这个安装方法</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">private static void installApk(Context context, File apkFile) &#123;</span><br><span class="line">      Intent intent &#x3D; new Intent();</span><br><span class="line">      &#x2F;&#x2F; 由于没有在Activity环境下启动Activity,设置下面的标签</span><br><span class="line">      intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">      intent.setAction(Intent.ACTION_VIEW);</span><br><span class="line">      String type &#x3D; &quot;application&#x2F;vnd.android.package-archive&quot;;</span><br><span class="line"></span><br><span class="line">      Uri uri;</span><br><span class="line">      if (Build.VERSION.SDK_INT &gt;&#x3D; 24) &#123;</span><br><span class="line">          &#x2F;&#x2F; 参数2 清单文件中provider节点里面的authorities ; 参数3  共享的文件,即apk包的file类</span><br><span class="line">          uri &#x3D; FileProvider.getUriForFile(context, &quot;getPackageName().fileProvider&quot;, apkFile);</span><br><span class="line">          &#x2F;&#x2F;对目标应用临时授权该Uri所代表的文件</span><br><span class="line">          intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">          uri &#x3D; Uri.fromFile(apkFile);</span><br><span class="line">      &#125;</span><br><span class="line">      intent.setDataAndType(uri, type);</span><br><span class="line">      context.startActivity(intent);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>




<p><a target="_blank" rel="noopener" href="https://developer.android.google.cn/about/versions/nougat/android-7.0-changes.html">https://developer.android.google.cn/about/versions/nougat/android-7.0-changes.html</a></p>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/github_2011/article/details/74297460">http://blog.csdn.net/github_2011/article/details/74297460</a></p>
<h5 id="图片拍照"><a href="#图片拍照" class="headerlink" title="图片拍照"></a>图片拍照</h5><p>Android P veridex工具使用</p>
<p>win10安装ubuntu</p>
<p><a target="_blank" rel="noopener" href="https://www.linuxidc.com/Linux/2018-03/151256.htm">https://www.linuxidc.com/Linux/2018-03/151256.htm</a></p>
<h5 id="对test-apk进行扫描"><a href="#对test-apk进行扫描" class="headerlink" title="对test.apk进行扫描"></a>对test.apk进行扫描</h5><blockquote>
<p>./appcompat.sh –dex-file=test.apk</p>
</blockquote>
<ul>
<li><p>在cmd里敲bash，找到/mnt，你会发现下面有c d e f ，这些就是你win下的硬盘，你可以直接对win下的文件进行操作，包括执行一些linux指令或者编译Linux程序</p>
</li>
<li><p>用mv /mnt/x/a/b-c.zip /home/user/b.zip这类命令</p>
<p>示例:</p>
<p><a target="_blank" rel="noopener" href="http://www.10tiao.com/html/227/201812/2650244825/1.html">http://www.10tiao.com/html/227/201812/2650244825/1.html</a></p>
</li>
</ul>
<h3 id="android-11适配"><a href="#android-11适配" class="headerlink" title="android 11适配"></a>android 11适配</h3><p><a target="_blank" rel="noopener" href="https://juejin.im/post/6860370635664261128">https://juejin.im/post/6860370635664261128</a></p>
<h3 id="android12适配"><a href="#android12适配" class="headerlink" title="android12适配"></a>android12适配</h3><h5 id="Splash"><a href="#Splash" class="headerlink" title="Splash"></a>Splash</h5><p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=8F0lK2i3VJk">https://www.youtube.com/watch?v=8F0lK2i3VJk</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/develop/ui/views/launch/splash-screen#elements">https://developer.android.com/develop/ui/views/launch/splash-screen#elements</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2017-12-11T02:15:44.000Z" title="12/11/2017, 10:15:44 AM">2017-12-11</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-08-19T11:11:43.802Z" title="8/19/2021, 7:11:43 PM">2021-08-19</time></span><span class="level-item"><a class="link-muted" href="/categories/ANDROID/">ANDROID</a></span><span class="level-item">3 minutes read (About 377 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/12/11/Dialog%20/">Dialog</a></p><div class="content"><h4 id="Dialog"><a href="#Dialog" class="headerlink" title="Dialog"></a>Dialog</h4><p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/topics/ui/dialogs.html">https://developer.android.com/guide/topics/ui/dialogs.html</a><br><a target="_blank" rel="noopener" href="https://developer.android.com/reference/android/app/DialogFragment.html">https://developer.android.com/reference/android/app/DialogFragment.html</a></p>
<h5 id="中间弹出"><a href="#中间弹出" class="headerlink" title="中间弹出"></a>中间弹出</h5><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">class</span> UpdateDialogFragment extends DialogFragment implements View.OnClickListener &#123;</span><br><span class="line">    public static final String UPDATE_MSG = <span class="string">&quot;UPDATE_MSG&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> UpdateBean updateMsg;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public static  DialogFragment <span class="keyword">new</span><span class="constructor">Instance(UpdateBean <span class="params">updateBean</span>)</span> &#123;</span><br><span class="line">        UpdateDialogFragment upDialog = <span class="keyword">new</span> <span class="constructor">UpdateDialogFragment()</span>;</span><br><span class="line">        Bundle bundle = <span class="keyword">new</span> <span class="constructor">Bundle()</span>;</span><br><span class="line">        bundle.put<span class="constructor">Parcelable(UPDATE_MSG, <span class="params">updateBean</span>)</span>;</span><br><span class="line">        upDialog.set<span class="constructor">Arguments(<span class="params">bundle</span>)</span>;</span><br><span class="line">        return upDialog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Dialog on<span class="constructor">CreateDialog(Bundle <span class="params">savedInstanceState</span>)</span> &#123;</span><br><span class="line"></span><br><span class="line">         updateMsg = get<span class="constructor">Arguments()</span>.get<span class="constructor">Parcelable(UPDATE_MSG)</span>;</span><br><span class="line"></span><br><span class="line">        AlertDialog.Builder builder = <span class="keyword">new</span> AlertDialog.<span class="constructor">Builder(<span class="params">getActivity</span>()</span>);</span><br><span class="line">        <span class="comment">// Get the layout inflater</span></span><br><span class="line">        LayoutInflater inflater = get<span class="constructor">Activity()</span>.get<span class="constructor">LayoutInflater()</span>;</span><br><span class="line">        <span class="comment">// Inflate and set the layout for the dialog</span></span><br><span class="line">        <span class="comment">// Pass null as the parent view because its going in the dialog layout</span></span><br><span class="line">        View view = inflater.inflate(<span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>layout.dialog_update, null);</span><br><span class="line">        TextView tvUpdatetitle = (TextView) view.find<span class="constructor">ViewById(R.<span class="params">id</span>.<span class="params">tv_update_title</span>)</span>;</span><br><span class="line">        TextView tvUpDescribe = (TextView) view.find<span class="constructor">ViewById(R.<span class="params">id</span>.<span class="params">tv_up_describe</span>)</span>;</span><br><span class="line">        tvUpDescribe.set<span class="constructor">Text(<span class="params">updateMsg</span>.<span class="params">getDesc</span>()</span>);</span><br><span class="line">        TextView tvUpdateYes = (TextView) view.find<span class="constructor">ViewById(R.<span class="params">id</span>.<span class="params">tv_update_yes</span>)</span>;</span><br><span class="line">        TextView tvUpdateNo = (TextView) view.find<span class="constructor">ViewById(R.<span class="params">id</span>.<span class="params">tv_update_no</span>)</span>;</span><br><span class="line">        tvUpdateYes.set<span class="constructor">OnClickListener(<span class="params">this</span>)</span>;</span><br><span class="line">        tvUpdateNo.set<span class="constructor">OnClickListener(<span class="params">this</span>)</span>;</span><br><span class="line">        builder.set<span class="constructor">View(<span class="params">view</span>)</span>;</span><br><span class="line">        <span class="comment">// Add action buttons</span></span><br><span class="line">        return builder.create<span class="literal">()</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void on<span class="constructor">Click(View <span class="params">v</span>)</span> &#123;</span><br><span class="line">        switch (v.get<span class="constructor">Id()</span>) &#123;</span><br><span class="line">            case <span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>id.tv_update_yes:</span><br><span class="line">                mListener.on<span class="constructor">DialogPositiveClick(<span class="params">this</span>,<span class="params">updateMsg</span>)</span>;</span><br><span class="line">                break;</span><br><span class="line">            case <span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>id.tv_update_no:</span><br><span class="line">                mListener.on<span class="constructor">DialogNegativeClick(<span class="params">this</span>)</span>;</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* The activity that creates an instance of this dialog fragment must</span></span><br><span class="line"><span class="comment">     * implement this interface in order to receive event callbacks.</span></span><br><span class="line"><span class="comment">     * Each method passes the DialogFragment in case the host needs to query it. */</span></span><br><span class="line">    public interface NoticeDialogListener &#123;</span><br><span class="line">        void on<span class="constructor">DialogPositiveClick(DialogFragment <span class="params">dialog</span>,UpdateBean <span class="params">updateBean</span>)</span>;</span><br><span class="line"></span><br><span class="line">        void on<span class="constructor">DialogNegativeClick(DialogFragment <span class="params">dialog</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Use this instance of the interface to deliver action events</span></span><br><span class="line">    NoticeDialogListener mListener;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Override the Fragment.onAttach() method to instantiate the NoticeDialogListener</span></span><br><span class="line">    @Override</span><br><span class="line">    public void on<span class="constructor">Attach(Activity <span class="params">activity</span>)</span> &#123;</span><br><span class="line">        super.on<span class="constructor">Attach(<span class="params">activity</span>)</span>;</span><br><span class="line">        <span class="comment">// Verify that the host activity implements the callback interface</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// Instantiate the NoticeDialogListener so we can send events to the host</span></span><br><span class="line">            mListener = (NoticeDialogListener) activity;</span><br><span class="line">        &#125; catch (ClassCastException e) &#123;</span><br><span class="line">            <span class="comment">// The activity doesn&#x27;t implement the interface, throw exception</span></span><br><span class="line">            throw <span class="keyword">new</span> <span class="constructor">ClassCastException(<span class="params">activity</span>.<span class="params">toString</span>()</span></span><br><span class="line">                    + <span class="string">&quot; must implement NoticeDialogListener&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="底部弹出"><a href="#底部弹出" class="headerlink" title="底部弹出"></a>底部弹出</h5><p><a target="_blank" rel="noopener" href="https://github.com/umano/AndroidSlidingUpPanel">https://github.com/umano/AndroidSlidingUpPanel</a><br><a target="_blank" rel="noopener" href="https://material.io/guidelines/components/dialogs.html#dialogs-specs">https://material.io/guidelines/components/dialogs.html#dialogs-specs</a></p>
<p><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/0a7383e0ad0f">http://www.jianshu.com/p/0a7383e0ad0f</a></p>
<h4 id="guide-use"><a href="#guide-use" class="headerlink" title="guide use"></a>guide use</h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u014626094/article/details/105430981">https://blog.csdn.net/u014626094/article/details/105430981</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/VadRKHau_YBsV8miFiggEw">https://mp.weixin.qq.com/s/VadRKHau_YBsV8miFiggEw</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2017-12-09T08:41:05.000Z" title="12/9/2017, 4:41:05 PM">2017-12-09</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-08-19T11:11:44.095Z" title="8/19/2021, 7:11:44 PM">2021-08-19</time></span><span class="level-item"><a class="link-muted" href="/categories/ANDROID/">ANDROID</a></span><span class="level-item">2 minutes read (About 362 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/12/09/LOG/">LOG</a></p><div class="content"><h5 id="Timber"><a href="#Timber" class="headerlink" title="Timber"></a>Timber</h5><ol>
<li>添加库</li>
</ol>
<p><code>   implementation &#39;com.jakewharton.timber:timber:4.6.0&#39;</code></p>
<p>**注意 **:  一开始日志打印不了还以为 okhttplogger冲突，BuildConfig需要导入项目的包<code>import com.jonzhou.nytime.BuildConfig;，而不是Timber或其他的包 </code></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">MyApplication</span> <span class="keyword">extends</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    public void onCreate() &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate();</span><br><span class="line">        <span class="keyword">if</span> (<span class="type">BuildConfig</span>.<span class="type">DEBUG</span>) &#123;</span><br><span class="line">            <span class="type">Timber</span>.plant(<span class="keyword">new</span> <span class="type">Timber</span>.<span class="type">DebugTree</span>());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">Timber</span>.plant(<span class="keyword">new</span> <span class="type">CrashReportingTree</span>());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * A tree which logs important information for crash reporting.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> static <span class="class"><span class="keyword">class</span> <span class="title">CrashReportingTree</span> <span class="keyword">extends</span> <span class="title">Timber</span>.<span class="title">Tree</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">protected</span> void log(int priority, <span class="type">String</span> tag, <span class="meta">@NonNull</span> <span class="type">String</span> message, <span class="type">Throwable</span> t) &#123;</span><br><span class="line">            <span class="keyword">if</span> (priority == <span class="type">Log</span>.<span class="type">VERBOSE</span> || priority == <span class="type">Log</span>.<span class="type">DEBUG</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">FakeCrashLibrary</span>.log(priority, tag, message);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (t != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (priority == <span class="type">Log</span>.<span class="type">ERROR</span>) &#123;</span><br><span class="line">                    <span class="type">FakeCrashLibrary</span>.logError(t);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (priority == <span class="type">Log</span>.<span class="type">WARN</span>) &#123;</span><br><span class="line">                    <span class="type">FakeCrashLibrary</span>.logWarning(t);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>使用</li>
</ol>
<p>jake的例子</p>
<p><a target="_blank" rel="noopener" href="https://github.com/JakeWharton/timber/blob/master/timber-sample/src/main/java/com/example/timber/ui/LintActivity.java">LintActivity</a> </p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  <span class="comment">// LogNotTimber</span></span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>d(<span class="string">&quot;TAG&quot;</span>, <span class="string">&quot;msg&quot;</span>);</span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>d(<span class="string">&quot;TAG&quot;</span>, <span class="string">&quot;msg&quot;</span>, <span class="keyword">new</span> <span class="constructor">Exception()</span>);</span><br><span class="line">  android.util.<span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>d(<span class="string">&quot;TAG&quot;</span>, <span class="string">&quot;msg&quot;</span>);</span><br><span class="line">  android.util.<span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>d(<span class="string">&quot;TAG&quot;</span>, <span class="string">&quot;msg&quot;</span>, <span class="keyword">new</span> <span class="constructor">Exception()</span>);</span><br><span class="line">  <span class="comment">// StringFormatInTimber</span></span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>w(<span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>format(<span class="string">&quot;%s&quot;</span>, get<span class="constructor">String()</span>));</span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>w(format(<span class="string">&quot;%s&quot;</span>, get<span class="constructor">String()</span>));</span><br><span class="line">  <span class="comment">// ThrowableNotAtBeginning</span></span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>d(<span class="string">&quot;%s&quot;</span>, <span class="keyword">new</span> <span class="constructor">Exception()</span>);</span><br><span class="line">  <span class="comment">// BinaryOperationInTimber</span></span><br><span class="line">  String foo = <span class="string">&quot;foo&quot;</span>;</span><br><span class="line">  String bar = <span class="string">&quot;bar&quot;</span>;</span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>d(<span class="string">&quot;foo&quot;</span> + <span class="string">&quot;bar&quot;</span>);</span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>d(<span class="string">&quot;foo&quot;</span> + bar);</span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>d(foo + <span class="string">&quot;bar&quot;</span>);</span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>d(foo + bar);</span><br><span class="line">  <span class="comment">// TimberArgCount</span></span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>d(<span class="string">&quot;%s %s&quot;</span>, <span class="string">&quot;arg0&quot;</span>);</span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>d(<span class="string">&quot;%s&quot;</span>, <span class="string">&quot;arg0&quot;</span>, <span class="string">&quot;arg1&quot;</span>);</span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>tag(<span class="string">&quot;tag&quot;</span>).d(<span class="string">&quot;%s %s&quot;</span>, <span class="string">&quot;arg0&quot;</span>);</span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>tag(<span class="string">&quot;tag&quot;</span>).d(<span class="string">&quot;%s&quot;</span>, <span class="string">&quot;arg0&quot;</span>, <span class="string">&quot;arg1&quot;</span>);</span><br><span class="line">  <span class="comment">// TimberArgTypes</span></span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>d(<span class="string">&quot;%d&quot;</span>, <span class="string">&quot;arg0&quot;</span>);</span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>tag(<span class="string">&quot;tag&quot;</span>).d(<span class="string">&quot;%d&quot;</span>, <span class="string">&quot;arg0&quot;</span>);</span><br><span class="line">  <span class="comment">// TimberTagLength</span></span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>tag(<span class="string">&quot;abcdefghijklmnopqrstuvwx&quot;</span>);</span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>tag(<span class="string">&quot;abcdefghijklmnopqrstuvw&quot;</span> + <span class="string">&quot;x&quot;</span>);</span><br><span class="line">  <span class="comment">// TimberExceptionLogging</span></span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>d(<span class="keyword">new</span> <span class="constructor">Exception()</span>, <span class="keyword">new</span> <span class="constructor">Exception()</span>.get<span class="constructor">Message()</span>);</span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>d(<span class="keyword">new</span> <span class="constructor">Exception()</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>d(<span class="keyword">new</span> <span class="constructor">Exception()</span>, null);</span><br><span class="line">  */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String get<span class="constructor">String()</span> &#123;</span><br><span class="line">  return <span class="string">&quot;foo&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="Xlog"><a href="#Xlog" class="headerlink" title="Xlog"></a>Xlog</h5><p>1 . 环境配置 </p>
<p> 安装 pyelliptic1.5.7  <code> sudo python setup.py install</code></p>
<ol start="2">
<li>解码日志 </li>
</ol>
<p> <code>python mars/log/crypt/decode_mars_nocrypt_log_file.py  MarsSample_20200417.xlog</code></p>
<p>但是现在碰到了问题</p>
<p>mq初始化有日志，接收消息没有日志，可能在不同的线程里，需要做处理</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2017-12-02T12:11:32.000Z" title="12/2/2017, 8:11:32 PM">2017-12-02</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-08-26T07:51:44.920Z" title="8/26/2023, 3:51:44 PM">2023-08-26</time></span><span class="level-item"><a class="link-muted" href="/categories/ANDROID/">ANDROID</a></span><span class="level-item">11 minutes read (About 1661 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/12/02/Permission/">Permission</a></p><div class="content"><p><a target="_blank" rel="noopener" href="https://developer.android.com/training/permissions/requesting">https://developer.android.com/training/permissions/requesting</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/topics/permissions/overview#normal-dangerous">https://developer.android.com/guide/topics/permissions/overview#normal-dangerous</a></p>
<h4 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h4><h5 id="Normal-permissions"><a href="#Normal-permissions" class="headerlink" title="Normal permissions"></a>Normal permissions</h5><h5 id="Dangerous-permissions"><a href="#Dangerous-permissions" class="headerlink" title="Dangerous permissions"></a>Dangerous permissions</h5><img src="/2017/12/02/Permission/Screen Shot 2020-09-17 at 2.06.37 PM.png" alt="Screen Shot 2020-09-17 at 2.06.37 PM" style="zoom: 80%;">

<h4 id="Android11权限申请"><a href="#Android11权限申请" class="headerlink" title="Android11权限申请"></a>Android11权限申请</h4><p>申请位置权限，先申请前台，后申请后台权限。</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/275758740">https://zhuanlan.zhihu.com/p/275758740</a></p>
<h4 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> PERMISSION_REQUEST_CODE = <span class="number">1000</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">requestPermission</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Here, thisActivity is the current activity</span></span><br><span class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) &#123;</span><br><span class="line">            <span class="comment">//则每次执行需要这一权限的操作时您都必须检查自己是否具有该权限</span></span><br><span class="line">            <span class="keyword">if</span> (ActivityCompat.checkSelfPermission(<span class="keyword">this</span>, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class="line">                <span class="comment">// Should we show an explanation?</span></span><br><span class="line">                <span class="keyword">if</span> (ActivityCompat.shouldShowRequestPermissionRationale(<span class="keyword">this</span>, Manifest.permission.WRITE_EXTERNAL_STORAGE)) &#123;</span><br><span class="line"><span class="comment">//                            当某条权限之前已经请求过，并且用户已经拒绝了该权限时</span></span><br><span class="line">                    <span class="comment">//异步向用户显示解释，这里先弹出解释框，再请求权限.</span></span><br><span class="line">                    Log.d(TAG, <span class="string">&quot;用户看到解释后，再次常识请求权限&quot;</span>);</span><br><span class="line">                    ActivityCompat.requestPermissions(<span class="keyword">this</span>, <span class="keyword">new</span> String[]&#123;Manifest.permission.WRITE_EXTERNAL_STORAGE&#125;, PERMISSION_REQUEST_CODE);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//无需解释，首次请求许可</span></span><br><span class="line">                    ActivityCompat.requestPermissions(<span class="keyword">this</span>, <span class="keyword">new</span> String[]&#123;Manifest.permission.WRITE_EXTERNAL_STORAGE&#125;, PERMISSION_REQUEST_CODE);</span><br><span class="line">                    Log.d(TAG, <span class="string">&quot;requestPermissions&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//权限已经授予</span></span><br><span class="line">                Log.d(TAG, <span class="string">&quot;requestPermissions is ok&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode, String[] permissions, <span class="keyword">int</span>[] grantResults)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults);</span><br><span class="line">        <span class="keyword">switch</span> (requestCode) &#123;</span><br><span class="line">            <span class="keyword">case</span> PERMISSION_REQUEST_CODE: &#123;</span><br><span class="line">                <span class="comment">// If request is cancelled, the result arrays are empty. 如果取消请求，则grantResult 为空</span></span><br><span class="line">                <span class="keyword">if</span> (grantResults.length &gt; <span class="number">0</span> &amp;&amp; grantResults[<span class="number">0</span>] == PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class="line">                    Log.d(TAG, <span class="string">&quot;onRequestPermissionResult:ok&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    Log.d(TAG, <span class="string">&quot;onRequestPermissionResult:no&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>





<blockquote>
<p>注意:需要在androidmanifest.xml声明 否则一直返回false</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;uses-permission android:name&#x3D;&quot;android.permission.ACCESS_COARSE_LOCATION&quot; &#x2F;&gt;</span><br><span class="line">&lt;uses-permission android:name&#x3D;&quot;android.permission.ACCESS_FINE_LOCATION&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>

<p>1、检查权限是否授予。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Activity.java</span><br><span class="line">public int checkSelfPermission(permission)</span><br></pre></td></tr></table></figure>

<p>2、申请权限。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Activity.java    </span><br><span class="line">public final void requestPermissions( new String[permission1,permission2,...], requestCode)</span><br></pre></td></tr></table></figure>

<p>这个时候，会弹出系统授权弹窗（<strong>授权弹窗是不支持自定义的，原因理所当然</strong>）。</p>
<p>3、权限回调。</p>
<p>用户在系统弹窗里面选择后，结果会通过<code>Activity</code>的 <code>onRequestPermissionsResult</code>方法回调APP。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) &#123;</span><br><span class="line">    &#x2F;&#x2F;继续执行逻辑或者提示权限获取失败</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4、权限说明。</p>
<p>用户如果选择了拒绝，下一次在需要声明该权限的时候，Google建议APP开发者给予用户更多的说明，因此提供了下面这个API,<strong>这个方法返回值在使用过程中会发现有点纠结（具体解析见下面代码块说明）</strong>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public boolean shouldShowRequestPermissionRationale(permission)</span><br><span class="line">&#123;</span><br><span class="line">    1、APP没有申请这个权限的话，返回false</span><br><span class="line">    2、用户拒绝时，勾选了不再提示的话，返回false</span><br><span class="line">    3、用户拒绝，但是没有勾选不再提示的话，返回true</span><br><span class="line">    因此如果想在第一次就给用户提示，需要记录权限是否申请过，没有申请过的话，强制弹窗提示，而不能根据这个方法的返回值来。</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这个 看情况选用</p>
<p>参考 <a target="_blank" rel="noopener" href="https://juejin.im/entry/58b2e490ac502e0069d9ae62">https://juejin.im/entry/58b2e490ac502e0069d9ae62</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/topics/security/permissions?hl=zh-cn#normal-dangerous">https://developer.android.com/guide/topics/security/permissions?hl=zh-cn#normal-dangerous</a></p>
<p><a target="_blank" rel="noopener" href="http://www.10tiao.com/html/227/201610/2650237473/1.html">http://www.10tiao.com/html/227/201610/2650237473/1.html</a></p>
<h4 id="PERMISSION"><a href="#PERMISSION" class="headerlink" title="PERMISSION"></a>PERMISSION</h4><p>​      </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 这个权限用于进行网络定位--&gt;</span><br><span class="line">  &lt;permission android:name&#x3D;&quot;android.permission.ACCESS_COARSE_LOCATION&quot;&gt;&lt;&#x2F;permission&gt;</span><br><span class="line">  &lt;!-- 这个权限用于访问GPS定位--&gt;</span><br><span class="line">  &lt;permission android:name&#x3D;&quot;android.permission.ACCESS_FINE_LOCATION&quot;&gt;&lt;&#x2F;permission&gt;</span><br><span class="line">  &lt;!-- 用于访问wifi网络信息，wifi信息会用于进行网络定位--&gt;</span><br><span class="line">  &lt;permission android:name&#x3D;&quot;android.permission.ACCESS_WIFI_STATE&quot;&gt;&lt;&#x2F;permission&gt;</span><br><span class="line">  &lt;!-- 获取运营商信息，用于支持提供运营商信息相关的接口--&gt;</span><br><span class="line">  &lt;permission android:name&#x3D;&quot;android.permission.ACCESS_NETWORK_STATE&quot;&gt;&lt;&#x2F;permission&gt;</span><br><span class="line">  &lt;!-- 这个权限用于获取wifi的获取权限，wifi信息会用来进行网络定位--&gt;</span><br><span class="line">  &lt;permission android:name&#x3D;&quot;android.permission.CHANGE_WIFI_STATE&quot;&gt;&lt;&#x2F;permission&gt;</span><br><span class="line">  &lt;!-- 用于读取手机当前的状态--&gt;</span><br><span class="line">  &lt;permission android:name&#x3D;&quot;android.permission.READ_PHONE_STATE&quot;&gt;&lt;&#x2F;permission&gt;</span><br><span class="line">  &lt;!-- 写入扩展存储，向扩展卡写入数据，用于写入离线定位数据--&gt;</span><br><span class="line">  &lt;permission android:name&#x3D;&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;&gt;&lt;&#x2F;permission&gt;</span><br><span class="line">  &lt;!-- 访问网络，网络定位需要上网--&gt;</span><br><span class="line">  &lt;permission android:name&#x3D;&quot;android.permission.INTERNET&quot; &#x2F;&gt;</span><br><span class="line">  &lt;!-- SD卡读取权限，用户写入离线定位数据--&gt;</span><br><span class="line">  &lt;permission android:name&#x3D;&quot;android.permission.MOUNT_UNMOUNT_FILESYSTEMS&quot;&gt;&lt;&#x2F;permission&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="One-time-permissions"><a href="#One-time-permissions" class="headerlink" title="One-time permissions"></a>One-time permissions</h5><p>Starting in Android 11 (API level 30), whenever your app requests a permission related to location, microphone, or camera, the user-facing permissions dialog contains an option called <strong>Only this time</strong>. If the user selects this option in the dialog, your app is granted a temporary <em>one-time permission</em>.</p>
<h5 id="Permission-groups"><a href="#Permission-groups" class="headerlink" title="Permission groups"></a>Permission groups</h5><ul>
<li><p>If the app has already been granted another dangerous permission in the same permission group, the system immediately grants the permission without any interaction with the user. For example, if an app had previously requested and been granted the <code>READ_CONTACTS</code> permission, and it then requests <code>WRITE_CONTACTS</code>, the system immediately grants that permission without showing the permissions dialog to the user.</p>
</li>
<li><p><strong>Caution:</strong> Future versions of the Android SDK might move a particular permission from one group to another. Therefore, don’t base your app’s logic on the structure of these permission groups.</p>
<p>For example, <code>READ_CONTACTS</code> is in the same permission group as <code>WRITE_CONTACTS</code> as of Android 8.1 (API level 27). If your app requests the <code>READ_CONTACTS</code> permission, and then requests the <code>WRITE_CONTACTS</code> permission, don’t assume that the system can automatically grant the <code>WRITE_CONTACTS</code> permission.</p>
</li>
</ul>
<h4 id="多权限申请"><a href="#多权限申请" class="headerlink" title="多权限申请"></a>多权限申请</h4><p><a target="_blank" rel="noopener" href="https://github.com/permissions-dispatcher/PermissionsDispatcher">https://github.com/permissions-dispatcher/PermissionsDispatcher</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/googlesamples/android-RuntimePermissions">https://github.com/googlesamples/android-RuntimePermissions</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/a51593817825">https://www.jianshu.com/p/a51593817825</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/training/permissions/requesting">https://developer.android.com/training/permissions/requesting</a></p>
<p>livedata</p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/Hw_FI0GRpUDWJ1NwjK652w">https://mp.weixin.qq.com/s/Hw_FI0GRpUDWJ1NwjK652w</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/7RpGzTjXo9rnHRCVEnrYWQ">https://mp.weixin.qq.com/s/7RpGzTjXo9rnHRCVEnrYWQ</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/i8K-6CSxYuLanR4x1WNSGA">https://mp.weixin.qq.com/s/i8K-6CSxYuLanR4x1WNSGA</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/gaSmpT5UQLqNa4Ck0r0eOg">https://mp.weixin.qq.com/s/gaSmpT5UQLqNa4Ck0r0eOg</a></p>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/huaiyiheyuan/article/details/52473984">http://blog.csdn.net/huaiyiheyuan/article/details/52473984</a><br><a target="_blank" rel="noopener" href="https://developer.android.com/training/permissions/requesting.html">https://developer.android.com/training/permissions/requesting.html</a></p>
<h4 id="Android-10权限"><a href="#Android-10权限" class="headerlink" title="Android 10权限"></a>Android 10权限</h4><p>在后台运行时访问设备位置信息需要权限</p>
<p><code> &lt;uses-permission android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot;/&gt;</code>        </p>
<p>该权限允许应用程序在后台访问位置。如果请求此权限，则还必须请求<code>ACCESS_FINE_LOCATION</code> 或 <code>ACCESS_COARSE_LOCATION</code>权限。只请求此权限无效果</p>
<p>在Android 10的设备上，如果你的应用的 <code>targetSdkVersion</code> &lt; 29，则在请求<code>ACCESS_FINE_LOCATION</code> 或<code>ACCESS_COARSE_LOCATION</code>权限时，系统会自动同时请求<code>ACCESS_BACKGROUND_LOCATION</code>。在请求弹框中，选择“始终允许”表示同意后台获取位置信息，选择“仅在应用使用过程中允许”或”拒绝”选项表示拒绝授权。</p>
<p>如果你的应用的 <code>targetSdkVersion</code> &gt;= 29，则请求<code>ACCESS_FINE_LOCATION</code> 或 <code>ACCESS_COARSE_LOCATION</code>权限表示在前台时拥有访问设备位置信息的权限。在请求弹框中，选择“始终允许”表示前后台都可以获取位置信息，选择“仅在应用使用过程中允许”只表示拥有前台的权限。</p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/about/versions/10/privacy/changes">https://developer.android.com/about/versions/10/privacy/changes</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/6844904073024503822#heading-5">https://juejin.im/post/6844904073024503822#heading-5</a></p>
<p>request permission demo<br><a target="_blank" rel="noopener" href="https://github.com/android/platform-samples/tree/main/samples/privacy/permissions">https://github.com/android/platform-samples/tree/main/samples/privacy/permissions</a></p>
<h3 id="Custom-Permission"><a href="#Custom-Permission" class="headerlink" title="Custom Permission"></a>Custom Permission</h3><p>can run Demo</p>
<p><a target="_blank" rel="noopener" href="https://github.com/Ibtisam/Dangerous-Activity">https://github.com/Ibtisam/Dangerous-Activity</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Ibtisam/Using-Dangerous-Activity">https://github.com/Ibtisam/Using-Dangerous-Activity</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/commonsguy/cwac-netsecurity">https://github.com/commonsguy/cwac-netsecurity</a></p>
<p><a target="_blank" rel="noopener" href="https://medium.com/code-procedure-and-rants/android-permissions-create-custom-permissions-5784188311f3">https://medium.com/code-procedure-and-rants/android-permissions-create-custom-permissions-5784188311f3</a></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=YeLmufMZfcI">https://www.youtube.com/watch?v=YeLmufMZfcI</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/28975706/start-activity-with-permissions">https://stackoverflow.com/questions/28975706/start-activity-with-permissions</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/26700767/custom-permission-for-activity">https://stackoverflow.com/questions/26700767/custom-permission-for-activity</a></p>
<h4 id="Sensors"><a href="#Sensors" class="headerlink" title="Sensors"></a>Sensors</h4><p>An acceleration sensor measures the acceleration applied to the device, including the force of gravity. The following code shows you how to get an instance of the default acceleration sensor:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">val sensorManager &#x3D; getSystemService(Context.SENSOR_SERVICE) as SensorManager</span><br><span class="line">val sensor: Sensor? &#x3D; sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER)</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/topics/sensors/sensors_motion.html#sensors-motion-accel">https://developer.android.com/guide/topics/sensors/sensors_motion.html#sensors-motion-accel</a></p>
<p>If you are publishing your application on Google Play you can use the <uses-feature> element in your manifest file to filter your application from devices that do not have the appropriate sensor configuration for your application. The <uses-feature> element has several hardware descriptors that let you filter applications based on the presence of specific sensors. The sensors you can list include: accelerometer, barometer, compass (geomagnetic field), gyroscope, light, and proximity. The following is an example manifest entry that filters apps that do not have an accelerometer:</uses-feature></uses-feature></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;uses-feature android:name&#x3D;&quot;android.hardware.sensor.accelerometer&quot;</span><br><span class="line">              android:required&#x3D;&quot;true&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>






</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2017-10-17T07:25:56.000Z" title="10/17/2017, 3:25:56 PM">2017-10-17</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-08-19T11:11:44.300Z" title="8/19/2021, 7:11:44 PM">2021-08-19</time></span><span class="level-item"><a class="link-muted" href="/categories/ANDROID/">ANDROID</a></span><span class="level-item">4 minutes read (About 535 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/10/17/hot-patch/">hot_patch（热更新）</a></p><div class="content"><p>为了预防项目紧急问题，使用热更新比发版要好点</p>
<h5 id="热更新选择"><a href="#热更新选择" class="headerlink" title="热更新选择"></a>热更新选择</h5><ul>
<li><p>VitrualApk  滴滴开源的方案，之前的dynamic-load-apk推动的热更新的发展,不过这个开源没多久，准备后面迁移到这上面来</p>
</li>
<li><p>Tinker-Bugly      这个很不错免费，就是只支持 冷启动，配合bugly教程用起来方便</p>
</li>
<li><p>sophix         这个支持热启动 配置也方便，不过5万设备以上就要收费，对于收费我觉得也无可厚非，毕竟是别人的劳动成果，</p>
<pre><code>           作为开发者的角度，还是开源最好，以后可以学习下。
</code></pre>
</li>
</ul>
<p>所以先选择Tinker-Bugly</p>
<h5 id="接入"><a href="#接入" class="headerlink" title="接入"></a>接入</h5><p> 按照<a target="_blank" rel="noopener" href="https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix/" title="bugly">接入文档</a> 配合Demo接入配置，然后就开始做自己的app 定义</p>
<ol>
<li>修改appid </li>
</ol>
<p> bugly平台申请后的 AppId</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里实现SDK初始化，appId替换成你的在Bugly平台申请的appId</span></span><br><span class="line">       <span class="comment">// 调试时，将第三个参数改为true</span></span><br><span class="line">       <span class="module-access"><span class="module"><span class="identifier">Bugly</span>.</span></span>init(get<span class="constructor">Application()</span>, <span class="string">&quot;f7b6508f55&quot;</span>, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<p> 第三个参数设置  log是否展示</p>
<ol start="2">
<li>tinkerId</li>
</ol>
<p>每次修改 基线版本和 补丁版本都要修改 tinkerId</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">tinkerId</span> = <span class="string">&quot;1.0.6-patch&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>点击 assembleDebug</li>
</ol>
<p>生成 基线版本</p>
<p><a target="_blank" rel="noopener" href="https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix-demo/">https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix-demo/</a></p>
<figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">实际应用中，请注意保存线上发布版本的基准apk包、mapping文件、<span class="type">R</span>.txt文件，如果线上版本有bug，就可以借助我们tinker-sup<span class="keyword">port</span>插件进行补丁包的生成。</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>修改 def baseApkDir , 修改 tinkerId</li>
</ol>
<ul>
<li>修改bug</li>
<li>baseApkDir是根据基线版本生成的目录</li>
<li>修改tinkerId</li>
</ul>
<ol start="5">
<li>编译patch包 </li>
</ol>
<p>  点击 buildTinkerPatchRelease，生成patch_signed_7zip.apk上传,然后重启就可以了</p>
<ol start="6">
<li>对于开发设备和全量设备</li>
</ol>
<p>修改</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//指定为开发设备</span></span><br><span class="line">   <span class="module-access"><span class="module"><span class="identifier">Bugly</span>.</span></span>set<span class="constructor">IsDevelopmentDevice(<span class="params">getApplication</span>()</span>,<span class="literal">true</span>);</span><br></pre></td></tr></table></figure>

<p> 参考 ：<br>  <a target="_blank" rel="noopener" href="https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix/">https://bugly.qq.com/docs/user-guide/instruction-manual-android-hotfix/</a><br>  <a target="_blank" rel="noopener" href="https://github.com/Tencent/tinker">https://github.com/Tencent/tinker</a><br>  <a target="_blank" rel="noopener" href="https://github.com/BuglyDevTeam/Bugly-Android-Demo">https://github.com/BuglyDevTeam/Bugly-Android-Demo</a></p>
<h5 id="UncaughtExceptionHandler-Bugly冲突-不上报日志"><a href="#UncaughtExceptionHandler-Bugly冲突-不上报日志" class="headerlink" title="UncaughtExceptionHandler Bugly冲突 不上报日志"></a>UncaughtExceptionHandler Bugly冲突 不上报日志</h5><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/ZPCrobot/article/details/97390156">https://blog.csdn.net/ZPCrobot/article/details/97390156</a></p>
<h5 id="从零开始实现一个插件化框架"><a href="#从零开始实现一个插件化框架" class="headerlink" title="从零开始实现一个插件化框架"></a>从零开始实现一个插件化框架</h5><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_22090073/article/details/103946596">https://blog.csdn.net/qq_22090073/article/details/103946596</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/af8c47fabb12">https://www.jianshu.com/p/af8c47fabb12</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2017-10-15T02:37:39.000Z" title="10/15/2017, 10:37:39 AM">2017-10-15</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-02-23T14:17:11.776Z" title="2/23/2023, 10:17:11 PM">2023-02-23</time></span><span class="level-item"><a class="link-muted" href="/categories/ANDROID/">ANDROID</a></span><span class="level-item">6 minutes read (About 920 words)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/10/15/ConstraintLayout/">ConstraintLayout</a></p><div class="content"><h4 id="introduce"><a href="#introduce" class="headerlink" title="introduce"></a>introduce</h4><p><a target="_blank" rel="noopener" href="https://developer.android.google.cn/reference/androidx/constraintlayout/widget/ConstraintLayout">https://developer.android.google.cn/reference/androidx/constraintlayout/widget/ConstraintLayout</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/develop/ui/views/layout/constraint-layout">https://developer.android.com/develop/ui/views/layout/constraint-layout</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6949186887609221133#heading-6">https://juejin.cn/post/6949186887609221133#heading-6</a></p>
<h4 id="Widgets-dimension"><a href="#Widgets-dimension" class="headerlink" title="Widgets dimension"></a>Widgets dimension</h4><p>widget的尺寸可以通过设置<code>android:layout_width</code>和<code>android:layout_height</code>的属性值来指定，有如下三种方式：</p>
<ul>
<li>使用具体值</li>
<li>使用<code>WRAP_CONTENT</code>，这样widget会计算自身的尺寸</li>
<li>Using <code>0dp</code>, which is the equivalent of “<code>MATCH_CONSTRAINT</code>“ (使用<code>0dp</code>，这等于“<code>MATCH_CONSTRAINT</code>” )</li>
</ul>
<p><img src="https://developer.android.google.cn/static/reference/androidx/constraintlayout/widget/resources/images/dimension-match-constraints.png" alt="img"></p>
<h5 id="Group"><a href="#Group" class="headerlink" title="Group"></a>Group</h5><p>可以控制一组控件的隐藏和显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;androidx.constraintlayout.widget.Group</span><br><span class="line">      android:id&#x3D;&quot;@+id&#x2F;gp_1&quot;</span><br><span class="line">      android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">      android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">      android:visibility&#x3D;&quot;gone&quot;</span><br><span class="line">      app:constraint_referenced_ids&#x3D;&quot;cl_h4,cl_h2&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">((Group)findViewById(R.id.gp_1)).setVisibility(View.GONE);</span><br></pre></td></tr></table></figure>

<p>​    <code>findViewById(R.id.gp_2).setVisibility(View.INVISIBLE);  doesnt not work</code></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903875569254414#heading-17">https://juejin.cn/post/6844903875569254414#heading-17</a></p>
<h5 id="Guideline使用"><a href="#Guideline使用" class="headerlink" title="Guideline使用"></a>Guideline使用</h5><p><a target="_blank" rel="noopener" href="https://developer.android.com/reference/android/support/constraint/Guideline.html">https://developer.android.com/reference/android/support/constraint/Guideline.html</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app:layout_constraintGuide_percent&#x3D;&quot;0.2&quot;</span><br><span class="line">app:layout_constraintGuide_begin&#x3D;&quot;100dp&quot;</span><br></pre></td></tr></table></figure>

<h4 id="特色属性"><a href="#特色属性" class="headerlink" title="特色属性"></a>特色属性</h4><h5 id="layout-constraintDimensionRatio"><a href="#layout-constraintDimensionRatio" class="headerlink" title="layout_constraintDimensionRatio"></a>layout_constraintDimensionRatio</h5><p>指定高度，宽度随着宽高比自适应</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;ImageView</span><br><span class="line">    android:id&#x3D;&quot;@+id&#x2F;iv_img01&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;0dp&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">    android:src&#x3D;&quot;@mipmap&#x2F;img_1&quot;</span><br><span class="line">    app:layout_constraintDimensionRatio&#x3D;&quot;1:1&quot;</span><br><span class="line">    app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>

<!--指定高度，宽度随着宽高比自适应 app:layout_constraintDimensionRatio="H,16:9"  H: 表示高宽比-->     

<p>layout_constraintHorizontal_bias  先设置约束</p>
<h4 id="Bias"><a href="#Bias" class="headerlink" title="Bias"></a><strong>Bias</strong></h4><p>上面的水平居中,是使用的与父亲左侧对齐+与父亲右侧对齐.  可以理解为左右的有一种约束力,默认情况下,左右的力度是一样大的,那么view就居中了.</p>
<p>当左侧的力度大一些时,view就会偏向左侧.就像下面这样.</p>
<blockquote>
<p>layout_constraintHorizontal_bias 水平约束力<br>layout_constraintVertical_bias 垂直约束力</p>
</blockquote>
<p><img src="https://developer.android.google.cn/static/reference/androidx/constraintlayout/widget/resources/images/centering-positioning-bias.png"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;android.support.constraint.ConstraintLayout</span><br><span class="line">    &lt;Button</span><br><span class="line">        android:text=&quot;按钮1&quot;</span><br><span class="line">        app:layout_constraintHorizontal_bias=&quot;0.3&quot;</span><br><span class="line">        app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</span><br><span class="line">        app:layout_constraintRight_toRightOf=&quot;parent&quot;/&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.constraint.ConstraintLayout</span>&gt;</span>    </span><br></pre></td></tr></table></figure>

<p>上面代码就偏左约束</p>
<h5 id="WRAP-CONTENT-强制约束"><a href="#WRAP-CONTENT-强制约束" class="headerlink" title="WRAP_CONTENT: 强制约束"></a>WRAP_CONTENT: 强制约束</h5><p>我们可能希望使用<code>WRAP_CONTENT</code>，同时仍然强制执行约束以限制最终的尺寸</p>
<ul>
<li><code>app:layout_constrainedWidth=”true|false”</code></li>
</ul>
<p>button1居中显示，button2约束在button1的右边、parent的左边：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/button1&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:text=&quot;aaaaaaa&quot;</span><br><span class="line">    app:layout_constraintStart_toStartOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintEnd_toEndOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintTop_toTopOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/button2&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:text=&quot;22222222222222222222222222222&quot;</span><br><span class="line">    app:layout_constrainedWidth=&quot;true&quot;</span><br><span class="line">    android:layout_marginTop=&quot;40dp&quot;</span><br><span class="line">    app:layout_constraintTop_toTopOf=&quot;@id/button1&quot;</span><br><span class="line">    app:layout_constraintStart_toEndOf=&quot;@id/button1&quot;</span><br><span class="line">    app:layout_constraintEnd_toEndOf=&quot;parent&quot;/&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>对button2使不使用<code>app:layout_constrainedWidth=&quot;true&quot;</code>的效果如下：</p>
<p><img src="/2017/10/15/ConstraintLayout/constraintlayout-constrainted-width-before.png" alt="constraintlayout-constrainted-width-before"></p>
<p><img src="/2017/10/15/ConstraintLayout/constraintlayout-constrainted-width-after.png" alt="constraintlayout-constrainted-width-after"></p>
<p>约束width前 &amp; 约束width后</p>
<h5 id="占用父布局的比例"><a href="#占用父布局的比例" class="headerlink" title="占用父布局的比例"></a>占用父布局的比例</h5><h4 id="chain"><a href="#chain" class="headerlink" title="chain"></a>chain</h4><p> 3个Button 两两依赖,相当于组成了一个链</p>
<p>Button均分 width = match_constraint (0dp)</p>
<p> <img src="/2017/10/15/ConstraintLayout/ConstraintLayout_000.png" alt="图"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">       android:id&#x3D;&quot;@+id&#x2F;bt_00&quot;</span><br><span class="line">       android:layout_width&#x3D;&quot;0dp&quot;</span><br><span class="line">       android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">       android:text&#x3D;&quot;Button_00&quot;</span><br><span class="line">       app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot;</span><br><span class="line">       app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_01&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">   &lt;Button</span><br><span class="line">       android:id&#x3D;&quot;@+id&#x2F;bt_01&quot;</span><br><span class="line">       android:layout_width&#x3D;&quot;0dp&quot;</span><br><span class="line">       android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">       android:text&#x3D;&quot;Button_01&quot;</span><br><span class="line">       app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_00&quot;</span><br><span class="line">       app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_02&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">   &lt;Button</span><br><span class="line">       android:id&#x3D;&quot;@+id&#x2F;bt_02&quot;</span><br><span class="line">       android:layout_width&#x3D;&quot;0dp&quot;</span><br><span class="line">       android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">       android:text&#x3D;&quot;Button_02&quot;</span><br><span class="line">       app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_01&quot;</span><br><span class="line">       app:layout_constraintRight_toRightOf&#x3D;&quot;parent&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>



<p>app:layout_constraintHorizontal_weight=”2”`　</p>
<p>看属性也可以猜到是干嘛用的了.<br><img src="/2017/10/15/ConstraintLayout/ConstraintLayout_001.png" alt="宽度为wrap_content"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;androidx.constraintlayout.widget.ConstraintLayout</span><br><span class="line">       android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">       app:layout_constraintTop_toBottomOf&#x3D;&quot;@+id&#x2F;guideline_00&quot;</span><br><span class="line">       android:layout_height&#x3D;&quot;wrap_content&quot;&gt;</span><br><span class="line">       &lt;Button</span><br><span class="line">           android:id&#x3D;&quot;@+id&#x2F;bt_00&quot;</span><br><span class="line">           android:layout_width&#x3D;&quot;0dp&quot;</span><br><span class="line">           android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">           android:text&#x3D;&quot;Button_00&quot;</span><br><span class="line">           app:layout_constraintHorizontal_weight&#x3D;&quot;2&quot;</span><br><span class="line">           app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot;</span><br><span class="line">           app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_01&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">       &lt;Button</span><br><span class="line">           android:id&#x3D;&quot;@+id&#x2F;bt_01&quot;</span><br><span class="line">           android:layout_width&#x3D;&quot;0dp&quot;</span><br><span class="line">           android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">           android:text&#x3D;&quot;Button_01&quot;</span><br><span class="line">           app:layout_constraintHorizontal_weight&#x3D;&quot;1&quot;</span><br><span class="line">           app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_00&quot;</span><br><span class="line">           app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_02&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">       &lt;Button</span><br><span class="line">           android:id&#x3D;&quot;@+id&#x2F;bt_02&quot;</span><br><span class="line">           android:layout_width&#x3D;&quot;0dp&quot;</span><br><span class="line">           android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">           app:layout_constraintHorizontal_weight&#x3D;&quot;1&quot;</span><br><span class="line">           android:text&#x3D;&quot;Button_02&quot;</span><br><span class="line">           app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_01&quot;</span><br><span class="line">           app:layout_constraintRight_toRightOf&#x3D;&quot;parent&quot; &#x2F;&gt;</span><br><span class="line">   &lt;&#x2F;androidx.constraintlayout.widget.ConstraintLayout&gt;</span><br></pre></td></tr></table></figure>





<p>Button均份　宽度不为match_constraint</p>
<p><img src="/2017/10/15/ConstraintLayout/ConstraintLayout_10.png" alt="宽度为wrap_content"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">           android:id&#x3D;&quot;@+id&#x2F;bt_10&quot;</span><br><span class="line">           android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">           android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">           android:text&#x3D;&quot;Button_00&quot;</span><br><span class="line">           app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot;</span><br><span class="line">           app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_11&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">       &lt;Button</span><br><span class="line">           android:id&#x3D;&quot;@+id&#x2F;bt_11&quot;</span><br><span class="line">           android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">           android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">           android:text&#x3D;&quot;Button_01&quot;</span><br><span class="line">           app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_10&quot;</span><br><span class="line">           app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_12&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">       &lt;Button</span><br><span class="line">           android:id&#x3D;&quot;@+id&#x2F;bt_12&quot;</span><br><span class="line">           android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">           android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">           android:text&#x3D;&quot;Button_02&quot;</span><br><span class="line">           app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_11&quot;</span><br><span class="line">           app:layout_constraintRight_toRightOf&#x3D;&quot;parent&quot; &#x2F;&gt;</span><br></pre></td></tr></table></figure>





<h4 id="chainStyle"><a href="#chainStyle" class="headerlink" title="chainStyle"></a>chainStyle</h4><p>Chains are controlled by attributes set on the first element of the chain (the “head” of the chain):</p>
<img src="https://developer.android.google.cn/static/reference/androidx/constraintlayout/widget/resources/images/chains-head.png" alt="img" style="zoom:50%;">

<p>The head is the left-most widget for horizontal chains, and the top-most widget for vertical chains.第一个元素决定链style</p>
<p>而且只有放在头节点才有效，否则都没用</p>
<p><img src="https://developer.android.google.cn/static/reference/androidx/constraintlayout/widget/resources/images/chains-styles.png"></p>
<h5 id="spread-Chain"><a href="#spread-Chain" class="headerlink" title="spread Chain"></a>spread Chain</h5><p>layout_constraintHorizontal_chainStyle  这个属性默认是spread</p>
<p>元素展开</p>
<p><img src="/2017/10/15/ConstraintLayout/20220820163354.jpg" alt="20220820163354"></p>
<p>mineutil</p>
<p>activity_constraint.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/bt_00&quot;</span><br><span class="line">    android:layout_width=&quot;0dp&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:text=&quot;Button_00&quot;</span><br><span class="line">    app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintRight_toLeftOf=&quot;@+id/bt_01&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/bt_01&quot;</span><br><span class="line">    android:layout_width=&quot;0dp&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:text=&quot;Button_01&quot;</span><br><span class="line">    app:layout_constraintLeft_toRightOf=&quot;@+id/bt_00&quot;</span><br><span class="line">    app:layout_constraintRight_toLeftOf=&quot;@+id/bt_02&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/bt_02&quot;</span><br><span class="line">    android:layout_width=&quot;0dp&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:text=&quot;Button_02&quot;</span><br><span class="line">    app:layout_constraintLeft_toRightOf=&quot;@+id/bt_01&quot;</span><br><span class="line">    app:layout_constraintRight_toRightOf=&quot;parent&quot; /&gt;</span><br></pre></td></tr></table></figure>



<h5 id="Spread-inside-chain"><a href="#Spread-inside-chain" class="headerlink" title="Spread inside chain"></a>Spread inside chain</h5><p> endpoints of the chain will not be spread out (两端不会展开)</p>
<p>其实就相当于两端的约束去掉了</p>
<p><img src="/2017/10/15/ConstraintLayout/20220820182406.jpg" alt="20220820182406"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/bt_10&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:text=&quot;Inside&quot;</span><br><span class="line">    android:background=&quot;@android:color/holo_blue_light&quot;</span><br><span class="line">    app:layout_constraintHorizontal_chainStyle=&quot;spread_inside&quot;</span><br><span class="line">    app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintRight_toLeftOf=&quot;@+id/bt_11&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/bt_11&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:text=&quot;Inside&quot;</span><br><span class="line">    android:background=&quot;@android:color/holo_blue_light&quot;</span><br><span class="line">    app:layout_constraintLeft_toRightOf=&quot;@+id/bt_10&quot;</span><br><span class="line">    app:layout_constraintRight_toLeftOf=&quot;@+id/bt_12&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/bt_12&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:text=&quot;Inside&quot;</span><br><span class="line">    android:background=&quot;@android:color/holo_blue_light&quot;</span><br><span class="line">    app:layout_constraintLeft_toRightOf=&quot;@+id/bt_11&quot;</span><br><span class="line">    app:layout_constraintRight_toRightOf=&quot;parent&quot; /&gt;</span><br></pre></td></tr></table></figure>



<h5 id="Weighted-chains"><a href="#Weighted-chains" class="headerlink" title="Weighted chains"></a>Weighted chains</h5><p>看上面官方的图就能理解了</p>
<h5 id="packed-chains"><a href="#packed-chains" class="headerlink" title="packed chains"></a>packed chains</h5><img src="/2017/10/15/ConstraintLayout/20220820182631.jpg" alt="20220820182631" style="zoom:50%;">


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">    android:id&#x3D;&quot;@+id&#x2F;bt_20&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">    android:background&#x3D;&quot;@android:color&#x2F;holo_blue_light&quot;</span><br><span class="line">    android:text&#x3D;&quot;packed&quot;</span><br><span class="line">    app:layout_constraintHorizontal_chainStyle&#x3D;&quot;packed&quot; &#x2F;&#x2F;第一个有效</span><br><span class="line">    app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot;</span><br><span class="line">    app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_21&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;Button</span><br><span class="line">    android:id&#x3D;&quot;@+id&#x2F;bt_21&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">    android:background&#x3D;&quot;@android:color&#x2F;holo_blue_light&quot;</span><br><span class="line">    android:text&#x3D;&quot;packed&quot;</span><br><span class="line">    app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_20&quot;</span><br><span class="line">    app:layout_constraintRight_toLeftOf&#x3D;&quot;@+id&#x2F;bt_22&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;Button</span><br><span class="line">    android:id&#x3D;&quot;@+id&#x2F;bt_22&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">    android:background&#x3D;&quot;@android:color&#x2F;holo_blue_light&quot;</span><br><span class="line">    android:text&#x3D;&quot;packed&quot;</span><br><span class="line">    app:layout_constraintLeft_toRightOf&#x3D;&quot;@+id&#x2F;bt_21&quot;</span><br><span class="line">    app:layout_constraintRight_toRightOf&#x3D;&quot;parent&quot; &#x2F;&gt; </span><br></pre></td></tr></table></figure>



<h5 id="Packed-Chain-with-Bias"><a href="#Packed-Chain-with-Bias" class="headerlink" title="Packed Chain with Bias"></a>Packed Chain with Bias</h5><p><img src="/2017/10/15/ConstraintLayout/20220820184349.jpg" alt="20220820184349"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/bt_30&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:background=&quot;@android:color/holo_blue_light&quot;</span><br><span class="line">    android:text=&quot;packedBias&quot;</span><br><span class="line">    app:layout_constraintHorizontal_bias=&quot;0.2&quot;</span><br><span class="line">    app:layout_constraintHorizontal_chainStyle=&quot;packed&quot;</span><br><span class="line">    app:layout_constraintLeft_toLeftOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintRight_toLeftOf=&quot;@+id/bt_31&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/bt_31&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:background=&quot;@android:color/holo_blue_light&quot;</span><br><span class="line">    android:text=&quot;packedBias&quot;</span><br><span class="line">    app:layout_constraintLeft_toRightOf=&quot;@+id/bt_30&quot;</span><br><span class="line">    app:layout_constraintRight_toLeftOf=&quot;@+id/bt_32&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/bt_32&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:background=&quot;@android:color/holo_blue_light&quot;</span><br><span class="line">    android:text=&quot;packedBias&quot;</span><br><span class="line">    app:layout_constraintLeft_toRightOf=&quot;@+id/bt_31&quot;</span><br><span class="line">    app:layout_constraintRight_toRightOf=&quot;parent&quot; /&gt;</span><br></pre></td></tr></table></figure>







<h4 id="Barrier"><a href="#Barrier" class="headerlink" title="Barrier"></a>Barrier</h4><p>用于控制 Barrier 相对于给定的 View 的位置， app:barrierDirection=”right”,表示barrier在constraint_referenced_ids给定ID的右侧,constraint_referenced_ids的id就是左侧的这些控件</p>
<p>输入信息挺有用的 </p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/QIuww9b0TsNjajEUS8c2fg">https://mp.weixin.qq.com/s/QIuww9b0TsNjajEUS8c2fg</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">&lt;android.support.constraint.ConstraintLayout</span><br><span class="line">      android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">      android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">      android:layout_margin&#x3D;&quot;@dimen&#x2F;dimen_11&quot;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;TextView</span><br><span class="line">          android:id&#x3D;&quot;@+id&#x2F;tv_order_num&quot;</span><br><span class="line">          android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:text&#x3D;&quot;订单编号：10002220000001234&quot;</span><br><span class="line">          android:textColor&#x3D;&quot;#ff999999&quot;</span><br><span class="line">          android:textSize&#x3D;&quot;19sp&quot;</span><br><span class="line">          app:layout_constraintTop_toTopOf&#x3D;&quot;parent&quot;</span><br><span class="line">          app:layout_constraintStart_toStartOf&#x3D;&quot;parent&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;TextView</span><br><span class="line">          android:id&#x3D;&quot;@+id&#x2F;tv_order_pro&quot;</span><br><span class="line">          android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:layout_marginTop&#x3D;&quot;@dimen&#x2F;dimen_11&quot;</span><br><span class="line">          android:text&#x3D;&quot;订购产品：爱达康高血压监护服务&quot;</span><br><span class="line">          android:textColor&#x3D;&quot;#ff666666&quot;</span><br><span class="line">          android:textSize&#x3D;&quot;21sp&quot;</span><br><span class="line">          app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot;</span><br><span class="line">          app:layout_constraintTop_toBottomOf&#x3D;&quot;@+id&#x2F;tv_order_num&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;TextView</span><br><span class="line">          android:id&#x3D;&quot;@+id&#x2F;tv_service_team&quot;</span><br><span class="line">          android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:text&#x3D;&quot;服务团队：爱达康远程监护团队&quot;</span><br><span class="line">          android:textColor&#x3D;&quot;#ff666666&quot;</span><br><span class="line">          android:textSize&#x3D;&quot;21sp&quot;</span><br><span class="line">          app:layout_constraintLeft_toLeftOf&#x3D;&quot;parent&quot;</span><br><span class="line">          app:layout_constraintTop_toBottomOf&#x3D;&quot;@+id&#x2F;tv_order_pro&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;TextView</span><br><span class="line">          android:id&#x3D;&quot;@+id&#x2F;tv_period_valid&quot;</span><br><span class="line">          android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:text&#x3D;&quot;有效期：2019-03-01至2019-12-31&quot;</span><br><span class="line">          android:textColor&#x3D;&quot;#ff999999&quot;</span><br><span class="line">          android:textSize&#x3D;&quot;19sp&quot;</span><br><span class="line">          app:layout_constraintStart_toEndOf&#x3D;&quot;@+id&#x2F;barrier&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;TextView</span><br><span class="line">          android:id&#x3D;&quot;@+id&#x2F;tv_order_time&quot;</span><br><span class="line">          android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:layout_marginTop&#x3D;&quot;@dimen&#x2F;dimen_11&quot;</span><br><span class="line">          android:text&#x3D;&quot;订购时间：2019-03-11 12:00:00&quot;</span><br><span class="line">          android:textColor&#x3D;&quot;#ff666666&quot;</span><br><span class="line">          android:textSize&#x3D;&quot;21sp&quot;</span><br><span class="line">          app:layout_constraintStart_toEndOf&#x3D;&quot;@+id&#x2F;barrier&quot;</span><br><span class="line">          app:layout_constraintTop_toBottomOf&#x3D;&quot;@+id&#x2F;tv_period_valid&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;TextView</span><br><span class="line">          android:id&#x3D;&quot;@+id&#x2F;tv_order_count&quot;</span><br><span class="line">          android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:text&#x3D;&quot;订购数量：500次&quot;</span><br><span class="line">          android:textColor&#x3D;&quot;#ff666666&quot;</span><br><span class="line">          android:textSize&#x3D;&quot;21sp&quot;</span><br><span class="line">          app:layout_constraintStart_toEndOf&#x3D;&quot;@+id&#x2F;barrier&quot;</span><br><span class="line">          app:layout_constraintTop_toBottomOf&#x3D;&quot;@+id&#x2F;tv_order_time&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      &lt;android.support.constraint.Barrier</span><br><span class="line">          android:id&#x3D;&quot;@+id&#x2F;barrier&quot;</span><br><span class="line">          android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">          app:barrierDirection&#x3D;&quot;right&quot;</span><br><span class="line">          app:constraint_referenced_ids&#x3D;&quot;tv_order_num,tv_order_pro,tv_service_team&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;&#x2F;android.support.constraint.ConstraintLayout&gt;</span><br></pre></td></tr></table></figure>



<h4 id="Dimensions-constraints"><a href="#Dimensions-constraints" class="headerlink" title="Dimensions constraints"></a>Dimensions constraints</h4><p>You can define minimum and maximum sizes for the <code>ConstraintLayout</code> itself:</p>
<ul>
<li><code>android:minWidth</code> set the minimum width for the layout</li>
<li><code>android:minHeight</code> set the minimum height for the layout</li>
</ul>
<p>可以设置百分比</p>
<h4 id="Practice"><a href="#Practice" class="headerlink" title="Practice"></a>Practice</h4><p>需求是美女跟在文字后面，如果文字太长就用省略号</p>
<img src="/2017/10/15/ConstraintLayout/20220821165517.jpg" alt="20220821165517" style="zoom: 67%;">



<p><img src="/2017/10/15/ConstraintLayout/20220821165912.jpg" alt="20220821165912"></p>
<p>主要着两个属性</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app:layout_constrainedWidth=&quot;true&quot; // 如果不用这个约束，文字太长,会把直接在Learn more后面</span><br><span class="line">app:layout_constraintHorizontal_bias=&quot;0&quot; // 去掉左边的约束</span><br><span class="line">app:layout_constraintHorizontal_chainStyle=&quot;packed&quot; // 让文字和美女在一起</span><br></pre></td></tr></table></figure>



<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&lt;ImageView</span><br><span class="line">    android:id=&quot;@+id/iv_duitnow&quot;</span><br><span class="line">    android:layout_width=&quot;36dp&quot;</span><br><span class="line">    android:layout_height=&quot;36dp&quot;</span><br><span class="line">    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintStart_toStartOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;TextView</span><br><span class="line">    android:id=&quot;@+id/tv_duit_text&quot;</span><br><span class="line">    android:layout_width=&quot;0dp&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_marginStart=&quot;9dp&quot;</span><br><span class="line">    android:textColor=&quot;#282828&quot;</span><br><span class="line">    android:textSize=&quot;22sp&quot;</span><br><span class="line">    app:layout_constraintEnd_toEndOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintStart_toEndOf=&quot;@id/iv_duitnow&quot;</span><br><span class="line">    app:layout_constraintTop_toTopOf=&quot;parent&quot;</span><br><span class="line">    android:text=&quot;Reload via  Transfer:&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;TextView</span><br><span class="line">    android:id=&quot;@+id/tv_duitnow_id&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_marginTop=&quot;4dp&quot;</span><br><span class="line">    android:ellipsize=&quot;end&quot;</span><br><span class="line">    android:lines=&quot;1&quot;</span><br><span class="line">    android:textColor=&quot;#0064FF&quot;</span><br><span class="line">    android:textSize=&quot;14sp&quot;</span><br><span class="line">    app:layout_constrainedWidth=&quot;true&quot;</span><br><span class="line">    app:layout_constraintEnd_toStartOf=&quot;@+id/img_copy&quot;</span><br><span class="line">    app:layout_constraintHorizontal_bias=&quot;0&quot;</span><br><span class="line">    app:layout_constraintHorizontal_chainStyle=&quot;packed&quot;</span><br><span class="line">    app:layout_constraintStart_toStartOf=&quot;@+id/tv_duit_text&quot;</span><br><span class="line">    app:layout_constraintTop_toBottomOf=&quot;@+id/tv_duit_text&quot;</span><br><span class="line">    android:text=&quot;0124455660124455660124455666&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;ImageView</span><br><span class="line">    android:id=&quot;@+id/img_copy&quot;</span><br><span class="line">    android:layout_width=&quot;30dp&quot;</span><br><span class="line">    android:layout_height=&quot;30dp&quot;</span><br><span class="line">    android:scaleType=&quot;fitXY&quot;</span><br><span class="line">    android:src=&quot;@drawable/meitu111e33&quot;</span><br><span class="line">    app:layout_constraintBottom_toBottomOf=&quot;@+id/tv_duitnow_id&quot;</span><br><span class="line">    app:layout_constraintEnd_toStartOf=&quot;@+id/bt_learn_more&quot;</span><br><span class="line">    app:layout_constraintStart_toEndOf=&quot;@+id/tv_duitnow_id&quot;</span><br><span class="line">    app:layout_constraintTop_toTopOf=&quot;@+id/tv_duitnow_id&quot; /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;TextView</span><br><span class="line">    android:id=&quot;@+id/bt_learn_more&quot;</span><br><span class="line">    android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:paddingLeft=&quot;15dp&quot;</span><br><span class="line">    android:paddingTop=&quot;7dp&quot;</span><br><span class="line">    android:background=&quot;@android:color/holo_blue_light&quot;</span><br><span class="line">    android:paddingRight=&quot;15dp&quot;</span><br><span class="line">    android:paddingBottom=&quot;7dp&quot;</span><br><span class="line">    android:textSize=&quot;10sp&quot;</span><br><span class="line">    android:textStyle=&quot;normal&quot;</span><br><span class="line">    app:layout_constraintBottom_toBottomOf=&quot;@+id/tv_duitnow_id&quot;</span><br><span class="line">    app:layout_constraintEnd_toEndOf=&quot;parent&quot;</span><br><span class="line">    app:layout_constraintTop_toTopOf=&quot;@+id/tv_duitnow_id&quot;</span><br><span class="line">    android:text=&quot;Learn_More&quot; /&gt;</span><br></pre></td></tr></table></figure>







<p><a target="_blank" rel="noopener" href="https://blog.yorek.xyz/android/other/constraintlayout/#63-wrap_content-11">https://blog.yorek.xyz/android/other/constraintlayout/#63-wrap_content-11</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903733948579847">https://juejin.cn/post/6844903733948579847</a></p>
<p><a target="_blank" rel="noopener" href="https://jishuin.proginn.com/p/763bfbd5c73f">https://jishuin.proginn.com/p/763bfbd5c73f</a></p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/categories/ANDROID/page/3/">Previous</a></div><div class="pagination-next"><a href="/categories/ANDROID/page/5/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/categories/ANDROID/">1</a></li><li><a class="pagination-link" href="/categories/ANDROID/page/2/">2</a></li><li><a class="pagination-link" href="/categories/ANDROID/page/3/">3</a></li><li><a class="pagination-link is-current" href="/categories/ANDROID/page/4/">4</a></li><li><a class="pagination-link" href="/categories/ANDROID/page/5/">5</a></li><li><a class="pagination-link" href="/categories/ANDROID/page/6/">6</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Your name"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Your name</p><p class="is-size-6 is-block">Your title</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Your location</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">221</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">18</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">31</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ppoffice" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/ANDROID/"><span class="level-start"><span class="level-item">ANDROID</span></span><span class="level-end"><span class="level-item tag">58</span></span></a></li><li><a class="level is-mobile" href="/categories/BLE/"><span class="level-start"><span class="level-item">BLE</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/DataStructure/"><span class="level-start"><span class="level-item">DataStructure</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/categories/DesignPatterns/"><span class="level-start"><span class="level-item">DesignPatterns</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/categories/ENGLISH/"><span class="level-start"><span class="level-item">ENGLISH</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/JAVA/"><span class="level-start"><span class="level-item">JAVA</span></span><span class="level-end"><span class="level-item tag">27</span></span></a></li><li><a class="level is-mobile" href="/categories/Jetpack/"><span class="level-start"><span class="level-item">Jetpack</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Kotlin/"><span class="level-start"><span class="level-item">Kotlin</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/categories/LINUX/"><span class="level-start"><span class="level-item">LINUX</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Mathematics/"><span class="level-start"><span class="level-item">Mathematics</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/OS/"><span class="level-start"><span class="level-item">OS</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Organization/"><span class="level-start"><span class="level-item">Organization</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/SOURCE/"><span class="level-start"><span class="level-item">SOURCE</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/TEST/"><span class="level-start"><span class="level-item">TEST</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/TOOL/"><span class="level-start"><span class="level-item">TOOL</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/categories/VIEW/"><span class="level-start"><span class="level-item">VIEW</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/anim/"><span class="level-start"><span class="level-item">anim</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/flutter/"><span class="level-start"><span class="level-item">flutter</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-10-21T15:18:58.000Z">2023-10-21</time></p><p class="title"><a href="/2023/10/21/proxy/">proxy</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-09-04T07:54:57.000Z">2023-09-04</time></p><p class="title"><a href="/2023/09/04/Android_interview%20organize/">Android_itnerview_organize</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-09-03T07:54:57.000Z">2023-09-03</time></p><p class="title"><a href="/2023/09/03/Android-itnerview-algorithm/">Android_itnerview_algorithm</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-20T13:41:06.000Z">2023-08-20</time></p><p class="title"><a href="/2023/08/20/compose-layout/">compose_layout</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-08-19T09:16:56.000Z">2023-08-19</time></p><p class="title"><a href="/2023/08/19/compose/">compose</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">33</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/"><span class="level-start"><span class="level-item">2020</span></span><span class="level-end"><span class="level-item tag">46</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/"><span class="level-start"><span class="level-item">2019</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/"><span class="level-start"><span class="level-item">2018</span></span><span class="level-end"><span class="level-item tag">32</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/"><span class="level-start"><span class="level-item">2017</span></span><span class="level-end"><span class="level-item tag">57</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/ANDROID/"><span class="tag">ANDROID</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AOSP/"><span class="tag">AOSP</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Activity/"><span class="tag">Activity</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AndroidNewFeatures/"><span class="tag">AndroidNewFeatures</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Assembly/"><span class="tag">Assembly</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BLOG/"><span class="tag">BLOG</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ConstraintLayout/"><span class="tag">ConstraintLayout</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/DB/"><span class="tag">DB</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Drawer/"><span class="tag">Drawer</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Fragment/"><span class="tag">Fragment</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Git/"><span class="tag">Git</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JVM/"><span class="tag">JVM</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LEETCODE/"><span class="tag">LEETCODE</span><span class="tag">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Operators/"><span class="tag">Operators</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Performance/"><span class="tag">Performance</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RecyclerView/"><span class="tag">RecyclerView</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RxJava/"><span class="tag">RxJava</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/THINK/"><span class="tag">THINK</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TOOL/"><span class="tag">TOOL</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TabLayout/"><span class="tag">TabLayout</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Test/"><span class="tag">Test</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TouchEvent/"><span class="tag">TouchEvent</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/VIEW/"><span class="tag">VIEW</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/XML/"><span class="tag">XML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/anim/"><span class="tag">anim</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/compose/"><span class="tag">compose</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/concurrency/"><span class="tag">concurrency</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/coroutie/"><span class="tag">coroutie</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/inter/"><span class="tag">inter</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/keyboard/"><span class="tag">keyboard</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/proguard/"><span class="tag">proguard</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="Hexo" height="28"></a><p class="is-size-7"><span>&copy; 2023 John Doe</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>