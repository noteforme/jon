<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Jon&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  
  
    <link rel="alternate" href="/atom.xml" title="Jon's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="/localshare/css/share.css">

  
  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Jon&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Cease to struggle and you cease to live. - Thomas Carlyle</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/."><i class="fa fa-home"></i> Home</a>
        
          <a class="main-nav-link" href="/archives/"><i class="fa fa-archive"></i> Archive</a>
        
          <a class="main-nav-link" href="/about/"><i class="fa fa-user"></i> About</a>
        
          <a class="main-nav-link" href="/atom.xml"><i class="fa fa-rss"></i> RSS</a>
        
      </nav>
    </div>
    <div id="search-form">
      <div id="result-mask" class="hide"></div>
      <label><input id="search-key" type="text" autocomplete="off" placeholder="search"></label>
      <div id="result-wrap" class="hide">
        <div id="search-result"></div>
      </div>
      <div class="hide">
        <template id="search-tpl">
          <div class="item">
            <a href="/{path}" title="{title}">
              <div class="title">{title}</div>
              <div class="time">{date}</div>
              <div class="tags">{tags}</div>
            </a>
          </div>
        </template>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  <article id="post-AnimPropertyView" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/12/29/AnimPropertyView/">AnimPropertyView</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-12-29T14:23:37.000Z" itemprop="datePublished">2019年12月29日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/anim/">anim</a>
  </div>

      
      
<a href="/2019/12/29/AnimPropertyView/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="估值器（TypeEvaluator）"><a href="#估值器（TypeEvaluator）" class="headerlink" title="估值器（TypeEvaluator）"></a>估值器（TypeEvaluator）</h4><p>设置动画 如何从初始值 过渡到 结束值 的逻辑</p>
<ul>
<li>插值器（<code>Interpolator</code>）决定 值 的变化模式（匀速、加速）</li>
<li>估值器（<code>TypeEvaluator</code>）决定 值 的具体变化数值</li>
</ul>
<h4 id="ValueAnimator"><a href="#ValueAnimator" class="headerlink" title="ValueAnimator"></a>ValueAnimator</h4><p>实现原理 : 通过不断控制 值的变化， 再不断赋值给对象的属性，从而实现动画的效果。</p>
<img src="/2019/12/29/AnimPropertyView/Screen Shot 2021-01-31 at 10.02.48 PM.png" style="zoom:80%;">

<p>从上面原理可以看出：<code>ValueAnimator</code>类中有3个重要方法：</p>
<ol>
<li><code>ValueAnimator.ofInt（int values）</code></li>
<li><code>ValueAnimator.ofFloat（float values）</code></li>
<li><code>ValueAnimator.ofObject（int values）</code></li>
</ol>
<h4 id="ValueAnimator-ofInt（int-values）"><a href="#ValueAnimator-ofInt（int-values）" class="headerlink" title="ValueAnimator.ofInt（int values）"></a>ValueAnimator.ofInt（int values）</h4><p>将初始值 <strong>以整型数值的形式</strong> 过渡到结束值</p>
<blockquote>
<p>即估值器是整型估值器 - <code>IntEvaluator</code></p>
</blockquote>
<h5 id="模板代码"><a href="#模板代码" class="headerlink" title="模板代码"></a>模板代码</h5><p>实际开发中，建议使用Java代码实现属性动画：因为很多时候属性的起始值是无法提前确定的（无法使用XML设置），这就需要在<code>Java</code>代码里动态获取。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 步骤1：设置动画属性的初始值 &amp; 结束值</span></span><br><span class="line">ValueAnimator anim = ValueAnimator.ofInt(<span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line">        <span class="comment">// ofInt（）作用有两个</span></span><br><span class="line">        <span class="comment">// 1. 创建动画实例</span></span><br><span class="line">        <span class="comment">// 2. 将传入的多个Int参数进行平滑过渡:此处传入0和1,表示将值从0平滑过渡到1</span></span><br><span class="line">        <span class="comment">// 如果传入了3个Int参数 a,b,c ,则是先从a平滑过渡到b,再从b平滑过渡到C，以此类推</span></span><br><span class="line">        <span class="comment">// ValueAnimator.ofInt()内置了整型估值器,直接采用默认的.不需要设置，即默认设置了如何从初始值 过渡到 结束值</span></span><br><span class="line">        <span class="comment">// 关于自定义插值器我将在下节进行讲解</span></span><br><span class="line">        <span class="comment">// 下面看看ofInt()的源码分析 -&gt;&gt;关注1</span></span><br><span class="line">        </span><br><span class="line"><span class="comment">// 步骤2：设置动画的播放各种属性</span></span><br><span class="line">        anim.setDuration(<span class="number">500</span>);</span><br><span class="line">        <span class="comment">// 设置动画运行的时长</span></span><br><span class="line">        </span><br><span class="line">        anim.setStartDelay(<span class="number">500</span>);</span><br><span class="line">        <span class="comment">// 设置动画延迟播放时间</span></span><br><span class="line"></span><br><span class="line">        anim.setRepeatCount(<span class="number">0</span>);</span><br><span class="line">        <span class="comment">// 设置动画重复播放次数 = 重放次数+1</span></span><br><span class="line">        <span class="comment">// 动画播放次数 = infinite时,动画无限重复</span></span><br><span class="line">        </span><br><span class="line">        anim.setRepeatMode(ValueAnimator.RESTART);</span><br><span class="line">        <span class="comment">// 设置重复播放动画模式</span></span><br><span class="line">        <span class="comment">// ValueAnimator.RESTART(默认):正序重放</span></span><br><span class="line">        <span class="comment">// ValueAnimator.REVERSE:倒序回放</span></span><br><span class="line">     </span><br><span class="line"><span class="comment">// 步骤3：将改变的值手动赋值给对象的属性值：通过动画的更新监听器</span></span><br><span class="line">        <span class="comment">// 设置 值的更新监听器</span></span><br><span class="line">        <span class="comment">// 即：值每次改变、变化一次,该方法就会被调用一次</span></span><br><span class="line">        anim.addUpdateListener(<span class="keyword">new</span> ValueAnimator.AnimatorUpdateListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationUpdate</span><span class="params">(ValueAnimator animation)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">int</span> currentValue = (Integer) animation.getAnimatedValue();</span><br><span class="line">                <span class="comment">// 获得改变后的值</span></span><br><span class="line">                </span><br><span class="line">                System.out.println(currentValue);</span><br><span class="line">                <span class="comment">// 输出改变后的值</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 步骤4：将改变后的值赋给对象的属性值，下面会详细说明</span></span><br><span class="line">                View.setproperty（currentValue）；</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 步骤5：刷新视图，即重新绘制，从而实现动画效果</span></span><br><span class="line">                View.requestLayout();</span><br><span class="line">                </span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        anim.start();</span><br><span class="line">        <span class="comment">// 启动动画</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关注1：ofInt（）源码分析</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ValueAnimator <span class="title">ofInt</span><span class="params">(<span class="keyword">int</span>... values)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 允许传入一个或多个Int参数</span></span><br><span class="line">        <span class="comment">// 1. 输入一个的情况（如a）：从0过渡到a；</span></span><br><span class="line">        <span class="comment">// 2. 输入多个的情况（如a，b，c）：先从a平滑过渡到b，再从b平滑过渡到C</span></span><br><span class="line">        </span><br><span class="line">        ValueAnimator anim = <span class="keyword">new</span> ValueAnimator();</span><br><span class="line">        <span class="comment">// 创建动画对象</span></span><br><span class="line">        anim.setIntValues(values);</span><br><span class="line">        <span class="comment">// 将传入的值赋值给动画对象</span></span><br><span class="line">        <span class="keyword">return</span> anim;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h5 id="XML设置"><a href="#XML设置" class="headerlink" title="XML设置"></a>XML设置</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// ValueAnimator采用<span class="tag">&lt;<span class="name">animator</span>&gt;</span>  标签</span><br><span class="line"><span class="tag">&lt;<span class="name">animator</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>  </span></span><br><span class="line"><span class="tag">    <span class="attr">android:valueFrom</span>=<span class="string">&quot;0&quot;</span>   // 初始值</span></span><br><span class="line"><span class="tag">    <span class="attr">android:valueTo</span>=<span class="string">&quot;100&quot;</span>  // 结束值</span></span><br><span class="line"><span class="tag">    <span class="attr">android:valueType</span>=<span class="string">&quot;intType&quot;</span> // 变化值类型 ：<span class="attr">floatType</span> &amp; <span class="attr">intType</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">    <span class="attr">android:duration</span>=<span class="string">&quot;3000&quot;</span> // 动画持续时间（<span class="attr">ms</span>），必须设置，动画才有效果</span></span><br><span class="line"><span class="tag">    <span class="attr">android:startOffset</span> =<span class="string">&quot;1000&quot;</span> // 动画延迟开始时间（<span class="attr">ms</span>）</span></span><br><span class="line"><span class="tag">    <span class="attr">android:fillBefore</span> = <span class="string">“true”</span> // 动画播放完后，视图是否会停留在动画开始的状态，默认为<span class="attr">true</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:fillAfter</span> = <span class="string">“false”</span> // 动画播放完后，视图是否会停留在动画结束的状态，优先于<span class="attr">fillBefore</span>值，默认为<span class="attr">false</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:fillEnabled</span>= <span class="string">“true”</span> // 是否应用<span class="attr">fillBefore</span>值，对<span class="attr">fillAfter</span>值无影响，默认为<span class="attr">true</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:repeatMode</span>= <span class="string">“restart”</span> // 选择重复播放动画模式，<span class="attr">restart</span>代表正序重放，<span class="attr">reverse</span>代表倒序回放，默认为<span class="attr">restart</span>|</span></span><br><span class="line"><span class="tag">    <span class="attr">android:repeatCount</span> = <span class="string">“0”</span> // 重放次数（所以动画的播放次数=<span class="string">重放次数+1），为infinite时无限重复</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:interpolator</span> = <span class="string">@[package:]anim/interpolator_resource</span> // 插值器，即影响动画的播放速度,下面会详细讲</span></span><br><span class="line"><span class="tag">/&gt;</span>  </span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Animator animator = AnimatorInflater.loadAnimator(context, R.animator.set_animation);  </span><br><span class="line"><span class="comment">// 载入XML动画</span></span><br><span class="line"></span><br><span class="line">animator.setTarget(view);  </span><br><span class="line"><span class="comment">// 设置动画对象</span></span><br><span class="line"></span><br><span class="line">animator.start();  </span><br><span class="line"><span class="comment">// 启动动画</span></span><br></pre></td></tr></table></figure>



<h5 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h5><p>按钮的宽度从 <code>200px</code> 放大到 <code>500px</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Button</span><br><span class="line">    android:id=&quot;@+id/bt_value_anim&quot;</span><br><span class="line">    android:layout_width=&quot;200px&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_centerInParent=&quot;true&quot;</span><br><span class="line">    android:text=&quot;动画&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>？代码设置初始值</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 步骤1：设置属性数值的初始值(此处在xml中200) &amp; 结束值(600)</span></span><br><span class="line"><span class="keyword">val</span> valueAnimator = ValueAnimator.ofInt(bt_value_anim.layoutParams.width, <span class="number">600</span>)</span><br><span class="line">    <span class="comment">// ValueAnimator.ofInt()内置了整型估值器,直接采用默认的.不需要设置</span></span><br><span class="line">       <span class="comment">// 即默认设置了如何从初始值200 过渡到 结束值500</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 步骤2：设置动画的播放各种属性</span></span><br><span class="line">valueAnimator.duration = <span class="number">2000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 步骤3：将改变的值手动赋值给对象的属性值：通过动画的更新监听器</span></span><br><span class="line">        <span class="comment">// 设置 值的更新监听器</span></span><br><span class="line">        <span class="comment">// 即：值每次改变、变化一次,该方法就会被调用一次</span></span><br><span class="line">valueAnimator.addUpdateListener &#123;</span><br><span class="line">    <span class="keyword">val</span> currentValue = it.animatedValue</span><br><span class="line">    <span class="comment">// 获得每次变化后的属性值</span></span><br><span class="line">    Timber.d(<span class="string">&quot;currentValue <span class="variable">$currentValue</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 每次值变化时，将值手动赋值给对象的属性</span></span><br><span class="line">    bt_value_anim.layoutParams.width = currentValue <span class="keyword">as</span> <span class="built_in">Int</span></span><br><span class="line">    <span class="comment">// 即将每次变化后的值 赋 给按钮的宽度，这样就实现了按钮宽度属性的动态变化</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 步骤4：刷新视图，即重新绘制，从而实现动画效果</span></span><br><span class="line">    bt_value_anim.requestLayout()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">valueAnimator.start()</span><br></pre></td></tr></table></figure>



<h4 id="浮点型：ValueAnimator-oFloat（）"><a href="#浮点型：ValueAnimator-oFloat（）" class="headerlink" title="浮点型：ValueAnimator.oFloat（）"></a>浮点型：ValueAnimator.oFloat（）</h4><p>将初始值 以浮点型数值的形式 过渡到结束值</p>
<ul>
<li><code>ValueAnimator.oFloat（）</code>采用默认的浮点型估值器 (<code>FloatEvaluator</code>)</li>
<li><code>ValueAnimator.ofInt（）</code>采用默认的整型估值器（<code>IntEvaluator</code>）</li>
</ul>
<p>在使用上完全没有区别</p>
<h5 id="ValueAnimator-ofObject（）"><a href="#ValueAnimator-ofObject（）" class="headerlink" title="ValueAnimator.ofObject（）"></a>ValueAnimator.ofObject（）</h5><p>将初始值 以对象的形式 过渡到结束值</p>
<blockquote>
<p>即通过操作 对象 实现动画效果</p>
</blockquote>
<h5 id="实战-1"><a href="#实战-1" class="headerlink" title="实战"></a>实战</h5><p>可以看到 <code>ValueAnimator.ofObject（）</code>的本质还是操作 <strong>值</strong>,将多个值封装到一个对象里的方式，同时对多个值一起操作</p>
<p>PointEvaluator</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PointEvaluator</span> : <span class="type">TypeEvaluator</span>&lt;<span class="type">Point</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">evaluate</span><span class="params">(fraction: <span class="type">Float</span>, startValue: <span class="type">Point</span>?, endValue: <span class="type">Point</span>?)</span></span>: Point &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将动画初始值startValue 和 动画结束值endValue 强制类型转换成Point对象</span></span><br><span class="line">        <span class="keyword">val</span> startPoint = startValue</span><br><span class="line">        <span class="keyword">val</span> endPoint =  endValue</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 根据fraction来计算当前动画的x和y的值</span></span><br><span class="line">        <span class="keyword">val</span> x = startPoint!!.x + fraction * (endPoint!!.x - startPoint!!.x)</span><br><span class="line">        <span class="keyword">val</span> y = startPoint!!.y + fraction * (endPoint!!.y - startPoint!!.y)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将计算后的坐标封装到一个新的Point对象中并返回</span></span><br><span class="line">        <span class="keyword">val</span> point = Point(x,y)</span><br><span class="line">        <span class="keyword">return</span>  point</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>Point</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span></span>(<span class="keyword">val</span> x: <span class="built_in">Float</span>, <span class="keyword">val</span> y: <span class="built_in">Float</span>)</span><br></pre></td></tr></table></figure>





<p>MyView</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyView</span> : <span class="type">View &#123;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(context: Context?, attrs: AttributeSet?) : <span class="keyword">super</span>(context, attrs)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置需要用到的变量</span></span><br><span class="line">    <span class="keyword">val</span> RADIUS = <span class="number">70f</span> <span class="comment">// 圆的半径 = 70</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> currentPoint <span class="comment">// 当前点坐标</span></span><br><span class="line">            : Point? = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">val</span> mPaint = Paint(Paint.ANTI_ALIAS_FLAG).apply &#123;</span><br><span class="line">        color = Color.BLUE</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onDraw</span><span class="params">(canvas: <span class="type">Canvas</span>?)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 如果当前点坐标为空(即第一次执行)</span></span><br><span class="line">        <span class="keyword">if</span> (currentPoint == <span class="literal">null</span>) &#123;</span><br><span class="line">            currentPoint = Point(RADIUS, RADIUS)</span><br><span class="line">            <span class="keyword">val</span> x = currentPoint?.x</span><br><span class="line">            <span class="keyword">val</span> y = currentPoint?.y</span><br><span class="line">            <span class="keyword">if</span> (x != <span class="literal">null</span> &amp;&amp; y != <span class="literal">null</span>) &#123;</span><br><span class="line">                canvas?.drawCircle(x, y, RADIUS, mPaint)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// (重点关注)将属性动画作用到View中</span></span><br><span class="line">            <span class="comment">// 步骤1:创建初始动画时的对象点  &amp; 结束动画时的对象点</span></span><br><span class="line">            <span class="comment">// (重点关注)将属性动画作用到View中</span></span><br><span class="line">            <span class="comment">// 步骤1:创建初始动画时的对象点  &amp; 结束动画时的对象点</span></span><br><span class="line">            <span class="keyword">val</span> startPoint = Point(RADIUS, RADIUS) <span class="comment">// 初始点为圆心(70,70)</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">val</span> endPoint = Point(<span class="number">700f</span>, <span class="number">1000f</span>) <span class="comment">// 结束点为(700,1000)</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 步骤2:创建动画对象 &amp; 设置初始值 和 结束值</span></span><br><span class="line">            <span class="keyword">val</span> anim = ValueAnimator.ofObject(PointEvaluator(), startPoint, endPoint)</span><br><span class="line">            <span class="comment">// 参数说明</span></span><br><span class="line">            <span class="comment">// 参数1：TypeEvaluator 类型参数 - 使用自定义的PointEvaluator(实现了TypeEvaluator接口)</span></span><br><span class="line">            <span class="comment">// 参数2：初始动画的对象点</span></span><br><span class="line">            <span class="comment">// 参数3：结束动画的对象点</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 步骤3：设置动画参数</span></span><br><span class="line">            anim.duration = <span class="number">5000</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 设置 值的更新监听器</span></span><br><span class="line">            <span class="comment">// 即每当坐标值（Point对象）更新一次,该方法就会被调用一次</span></span><br><span class="line">            anim.addUpdateListener &#123;</span><br><span class="line">                currentPoint = it.animatedValue <span class="keyword">as</span> Point?</span><br><span class="line">                <span class="comment">// 将每次变化后的坐标值（估值器PointEvaluator中evaluate（）返回的Piont对象值）到当前坐标值对象（currentPoint）</span></span><br><span class="line">                <span class="comment">// 从而更新当前坐标值（currentPoint）</span></span><br><span class="line">                Timber.d(<span class="string">&quot;currentPoint==null  <span class="subst">$&#123;currentPoint?.x&#125;</span>  <span class="subst">$&#123;currentPoint?.y&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="comment">// 步骤4：每次赋值后就重新绘制，从而实现动画效果</span></span><br><span class="line">                invalidate()</span><br><span class="line">            &#125;</span><br><span class="line">            anim.start()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          </span><br><span class="line">          	<span class="comment">//除了第一次，后面每次都根据addUpdateListener回调，在这画圆</span></span><br><span class="line">          </span><br><span class="line">            <span class="comment">// 所以坐标值每改变一次,就会调用onDraw()一次,就会画一次圆,从而实现动画效果</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 在该点画一个圆:圆心 = (30,30),半径 = 30</span></span><br><span class="line">            <span class="keyword">val</span> x = currentPoint!!.x</span><br><span class="line">            <span class="keyword">val</span> y = currentPoint!!.y</span><br><span class="line">            canvas?.drawCircle(x, y, RADIUS, mPaint)</span><br><span class="line">					</span><br><span class="line">            Timber.d(<span class="string">&quot;currentPoint currentPoint!=null  <span class="subst">$&#123;currentPoint?.x&#125;</span>  <span class="subst">$&#123;currentPoint?.y&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="插值器"><a href="#插值器" class="headerlink" title="插值器"></a>插值器</h4><h5 id="xml设置"><a href="#xml设置" class="headerlink" title="xml设置"></a>xml设置</h5><p>当在XML文件设置插值器时，只需传入对应的插值器资源ID即可</p>
<p>主要是设置插值器属性<code>android:interpolator</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scale</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">    <span class="attr">android:interpolator</span>=<span class="string">&quot;@android:anim/overshoot_interpolator&quot;</span></span></span><br><span class="line"><span class="tag">    // 通过资源<span class="attr">ID</span>设置插值器</span></span><br><span class="line"><span class="tag">    <span class="attr">android:duration</span>=<span class="string">&quot;3000&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:fromXScale</span>=<span class="string">&quot;0.0&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:fromYScale</span>=<span class="string">&quot;0.0&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:pivotX</span>=<span class="string">&quot;50%&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:pivotY</span>=<span class="string">&quot;50%&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:toXScale</span>=<span class="string">&quot;2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:toYScale</span>=<span class="string">&quot;2&quot;</span> /&gt;</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<h5 id="代码设置"><a href="#代码设置" class="headerlink" title="代码设置"></a>代码设置</h5><p>当在Java代码设置插值器时，只需创建对应的插值器对象即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Button mButton = (Button) findViewById(R.id.Button);</span><br><span class="line"><span class="comment">// 步骤1:创建 需要设置动画的 视图View</span></span><br><span class="line"></span><br><span class="line">Animation alphaAnimation = <span class="keyword">new</span> AlphaAnimation(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line"><span class="comment">// 步骤2：创建透明度动画的对象 &amp; 设置动画效果</span></span><br><span class="line"></span><br><span class="line">alphaAnimation.setDuration(<span class="number">3000</span>);</span><br><span class="line">Interpolator overshootInterpolator = <span class="keyword">new</span> OvershootInterpolator();</span><br><span class="line"><span class="comment">// 步骤3：创建对应的插值器类对象</span></span><br><span class="line"></span><br><span class="line">alphaAnimation.setInterpolator(overshootInterpolator);</span><br><span class="line"><span class="comment">// 步骤4：给动画设置插值器</span></span><br><span class="line"></span><br><span class="line">mButton.startAnimation(alphaAnimation);</span><br><span class="line"><span class="comment">// 步骤5：播放动画</span></span><br></pre></td></tr></table></figure>



<h5 id="系统内置插值器"><a href="#系统内置插值器" class="headerlink" title="系统内置插值器"></a>系统内置插值器</h5><p>![](AnimPropertyView/Screen Shot 2021-02-01 at 10.57.34 AM.png)</p>
<h5 id="自定义插值器"><a href="#自定义插值器" class="headerlink" title="自定义插值器"></a>自定义插值器</h5><p>​    根据动画的进度（0%-100%）计算出当前属性值改变的百分比</p>
<p>​    自定义插值器需要实现 <code>Interpolator</code> / <code>TimeInterpolator</code>接口 &amp; 复写<code>getInterpolation（）</code></p>
<ol>
<li>补间动画 实现 <code>Interpolator</code>接口；属性动画实现<code>TimeInterpolator</code>接口</li>
<li><code>TimeInterpolator</code>接口是属性动画中新增的，用于兼容<code>Interpolator</code>接口，这使得所有过去的<code>Interpolator</code>实现类都可以直接在属性动画使用</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Interpolator接口 tween动画</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Interpolator</span> </span>&#123;  </span><br><span class="line"></span><br><span class="line">    <span class="comment">// 内部只有一个方法</span></span><br><span class="line">     <span class="function"><span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123;  </span><br><span class="line">         <span class="comment">// 参数说明</span></span><br><span class="line">         <span class="comment">// input值值变化范围是0-1，且随着动画进度（0% - 100% ）均匀变化</span></span><br><span class="line">        <span class="comment">// 即动画开始时，input值 = 0；动画结束时input = 1</span></span><br><span class="line">        <span class="comment">// 而中间的值则是随着动画的进度（0% - 100%）在0到1之间均匀增加</span></span><br><span class="line">        </span><br><span class="line">      ...<span class="comment">// 插值器的计算逻辑</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> xxx；</span><br><span class="line">      <span class="comment">// 返回的值就是用于估值器继续计算的fraction值，下面会详细说明</span></span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line"><span class="comment">// TimeInterpolator接口  属性动画</span></span><br><span class="line"><span class="comment">// 同上</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">TimeInterpolator</span> </span>&#123;  </span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span></span>;  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>



<ol start="3">
<li><p>匀速插值器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 匀速差值器：LinearInterpolator</span></span><br><span class="line"><span class="meta">@HasNativeInterpolator</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinearInterpolator</span> <span class="keyword">extends</span> <span class="title">BaseInterpolator</span> <span class="keyword">implements</span> <span class="title">NativeInterpolatorFactory</span> </span>&#123;  </span><br><span class="line">   <span class="comment">// 仅贴出关键代码</span></span><br><span class="line">  ...</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> input;  </span><br><span class="line">        <span class="comment">// 没有对input值进行任何逻辑处理，直接返回</span></span><br><span class="line">        <span class="comment">// 即input值 = fraction值</span></span><br><span class="line">        <span class="comment">// 因为input值是匀速增加的，因此fraction值也是匀速增加的，所以动画的运动情况也是匀速的，所以是匀速插值器</span></span><br><span class="line">    &#125;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 先加速再减速 差值器：AccelerateDecelerateInterpolator</span></span><br><span class="line"><span class="meta">@HasNativeInterpolator</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccelerateDecelerateInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span>, <span class="title">NativeInterpolatorFactory</span> </span>&#123;  </span><br><span class="line">      <span class="comment">// 仅贴出关键代码</span></span><br><span class="line">  ...</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">float</span>)(Math.cos((input + <span class="number">1</span>) * Math.PI) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">        <span class="comment">// input的运算逻辑如下：</span></span><br><span class="line">        <span class="comment">// 使用了余弦函数，因input的取值范围是0到1，那么cos函数中的取值范围就是π到2π。</span></span><br><span class="line">        <span class="comment">// 而cos(π)的结果是-1，cos(2π)的结果是1</span></span><br><span class="line">        <span class="comment">// 所以该值除以2加上0.5后，getInterpolation()方法最终返回的结果值还是在0到1之间。只不过经过了余弦运算之后，最终的结果不再是匀速增加的了，而是经历了一个先加速后减速的过程</span></span><br><span class="line">        <span class="comment">// 所以最终，fraction值 = 运算后的值 = 先加速后减速</span></span><br><span class="line">        <span class="comment">// 所以该差值器是先加速再减速的</span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>先加速再减速 插值器：<code>AccelerateDecelerateInterpolator</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 先加速再减速 差值器：AccelerateDecelerateInterpolator</span></span><br><span class="line"><span class="meta">@HasNativeInterpolator</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccelerateDecelerateInterpolator</span> <span class="keyword">implements</span> <span class="title">Interpolator</span>, <span class="title">NativeInterpolatorFactory</span> </span>&#123;  </span><br><span class="line">      <span class="comment">// 仅贴出关键代码</span></span><br><span class="line">  ...</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> input)</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">float</span>)(Math.cos((input + <span class="number">1</span>) * Math.PI) / <span class="number">2.0f</span>) + <span class="number">0.5f</span>;</span><br><span class="line">        <span class="comment">// input的运算逻辑如下：</span></span><br><span class="line">        <span class="comment">// 使用了余弦函数，因input的取值范围是0到1，那么cos函数中的取值范围就是π到2π。</span></span><br><span class="line">        <span class="comment">// 而cos(π)的结果是-1，cos(2π)的结果是1</span></span><br><span class="line">        <span class="comment">// 所以该值除以2加上0.5后，getInterpolation()方法最终返回的结果值还是在0到1之间。只不过经过了余弦运算之后，最终的结果不再是匀速增加的了，而是经历了一个先加速后减速的过程</span></span><br><span class="line">        <span class="comment">// 所以最终，fraction值 = 运算后的值 = 先加速后减速</span></span><br><span class="line">        <span class="comment">// 所以该差值器是先加速再减速的</span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>对input值 根据动画的进度（0%-100%）通过逻辑计算 计算出当前属性值改变的百分比</strong></p>
<p>实战</p>
<p>DecelerateAccelerateInterpolator</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DecelerateAccelerateInterpolator</span> : <span class="type">TimeInterpolator &#123;</span></span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">getInterpolation</span><span class="params">(input: <span class="type">Float</span>)</span></span>: <span class="built_in">Float</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> result: <span class="built_in">Float</span> = <span class="number">0.0f</span></span><br><span class="line">        <span class="keyword">if</span> (input &lt;= <span class="number">0.5</span>) &#123;</span><br><span class="line">            result = Math.sin(Math.PI * input).toFloat() / <span class="number">2</span></span><br><span class="line">            <span class="comment">// 使用正弦函数来实现先减速后加速的功能，逻辑如下：</span></span><br><span class="line">            <span class="comment">// 因为正弦函数初始弧度变化值非常大，刚好和余弦函数是相反的</span></span><br><span class="line">            <span class="comment">// 随着弧度的增加，正弦函数的变化值也会逐渐变小，这样也就实现了减速的效果。</span></span><br><span class="line">            <span class="comment">// 当弧度大于π/2之后，整个过程相反了过来，现在正弦函数的弧度变化值非常小，渐渐随着弧度继续增加，变化值越来越大，弧度到π时结束，这样从0过度到π，也就实现了先减速后加速的效果</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">             result= (<span class="number">2</span> - Math.sin(Math.PI * input)).toFloat() / <span class="number">2</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">        <span class="comment">// 返回的result值 = 随着动画进度呈先减速后加速的变化趋势</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>InterpolatorActivity</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> curTranslationX = bt_anim_interpolator.translationX</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> animator = <span class="module-access"><span class="module"><span class="identifier">ObjectAnimator</span>.</span></span><span class="keyword">of</span><span class="constructor">Float(<span class="params">bt_anim_interpolator</span>, <span class="string">&quot;translationX&quot;</span>, <span class="params">curTranslationX</span>, 300f, <span class="params">curTranslationX</span>)</span></span><br><span class="line">animator.duration = <span class="number">5000</span></span><br><span class="line">animator.interpolator = <span class="constructor">DecelerateAccelerateInterpolator()</span></span><br><span class="line">animator.start<span class="literal">()</span></span><br></pre></td></tr></table></figure>



<h4 id="ObjectAnimator与-ValueAnimator类的区别"><a href="#ObjectAnimator与-ValueAnimator类的区别" class="headerlink" title="ObjectAnimator与 ValueAnimator类的区别"></a><code>ObjectAnimator</code>与 <code>ValueAnimator</code>类的区别</h4><ul>
<li><code>ValueAnimator</code> 类是先改变值，然后 <strong>手动赋值</strong> 给对象的属性从而实现动画；是 <strong>间接</strong> 对对象属性进行操作；</li>
<li><code>ObjectAnimator</code> 类是先改变值，然后 <strong>自动赋值</strong> 给对象的属性从而实现动画；是 <strong>直接</strong> 对对象属性进行操作</li>
</ul>
<h3 id="估值器（TypeEvaluator-和插值器"><a href="#估值器（TypeEvaluator-和插值器" class="headerlink" title="估值器（TypeEvaluator) 和插值器"></a>估值器（TypeEvaluator) 和插值器</h3><ol>
<li>插值器（<code>Interpolator</code>）决定 值 的变化模式（匀速、加速）</li>
<li>估值器（<code>TypeEvaluator</code>）决定 值 的具体变化数值,设置动画从初始值过渡到结束值的逻辑。</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/carson_ho/article/details/99619871">https://blog.csdn.net/carson_ho/article/details/99619871</a></p>
<p>作者：Carson_Ho<br>链接：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/7c95342f4bc2">https://www.jianshu.com/p/7c95342f4bc2</a></p>
<p>​            <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/2f19fe1e3ca1">https://www.jianshu.com/p/2f19fe1e3ca1</a></p>
<p>来源：简书<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-AnimationView" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/12/26/AnimationView/">AnimationView</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-12-26T10:23:55.000Z" itemprop="datePublished">2019年12月26日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/anim/">anim</a>
  </div>

      
      
<a href="/2019/12/26/AnimationView/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h5 id="View-Animation"><a href="#View-Animation" class="headerlink" title="View Animation"></a>View Animation</h5><p>第一种就pass了，看下View Animation:</p>
<blockquote>
<p>You can use the view animation system to perform tweened animation on Views. Tween animation calculates the animation with information such as the start point, end point, size, rotation, and other common aspects of an animation.</p>
</blockquote>
<p>这种动画可以在一个视图容器执行　位置、大小、旋转、透明度的变化，使用XML定义更具可读性</p>
<blockquote>
<p>-set<br>|-android:interpolator -&gt; 插值器，影响动画的速度<br> |-默认值 -&gt; @android:anim/accelerate_decelerate_interpolator<br>|-android:shareInterpolator -&gt; 集合所有动画是否使用同一插值器<br>|-android:fillAfter -&gt; 动画结束后View是否停留在结束的位置<br>|-android:startOffset -&gt; 动画多少秒之后执行<br>|-android:repeatMode -&gt; 重复的模式,默认为restart,即重头开始重新运行,reverse即从结束开始向前重新运行<br>-TranslateAnimation -&gt; 移动View<br>|-<translate><br> |-android:fillAfter -&gt;<br> |-android:duration -&gt; 表示动画持续的时间<br> |-android:fromXDelta -&gt; 表示 x 的起始值<br> |-android:toXDelta -&gt; 表示 x 的结束值<br> |-android:fromYDelta -&gt; 表示 y 的起始值<br> |-android:toYDelta -&gt; 表示 y 的结束值<br>-scaleAnimation -&gt; 放大或者缩小View<br>|-<scale><br> |-android:duration -&gt; 表示动画持续的时间<br> |-android:fromXScale -&gt; 表示水平方向缩放的起始值<br> |-android:fromYScale -&gt; 表示竖直方向缩放的起始值<br> |-android:pivotX -&gt; 表示缩放中心点的 X 坐标<br> |-android:pivotY -&gt; 表示缩放中心点的 Y 坐标<br> |-android:toXScale -&gt; 表示水平方向缩放的结束值<br> |-android:toYScale -&gt; 表示竖直方向缩放的结束值<br>-RotateAnimation -&gt; 旋转View<br>|-<rotate><br> |-android:duration -&gt; 表示动画持续的时间<br> |-android:fromDegrees -&gt; 旋转开始的角度<br> |-android:toDegrees -&gt; 旋转结束的角度<br> |-android:pivotX -&gt; 旋转中心点的 X 坐标<br> |-android:pivotY -&gt; 旋转中心点的 Y 坐标<br>-AlphaAnimation -&gt; 改变View的透明度<br>|-<alpha><br> |-android:duration -&gt; 表示动画持续的时间<br> |-android:fromAlpha -&gt; 透明度的起始值<br> |-android:toAlpha -&gt; 透明度的结束值<br>-自定义View动画 -&gt; (不会,待实践中学习)    </alpha></rotate></scale></translate></p>
</blockquote>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span>  <span class="title">anim</span><span class="params">(resAnim:<span class="type">Int</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">val</span> translateAnimation = AnimationUtils.loadAnimation(<span class="keyword">this</span>,resAnim)</span><br><span class="line">    textView5.startAnimation(translateAnimation)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ol>
<li><p>view_anim_translate.xml</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 以下参数是4种动画效果的公共属性,即都有的属性</span></span><br><span class="line"><span class="symbol"> android:</span>duration=<span class="string">&quot;3000&quot;</span> <span class="comment">// 动画持续时间（ms），必须设置，动画才有效果</span></span><br><span class="line"><span class="symbol"> android:</span>startOffset =<span class="string">&quot;1000&quot;</span> <span class="comment">// 动画延迟开始时间（ms）</span></span><br><span class="line"><span class="symbol"> android:</span>fillBefore = “true” <span class="comment">// 动画播放完后，视图是否会停留在动画开始的状态，默认为true</span></span><br><span class="line"><span class="symbol"> android:</span>fillAfter = “false” <span class="comment">// 动画播放完后，视图是否会停留在动画结束的状态，优先于fillBefore值，默认为false</span></span><br><span class="line"><span class="symbol"> android:</span>fillEnabled= “true” <span class="comment">// 是否应用fillBefore值，对fillAfter值无影响，默认为true</span></span><br><span class="line"><span class="symbol"> android:</span>repeatMode= “restart” <span class="comment">// 选择重复播放动画模式，restart代表正序重放，reverse代表倒序回放，默认为restart|</span></span><br><span class="line"><span class="symbol"> android:</span>repeatCount = “<span class="number">0</span>” <span class="comment">// 重放次数（所以动画的播放次数=重放次数+1），为infinite时无限重复</span></span><br><span class="line"><span class="symbol"> android:</span>interpolator = @[package:]anim/interpolator_resource <span class="comment">// 插值器，即影响动画的播放速度,下面会详细讲</span></span><br><span class="line">   </span><br><span class="line"> <span class="comment">// 以下参数是平移动画特有的属性</span></span><br><span class="line"><span class="symbol"> android:</span>fromXDelta=<span class="string">&quot;0&quot;</span> <span class="comment">// 视图在水平方向x 移动的起始值</span></span><br><span class="line"><span class="symbol"> android:</span>toXDelta=<span class="string">&quot;500&quot;</span> <span class="comment">// 视图在水平方向x 移动的结束值</span></span><br><span class="line">   </span><br><span class="line"><span class="symbol"> android:</span>fromYDelta=<span class="string">&quot;0&quot;</span> <span class="comment">// 视图在竖直方向y 移动的起始值</span></span><br><span class="line"><span class="symbol"> android:</span>toYDelta=<span class="string">&quot;500&quot;</span> <span class="comment">// 视图在竖直方向y 移动的结束值</span></span><br></pre></td></tr></table></figure></li>
<li><p>View_anim_translate.xml</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--  <span class="string">//</span> 以下参数是4种动画效果的公共属性,即都有的属性</span><br><span class="line">  android<span class="function">:duration</span>=<span class="string">&quot;3000&quot;</span> <span class="string">//</span> 动画持续时间（ms），必须设置，动画才有效果</span><br><span class="line">  android<span class="function">:startOffset</span> =<span class="string">&quot;1000&quot;</span> <span class="string">//</span> 动画延迟开始时间（ms）</span><br><span class="line">  android<span class="function">:fillBefore</span> = “<span class="literal">true</span>” <span class="string">//</span> 动画播放完后，视图是否会停留在动画开始的状态，默认为<span class="literal">true</span></span><br><span class="line">  android<span class="function">:fillAfter</span> = “<span class="literal">false</span>” <span class="string">//</span> 动画播放完后，视图是否会停留在动画结束的状态，优先于fillBefore值，默认为<span class="literal">false</span></span><br><span class="line">  android<span class="function">:fillEnabled</span>= “<span class="literal">true</span>” <span class="string">//</span> 是否应用fillBefore值，对fillAfter值无影响，默认为<span class="literal">true</span></span><br><span class="line">  android<span class="function">:repeatMode</span>= “restart” <span class="string">//</span> 选择重复播放动画模式，restart代表正序重放，reverse代表倒序回放，默认为restart|</span><br><span class="line">  android<span class="function">:repeatCount</span> = “0” <span class="string">//</span> 重放次数（所以动画的播放次数=重放次数+1），为infinite时无限重复</span><br><span class="line">  android<span class="function">:interpolator</span> = @[package:]anim/interpolator_resource <span class="string">//</span> 插值器，即影响动画的播放速度,下面会详细讲</span><br><span class="line"></span><br><span class="line">  <span class="string">//</span> 以下参数是缩放动画特有的属性</span><br><span class="line">  android<span class="function">:fromXScale</span>=<span class="string">&quot;0.0&quot;</span></span><br><span class="line">  <span class="string">//</span> 动画在水平方向X的起始缩放倍数</span><br><span class="line">  <span class="string">//</span> 0.0表示收缩到没有；1.0表示正常无伸缩</span><br><span class="line">  <span class="string">//</span> 值小于1.0表示收缩；值大于1.0表示放大</span><br><span class="line"></span><br><span class="line">  android<span class="function">:toXScale</span>=<span class="string">&quot;2&quot;</span>  <span class="string">//</span>动画在水平方向X的结束缩放倍数</span><br><span class="line"></span><br><span class="line">  android<span class="function">:fromYScale</span>=<span class="string">&quot;0.0&quot;</span> <span class="string">//</span>动画开始前在竖直方向Y的起始缩放倍数</span><br><span class="line">  android<span class="function">:toYScale</span>=<span class="string">&quot;2&quot;</span> <span class="string">//</span>动画在竖直方向Y的结束缩放倍数</span><br><span class="line"></span><br><span class="line">  android<span class="function">:pivotX</span>=<span class="string">&quot;50%&quot;</span> <span class="string">//</span> 缩放轴点的x坐标</span><br><span class="line">  android<span class="function">:pivotY</span>=<span class="string">&quot;50%&quot;</span> <span class="string">//</span> 缩放轴点的y坐标</span><br><span class="line">  <span class="string">//</span> 轴点 = 视图缩放的中心点</span><br><span class="line"></span><br><span class="line">  <span class="string">//</span> pivotX pivotY,可取值为数字，百分比，或者百分比p</span><br><span class="line">  <span class="string">//</span> 设置为数字时（如50），轴点为View的左上角的原点在x方向和y方向加上50px的点。在Java代码里面设置这个参数的对应参数是Animation.ABSOLUTE。</span><br><span class="line">  <span class="string">//</span> 设置为百分比时（如50%），轴点为View的左上角的原点在x方向加上自身宽度50%和y方向自身高度50%的点。在Java代码里面设置这个参数的对应参数是Animation.RELATIVE_TO_SELF。</span><br><span class="line">  <span class="string">//</span> 设置为百分比p时（如50%p），轴点为View的左上角的原点在x方向加上父控件宽度50%和y方向父控件高度50%的点。在Java代码里面设置这个参数的对应参数是Animation.RELATIVE_TO_PARENT</span><br><span class="line"></span><br><span class="line">  <span class="string">//</span> 两个50%表示动画从自身中间开始，具体如下图</span><br></pre></td></tr></table></figure>

<p> android:pivotX=”50%” // 缩放轴点的x坐标<br>  android:pivotY=”50%” // 缩放轴点的y坐标</p>
<p>这个拿掉看看效果</p>
<img src="/2019/12/26/AnimationView/view.gif" alt="view" style="zoom:20%;">



<p>添加　</p>
<p>pivotX pivotY</p>
<img src="/2019/12/26/AnimationView/anim_view_scale1.gif" style="zoom: 20%;"></li>
<li><p>Rotate</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> 以下参数是旋转动画特有的属性</span><br><span class="line">  android:duration=<span class="string">&quot;1000&quot;</span></span><br><span class="line">  android:fromDegrees=<span class="string">&quot;0&quot;</span> <span class="regexp">//</span> 动画开始时 视图的旋转角度(正数 = 顺时针，负数 = 逆时针)</span><br><span class="line">  android:toDegrees=<span class="string">&quot;270&quot;</span> <span class="regexp">//</span> 动画结束时 视图的旋转角度(正数 = 顺时针，负数 = 逆时针)</span><br><span class="line">  android:pivotX=<span class="string">&quot;50%&quot;</span> <span class="regexp">//</span> 旋转轴点的x坐标</span><br><span class="line">  android:pivotY=<span class="string">&quot;0&quot;</span> <span class="regexp">//</span> 旋转轴点的y坐标</span><br><span class="line">  <span class="regexp">//</span> 轴点 = 视图缩放的中心点</span><br><span class="line">   </span><br><span class="line">  <span class="regexp">//</span> pivotX pivotY,可取值为数字，百分比，或者百分比p</span><br><span class="line">  <span class="regexp">//</span> 设置为数字时（如<span class="number">50</span>），轴点为View的左上角的原点在x方向和y方向加上<span class="number">50</span>px的点。在Java代码里面设置这个参数的对应参数是Animation.ABSOLUTE。</span><br><span class="line">  <span class="regexp">//</span> 设置为百分比时（如<span class="number">50</span>%），轴点为View的左上角的原点在x方向加上自身宽度<span class="number">50</span>%和y方向自身高度<span class="number">50</span>%的点。在Java代码里面设置这个参数的对应参数是Animation.RELATIVE_TO_SELF。</span><br><span class="line">  <span class="regexp">//</span> 设置为百分比p时（如<span class="number">50</span>%p），轴点为View的左上角的原点在x方向加上父控件宽度<span class="number">50</span>%和y方向父控件高度<span class="number">50</span>%的点。在Java代码里面设置这个参数的对应参数是Animation.RELATIVE_TO_PARENT</span><br><span class="line">  <span class="regexp">//</span> 两个<span class="number">50</span>%表示动画从自身中间开始，具体如下图</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>alpha</li>
</ol>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 以下参数是4种动画效果的公共属性,即都有的属性</span></span><br><span class="line"><span class="symbol">android:</span>duration=<span class="string">&quot;3000&quot;</span> <span class="comment">// 动画持续时间（ms），必须设置，动画才有效果</span></span><br><span class="line"><span class="symbol">android:</span>startOffset =<span class="string">&quot;1000&quot;</span> <span class="comment">// 动画延迟开始时间（ms）</span></span><br><span class="line"><span class="symbol">android:</span>fillBefore = “true” <span class="comment">// 动画播放完后，视图是否会停留在动画开始的状态，默认为true</span></span><br><span class="line"><span class="symbol">android:</span>fillAfter = “false” <span class="comment">// 动画播放完后，视图是否会停留在动画结束的状态，优先于fillBefore值，默认为false</span></span><br><span class="line"><span class="symbol">android:</span>fillEnabled= “true” <span class="comment">// 是否应用fillBefore值，对fillAfter值无影响，默认为true</span></span><br><span class="line"><span class="symbol">android:</span>repeatMode= “restart” <span class="comment">// 选择重复播放动画模式，restart代表正序重放，reverse代表倒序回放，默认为restart|</span></span><br><span class="line"><span class="symbol">android:</span>repeatCount = “<span class="number">0</span>” <span class="comment">// 重放次数（所以动画的播放次数=重放次数+1），为infinite时无限重复</span></span><br><span class="line"><span class="symbol">android:</span>interpolator = @[package:]anim/interpolator_resource <span class="comment">// 插值器，即影响动画的播放速度,下面会详细讲</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以下参数是透明度动画特有的属性</span></span><br><span class="line"><span class="symbol">android:</span>fromAlpha=<span class="string">&quot;1.0&quot;</span> <span class="comment">// 动画开始时视图的透明度(取值范围: -1 ~ 1)</span></span><br><span class="line"><span class="symbol">android:</span>toAlpha=<span class="string">&quot;0.0&quot;</span><span class="comment">// 动画结束时视图的透明度(取值范围: -1 ~ 1)</span></span><br></pre></td></tr></table></figure></li>
</ol>
<ol start="5">
<li><p>组合动画</p>
 <figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line"><span class="comment">// 采用&lt; Set/&gt;标签</span></span><br><span class="line">&lt;<span class="keyword">set</span> xmlns:android=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 组合动画同样具备公共属性</span></span><br><span class="line">    android:duration=<span class="string">&quot;3000&quot;</span> <span class="comment">// 动画持续时间（ms），必须设置，动画才有效果</span></span><br><span class="line">    android:startOffset <span class="comment">=</span><span class="comment">&quot;1000&quot;</span> // 动画延迟开始时间（<span class="comment">ms</span>）</span><br><span class="line">    android:fillBefore <span class="comment">=</span> “<span class="comment">true</span>” // 动画播放完后，视图是否会停留在动画开始的状态，默认为<span class="comment">true</span></span><br><span class="line">    android:fillAfter <span class="comment">=</span> “<span class="comment">false</span>” // 动画播放完后，视图是否会停留在动画结束的状态，优先于<span class="comment">fillBefore</span>值，默认为<span class="comment">false</span></span><br><span class="line">    android:fillEnabled= “true” <span class="comment">// 是否应用fillBefore值，对fillAfter值无影响，默认为true</span></span><br><span class="line">    android:repeatMode= “restart” <span class="comment">// 选择重复播放动画模式，restart代表正序重放，reverse代表倒序回放，默认为restart|</span></span><br><span class="line">    android:repeatCount <span class="comment">=</span> “<span class="comment">0</span>” // 重放次数（所以动画的播放次数<span class="comment">=</span>重放次数<span class="comment">+1</span>），为<span class="comment">infinite</span>时无限重复</span><br><span class="line">    android:interpolator <span class="comment">= @[package:]anim</span>/interpolator_resource <span class="comment">// 插值器，即影响动画的播放速度,下面会详细讲</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// 组合动画独特的属性</span></span><br><span class="line">    android:shareinterpolator = “true”</span><br><span class="line">    <span class="comment">// 表示组合动画中的动画是否和集合共享同一个差值器</span></span><br><span class="line">    <span class="comment">// 如果集合不指定插值器，那么子动画需要单独设置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 组合动画播放时是全部动画同时开始</span></span><br><span class="line"><span class="comment">// 如果想不同动画不同时间开始就要使用android:startOffset属性来延迟单个动画播放时间</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置旋转动画，语法同单个动画</span></span><br><span class="line">    &lt;rotate</span><br><span class="line">        android:duration=<span class="comment">&quot;1000&quot;</span></span><br><span class="line">        android:fromDegrees=<span class="comment">&quot;0&quot;</span></span><br><span class="line">        android:toDegrees=<span class="comment">&quot;360&quot;</span></span><br><span class="line">        android:pivotX=<span class="comment">&quot;50%&quot;</span></span><br><span class="line">        android:pivotY=<span class="comment">&quot;50%&quot;</span></span><br><span class="line">        android:repeatMode=<span class="comment">&quot;restart&quot;</span></span><br><span class="line">        android:repeatCount=<span class="comment">&quot;infinite&quot;</span></span><br><span class="line">        /<span class="comment">&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置平移动画，语法同单个动画</span></span><br><span class="line">    &lt;translate</span><br><span class="line">        android:duration=<span class="string">&quot;10000&quot;</span></span><br><span class="line">        android:startOffset <span class="comment">=</span> “<span class="comment">1000</span>”// 延迟该动画播放时间</span><br><span class="line">        android:fromXDelta=<span class="string">&quot;-50%p&quot;</span></span><br><span class="line">        android:fromYDelta=<span class="string">&quot;0&quot;</span></span><br><span class="line">        android:toXDelta=<span class="string">&quot;50%p&quot;</span></span><br><span class="line">        android:toYDelta=<span class="string">&quot;0&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置透明度动画，语法同单个动画</span></span><br><span class="line">    &lt;alpha</span><br><span class="line">        android:startOffset=<span class="comment">&quot;7000&quot;</span></span><br><span class="line">        android:duration=<span class="comment">&quot;3000&quot;</span></span><br><span class="line">        android:fromAlpha=<span class="comment">&quot;1.0&quot;</span></span><br><span class="line">        android:toAlpha=<span class="comment">&quot;0.0&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置缩放动画，语法同单个动画</span></span><br><span class="line">    &lt;scale</span><br><span class="line">        android:startOffset=<span class="string">&quot;4000&quot;</span></span><br><span class="line">        android:duration=<span class="string">&quot;1000&quot;</span></span><br><span class="line">        android:fromXScale=<span class="string">&quot;1.0&quot;</span></span><br><span class="line">        android:fromYScale=<span class="string">&quot;1.0&quot;</span></span><br><span class="line">        android:pivotX=<span class="string">&quot;50%&quot;</span></span><br><span class="line">        android:pivotY=<span class="string">&quot;50%&quot;</span></span><br><span class="line">        android:toXScale=<span class="string">&quot;0.5&quot;</span></span><br><span class="line">        android:toYScale=<span class="string">&quot;0.5&quot;</span> /&gt;</span><br><span class="line"><span class="comment">// 特别注意：</span></span><br><span class="line"><span class="comment">// 1. 在组合动画里scale缩放动画设置的repeatCount（重复播放）和fillBefore（播放完后，视图是否会停留在动画开始的状态）是无效的。</span></span><br><span class="line"><span class="comment">// 2. 所以如果需要重复播放或者回到原位的话需要在set标签里设置</span></span><br><span class="line"><span class="comment">// 3. 但是由于此处rotate旋转动画里已设置repeatCount为infinite，所以动画不会结束，也就看不到重播和回复原位</span></span><br><span class="line">&lt;/<span class="keyword">set</span>&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>  它是一个接一个播放，可以通过设置repeatCount 达到同时播放的目的</p>
</li>
</ol>
<h5 id="监听动画"><a href="#监听动画" class="headerlink" title="监听动画"></a>监听动画</h5><ul>
<li>Animation.addListener</li>
<li>anim.addListener(new AnimatorListenerAdapter()</li>
</ul>
<h5 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h5><ol>
<li><p>Activity入场</p>
<p>activity_anim_enter.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    &lt;translate</span><br><span class="line">            android:duration= &quot;3000&quot;</span><br><span class="line">            android:fromXDelta=&quot;100%p&quot;</span><br><span class="line">            android:toXDelta=&quot;0%p&quot;/&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> activity_anim_exit.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    &lt;translate</span><br><span class="line">            android:duration= &quot;3000&quot;</span><br><span class="line">            android:fromXDelta=&quot;0%p&quot;</span><br><span class="line">            android:toXDelta=&quot;-100%p&quot;/&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="视图组（ViewGroup）动画"><a href="#视图组（ViewGroup）动画" class="headerlink" title="视图组（ViewGroup）动画"></a>视图组（ViewGroup）动画</h5><h5 id="插值器"><a href="#插值器" class="headerlink" title="插值器"></a>插值器</h5><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/2f19fe1e3ca1">https://www.jianshu.com/p/2f19fe1e3ca1</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/carson_ho/article/details/72827747">https://blog.csdn.net/carson_ho/article/details/72827747</a></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-AnimBitmaps" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/12/25/AnimBitmaps/">AnimBitmaps</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-12-25T07:38:00.000Z" itemprop="datePublished">2019年12月25日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/anim/">anim</a>
  </div>

      
      
<a href="/2019/12/25/AnimBitmaps/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h5 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h5><p><a target="_blank" rel="noopener" href="https://developer.android.com/training/animation">https://developer.android.com/training/animation</a></p>
<h1 id="Animate-drawable-graphics"><a href="#Animate-drawable-graphics" class="headerlink" title="Animate drawable graphics"></a>Animate drawable graphics</h1><p>The first option is to use an <a target="_blank" rel="noopener" href="https://developer.android.com/guide/topics/graphics/drawable-animation.html#AnimationDrawable">Animation Drawable</a>. This allows you to specify several static <a target="_blank" rel="noopener" href="https://developer.android.com/guide/topics/graphics/2d-graphics.html">drawable files</a> that will be displayed one at a time to create an animation. The second option is to use an <a target="_blank" rel="noopener" href="https://developer.android.com/guide/topics/graphics/drawable-animation.html#AnimVector">Animated Vector Drawable</a>, which lets you animate the properties of a <a target="_blank" rel="noopener" href="https://developer.android.com/guide/topics/graphics/vector-drawable-resources.html">vector drawable</a>.</p>
<ol>
<li><p>The XML file consists of <code>&lt;animation=list&gt;</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">animation-list</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:oneshot</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">&quot;@drawable/rocket_thrust1&quot;</span> <span class="attr">android:duration</span>=<span class="string">&quot;200&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">&quot;@drawable/rocket_thrust2&quot;</span> <span class="attr">android:duration</span>=<span class="string">&quot;200&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:drawable</span>=<span class="string">&quot;@drawable/rocket_thrust3&quot;</span> <span class="attr">android:duration</span>=<span class="string">&quot;200&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">animation-list</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>  in which the animation is added to an <code>ImageView</code> and then animated when the  screen is touched</p>
</li>
</ol>
   <figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> lateinit var rocketAnimation: AnimationDrawable</span><br><span class="line"></span><br><span class="line">override <span class="keyword">fun</span> on<span class="constructor">Create(<span class="params">savedInstanceState</span>: Bundle?)</span> &#123;</span><br><span class="line">    super.on<span class="constructor">Create(<span class="params">savedInstanceState</span>)</span></span><br><span class="line">    set<span class="constructor">ContentView(R.<span class="params">layout</span>.<span class="params">main</span>)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> rocketImage = findViewById&lt;ImageView&gt;(<span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>id.rocket_image).apply &#123;</span><br><span class="line">        set<span class="constructor">BackgroundResource(R.<span class="params">drawable</span>.<span class="params">rocket_thrust</span>)</span></span><br><span class="line">        rocketAnimation = background <span class="keyword">as</span> AnimationDrawable</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    rocketImage.set<span class="constructor">OnClickListener(&#123; <span class="params">rocketAnimation</span>.<span class="params">start</span>()</span> &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>It’s important to note that the <code>start()</code> method called on the <code>AnimationDrawable</code> cannot be called during the <code>onCreate()</code> method of your Activity, because the <code>AnimationDrawable</code> is not yet fully attached to the window. If you want to play the animation immediately, without requiring interaction, then you might want to call it from the <code>onStart()</code> method in your Activity, which will get called when Android makes the view visible on screen.</p>
<h5 id="AnimatedVectorDrawable"><a href="#AnimatedVectorDrawable" class="headerlink" title="AnimatedVectorDrawable"></a>AnimatedVectorDrawable</h5>
        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-JCenterPublish" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/12/13/JCenterPublish/">JCenterPublish</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-12-12T22:30:57.000Z" itemprop="datePublished">2019年12月13日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/TOOL/">TOOL</a>
  </div>

      
      
<a href="/2019/12/13/JCenterPublish/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h5 id="nexus-sonatype"><a href="#nexus-sonatype" class="headerlink" title="nexus sonatype"></a>nexus sonatype</h5><ol>
<li><p>主要步骤按照这个操作 <a target="_blank" rel="noopener" href="https://www.gcssloop.com/gebug/maven-private">https://www.gcssloop.com/gebug/maven-private</a></p>
</li>
<li><p>注意： 密码不再是　admin admin 123了按照这个步骤 <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/fcb128e34c87">https://www.jianshu.com/p/fcb128e34c87</a></p>
</li>
<li><p>部署好一个平台后，sonatype-work复制过去，其他配置就不用再弄了，注意nexus-3.20.0-04-unix.tar.gz解压后也会有sonatype-work文件，可能会把之前的覆盖</p>
</li>
<li><p>运行</p>
<p>在命令行工具中输入启动命令：</p>
<p>software/nexus-3.20.0-04-mac/nexus-3.20.0-04/bin</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nexus <span class="literal">start</span></span><br></pre></td></tr></table></figure>

<p>如果一切顺利，在等待几十秒到一两分钟之后就可以查看我们的仓库了，如果出错了，可以使用 run 命令来查看具体的出错原因：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># run 命令相当于 debug 模式，会输出所有的日志信息</span></span><br><span class="line">./nexus <span class="built_in">run</span></span><br></pre></td></tr></table></figure>



<p>当然，Nexus 还有很多其他命令(例如:停止、重启、查看状态等)：</p>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nexus &#123;start|<span class="type">stop</span>|<span class="type">run</span>|<span class="type">run</span>-redirect|<span class="type">status</span>|<span class="type">restart</span>|<span class="type">force</span>-reload&#125;</span><br></pre></td></tr></table></figure>

<p>注意:windows启动是这样的 <code>.\nexus.exe /run</code></p>
</li>
<li><p>打包</p>
</li>
</ol>
<p> 在配置完善后同步一下项目，就可以打开 gradle 命令菜单看到多出来了3个命令，双击即可执行对应的命令：</p>
<ul>
<li>pack：打包项目</li>
<li>uploadToLocal：上传到本机仓库</li>
<li>uploadToPublic：上传到公网仓库</li>
</ul>
<ol start="6">
<li><p>查看</p>
<p><code>http://localhost:8081</code> 即可查看，如果修改了端口号，后面写对应的端口号即可。如果是运行在服务器上，则在其他电脑上输入<code>http://&#123;服务器ip&#125;:&#123;port&#125;</code> IP 和对应的端口号。如果运行成功，则会看到类似如下界面：</p>
</li>
</ol>
<h5 id="Prepare"><a href="#Prepare" class="headerlink" title="Prepare"></a>Prepare</h5><ul>
<li>Setting the JDK path</li>
</ul>
<blockquote>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Open ~/.bash_profile </span><br><span class="line">export JAVA_HOME=<span class="constructor">$(<span class="operator">/</span><span class="params">usr</span><span class="operator">/</span><span class="params">libexec</span><span class="operator">/</span><span class="params">java_home</span>)</span></span><br><span class="line">source ~/.bash_profile</span><br></pre></td></tr></table></figure>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://android.jlelse.eu/publishing-your-android-kotlin-or-java-library-to-jcenter-from-android-studio-1b24977fe450">https://android.jlelse.eu/publishing-your-android-kotlin-or-java-library-to-jcenter-from-android-studio-1b24977fe450</a></p>
<h5 id="maven-center"><a href="#maven-center" class="headerlink" title="maven center"></a>maven center</h5><p>按照这个教程参考**<a href="git@121.41.17.19:library/TestMavenUp.git">TestMavenUp</a>*  就差不多了</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/6c1d2688ed2d/">https://www.jianshu.com/p/6c1d2688ed2d/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/0629548ab5a4">https://www.jianshu.com/p/0629548ab5a4</a></p>
<p>可以把项目和jar放到同一个目录</p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Math-Trigonometric-functions" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/12/08/Math-Trigonometric-functions/">Math_Trigonometric_functions</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-12-08T11:34:25.000Z" itemprop="datePublished">2019年12月08日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/Mathematics/">Mathematics</a>
  </div>

      
      
<a href="/2019/12/08/Math-Trigonometric-functions/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h5 id="Trigonometric-function"><a href="#Trigonometric-function" class="headerlink" title="Trigonometric function"></a>Trigonometric function</h5><p><a target="_blank" rel="noopener" href="https://zhidao.baidu.com/question/498563235">https://zhidao.baidu.com/question/498563235</a></p>
<p><a target="_blank" rel="noopener" href="https://www.shuxuele.com/algebra/trig-four-quadrants.html">https://www.shuxuele.com/algebra/trig-four-quadrants.html</a></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-TEST-UNIT" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/11/17/TEST-UNIT/">TEST_UNIT</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-11-17T12:49:14.000Z" itemprop="datePublished">2019年11月17日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/TEST/">TEST</a>
  </div>

      
      
<a href="/2019/11/17/TEST-UNIT/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Test Driven Development</p>
<p>MainPrinciple:Write the test case before the implementation of the function (only for unit tests)</p>
<ol>
<li>Write the function signature</li>
<li>Write the test cases for the function</li>
<li>Write the function logic so the tests pass</li>
</ol>
<p>You  should only have one assertion per test case.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">object</span> RegistrationUtil &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> exitingUsers = listOf(<span class="string">&quot;Peter&quot;</span>,<span class="string">&quot;Carl&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * the input is not valid if...</span></span><br><span class="line"><span class="comment">     * ...the username /password is empty</span></span><br><span class="line"><span class="comment">     * ...the username is already taken</span></span><br><span class="line"><span class="comment">     * ...the confirmed password is not the same as the real password</span></span><br><span class="line"><span class="comment">     * ...the pasword contains less than 2 digits</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">validateRegistrationInput</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        userName: <span class="type">String</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        password: <span class="type">String</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        confirmedPassword: <span class="type">String</span></span></span></span><br><span class="line"><span class="function"><span class="params">    )</span></span>:<span class="built_in">Boolean</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (userName.isEmpty()||password.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (userName <span class="keyword">in</span> exitingUsers)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (password!=confirmedPassword)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (password.count&#123;it.isDigit()&#125;&lt;<span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>RegistrationUtilTest.kt</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.google.common.truth.Truth.assertThat</span><br><span class="line"><span class="keyword">import</span> org.junit.Test</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RegistrationUtilTest</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> `empty username returns <span class="literal">false</span>`<span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> result = RegistrationUtil.validateRegistrationInput(</span><br><span class="line">            <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;123&quot;</span>,</span><br><span class="line">            <span class="string">&quot;123&quot;</span></span><br><span class="line">        )</span><br><span class="line">        assertThat(result).isFalse()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> `valid username and correctly repeated password returns <span class="literal">true</span>`<span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> result = RegistrationUtil.validateRegistrationInput(</span><br><span class="line">            <span class="string">&quot;Philipp&quot;</span>,</span><br><span class="line">            <span class="string">&quot;123&quot;</span>,</span><br><span class="line">            <span class="string">&quot;123&quot;</span></span><br><span class="line">        )</span><br><span class="line">        assertThat(result).isTrue()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> `username already exists returns <span class="literal">false</span>`<span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> result = RegistrationUtil.validateRegistrationInput(</span><br><span class="line">            <span class="string">&quot;Carl&quot;</span>,</span><br><span class="line">            <span class="string">&quot;123&quot;</span>,</span><br><span class="line">            <span class="string">&quot;123&quot;</span></span><br><span class="line">        )</span><br><span class="line">        assertThat(result).isFalse()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> `incorrectly confirmed password returns <span class="literal">false</span>`<span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> result = RegistrationUtil.validateRegistrationInput(</span><br><span class="line">            <span class="string">&quot;Philipp&quot;</span>,</span><br><span class="line">            <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">            <span class="string">&quot;abcdefg&quot;</span></span><br><span class="line">        )</span><br><span class="line">        assertThat(result).isFalse()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> `empty password returns <span class="literal">false</span>`<span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> result = RegistrationUtil.validateRegistrationInput(</span><br><span class="line">            <span class="string">&quot;Philipp&quot;</span>,</span><br><span class="line">            <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;&quot;</span></span><br><span class="line">        )</span><br><span class="line">        assertThat(result).isFalse()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> `less than 2 digit password returns <span class="literal">false</span>`<span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> result = RegistrationUtil.validateRegistrationInput(</span><br><span class="line">            <span class="string">&quot;Philipp&quot;</span>,</span><br><span class="line">            <span class="string">&quot;abcdefg5&quot;</span>,</span><br><span class="line">            <span class="string">&quot;abcdefg5&quot;</span></span><br><span class="line">        )</span><br><span class="line">        assertThat(result).isFalse()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=W0ag98EDhGc&amp;list=PLQkwcJG4YTCSYJ13G4kVIJ10X5zisB2Lq&amp;index=3">https://www.youtube.com/watch?v=W0ag98EDhGc&amp;list=PLQkwcJG4YTCSYJ13G4kVIJ10X5zisB2Lq&amp;index=3</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/kotlin/coroutines/coroutines-best-practices">https://developer.android.com/kotlin/coroutines/coroutines-best-practices</a></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Test/" rel="tag">Test</a></li></ul>

          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-SharedPreferences" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/11/06/SharedPreferences/">SharedPreferences</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-11-06T06:50:12.000Z" itemprop="datePublished">2019年11月06日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/SOURCE/">SOURCE</a>
  </div>

      
      
<a href="/2019/11/06/SharedPreferences/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="https://s5.51cto.com/oss/202110/15/d91bb33922311055194a101ffe69424a.png"></p>
<h4 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h4><h5 id="问题1"><a href="#问题1" class="headerlink" title="问题1"></a>问题1</h5><p>sp初始化 是读取所有的文件，还是指定文件的数据。</p>
<h5 id="问题2"><a href="#问题2" class="headerlink" title="问题2"></a>问题2</h5><p>sp读取文件后会把数据保存到map中，如果后续我pusString() 数据了，还需要重新读取文件吗.</p>
<h4 id="启动变慢"><a href="#启动变慢" class="headerlink" title="启动变慢"></a>启动变慢</h4><p>sp可能导致启动变慢 :  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">startLoadFromDisk</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (mLock) &#123;</span><br><span class="line">        mLoaded = <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">new</span> Thread(<span class="string">&quot;SharedPreferencesImpl-load&quot;</span>) &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            loadFromDisk();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;.start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>mLock是异步操作</li>
<li>如果启动的时候，主线程读取，会导致启动变慢</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">getBoolean</span><span class="params">(String key, <span class="keyword">boolean</span> defValue)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (mLock) &#123;</span><br><span class="line">        awaitLoadedLocked();</span><br><span class="line">        Boolean v = (Boolean)mMap.get(key);</span><br><span class="line">        <span class="keyword">return</span> v != <span class="keyword">null</span> ? v : defValue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GuardedBy(&quot;mLock&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">awaitLoadedLocked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!mLoaded) &#123;</span><br><span class="line">        <span class="comment">// Raise an explicit StrictMode onReadFromDisk for this</span></span><br><span class="line">        <span class="comment">// thread, since the real read will be in a different</span></span><br><span class="line">        <span class="comment">// thread and otherwise ignored by StrictMode.</span></span><br><span class="line">        BlockGuard.getThreadPolicy().onReadFromDisk();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (!mLoaded) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            mLock.wait();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException unused) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (mThrowable != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(mThrowable);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>所有 getXXX() 方法都是同步的，在主线程调用 get 方法，必须等待 SP 加载完毕，会导致主线程阻塞，下面的代码，我相信小伙伴们并不陌生。</p>
<h4 id="commit-vs-apply"><a href="#commit-vs-apply" class="headerlink" title="commit vs apply"></a>commit vs apply</h4><p>commit ： 是同步</p>
<p>Apply : 异步</p>
<p><a target="_blank" rel="noopener" href="https://yjy239.github.io/2020/05/04/android-chong-xue-xi-lie-sharedpreferences-yuan-ma-jie-xi/">https://yjy239.github.io/2020/05/04/android-chong-xue-xi-lie-sharedpreferences-yuan-ma-jie-xi/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.51cto.com/article/685850.html">https://www.51cto.com/article/685850.html</a></p>
<p>解决SharedPreferences缺陷，微信MMKV原理分析</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1HF411b7H1?p=6&amp;spm_id_from=pageDriver">https://www.bilibili.com/video/BV1HF411b7H1?p=6&amp;spm_id_from=pageDriver</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1ih411a7KG?p=1">https://www.bilibili.com/video/BV1ih411a7KG?p=1</a></p>
<h4 id="DataStore"><a href="#DataStore" class="headerlink" title="DataStore"></a>DataStore</h4><p>SharedPreferences迁移</p>
<p><a target="_blank" rel="noopener" href="https://www.hi-dhl.com/2020/10/19/jetpack/11-DataStore/">https://www.hi-dhl.com/2020/10/19/jetpack/11-DataStore/</a></p>
<p><img src="/2019/11/06/SharedPreferences/2022-05-27_4.07.44.png" alt="2022-05-27_4.07.44"></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-SurfaceView" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/11/05/SurfaceView/">SurfaceView</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-11-05T04:42:57.000Z" itemprop="datePublished">2019年11月05日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/VIEW/">VIEW</a>
  </div>

      
      
<a href="/2019/11/05/SurfaceView/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p> 我们知道View是通过刷新来重绘视图，系统通过发出<code>VSSYNC</code>信号来进行屏幕的重绘，刷新的时间间隔是<code>16ms</code>,如果我们可以在16ms以内将绘制工作完成，则没有任何问题，如果我们绘制过程逻辑很复杂，并且我们的界面更新还非常频繁，这时候就会造成界面的卡顿，影响用户体验，为此Android提供了<code>SurfaceView</code>来解决这一问题。</p>
</blockquote>
<p>如果View需要频繁的刷新，或者刷新的数据量比较大，就需要使用SurfaceView</p>
<h4 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h4><ol>
<li><p>View中刷新频繁，Ondraw()会频繁调用,onDraw方法执行的时间过程会掉帧，出现页面卡顿。SurfaceView使用<strong>双缓冲技术</strong>，提高了绘制速度，可以缓解这一现象。</p>
</li>
<li><p>SurfaceView可以在子线程更新UI,不会阻塞主线程，提高了响应速度.</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/b037249e6d31">https://www.jianshu.com/p/b037249e6d31</a></p>
</li>
</ol>
<h4 id="啥是双缓冲技术"><a href="#啥是双缓冲技术" class="headerlink" title="啥是双缓冲技术?"></a>啥是双缓冲技术?</h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/guanguanboy/article/details/99715643">https://blog.csdn.net/guanguanboy/article/details/99715643</a></p>
<p>Android群英传 6.8</p>
<h4 id="SurfaceView使用模板"><a href="#SurfaceView使用模板" class="headerlink" title="SurfaceView使用模板"></a>SurfaceView使用模板</h4><p>大部分绘图都按照模板来</p>
<p>SurfaceViewTemplate</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SurfaceViewTemplate</span> <span class="keyword">extends</span> <span class="title">SurfaceView</span> <span class="keyword">implements</span> <span class="title">SurfaceHolder</span>.<span class="title">Callback</span>, <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> SurfaceHolder mSurfaceHolder;</span><br><span class="line">    <span class="comment">//绘图的Canvas</span></span><br><span class="line">    <span class="keyword">private</span> Canvas mCanvas;</span><br><span class="line">    <span class="comment">//子线程标志位</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mIsDrawing;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SurfaceViewTemplate</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(context, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SurfaceViewTemplate</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(context, attrs, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SurfaceViewTemplate</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">        initView();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">surfaceCreated</span><span class="params">(SurfaceHolder holder)</span> </span>&#123;</span><br><span class="line">        mIsDrawing = <span class="keyword">true</span>;</span><br><span class="line">        <span class="comment">//开启子线程</span></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">this</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">surfaceChanged</span><span class="params">(SurfaceHolder holder, <span class="keyword">int</span> format, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">surfaceDestroyed</span><span class="params">(SurfaceHolder holder)</span> </span>&#123;</span><br><span class="line">        mIsDrawing = <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (mIsDrawing)&#123;</span><br><span class="line">            draw();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//绘图逻辑</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//获得当前Canva绘图对象，获取的还是继续上次的Canvas对象，而不是一个新的对象,因此之前的绘图都将被保留，如果需要擦除，则绘制前，通过drawColor()方法进行清屏操作.</span></span><br><span class="line">            mCanvas = mSurfaceHolder.lockCanvas();</span><br><span class="line">            <span class="comment">//绘制背景</span></span><br><span class="line">            mCanvas.drawColor(Color.WHITE);</span><br><span class="line">            <span class="comment">//绘图</span></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (mCanvas != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="comment">//释放canvas对象并提交画布</span></span><br><span class="line">                mSurfaceHolder.unlockCanvasAndPost(mCanvas);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化View</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span></span>&#123;</span><br><span class="line">        mSurfaceHolder = getHolder();</span><br><span class="line">        mSurfaceHolder.addCallback(<span class="keyword">this</span>);</span><br><span class="line">        setFocusable(<span class="keyword">true</span>);</span><br><span class="line">        setKeepScreenOn(<span class="keyword">true</span>);</span><br><span class="line">        setFocusableInTouchMode(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>正旋曲线</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  https://www.jianshu.com/p/b037249e6d31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SurfaceViewSinFun</span> <span class="keyword">extends</span> <span class="title">SurfaceView</span> <span class="keyword">implements</span> <span class="title">SurfaceHolder</span>.<span class="title">Callback</span>, <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> SurfaceHolder mSurfaceHolder;</span><br><span class="line">    <span class="comment">//绘图的Canvas</span></span><br><span class="line">    <span class="keyword">private</span> Canvas mCanvas;</span><br><span class="line">    <span class="comment">//子线程标志位</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mIsDrawing;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> x = <span class="number">0</span>, y = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> Paint mPaint;</span><br><span class="line">    <span class="keyword">private</span> Path mPath;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SurfaceViewSinFun</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(context, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SurfaceViewSinFun</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(context, attrs, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SurfaceViewSinFun</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">        mPaint = <span class="keyword">new</span> Paint();</span><br><span class="line">        mPaint.setColor(Color.BLACK);</span><br><span class="line">        mPaint.setStyle(Paint.Style.STROKE);</span><br><span class="line">        mPaint.setAntiAlias(<span class="keyword">true</span>);</span><br><span class="line">        mPaint.setStrokeWidth(<span class="number">5</span>);</span><br><span class="line">        mPath = <span class="keyword">new</span> Path();</span><br><span class="line">        <span class="comment">//路径起始点(0, 100)</span></span><br><span class="line">        mPath.moveTo(<span class="number">0</span>, <span class="number">100</span>);</span><br><span class="line">        initView();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">surfaceCreated</span><span class="params">(SurfaceHolder holder)</span> </span>&#123;</span><br><span class="line">        mIsDrawing = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">this</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">surfaceChanged</span><span class="params">(SurfaceHolder holder, <span class="keyword">int</span> format, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">surfaceDestroyed</span><span class="params">(SurfaceHolder holder)</span> </span>&#123;</span><br><span class="line">        mIsDrawing = <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">while</span> (mIsDrawing)&#123;</span><br><span class="line">            drawSomething();</span><br><span class="line">            x += <span class="number">1</span>;</span><br><span class="line">            y = (<span class="keyword">int</span>)(<span class="number">100</span> * Math.sin(<span class="number">2</span> * x * Math.PI / <span class="number">180</span>) + <span class="number">400</span>);</span><br><span class="line">            <span class="comment">//加入新的坐标点</span></span><br><span class="line">            mPath.lineTo(x, y);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//控制绘制频率</span></span><br><span class="line">        <span class="keyword">long</span> end  = System.currentTimeMillis();</span><br><span class="line">        <span class="comment">//50 - 100</span></span><br><span class="line">        <span class="keyword">if</span> (end - start&lt;<span class="number">100</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span>-(end-start));  <span class="comment">//相当于绘制一次总的时间 100ms</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">drawSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//获得canvas对象</span></span><br><span class="line">            mCanvas = mSurfaceHolder.lockCanvas();</span><br><span class="line">            <span class="comment">//绘制背景</span></span><br><span class="line">            mCanvas.drawColor(Color.WHITE);</span><br><span class="line">            <span class="comment">//绘制路径</span></span><br><span class="line">            mCanvas.drawPath(mPath, mPaint);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (mCanvas != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="comment">//释放canvas对象并提交画布</span></span><br><span class="line">                mSurfaceHolder.unlockCanvasAndPost(mCanvas);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化View</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span></span>&#123;</span><br><span class="line">        mSurfaceHolder = getHolder();</span><br><span class="line">        mSurfaceHolder.addCallback(<span class="keyword">this</span>);</span><br><span class="line">        setFocusable(<span class="keyword">true</span>);</span><br><span class="line">        setKeepScreenOn(<span class="keyword">true</span>);</span><br><span class="line">        setFocusableInTouchMode(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过draw()方法所使用的逻辑时长来确定sleep的时长，这是一个非常通用的解决方案，每次绘制时间控制在100ms</p>
<p>画板</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 画板</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">class DrawingBoardView : SurfaceView, SurfaceHolder.Callback, Runnable &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> mCanvas: Canvas? = <span class="keyword">null</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> mSurfaceHolder: SurfaceHolder? = holder</span><br><span class="line"></span><br><span class="line">    <span class="comment">//子线程标志位</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> mIsDrawing = <span class="keyword">false</span></span><br><span class="line">    <span class="keyword">private</span> val x = <span class="number">0</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> y: Int = <span class="number">0</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> mPaint: Paint? = Paint().apply &#123;</span><br><span class="line">        color = Color.BLACK</span><br><span class="line">        style = Paint.Style.STROKE</span><br><span class="line">        isAntiAlias = <span class="keyword">true</span></span><br><span class="line">        strokeWidth = <span class="number">5f</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> mPath: Path? = <span class="keyword">null</span></span><br><span class="line"></span><br><span class="line">    constructor(context: Context) : <span class="keyword">this</span>(context, <span class="keyword">null</span>)</span><br><span class="line">    constructor(context: Context, attrs: AttributeSet?) : <span class="keyword">this</span>(context, attrs, <span class="number">0</span>)</span><br><span class="line">    constructor(context: Context, attrs: AttributeSet?, defStyleAttr: Int) : <span class="keyword">super</span>(context, attrs, defStyleAttr) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    init &#123;</span><br><span class="line">        mSurfaceHolder?.addCallback(<span class="keyword">this</span>)</span><br><span class="line">        isFocusable = <span class="keyword">true</span></span><br><span class="line">        keepScreenOn = <span class="keyword">true</span></span><br><span class="line">        isFocusableInTouchMode = <span class="keyword">true</span></span><br><span class="line"></span><br><span class="line">        mPath = Path()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">surfaceChanged</span><span class="params">(holder: SurfaceHolder?, format: Int, width: Int, height: Int)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">surfaceDestroyed</span><span class="params">(holder: SurfaceHolder?)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">surfaceCreated</span><span class="params">(holder: SurfaceHolder?)</span> </span>&#123;</span><br><span class="line">        mIsDrawing = <span class="keyword">true</span></span><br><span class="line">        <span class="comment">//开启子线程</span></span><br><span class="line">        Thread(<span class="keyword">this</span>).start()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (mIsDrawing) &#123;</span><br><span class="line">            draw()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> fun <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            mCanvas = mSurfaceHolder?.lockCanvas()</span><br><span class="line">            <span class="comment">//SurfaceView背景</span></span><br><span class="line">            mCanvas?.drawColor(Color.WHITE)</span><br><span class="line">            mPaint?.let &#123; mPath?.let &#123; it1 -&gt; mCanvas?.drawPath(it1, it) &#125; &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e: Exception) &#123;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            mCanvas?.let &#123;</span><br><span class="line">                mSurfaceHolder?.unlockCanvasAndPost(it)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">onTouchEvent</span><span class="params">(event: MotionEvent?)</span>: Boolean </span>&#123;</span><br><span class="line">        val x = event?.x</span><br><span class="line">        val y = event?.y</span><br><span class="line">        when (event?.action) &#123;</span><br><span class="line">            MotionEvent.ACTION_DOWN -&gt; x?.let &#123;</span><br><span class="line">                <span class="keyword">if</span> (y != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    mPath?.moveTo(it, y)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            MotionEvent.ACTION_MOVE -&gt; x?.let &#123;</span><br><span class="line">                <span class="keyword">if</span> (y != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    mPath?.lineTo(it, y)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-kotlin-begin" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/11/02/kotlin-begin/">kotlin_begin</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-11-02T08:08:22.000Z" itemprop="datePublished">2019年11月02日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/Kotlin/">Kotlin</a>
  </div>

      
      
<a href="/2019/11/02/kotlin-begin/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="Kotlin-in-Action"><a href="#Kotlin-in-Action" class="headerlink" title="Kotlin in Action"></a>Kotlin in Action</h4><h5 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val d: (String, Int) -&gt; Unit &#x2F;&#x2F; 函数类型 (String,Int) 接收参数 ，  Unit 返回类型</span><br></pre></td></tr></table></figure>





<h5 id="kotlin-lambda"><a href="#kotlin-lambda" class="headerlink" title="kotlin lambda"></a>kotlin lambda</h5><p><img src="/2019/11/02/kotlin-begin/2020-08-01-6.39.38.png" alt="2020-08-01-6.39.38"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">    val list &#x3D; listOf(&quot;apple&quot;, &quot;pear&quot;, &quot;banana&quot;, &quot;watermelon&quot;)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;    val result &#x3D; list.maxBy &#123; it.length &#125;</span><br><span class="line"></span><br><span class="line">    val lambda &#x3D; &#123; fruit: String -&gt;</span><br><span class="line">        fruit.length</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;推导1</span><br><span class="line">&#x2F;&#x2F;    val result &#x3D; list.maxBy(lambda)</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;推导2</span><br><span class="line">&#x2F;&#x2F;    val result &#x3D; list.maxBy(&#123;fruit:String-&gt;</span><br><span class="line">&#x2F;&#x2F;        fruit.length</span><br><span class="line">&#x2F;&#x2F;    &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;推导3</span><br><span class="line">&#x2F;&#x2F;    val result &#x3D; list.maxBy(&#123; fruit: String -&gt;</span><br><span class="line">&#x2F;&#x2F;        fruit.length</span><br><span class="line">&#x2F;&#x2F;    &#125;)           &#x2F;&#x2F;如果一个函数， 他接收的最后一个参数是lambda表达式，那么这最后一个参数可以移到括号外面</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;推导4</span><br><span class="line">&#x2F;&#x2F;    val result &#x3D; list.maxBy&#123; fruit: String -&gt;</span><br><span class="line">&#x2F;&#x2F;        fruit.length         &#x2F;&#x2F;如果一个函数 ,括号可以省略</span><br><span class="line">&#x2F;&#x2F;    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;推导4</span><br><span class="line">&#x2F;&#x2F;    val result &#x3D; list.maxBy&#123; fruit -&gt;</span><br><span class="line">&#x2F;&#x2F;        fruit.length         &#x2F;&#x2F;kotlin类型推导机制，参数类型可以省略</span><br><span class="line">&#x2F;&#x2F;    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;推导5</span><br><span class="line">    val result &#x3D; list.maxBy&#123;</span><br><span class="line">        it.length         &#x2F;&#x2F; lmbda表达式只有一个参数，参数可以省略 改用it替代</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    println(result)</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">fun &lt;T,R:Comparable&lt;R&gt;&gt; List&lt;T&gt;.findMax(block: (T) -&gt; R):T?&#123;</span><br><span class="line">    if (isEmpty()) return null</span><br><span class="line">    var maxElement &#x3D;get(0) &#x2F;&#x2F;获取List上下文的 第一个元素</span><br><span class="line">    var maxValue &#x3D; block(maxElement) &#x2F;&#x2F;block() 走到了 lambda方法中</span><br><span class="line">    for(element in this)&#123;</span><br><span class="line">        var value &#x3D; block(element)</span><br><span class="line">        if (value&gt; maxValue)&#123;</span><br><span class="line">            maxElement &#x3D; element</span><br><span class="line">            maxValue &#x3D; value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return maxElement</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;    val result &#x3D; list.findMax(lambda)</span><br><span class="line">    val result &#x3D; list.findMax&#123;it.length&#125;</span><br><span class="line"></span><br><span class="line">    println(result)</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/s/video/BV1Ut4y127xM">https://www.bilibili.com/s/video/BV1Ut4y127xM</a></p>
<p>1.Java定义的接口</p>
<p>2.单抽象方法</p>
<h5 id="Defining-and-calling-functions"><a href="#Defining-and-calling-functions" class="headerlink" title="Defining and calling functions"></a>Defining and calling functions</h5><ul>
<li><em>3.2.3 Getting rid of static utility classes: top-level functions and properties</em></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class JoinJava &#123;</span><br><span class="line">    public static void johnToString()&#123;</span><br><span class="line">        System.out.println(&quot;johnToString java&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">package com.kotlin3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fun johnToString()&#123;</span><br><span class="line">    println(&quot;johnToString kotlin&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    johnToString()</span><br><span class="line">    JoinJava.johnToString()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li><p><em>3.3.3 extension functions</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">fun String.lastChar() &#x3D; this.get(this.length-1)</span><br><span class="line"></span><br><span class="line">fun String.addName() &#x3D; this + &quot; john&quot;	&#x2F;&#x2F;this 获取到String类的上下文</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">val String.lastLetter: Char get()&#x3D; get(length-1)  &#x2F;&#x2F;拓展属性</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fun String.hellowrod()&#123;</span><br><span class="line">    println(&quot;hello world&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun String.cpaitalEnd():String&#123;</span><br><span class="line">    if (this.isEmpty()) return &quot;&quot;;</span><br><span class="line">    val charArray &#x3D; this.toCharArray()</span><br><span class="line">    charArray[length-1] &#x3D; charArray[length-1].toUpperCase()</span><br><span class="line">    return String(charArray)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import com.kotlin3.t3_3_2.addName</span><br><span class="line">import com.kotlin3.t3_3_2.lastChar</span><br><span class="line">import com.kotlin3.t3_3_2.lastLetter</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">   println(&quot;kotlin&quot;.lastChar())</span><br><span class="line">    println(&quot;kotlin&quot;.addName())</span><br><span class="line"></span><br><span class="line">    print(&quot;kotlin&quot;.lastLetter)</span><br><span class="line">    </span><br><span class="line">    &quot;&quot;.hellowrod() &#x2F;&#x2F;输出  hello world</span><br><span class="line">    println(&quot;code&quot;.cpaitalEnd())	&#x2F;&#x2F; codE</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="Conventions-used-7-3"><a href="#Conventions-used-7-3" class="headerlink" title="Conventions used  7.3"></a><em>Conventions used</em>  7.3</h5><blockquote>
<p> 如果用 10..20构建一个普通的 区间(闭区间)，该区间则包括10到20的所有数字， 包括20。开区间10 until 20 包括从 10 到凹的数字，但不包括 20。矩形类通常定义成这样，它的底部和右 侧坐标不是矩形的一部分，因此在这里使用开区 间是合适的 。</p>
</blockquote>
<ul>
<li><p>Delegated - classs</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;原文链接：https:&#x2F;&#x2F;blog.csdn.net&#x2F;xlh1191860939&#x2F;article&#x2F;details&#x2F;99641573</span><br><span class="line">interface ServiceApi &#123;</span><br><span class="line">    fun login(userName: String, password: String)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Retrofit : ServiceApi &#123;</span><br><span class="line">    override fun login(userName: String, password: String) &#123;</span><br><span class="line">        println(&quot;login successfully.&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 不用委托</span><br><span class="line"> *&#x2F;</span><br><span class="line">&#x2F;&#x2F;class RemoteRepository : ServiceApi, NewsApi &#123;</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F;    private val serverApi: ServiceApi &#x3D; Retrofit()</span><br><span class="line">&#x2F;&#x2F;    private val retrofitApi: NewsApi &#x3D; NewsApiImpl()</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F;    override fun login(username: String, password: String) &#123;</span><br><span class="line">&#x2F;&#x2F;        serverApi.login(username, password)</span><br><span class="line">&#x2F;&#x2F;    &#125;</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F;    override fun getNewsList() &#123;</span><br><span class="line">&#x2F;&#x2F;        retrofitApi.getNewsList()</span><br><span class="line">&#x2F;&#x2F;    &#125;</span><br><span class="line">&#x2F;&#x2F;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line"> *  使用kotlin 委托用下面简化</span><br><span class="line"> *&#x2F;</span><br><span class="line"></span><br><span class="line">class RemoteRepository(): ServiceApi by Retrofit() , NewsApi by NewsApiImpl()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">interface NewsApi &#123;</span><br><span class="line">    fun getNewsList()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class NewsApiImpl : NewsApi &#123;</span><br><span class="line">    override fun getNewsList() &#123;</span><br><span class="line">        println(&quot;NewsApiImpl: getNewsList()&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    val repository &#x3D; RemoteRepository()</span><br><span class="line">    repository.login(&quot;David&quot;, &quot;123456&quot;) &#x2F;&#x2F;输出 login successfully.</span><br><span class="line"></span><br><span class="line">    repository.getNewsList()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>7.5.2 使用委托属性:惰性初始化和 “by lazy()”</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;class Person(val name: String) &#123;</span><br><span class="line">&#x2F;&#x2F;    private var _emails: List&lt;Email&gt;? &#x3D; null</span><br><span class="line">&#x2F;&#x2F;    val emails: List&lt;Email&gt;</span><br><span class="line">&#x2F;&#x2F;        get() &#123;</span><br><span class="line">&#x2F;&#x2F;            if (_emails &#x3D;&#x3D; null) &#123;</span><br><span class="line">&#x2F;&#x2F;                _emails &#x3D; loadEmails(this)</span><br><span class="line">&#x2F;&#x2F;            &#125;</span><br><span class="line">&#x2F;&#x2F;            return _emails!!</span><br><span class="line">&#x2F;&#x2F;        &#125;</span><br><span class="line">&#x2F;&#x2F;&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;你有一个属性， emails，用来存储这个值， 而另一个 emails，用来提供对属性的读取访 问 。你需要使用两个属性 ，因为属性 具有不同的类型: emails 可以为空，而 emails 为非空。这种技术经常会使用到， 值得熟练掌握。</span><br><span class="line"></span><br><span class="line">class Person(val name:String)&#123;</span><br><span class="line">    val emails by lazy&#123;</span><br><span class="line">        loadEmails(this)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fun loadEmails(person: Person): List&lt;Email&gt;? &#123;</span><br><span class="line">    println (&quot;load emails for $&#123;person.name &#125;&quot; )</span><br><span class="line">    return listOf()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    val p &#x3D; Person(&quot;Alice&quot;)</span><br><span class="line">    p.emails</span><br><span class="line">    p.emails</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5e1288d86fb9a048217a19d9">https://juejin.im/post/5e1288d86fb9a048217a19d9</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/65914552">https://zhuanlan.zhihu.com/p/65914552</a></p>
<h5 id="委托Shareprefernce实战"><a href="#委托Shareprefernce实战" class="headerlink" title="委托Shareprefernce实战"></a>委托Shareprefernce实战</h5><ul>
<li><p>简易版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">class DelegateSharedPreferencesUtils &#123;</span><br><span class="line">    object User : Delegates() &#123;</span><br><span class="line">        override fun getSharedPreferencesName(): String &#x3D; this.javaClass.simpleName</span><br><span class="line">        var name by string()</span><br><span class="line">        var phone by long()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    abstract class Delegates &#123;</span><br><span class="line">        private val preferences: SharedPreferences by lazy &#123;</span><br><span class="line">            AppUtil.getApp().applicationContext.getSharedPreferences(</span><br><span class="line">                getSharedPreferencesName(),</span><br><span class="line">                Context.MODE_PRIVATE</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        abstract fun getSharedPreferencesName(): String</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        fun int(defaultValue: Int &#x3D; 0) &#x3D; object : ReadWriteProperty&lt;Any, Int&gt; &#123;</span><br><span class="line">            override fun getValue(thisRef: Any, property: KProperty&lt;*&gt;): Int &#123;</span><br><span class="line">                return preferences.getInt(property.name, defaultValue)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            override fun setValue(thisRef: Any, property: KProperty&lt;*&gt;, value: Int) &#123;</span><br><span class="line">                preferences.edit().putInt(property.name, value).apply()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fun string(defaultValue: String? &#x3D; null) &#x3D; object : ReadWriteProperty&lt;Any, String?&gt; &#123;</span><br><span class="line">            override fun getValue(thisRef: Any, property: KProperty&lt;*&gt;): String? &#123;</span><br><span class="line">                return preferences.getString(property.name, defaultValue)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            override fun setValue(thisRef: Any, property: KProperty&lt;*&gt;, value: String?) &#123;</span><br><span class="line">                preferences.edit().putString(property.name, value).apply()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fun long(defaultValue: Long &#x3D; 0L) &#x3D; object : ReadWriteProperty&lt;Any, Long&gt; &#123;</span><br><span class="line"></span><br><span class="line">            override fun getValue(thisRef: Any, property: KProperty&lt;*&gt;): Long &#123;</span><br><span class="line">                return preferences.getLong(property.name, defaultValue)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            override fun setValue(thisRef: Any, property: KProperty&lt;*&gt;, value: Long) &#123;</span><br><span class="line">                preferences.edit().putLong(property.name, value).apply()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fun boolean(defaultValue: Boolean &#x3D; false) &#x3D; object : ReadWriteProperty&lt;Any, Boolean&gt; &#123;</span><br><span class="line">            override fun getValue(thisRef: Any, property: KProperty&lt;*&gt;): Boolean &#123;</span><br><span class="line">                return preferences.getBoolean(property.name, defaultValue)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            override fun setValue(thisRef: Any, property: KProperty&lt;*&gt;, value: Boolean) &#123;</span><br><span class="line">                preferences.edit().putBoolean(property.name, value).apply()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fun float(defaultValue: Float &#x3D; 0.0f) &#x3D; object : ReadWriteProperty&lt;Any, Float&gt; &#123;</span><br><span class="line">            override fun getValue(thisRef: Any, property: KProperty&lt;*&gt;): Float &#123;</span><br><span class="line">                return preferences.getFloat(property.name, defaultValue)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            override fun setValue(thisRef: Any, property: KProperty&lt;*&gt;, value: Float) &#123;</span><br><span class="line">                preferences.edit().putFloat(property.name, value).apply()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fun setString(defaultValue: Set&lt;String&gt;? &#x3D; null) &#x3D; object :</span><br><span class="line">            ReadWriteProperty&lt;DelegateSharedPreferencesUtils, Set&lt;String&gt;?&gt; &#123;</span><br><span class="line">            override fun getValue(</span><br><span class="line">                thisRef: DelegateSharedPreferencesUtils,</span><br><span class="line">                property: KProperty&lt;*&gt;</span><br><span class="line">            ): Set&lt;String&gt;? &#123;</span><br><span class="line">                return preferences.getStringSet(property.name, defaultValue)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            override fun setValue(</span><br><span class="line">                thisRef: DelegateSharedPreferencesUtils,</span><br><span class="line">                property: KProperty&lt;*&gt;,</span><br><span class="line">                value: Set&lt;String&gt;?</span><br><span class="line">            ) &#123;</span><br><span class="line">                preferences.edit().putStringSet(property.name, value).apply()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fun clearAll() &#123;</span><br><span class="line">            preferences.edit().clear().apply()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DelegateSharedPreferencesUtils.User.name &#x3D; &quot;john&quot; &#x2F;&#x2F;存</span><br><span class="line"></span><br><span class="line">bt_get.setOnClickListener &#123;</span><br><span class="line">    Timber.i(&quot;bt_get    &quot;+DelegateSharedPreferencesUtils.User.name) &#x2F;&#x2F;取</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://wazing.github.io/2019/05/23/kotlin-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A7%94%E6%89%98%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0SharedPreferences/">https://wazing.github.io/2019/05/23/kotlin-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A7%94%E6%89%98%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0SharedPreferences/</a></p>
</li>
<li><p>Pro version</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">object SpUtil &#123;</span><br><span class="line">    val SP by lazy &#123;</span><br><span class="line">        AppUtil.getApp().getSharedPreferences(&quot;default&quot;, Context.MODE_PRIVATE)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;读 SP 存储项</span><br><span class="line">    fun &lt;T&gt; getValue(name: String, default: T): T &#x3D; with(SP) &#123;</span><br><span class="line">        val res: Any &#x3D; when (default) &#123;</span><br><span class="line">            is Long -&gt; getLong(name, default)</span><br><span class="line">            is String -&gt; getString(name, default) ?: &quot;&quot;</span><br><span class="line">            is Int -&gt; getInt(name, default)</span><br><span class="line">            is Boolean -&gt; getBoolean(name, default)</span><br><span class="line">            is Float -&gt; getFloat(name, default)</span><br><span class="line">            else -&gt; throw java.lang.IllegalArgumentException()</span><br><span class="line">        &#125;</span><br><span class="line">        res as T</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;写 SP 存储项</span><br><span class="line">    fun &lt;T&gt; putValue(name: String, value: T) &#x3D; with(SP.edit()) &#123;</span><br><span class="line">        when (value) &#123;</span><br><span class="line">            is Long -&gt; putLong(name, value)</span><br><span class="line">            is String -&gt; putString(name, value)</span><br><span class="line">            is Int -&gt; putInt(name, value)</span><br><span class="line">            is Boolean -&gt; putBoolean(name, value)</span><br><span class="line">            is Float -&gt; putFloat(name, value)</span><br><span class="line">            else -&gt; throw IllegalArgumentException(&quot;This type can&#39;t be saved into Preferences&quot;)</span><br><span class="line">        &#125;.apply()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * @author xiaofei_dev</span><br><span class="line"> * @desc 定义的 SP 存储项</span><br><span class="line"> *&#x2F;</span><br><span class="line">object SpBase&#123;</span><br><span class="line">    &#x2F;&#x2F;SP 存储项的键</span><br><span class="line">    private const val CONTENT_SOMETHING &#x3D; &quot;CONTENT_SOMETHING&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 这就定义了一个 SP 存储项</span><br><span class="line">    &#x2F;&#x2F; 把 SP 的读写操作委托给 SPDelegates 类的一个实例（使用 by 关键字，by 是 Kotlin 语言层面的一个原语），</span><br><span class="line">    &#x2F;&#x2F; 此时访问 SpBase 的 contentSomething (你可以简单把其看成 Java 里的一个静态变量)属性即是在读取 SP 的存储项，</span><br><span class="line">    &#x2F;&#x2F; 给 contentSomething 属性赋值即是写 SP 的操作，就这么简单</span><br><span class="line">    &#x2F;&#x2F; 这里用到的 SPDelegates 对象的 getValue 方法的 thisRef（见上文） 参数的类型正是外层的 SpBase</span><br><span class="line">    var contentSomething: String by SPDelegates(CONTENT_SOMETHING, &quot;我是一个 SP 存储项，点击编辑我&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class SPDelegates&lt;T&gt;(private val key: String, private val default: T) : ReadWriteProperty&lt;Any?, T&gt; &#123;</span><br><span class="line">    override fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T &#123;</span><br><span class="line">        return SpUtil.getValue(key, default)</span><br><span class="line">    &#125;</span><br><span class="line">    override fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: T) &#123;</span><br><span class="line">        SpUtil.putValue(key, value)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SpBase.contentSomething &#x3D; &quot;显示&quot;</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">bt_get.setOnClickListener &#123;</span><br><span class="line">      Timber.i(&quot;bt_get    &quot;+SpBase.contentSomething)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5e1bbf396fb9a02ffe702610">https://juejin.im/post/5e1bbf396fb9a02ffe702610</a></p>
<h5 id="Operator"><a href="#Operator" class="headerlink" title="Operator"></a>Operator</h5><ul>
<li><p>FindViewById</p>
<p>​    Kotlin不用findViewById 注意在Fragmet中 需要在onViewCreated后使用</p>
<p>​     <a target="_blank" rel="noopener" href="https://blog.csdn.net/hust_twj/article/details/80290362">https://blog.csdn.net/hust_twj/article/details/80290362</a> </p>
<ul>
<li><p>The reason why we ignore findviewbyId</p>
<p><a target="_blank" rel="noopener" href="https://antonioleiva.com/kotlin-android-extensions/">https://antonioleiva.com/kotlin-android-extensions/</a> </p>
</li>
</ul>
</li>
</ul>
<p>?  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;kotlin:</span><br><span class="line">a?.foo()</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;相当于java:</span><br><span class="line">if(a!&#x3D;null)&#123;</span><br><span class="line">  a.foo();</span><br><span class="line">&#125;else&#123;</span><br><span class="line">   null </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>!!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;kotlin:</span><br><span class="line">a!!.foo()</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;相当于java:  </span><br><span class="line">if(a!&#x3D;null)&#123;</span><br><span class="line">  a.foo();</span><br><span class="line">&#125;else&#123;</span><br><span class="line">  throw new KotlinNullPointException();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>null or empty</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data &#x3D; &quot; &quot; &#x2F;&#x2F; this is a text with blank space </span><br><span class="line"></span><br><span class="line">println(data.isNullOrBlank()?.toString())  &#x2F;&#x2F;true</span><br><span class="line">println(data.isNullOrEmpty()?.toString())  &#x2F;&#x2F;false</span><br></pre></td></tr></table></figure>

<ul>
<li>Elvis</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">val ss:String?&#x3D;null</span><br><span class="line">println(ss ?: &quot;1&quot;)</span><br><span class="line"></span><br><span class="line">&gt;&gt; 1</span><br></pre></td></tr></table></figure>







<p><a target="_blank" rel="noopener" href="https://developer.android.com/samples/?language=kotlin">https://developer.android.com/samples/?language=kotlin</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/kotlin/get-started">https://developer.android.com/kotlin/get-started</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/9fb9a1ab6c31">https://www.jianshu.com/p/9fb9a1ab6c31</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5aa64556f265da238c3a51d3">https://juejin.im/post/5aa64556f265da238c3a51d3</a></p>
<h4 id="高级用法"><a href="#高级用法" class="headerlink" title="高级用法"></a>高级用法</h4><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/Jetictors/p/9225557.html">https://www.cnblogs.com/Jetictors/p/9225557.html</a></p>
<h5 id="by"><a href="#by" class="headerlink" title="by"></a>by</h5><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wzgiceman/article/details/82689135">https://blog.csdn.net/wzgiceman/article/details/82689135</a></p>
<p>oprator</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/26546977">https://zhuanlan.zhihu.com/p/26546977</a></p>
<h4 id="kotlin细节"><a href="#kotlin细节" class="headerlink" title="kotlin细节"></a>kotlin细节</h4><p><a target="_blank" rel="noopener" href="https://juejin.im/post/5eeffd73f265da02ec0bc42e">https://juejin.im/post/5eeffd73f265da02ec0bc42e</a></p>
<ol>
<li><p>apply </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">val mDialPaint &#x3D; Paint(Paint.ANTI_ALIAS_FLAG)</span><br><span class="line">mDialPaint.apply &#123;</span><br><span class="line">            color &#x3D; Color.parseColor(&quot;#3333333&quot;)</span><br><span class="line">            strokeWidth &#x3D; arcWidth*8</span><br><span class="line">            textSize &#x3D; 65f</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="coroutines"><a href="#coroutines" class="headerlink" title="coroutines"></a>coroutines</h5><p><a target="_blank" rel="noopener" href="https://www.kotlincn.net/docs/reference/coroutines/coroutines-guide.html">https://www.kotlincn.net/docs/reference/coroutines/coroutines-guide.html</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5eea757a51882565ae5cb287">https://juejin.im/post/5eea757a51882565ae5cb287</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/xlh1191860939/article/details/99641573">https://blog.csdn.net/xlh1191860939/article/details/99641573</a></p>
<h5 id="Android-kotlin计划"><a href="#Android-kotlin计划" class="headerlink" title="Android kotlin计划"></a>Android kotlin计划</h5><p>ktx不是重心，重心在kotlin库如协程,paging3.0和compose</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1fV411r7Lw">https://www.bilibili.com/video/BV1fV411r7Lw</a></p>
<h5 id="string-to-list-list-to-string"><a href="#string-to-list-list-to-string" class="headerlink" title="string to list. list. to string"></a>string to list. list. to string</h5><p><a target="_blank" rel="noopener" href="https://www.bezkoder.com/kotlin-convert-string-list/">https://www.bezkoder.com/kotlin-convert-string-list/</a></p>
<h3 id="const"><a href="#const" class="headerlink" title="const"></a>const</h3><p>val 加不加const的区别</p>
<p>Const ‘val’ are only allowed on top level, in named objects, or in companion objects</p>
<p>const只能在下面3种情况加</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> name = <span class="string">&quot;jon&quot;</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">val</span> age = <span class="string">&quot;joo&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">object</span> ConstantObject &#123;</span><br><span class="line">    <span class="keyword">val</span> name = <span class="string">&quot;jon&quot;</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">val</span> age = <span class="string">&quot;joo&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConstantClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> name = <span class="string">&quot;jon&quot;</span></span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">val</span> age = <span class="string">&quot;joo&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>上面三种 反编译后，都是下面这种形式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NotNull</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String name = <span class="string">&quot;jon&quot;</span>;</span><br><span class="line"><span class="meta">@NotNull</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String age = <span class="string">&quot;joo&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NotNull</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>不加const , private修饰，通过get获取， 会有一点点效率影响</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/liuliqianxiao/p/7253116.html">https://www.cnblogs.com/liuliqianxiao/p/7253116.html</a></p>
<p>const使用</p>
<h4 id="二维数组"><a href="#二维数组" class="headerlink" title="二维数组"></a>二维数组</h4><p>two dimensional array</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> twoD = Array(<span class="number">4</span>,&#123;intArray(<span class="number">3</span>)&#125;)</span><br></pre></td></tr></table></figure>



<p>4行3列,像下面的这样</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>这一题有2个注意点</p>
<ol>
<li>退出条件是根据数组字母个数来的，也就树的高度。index条件</li>
<li>在遍历过程中是不用设置startIndex的，因为每次都是从0开始的新的3个字母.</li>
</ol>
<p>这里可以理解输入字母个数树树的高度，里面for循环是控制宽度</p>
<p>随想录解法</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1yV4y1V7Ug/">https://www.bilibili.com/video/BV1yV4y1V7Ug/</a></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">val</span> result = ArrayList&lt;String&gt;()</span><br><span class="line">    <span class="keyword">val</span> pathStr = StringBuilder()</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">letterCombinations</span><span class="params">(digits: <span class="type">String</span>)</span></span>: List&lt;String&gt; &#123;</span><br><span class="line">        <span class="keyword">val</span> arrayList = arrayListOf(</span><br><span class="line">            <span class="literal">null</span>,</span><br><span class="line">            <span class="literal">null</span>,</span><br><span class="line">            (<span class="string">&quot;abc&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;def&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;ghi&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;jkl&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;mno&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;pqrs&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;tuv&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;wxyz&quot;</span>)</span><br><span class="line">        )</span><br><span class="line">        backTrack(arrayList, digits, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">backTrack</span><span class="params">(arrayList: <span class="type">ArrayList</span>&lt;<span class="type">String</span>?&gt;, digits: <span class="type">String</span>, index: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index == digits.length) &#123; <span class="comment">// index==输入个数，才能退出，因为字母还要处理</span></span><br><span class="line">            <span class="keyword">if</span> (pathStr.isNotEmpty()) result.add(String(pathStr))</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">val</span> digit = digits[index] - <span class="string">&#x27;0&#x27;</span></span><br><span class="line">        <span class="keyword">val</span> item = arrayList[digit] ?: <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">for</span> (i <span class="keyword">in</span> item.indices) &#123;</span><br><span class="line">            pathStr.append(item[i])</span><br><span class="line">            backTrack(arrayList, digits, index + <span class="number">1</span>) </span><br><span class="line">            pathStr.deleteCharAt(pathStr.length - <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>index + 1会不会有问题，这里是没有的，如果输入”23”, 这里到了下一层==2进入方法后就要退出.</p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-room" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/09/20/room/">room</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-09-20T02:22:52.000Z" itemprop="datePublished">2019年09月20日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2019/09/20/room/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://developer.android.com/training/data-storage/room">https://developer.android.com/training/data-storage/room</a></p>
<h5 id="Room"><a href="#Room" class="headerlink" title="Room"></a>Room</h5><p> <a target="_blank" rel="noopener" href="https://codelabs.developers.google.com/codelabs/android-room-with-a-view/#0">https://codelabs.developers.google.com/codelabs/android-room-with-a-view/#0</a></p>
<p><a target="_blank" rel="noopener" href="https://codelabs.developers.google.com/codelabs/android-room-with-a-view-kotlin/#0">https://codelabs.developers.google.com/codelabs/android-room-with-a-view-kotlin/#0</a></p>
<p>kotlin need familiar [basic coroutines](</p>
<h5 id="数据库基本操作"><a href="#数据库基本操作" class="headerlink" title="数据库基本操作"></a>数据库基本操作</h5><ul>
<li><p>主键</p>
<p>每个实体必须定义至少1个字段作为主键。即使只有1个字段，仍然需要用<code>@PrimaryKey</code>注解字段。此外，如果您想Room自动分配IDs给实体，则可以设置<code>@PrimaryKey</code>的<code>autoGenerate</code>属性。如果实体具有复合主键，则可以使用<code>@Entity</code>注解的<code>primaryKeys</code>属性</p>
</li>
</ul>
<ul>
<li><p>Entity</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BleData</span> </span>&#123;</span><br><span class="line">    <span class="meta">@PrimaryKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">long</span> createDttm;</span><br><span class="line">    <span class="keyword">public</span> String bleParam;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>Dao</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/topic/libraries/architecture/room">https://developer.android.com/topic/libraries/architecture/room</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/googlecodelabs/android-room-with-a-view">https://github.com/googlecodelabs/android-room-with-a-view</a></p>
<p><a target="_blank" rel="noopener" href="https://codelabs.developers.google.com/codelabs/android-room-with-a-view/#0">https://codelabs.developers.google.com/codelabs/android-room-with-a-view/#0</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/googlecodelabs/android-room-with-a-view/tree/kotlin">https://github.com/googlecodelabs/android-room-with-a-view/tree/kotlin</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.skymxc.com/2018/04/15/Room/">https://blog.skymxc.com/2018/04/15/Room/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/0ed8b17a199e">https://www.jianshu.com/p/0ed8b17a199e</a></p>
<p>索引为什么加快访问速度</p>
<h4 id="数据库迁移"><a href="#数据库迁移" class="headerlink" title="数据库迁移"></a>数据库迁移</h4><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/72eeaded8913">https://www.jianshu.com/p/72eeaded8913</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/a254837127/article/details/84564545">https://blog.csdn.net/a254837127/article/details/84564545</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/training/data-storage/room#java">https://developer.android.com/training/data-storage/room#java</a></p>
<p><a target="_blank" rel="noopener" href="https://codelabs.developers.google.com/codelabs/kotlin-coroutines/#0">https://codelabs.developers.google.com/codelabs/kotlin-coroutines/#0</a>)</p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DB/" rel="tag">DB</a></li></ul>

          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>



    <nav id="page-nav">

<a class="extend prev" rel="prev" href="/page/11/">Previous</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/">13</a><a class="page-number" href="/page/14/">14</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><a class="extend next" rel="next" href="/page/13/">Next</a>
</nav>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-posts"></i> Recent</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/09/04/Android_interview%20organize/">Android_itnerview_organize</a>
          </li>
        
          <li>
            <a href="/2023/09/03/Android-itnerview-algorithm/">Android_itnerview_algorithm</a>
          </li>
        
          <li>
            <a href="/2023/08/20/compose-layout/">compose_layout</a>
          </li>
        
          <li>
            <a href="/2023/08/19/compose/">compose</a>
          </li>
        
          <li>
            <a href="/2023/08/09/LC-DP-BAG/">LC_DP_BAG</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ANDROID/" style="font-size: 13.33px;">ANDROID</a> <a href="/tags/AOSP/" style="font-size: 16.67px;">AOSP</a> <a href="/tags/Activity/" style="font-size: 10px;">Activity</a> <a href="/tags/AndroidNewFeatures/" style="font-size: 10px;">AndroidNewFeatures</a> <a href="/tags/Assembly/" style="font-size: 10px;">Assembly</a> <a href="/tags/BLOG/" style="font-size: 10px;">BLOG</a> <a href="/tags/ConstraintLayout/" style="font-size: 10px;">ConstraintLayout</a> <a href="/tags/DB/" style="font-size: 11.67px;">DB</a> <a href="/tags/Drawer/" style="font-size: 10px;">Drawer</a> <a href="/tags/Fragment/" style="font-size: 11.67px;">Fragment</a> <a href="/tags/Git/" style="font-size: 11.67px;">Git</a> <a href="/tags/JVM/" style="font-size: 18.33px;">JVM</a> <a href="/tags/LEETCODE/" style="font-size: 20px;">LEETCODE</a> <a href="/tags/Operators/" style="font-size: 10px;">Operators</a> <a href="/tags/Performance/" style="font-size: 15px;">Performance</a> <a href="/tags/RecyclerView/" style="font-size: 11.67px;">RecyclerView</a> <a href="/tags/RxJava/" style="font-size: 15px;">RxJava</a> <a href="/tags/THINK/" style="font-size: 10px;">THINK</a> <a href="/tags/TOOL/" style="font-size: 11.67px;">TOOL</a> <a href="/tags/TabLayout/" style="font-size: 10px;">TabLayout</a> <a href="/tags/Test/" style="font-size: 15px;">Test</a> <a href="/tags/TouchEvent/" style="font-size: 13.33px;">TouchEvent</a> <a href="/tags/VIEW/" style="font-size: 11.67px;">VIEW</a> <a href="/tags/XML/" style="font-size: 10px;">XML</a> <a href="/tags/anim/" style="font-size: 10px;">anim</a> <a href="/tags/compose/" style="font-size: 11.67px;">compose</a> <a href="/tags/concurrency/" style="font-size: 15px;">concurrency</a> <a href="/tags/coroutie/" style="font-size: 16.67px;">coroutie</a> <a href="/tags/inter/" style="font-size: 18.33px;">inter</a> <a href="/tags/keyboard/" style="font-size: 10px;">keyboard</a> <a href="/tags/proguard/" style="font-size: 10px;">proguard</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-classify"></i> Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ANDROID/">ANDROID</a><span class="category-list-count">59</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/BLE/">BLE</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DataStructure/">DataStructure</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DesignPatterns/">DesignPatterns</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ENGLISH/">ENGLISH</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/">JAVA</a><span class="category-list-count">27</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Jetpack/">Jetpack</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kotlin/">Kotlin</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LINUX/">LINUX</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mathematics/">Mathematics</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS/">OS</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Organization/">Organization</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SOURCE/">SOURCE</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TEST/">TEST</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TOOL/">TOOL</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/VIEW/">VIEW</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/anim/">anim</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/flutter/">flutter</a><span class="category-list-count">5</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-archive"></i> Archive</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/">2023年09月</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/">2022年12月</a><span class="archive-list-count">33</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/">2021年12月</a><span class="archive-list-count">23</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020年12月</a><span class="archive-list-count">46</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019年12月</a><span class="archive-list-count">21</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018年11月</a><span class="archive-list-count">32</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017年12月</a><span class="archive-list-count">57</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ANDROID/" rel="tag">ANDROID</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AOSP/" rel="tag">AOSP</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Activity/" rel="tag">Activity</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AndroidNewFeatures/" rel="tag">AndroidNewFeatures</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Assembly/" rel="tag">Assembly</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BLOG/" rel="tag">BLOG</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ConstraintLayout/" rel="tag">ConstraintLayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DB/" rel="tag">DB</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Drawer/" rel="tag">Drawer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Fragment/" rel="tag">Fragment</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LEETCODE/" rel="tag">LEETCODE</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Operators/" rel="tag">Operators</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Performance/" rel="tag">Performance</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RecyclerView/" rel="tag">RecyclerView</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RxJava/" rel="tag">RxJava</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/THINK/" rel="tag">THINK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TOOL/" rel="tag">TOOL</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TabLayout/" rel="tag">TabLayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Test/" rel="tag">Test</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TouchEvent/" rel="tag">TouchEvent</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VIEW/" rel="tag">VIEW</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XML/" rel="tag">XML</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/anim/" rel="tag">anim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/compose/" rel="tag">compose</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/concurrency/" rel="tag">concurrency</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/coroutie/" rel="tag">coroutie</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/inter/" rel="tag">inter</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/keyboard/" rel="tag">keyboard</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/proguard/" rel="tag">proguard</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-link"></i> Blogroll</h3>
    <div class="widget">
      <ul>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example1.com/">site-name1</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example2.com/">site-name2</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example3.com/">site-name3</a>
        </li>
      
      </ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <a id="totop" href="#top"></a>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <p>
        <a href="/sitemap.xml">Site Map</a>
        <span> | </span><a href="/atom.xml">Subscribe to this site</a>
        <span> | </span><a href="/about/">Contact the blogger</a>
      </p>
      
        <p>
          <i class="fa fa-visitors"></i>
          <i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>
          ，
          <i class="fa fa-views"></i>
          <i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>
        </p>
      
      <p>
        <span>Copyright &copy; 2023 Jon.</span>
        <span>Theme by <a href="https://github.com/chaooo/hexo-theme-BlueLake/" target="_blank">BlueLake.</a></span>
        
            <span>Count by <a href="http://busuanzi.ibruce.info/" target="_blank">busuanzi.</a></span>
        
        <span>Powered by <a href="https://hexo.io/" target="_blank">Hexo.</a></span>
      </p>
    </div>
  </div>
</footer>

    </div>
    
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/search.json.js"></script>


  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>






  
<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



  
<script src="/localshare/js/social-share.js"></script>

  
<script src="/localshare/js/qrcode.js"></script>




















  </div>
</body>
</html>