<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Annotation | Jon&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  
  
    <link rel="alternate" href="/atom.xml" title="Jon's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="/localshare/css/share.css">

  
  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Jon&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Cease to struggle and you cease to live. - Thomas Carlyle</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/."><i class="fa fa-home"></i> Home</a>
        
          <a class="main-nav-link" href="/archives/"><i class="fa fa-archive"></i> Archive</a>
        
          <a class="main-nav-link" href="/about/"><i class="fa fa-user"></i> About</a>
        
          <a class="main-nav-link" href="/atom.xml"><i class="fa fa-rss"></i> RSS</a>
        
      </nav>
    </div>
    <div id="search-form">
      <div id="result-mask" class="hide"></div>
      <label><input id="search-key" type="text" autocomplete="off" placeholder="search"></label>
      <div id="result-wrap" class="hide">
        <div id="search-result"></div>
      </div>
      <div class="hide">
        <template id="search-tpl">
          <div class="item">
            <a href="/{path}" title="{title}">
              <div class="title">{title}</div>
              <div class="time">{date}</div>
              <div class="tags">{tags}</div>
            </a>
          </div>
        </template>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-2024-06-06-annotation" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Annotation
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2024-06-06T02:13:46.000Z" itemprop="datePublished">2024年06月06日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/JAVA/">JAVA</a>
  </div>

      
        <span class="article-views">
  <i class="fa fa-views"></i>
  <i id="busuanzi_container_page_pv">
      <i id="busuanzi_value_page_pv"></i>
  </i>
</span>

      
      
<a href="/2024/06/06/annotation/#comments" class="article-comment-link">
  
    
    
    
    
    
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Annotations are used to provide supplementary information about a program and can be used for a variety of purposes, such as:</p>
<ol>
<li>Information for the compiler: Annotations can be used by the compiler to detect errors or suppress warnings.</li>
<li>Compile-time processing: Software tools can process annotation information to generate code, XML files, etc.</li>
<li>Runtime processing: Some annotations are available to be examined at runtime via reflection.<br>  <a target="_blank" rel="noopener" href="https://docs.oracle.com/javase%2Ftutorial%2F/java/annotations/index.html">https://docs.oracle.com/javase%2Ftutorial%2F/java/annotations/index.html</a></li>
</ol>
<div class="ez-toc-v2_0_66_1 ez-toc-wrap-right counter-hierarchy ez-toc-counter ez-toc-grey ez-toc-container-direction" id="ez-toc-container"><div class="ez-toc-title-container">Table of Contents

<p><span class="ez-toc-title-toggle"><a href="#"><span class="ez-toc-js-icon-con"><span class><span class="eztoc-hide" style="display:none;">Toggle</span><span class="ez-toc-icon-toggle-span"><svg class="list-377408" fill="none" height="20px" style="fill: #999;color:#999" viewbox="0 0 24 24" width="20px" xmlns="http://www.w3.org/2000/svg"><path d="M6 6H4v2h2V6zm14 0H8v2h12V6zM4 11h2v2H4v-2zm16 0H8v2h12v-2zM4 16h2v2H4v-2zm16 0H8v2h12v-2z" fill="currentColor"/></svg><svg baseprofile="tiny" class="arrow-unsorted-368013" height="10px" style="fill: #999;color:#999" version="1.2" viewbox="0 0 24 24" width="10px" xmlns="http://www.w3.org/2000/svg"><path d="M18.2 9.3l-6.2-6.3-6.2 6.3c-.2.2-.3.4-.3.7s.1.5.3.7c.2.2.4.3.7.3h11c.3 0 .5-.1.7-.3.2-.2.3-.5.3-.7s-.1-.5-.3-.7zM5.8 14.7l6.2 6.3 6.2-6.3c.2-.2.3-.5.3-.7s-.1-.5-.3-.7c-.2-.2-.4-.3-.7-.3h-11c-.3 0-.5.1-.7.3-.2.2-.3.5-.3.7s.1.5.3.7z"/></svg></span></span></span></a></span></p></div><nav>- <a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#%E6%B3%A8%E8%A7%A3" title="注解">注解</a><p></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#%E6%B3%A8%E8%A7%A3%E7%9A%84%E4%BD%9C%E7%94%A8" title="注解的作用">注解的作用</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#Annotations_That_Apply_to_Other_Annotations" title="Annotations That Apply to Other Annotations">Annotations That Apply to Other Annotations</a><ul>
<li><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#Retention" title="@Retention">@Retention</a><br>  - <a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#RetentionPolicySOURCE" title="RetentionPolicy.SOURCE">RetentionPolicy.SOURCE</a><br>  - <a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#RetentionPolicyCLASS" title="RetentionPolicy.CLASS">RetentionPolicy.CLASS</a><br>  - <a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#RetentionPolicyRUNTIME" title="RetentionPolicy.RUNTIME">RetentionPolicy.RUNTIME</a></li>
</ul>
</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#%E7%BC%96%E8%AF%91%E5%92%8C%E8%BF%90%E8%A1%8C%E6%97%B6%E6%B3%A8%E8%A7%A3%E5%8C%BA%E5%88%AB" title="编译和运行时注解区别">编译和运行时注解区别</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#%E8%BF%90%E8%A1%8C%E6%97%B6%E6%B3%A8%E8%A7%A3" title="运行时注解">运行时注解</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#%E5%8F%8D%E5%B0%84%E5%AE%9E%E4%BE%8B" title="反射实例">反射实例</a></li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#%E7%BC%96%E8%AF%91%E6%97%B6%E6%B3%A8%E8%A7%A3" title="编译时注解">编译时注解</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#%E6%B3%A8%E8%A7%A3%E5%A4%84%E7%90%86%E5%99%A8" title="注解处理器">注解处理器</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#APT%E5%8E%9F%E7%90%86" title="APT原理">APT原理</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#%E6%AD%A5%E9%AA%A4" title="步骤">步骤</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#%E9%97%AE%E9%A2%98" title="问题">问题</a></li>
</ul>
</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#Arouter" title="Arouter">Arouter</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#%E5%8E%9F%E7%90%86" title="原理">原理</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#%E6%A0%B8%E5%BF%83%E5%AE%9E%E7%8E%B0" title="核心实现">核心实现</a><ul>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#Target" title="@Target">@Target</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#Inherited" title="@Inherited">@Inherited</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#Repeatable" title="@Repeatable">@Repeatable</a></li>
<li><a target="_blank" rel="noopener" href="https://jonblog.site/2024/06/06/annotation/#Documented" title="@Documented">@Documented</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav></div># <span class="ez-toc-section" id="%E6%B3%A8%E8%A7%A3"></span>注解<span class="ez-toc-section-end"></span>

<h2 id="注解的作用"><a href="#注解的作用" class="headerlink" title="注解的作用"></a><span class="ez-toc-section" id="%E6%B3%A8%E8%A7%A3%E7%9A%84%E4%BD%9C%E7%94%A8"></span>注解的作用<span class="ez-toc-section-end"></span></h2><p><img src="https://raw.githubusercontent.com/BlogForMe/ImageServer/main/annotation/2021-07-29_9.08.16_function.png"></p>
<ul>
<li>提供信息给编译器： 编译器可以利用注解来探测错误和警告信息.</li>
<li>编译阶段时的处理： 软件工具可以用来利用注解信息来生成代码、Html文档或者做其它相应处理。</li>
<li>运行时的处理： 某些注解可以在程序运行的时候接受代码的提取.</li>
</ul>
<p>元注解 ： 不可以再分的注解， 负责注解其他注解。java定义了4个标准的meta-annotation类型,它们被用来提供对其它annotation类型作说明。Target Retention Documented Inherited</p>
<p>如上图的 Overide被@Target和@Retention修饰，他们用来说明解释其他注解，位于 java.lang.annotation下</p>
<h1 id="Annotations-That-Apply-to-Other-Annotations"><a href="#Annotations-That-Apply-to-Other-Annotations" class="headerlink" title="Annotations That Apply to Other Annotations"></a><span class="ez-toc-section" id="Annotations_That_Apply_to_Other_Annotations"></span>Annotations That Apply to Other Annotations<span class="ez-toc-section-end"></span></h1><p>Annotations that apply to other annotations are called meta-annotations. There are several meta-annotation types defined in java.lang.annotation.</p>
<h3 id="Retention"><a href="#Retention" class="headerlink" title="@Retention"></a><span class="ez-toc-section" id="Retention"></span>@Retention<span class="ez-toc-section-end"></span></h3><p>@Retention annotation specifies how the marked annotation is stored:</p>
<p>需要什么级别保存该注释信息，用于保留注解的生命周期</p>
<p><img src="https://raw.githubusercontent.com/BlogForMe/ImageServer/main/annotation/2021-06-28_21-36-57_retention.png"></p>
<h4 id="RetentionPolicy-SOURCE"><a href="#RetentionPolicy-SOURCE" class="headerlink" title="RetentionPolicy.SOURCE"></a><span class="ez-toc-section" id="RetentionPolicySOURCE"></span>RetentionPolicy.SOURCE<span class="ez-toc-section-end"></span></h4><p>The marked annotation is retained only in the source level and is ignored by the compiler.</p>
<h4 id="RetentionPolicy-CLASS"><a href="#RetentionPolicy-CLASS" class="headerlink" title="RetentionPolicy.CLASS"></a><span class="ez-toc-section" id="RetentionPolicyCLASS"></span>RetentionPolicy.CLASS<span class="ez-toc-section-end"></span></h4><p>– The marked annotation is retained by the compiler at compile time, but is ignored by the Java Virtual Machine (JVM).<br>RetentionPolicy.RUNTIME – The marked annotation is retained by the JVM so it can be used by the runtime environment.</p>
<h4 id="RetentionPolicy-RUNTIME"><a href="#RetentionPolicy-RUNTIME" class="headerlink" title="RetentionPolicy.RUNTIME"></a><span class="ez-toc-section" id="RetentionPolicyRUNTIME"></span>RetentionPolicy.RUNTIME<span class="ez-toc-section-end"></span></h4><p>The marked annotation is retained by the JVM so it can be used by the runtime environment.</p>
<h1 id="编译和运行时注解区别"><a href="#编译和运行时注解区别" class="headerlink" title="编译和运行时注解区别"></a><span class="ez-toc-section" id="%E7%BC%96%E8%AF%91%E5%92%8C%E8%BF%90%E8%A1%8C%E6%97%B6%E6%B3%A8%E8%A7%A3%E5%8C%BA%E5%88%AB"></span>编译和运行时注解区别<span class="ez-toc-section-end"></span></h1><h2 id="运行时注解"><a href="#运行时注解" class="headerlink" title="运行时注解"></a><span class="ez-toc-section" id="%E8%BF%90%E8%A1%8C%E6%97%B6%E6%B3%A8%E8%A7%A3"></span>运行时注解<span class="ez-toc-section-end"></span></h2><p>运行时注解的实质是，在代码中通过注解进行标记，运行时通过反射寻找标记进行某种处理。而运行时注解一直以来被呕病的原因便是反射的低效。<br><a target="_blank" rel="noopener" href="https://juejin.cn/post/6925283352698159117#heading-4">https://juejin.cn/post/6925283352698159117#heading-4</a></p>
<p>注解设置 SxtStudent信息，映射数据库</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(value = &#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SxtTable &#123;</span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(value = &#123;ElementType.FIELD&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SxtField &#123;</span><br><span class="line">    String <span class="title function_">columnName</span><span class="params">()</span>;</span><br><span class="line">    String <span class="title function_">type</span><span class="params">()</span>;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">length</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SxtTable(&quot;tb_student&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SxtStudent</span> &#123;</span><br><span class="line">    <span class="meta">@SxtField(columnName = &quot;id&quot;,type = &quot;int&quot;,length = 10)</span></span><br><span class="line">    <span class="keyword">private</span>  <span class="type">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SxtField(columnName = &quot;sname&quot;,type = &quot;varchar&quot;,length = 10)</span></span><br><span class="line">    <span class="keyword">private</span> String studentName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SxtField(columnName = &quot;age&quot;,type = &quot;int&quot;,length = 3)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过第三方工具获取注解信息</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;annotation.SxtStudent&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获得类的所有有效注解</span></span><br><span class="line">    Annotation[] annotations = clazz.getAnnotations();</span><br><span class="line">    <span class="keyword">for</span> (Annotation a:annotations)&#123;</span><br><span class="line">        System.out.println(a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获得类的指定注解</span></span><br><span class="line">    <span class="type">SxtTable</span> <span class="variable">st</span> <span class="operator">=</span> (SxtTable)clazz.getAnnotation(SxtTable.class);</span><br><span class="line">    System.out.println(st.value());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获得类的属性的注解</span></span><br><span class="line">    <span class="type">Field</span> <span class="variable">f</span> <span class="operator">=</span> clazz.getDeclaredField(<span class="string">&quot;studentName&quot;</span>);</span><br><span class="line">    <span class="type">SxtField</span> <span class="variable">sxtField</span> <span class="operator">=</span> f.getAnnotation(SxtField.class);</span><br><span class="line">    System.out.println(sxtField.columnName()+<span class="string">&quot;--&quot;</span> + sxtField.type()+<span class="string">&quot;---&quot;</span> + sxtField.length());</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">catch</span> (NoSuchFieldException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果</p>
<blockquote>
<p>@annotation.SxtTable(value&#x3D;tb_student)<br>tb_student<br>sname–varchar—10</p>
</blockquote>
<p>运行时注解很好理解，代码运行的时候通过反射技术就可以获取上面的注解信息。从上面可以看到,反射增加了点性能问题</p>
<h3 id="反射实例"><a href="#反射实例" class="headerlink" title="反射实例"></a><span class="ez-toc-section" id="%E5%8F%8D%E5%B0%84%E5%AE%9E%E4%BE%8B"></span>反射实例<span class="ez-toc-section-end"></span></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> <span class="string">&quot;reflection.User&quot;</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    Class&lt;?&gt; clazz = Class.forName(path);</span><br><span class="line">    <span class="comment">//对象是表示或封装一些数据。一个类被加载后，JVM会创建一个对应该类的Class对象，类的整个结构信息会放到对应的CLass对象中。</span></span><br><span class="line">    <span class="comment">//这个Class对象就像一面镜子一样，通过这面镜子我可已看到对应类的全部信息。</span></span><br><span class="line">    System.out.println(clazz.hashCode());</span><br><span class="line"></span><br><span class="line">    <span class="type">Class</span> <span class="variable">clazz2</span> <span class="operator">=</span> Class.forName(path); <span class="comment">// 一个类对应的一个class对象</span></span><br><span class="line">    System.out.println(clazz2.hashCode());</span><br><span class="line"></span><br><span class="line">    <span class="type">Class</span> <span class="variable">intCLazz</span> <span class="operator">=</span> <span class="type">int</span>.class;</span><br><span class="line">    <span class="type">int</span>[] arr01 = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">10</span>];</span><br><span class="line">    <span class="type">int</span>[][] arr02 = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">30</span>][<span class="number">3</span>];</span><br><span class="line">    <span class="type">int</span>[]arr03 = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">30</span>];</span><br><span class="line">    <span class="type">double</span>[] arr04 = <span class="keyword">new</span> <span class="title class_">double</span>[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line">    System.out.println(arr01.getClass().hashCode());</span><br><span class="line">    System.out.println(arr02.getClass().hashCode());</span><br><span class="line">    System.out.println(arr03.getClass().hashCode());</span><br><span class="line">    System.out.println(arr04.getClass().hashCode());</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=vZe5zG0vh3U&list=PLC664nq_h8b9Jzh-qYJ_AeOpmSoBLC_tg&index=1">https://www.youtube.com/watch?v=vZe5zG0vh3U&list=PLC664nq_h8b9Jzh-qYJ_AeOpmSoBLC_tg&amp;index&#x3D;1</a></p>
<h2 id="编译时注解"><a href="#编译时注解" class="headerlink" title="编译时注解"></a><span class="ez-toc-section" id="%E7%BC%96%E8%AF%91%E6%97%B6%E6%B3%A8%E8%A7%A3"></span>编译时注解<span class="ez-toc-section-end"></span></h2><p>APT(Annotation Processing Tool)即注解处理器（通常也叫做编译时注解、编译时代码自动生成），是一种处理注解的工具，确切的说它是javac的一个工具，它用来在编译时扫描和处理注解。注解处理器以Java代码(或者编译过的字节码)作为输入，生成.java文件作为输出。<br>简单来说就是在编译期，通过注解生成.java文件。<br>通过上面的讲解，我们知道了：通常编译时注解要结合注解处理器一起使用的，通过解析注解，获取注解上面的信息，然后生成代码，从而生成一下辅助我们自己手写的代码。说得有点抽象，下面通过一个简单示例来演示一下。</p>
<p>我们做微信相关api，会有下面操作</p>
<p>示例最终效果如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SubTypeAutoGenerate(&quot;com.flyme.videoclips.wxapi.WXEntryActivity&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseWXEntryActivity</span> <span class="keyword">extends</span> <span class="title class_">Activity</span> <span class="keyword">implements</span> <span class="title class_">IWXAPIEventHandler</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自动生成的代码,请不要改动</span></span><br><span class="line"><span class="keyword">package</span> com.flyme.videoclips.wxapi;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.flyme.videoclips.util.wxapi.BaseWXEntryActivity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WXEntryActivity</span> <span class="keyword">extends</span> <span class="title class_">BaseWXEntryActivity</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>我们通过一个@SubTypeAutoGenerate注解就可以很方便地生成WXEntryActivity啦，其中@SubTypeAutoGenerate注解的参数就是生成的全类名。<br>reference: <a target="_blank" rel="noopener" href="https://juejin.cn/post/6925283352698159117">https://juejin.cn/post/6925283352698159117</a></p>
<p>根据前面注解分类，编译时注解是保留到编译阶段的，即.class文件，不会保留到dex里面，即运行时根本获取不到这个注解了，那么这种编译时注解又有什么用呢？</p>
<h2 id="注解处理器"><a href="#注解处理器" class="headerlink" title="注解处理器"></a><span class="ez-toc-section" id="%E6%B3%A8%E8%A7%A3%E5%A4%84%E7%90%86%E5%99%A8"></span>注解处理器<span class="ez-toc-section-end"></span></h2><p>是javac处理注解的一种工具，它用来在编译时扫描和处理注解。简单来说就是在编译器，通过注解采集信息，生成.java文件。减少重复代码的编写。</p>
<h3 id="APT原理"><a href="#APT原理" class="headerlink" title="APT原理"></a><span class="ez-toc-section" id="APT%E5%8E%9F%E7%90%86"></span>APT原理<span class="ez-toc-section-end"></span></h3><p><img src="https://raw.githubusercontent.com/BlogForMe/ImageServer/main/annotation/2021-07-29_2.39.54_apt.png"></p>
<p><img src="https://raw.githubusercontent.com/BlogForMe/ImageServer/main/annotation/2021-07-29_2.10_process.png"></p>
<h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a><span class="ez-toc-section" id="%E6%AD%A5%E9%AA%A4"></span>步骤<span class="ez-toc-section-end"></span></h3><p><img src="https://raw.githubusercontent.com/BlogForMe/ImageServer/main/annotation/2021-07-29_2.10.48_step.png"></p>
<h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a><span class="ez-toc-section" id="%E9%97%AE%E9%A2%98"></span>问题<span class="ez-toc-section-end"></span></h3><p>APT就这固定的几步，网上demo可以生成，我的就是没法生成，原来是因为,@DIActivity类的头部没有设置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DIActivity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>项目 MRouter</p>
<h1 id="Arouter"><a href="#Arouter" class="headerlink" title="Arouter"></a><span class="ez-toc-section" id="Arouter"></span>Arouter<span class="ez-toc-section-end"></span></h1><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a><span class="ez-toc-section" id="%E5%8E%9F%E7%90%86"></span>原理<span class="ez-toc-section-end"></span></h2><p>获得当前程序在手机中对应的apk文件,使用classsloader:dexfile(PMS)，反射获取apk所有的类，筛选出注册activity的类。初始化</p>
<h2 id="核心实现"><a href="#核心实现" class="headerlink" title="核心实现"></a><span class="ez-toc-section" id="%E6%A0%B8%E5%BF%83%E5%AE%9E%E7%8E%B0"></span>核心实现<span class="ez-toc-section-end"></span></h2><p><img src="https://raw.githubusercontent.com/BlogForMe/ImageServer/main/annotation/2021-08-12_1.18_arouter.png"></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Ly4y1W7f5?p=6&spm_id_from=pageDriver">https://www.bilibili.com/video/BV1Ly4y1W7f5?p=6&spm_id_from&#x3D;pageDriver</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1nU4y1a79o?from=search&amp;seid=3188418579827888379">https://www.bilibili.com/video/BV1nU4y1a79o?from=search&amp;seid=3188418579827888379</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6925283352698159117#heading-14">https://juejin.cn/post/6925283352698159117#heading-14</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6947992544252788767">https://juejin.cn/post/6947992544252788767</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/xx326664162/article/details/68490059">https://blog.csdn.net/xx326664162/article/details/68490059</a></p>
<p><a target="_blank" rel="noopener" href="https://hanshuliang.blog.csdn.net/article/details/117072224">https://hanshuliang.blog.csdn.net/article/details/117072224</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/han1202012/APT">https://github.com/han1202012/APT</a></p>
<h3 id="Target"><a href="#Target" class="headerlink" title="@Target"></a><span class="ez-toc-section" id="Target"></span>@Target<span class="ez-toc-section-end"></span></h3><p>@Target annotation marks another annotation to restrict what kind of Java elements the annotation can be applied to. A target annotation specifies one of the following element types as its value:</p>
<p>ElementType.ANNOTATION_TYPE can be applied to an annotation type.<br>ElementType.CONSTRUCTOR can be applied to a constructor.<br>ElementType.FIELD can be applied to a field or property.<br>ElementType.LOCAL_VARIABLE can be applied to a local variable.<br>ElementType.METHOD can be applied to a method-level annotation.<br>ElementType.PACKAGE can be applied to a package declaration.<br>ElementType.PARAMETER can be applied to the parameters of a method.<br>ElementType.TYPE can be applied to any element of a class.</p>
<p>用于描述注解的使用范围(注解可以用在什么地方)<br>如 类 属性 方法等<br><img src="https://raw.githubusercontent.com/BlogForMe/ImageServer/main/annotation/2021-06-28_21-32-34_target.png"></p>
<h3 id="Inherited"><a href="#Inherited" class="headerlink" title="@Inherited"></a><span class="ez-toc-section" id="Inherited"></span>@Inherited<span class="ez-toc-section-end"></span></h3><p>@Inherited annotation indicates that the annotation type can be inherited from the super class. (This is not true by default.) When the user queries the annotation type and the class has no annotation for this type, the class’ superclass is queried for the annotation type. This annotation applies only to class declarations.</p>
<p>标明所修饰的注解，在所作用的类上，是否可以被继承。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@InheritedAnnotation(value = &quot;Applied to SuperClass&quot;)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SuperClass</span> &#123;</span><br><span class="line">    <span class="comment">// Superclass implementation</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SubClass</span> <span class="keyword">extends</span> <span class="title class_">SuperClass</span> &#123;</span><br><span class="line">    <span class="comment">// Subclass implementation</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InheritedTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Class&lt;SubClass&gt; subClass = SubClass.class;</span><br><span class="line">        <span class="comment">// Check if the subclass inherits the annotation</span></span><br><span class="line">        <span class="keyword">if</span> (subClass.isAnnotationPresent(InheritedAnnotation.class)) &#123;</span><br><span class="line">            <span class="type">Annotation</span> <span class="variable">annotation</span> <span class="operator">=</span> subClass.getAnnotation(InheritedAnnotation.class);</span><br><span class="line">            <span class="type">InheritedAnnotation</span> <span class="variable">inheritedAnnotation</span> <span class="operator">=</span> (InheritedAnnotation) annotation;</span><br><span class="line">            System.out.println(<span class="string">&quot;SubClass inherits annotation: &quot;</span> + inheritedAnnotation.value());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;SubClass does not inherit the annotation.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>output:<br>SubClass inherits annotation: Applied to SuperClas , 所以可以拿到父类的注解信息。</p>
<h3 id="Repeatable"><a href="#Repeatable" class="headerlink" title="@Repeatable"></a><span class="ez-toc-section" id="Repeatable"></span>@Repeatable<span class="ez-toc-section-end"></span></h3><p>@Repeatable annotation, introduced in Java SE 8, indicates that the marked annotation can be applied more than once to the same declaration or type use. For more information, see Repeating Annotations.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Repeatable(ReviewTags.class)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@interface</span> ReviewTag &#123;</span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@interface</span> ReviewTags &#123;</span><br><span class="line">    ReviewTag[] value();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// Accessing annotations</span></span><br><span class="line">            ReviewTag[] tags = ReviewTagsTest.class.getMethod(<span class="string">&quot;review&quot;</span>).getAnnotationsByType(ReviewTag.class);</span><br><span class="line">            System.out.println(<span class="string">&quot;Review Tags:&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (ReviewTag tag : tags) &#123;</span><br><span class="line">                System.out.println(tag.value());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>output :</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Positive</span><br><span class="line">Detailed</span><br></pre></td></tr></table></figure>

<h3 id="Documented"><a href="#Documented" class="headerlink" title="@Documented"></a><span class="ez-toc-section" id="Documented"></span>@Documented<span class="ez-toc-section-end"></span></h3><p>@Documented annotation indicates that whenever the specified annotation is used those elements should be documented using the Javadoc tool. (By default, annotations are not included in Javadoc.) For more information, see the Javadoc tools page.<br>javadoc的工具文档化<br>Declaring an Annotation Type ,Generate Document<br>ClassPreamble.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> annotation.doc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Documented;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> ClassPreamble &#123;</span><br><span class="line">    String <span class="title function_">author</span><span class="params">()</span>;</span><br><span class="line">    String <span class="title function_">date</span><span class="params">()</span>;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">currentRevision</span><span class="params">()</span> <span class="keyword">default</span> <span class="number">1</span>;</span><br><span class="line">    String <span class="title function_">lastModified</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;N/A&quot;</span>;</span><br><span class="line">    String <span class="title function_">lastModifiedBy</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;N/A&quot;</span>;</span><br><span class="line">    String[] reviewers();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>MyClass.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> annotation.doc;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ClassPreamble(</span></span><br><span class="line"><span class="meta">    author = &quot;John Doe&quot;,</span></span><br><span class="line"><span class="meta">    date = &quot;06/06/2024&quot;,</span></span><br><span class="line"><span class="meta">    currentRevision = 2,</span></span><br><span class="line"><span class="meta">    lastModified = &quot;06/06/2024&quot;,</span></span><br><span class="line"><span class="meta">    lastModifiedBy = &quot;Jane Doe&quot;,</span></span><br><span class="line"><span class="meta">    reviewers = &#123;&quot;Alice&quot;, &quot;Bob&quot;&#125;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="comment">// Class implementation</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>&#123; <span class="comment">// the function will not generate doc</span></span><br><span class="line">        System.out.println(<span class="string">&quot;print&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>command steps</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">pwd</span></span><br><span class="line">/Users/m/Documents/workpersonal/THINKKOTLIN/src/main/java</span><br><span class="line">$ javac  annotation/doc/ClassPreamble.java  annotation/doc/MyClass.java</span><br><span class="line">$ javadoc  -d doc  annotation/doc/MyClass.java</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这种方式可以生成文档</p>

        
            <div id="toc-article">
                
  <div class="widget-wrap" id="toc-wrap">
    <h3 class="widget-title"><i class="fa fa-toc"></i> Contents</h3>
    <div class="widget">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">注解的作用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Annotations-That-Apply-to-Other-Annotations"><span class="toc-text">Annotations That Apply to Other Annotations</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Retention"><span class="toc-text">@Retention</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#RetentionPolicy-SOURCE"><span class="toc-text">RetentionPolicy.SOURCE</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RetentionPolicy-CLASS"><span class="toc-text">RetentionPolicy.CLASS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RetentionPolicy-RUNTIME"><span class="toc-text">RetentionPolicy.RUNTIME</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E5%92%8C%E8%BF%90%E8%A1%8C%E6%97%B6%E6%B3%A8%E8%A7%A3%E5%8C%BA%E5%88%AB"><span class="toc-text">编译和运行时注解区别</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E6%97%B6%E6%B3%A8%E8%A7%A3"><span class="toc-text">运行时注解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%B0%84%E5%AE%9E%E4%BE%8B"><span class="toc-text">反射实例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E6%97%B6%E6%B3%A8%E8%A7%A3"><span class="toc-text">编译时注解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E8%A7%A3%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-text">注解处理器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#APT%E5%8E%9F%E7%90%86"><span class="toc-text">APT原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4"><span class="toc-text">步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98"><span class="toc-text">问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Arouter"><span class="toc-text">Arouter</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%9F%E7%90%86"><span class="toc-text">原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E5%AE%9E%E7%8E%B0"><span class="toc-text">核心实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Target"><span class="toc-text">@Target</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Inherited"><span class="toc-text">@Inherited</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Repeatable"><span class="toc-text">@Repeatable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Documented"><span class="toc-text">@Documented</span></a></li></ol></li></ol>
    </div>
  </div>


            </div>
        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io//2024/06/06/annotation/">https://noteforme.github.io//2024/06/06/annotation/</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
        
<nav id="article-nav">
  
    <a href="/2024/06/05/english/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">older</strong>
      <div class="article-nav-title">
        
          English
        
      </div>
    </a>
  
  
    <a href="/2024/06/07/gson/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">newer</strong>
      <div class="article-nav-title">
        
          GSON
        
      </div>
    </a>
  
</nav>

      
      
        








      
    </footer>
  </div>
</article>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-posts"></i> Recent</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/07/04/DesignPatterns-State/">DesignPatterns_State</a>
          </li>
        
          <li>
            <a href="/2024/07/03/glide/">glide</a>
          </li>
        
          <li>
            <a href="/2024/06/28/bitmap/">Bitmap</a>
          </li>
        
          <li>
            <a href="/2024/06/28/bits-and-bytes/">Bits and Bytes</a>
          </li>
        
          <li>
            <a href="/2024/06/26/lifecycle/">LifeCycle</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ANDROID/" style="font-size: 14px;">ANDROID</a> <a href="/tags/AOSP/" style="font-size: 16px;">AOSP</a> <a href="/tags/Activity/" style="font-size: 10px;">Activity</a> <a href="/tags/AndroidNewFeatures/" style="font-size: 10px;">AndroidNewFeatures</a> <a href="/tags/Assembly/" style="font-size: 10px;">Assembly</a> <a href="/tags/BLOG/" style="font-size: 10px;">BLOG</a> <a href="/tags/ConstraintLayout/" style="font-size: 10px;">ConstraintLayout</a> <a href="/tags/DB/" style="font-size: 12px;">DB</a> <a href="/tags/DesignPattern/" style="font-size: 10px;">DesignPattern</a> <a href="/tags/Drawer/" style="font-size: 10px;">Drawer</a> <a href="/tags/Fragment/" style="font-size: 12px;">Fragment</a> <a href="/tags/JVM/" style="font-size: 18px;">JVM</a> <a href="/tags/LEETCODE/" style="font-size: 20px;">LEETCODE</a> <a href="/tags/Library/" style="font-size: 10px;">Library</a> <a href="/tags/Operators/" style="font-size: 10px;">Operators</a> <a href="/tags/Performance/" style="font-size: 14px;">Performance</a> <a href="/tags/RecyclerView/" style="font-size: 12px;">RecyclerView</a> <a href="/tags/RxJava/" style="font-size: 14px;">RxJava</a> <a href="/tags/THINK/" style="font-size: 10px;">THINK</a> <a href="/tags/TOOL/" style="font-size: 10px;">TOOL</a> <a href="/tags/TabLayout/" style="font-size: 10px;">TabLayout</a> <a href="/tags/Test/" style="font-size: 14px;">Test</a> <a href="/tags/TouchEvent/" style="font-size: 12px;">TouchEvent</a> <a href="/tags/VIEW/" style="font-size: 14px;">VIEW</a> <a href="/tags/XML/" style="font-size: 10px;">XML</a> <a href="/tags/anim/" style="font-size: 10px;">anim</a> <a href="/tags/compose/" style="font-size: 10px;">compose</a> <a href="/tags/concurrency/" style="font-size: 14px;">concurrency</a> <a href="/tags/coroutie/" style="font-size: 16px;">coroutie</a> <a href="/tags/inter/" style="font-size: 12px;">inter</a> <a href="/tags/keyboard/" style="font-size: 10px;">keyboard</a> <a href="/tags/permission/" style="font-size: 10px;">permission</a> <a href="/tags/proguard/" style="font-size: 10px;">proguard</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-classify"></i> Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ANDROID/">ANDROID</a><span class="category-list-count">54</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Architecture/">Architecture</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Architecture/DesignPattern/">DesignPattern</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/BLE/">BLE</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/COROUTINE/">COROUTINE</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Computer-Composition-principles/">Computer Composition principles</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DataStructure/">DataStructure</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DesignPattern/">DesignPattern</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DesignPatterns/">DesignPatterns</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ENGLISH/">ENGLISH</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/INTERVIEW/">INTERVIEW</a><span class="category-list-count">9</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/INTERVIEW/NETWORK/">NETWORK</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/">JAVA</a><span class="category-list-count">27</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JETPACK/">JETPACK</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Jetpack/">Jetpack</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kotlin/">Kotlin</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LIFE/">LIFE</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LINUX/">LINUX</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Library/">Library</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mathematics/">Mathematics</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NETWORK/">NETWORK</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS/">OS</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Organization/">Organization</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SOURCE/">SOURCE</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TEST/">TEST</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TOOL/">TOOL</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/VIEW/">VIEW</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/anim/">anim</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/flutter/">flutter</a><span class="category-list-count">5</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-archive"></i> Archive</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/">2024年</a><span class="archive-list-count">47</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/">2023年</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/">2022年</a><span class="archive-list-count">34</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/">2021年</a><span class="archive-list-count">21</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020年</a><span class="archive-list-count">39</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019年</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018年</a><span class="archive-list-count">26</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017年</a><span class="archive-list-count">49</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ANDROID/" rel="tag">ANDROID</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AOSP/" rel="tag">AOSP</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Activity/" rel="tag">Activity</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AndroidNewFeatures/" rel="tag">AndroidNewFeatures</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Assembly/" rel="tag">Assembly</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BLOG/" rel="tag">BLOG</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ConstraintLayout/" rel="tag">ConstraintLayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DB/" rel="tag">DB</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DesignPattern/" rel="tag">DesignPattern</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Drawer/" rel="tag">Drawer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Fragment/" rel="tag">Fragment</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LEETCODE/" rel="tag">LEETCODE</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Library/" rel="tag">Library</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Operators/" rel="tag">Operators</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Performance/" rel="tag">Performance</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RecyclerView/" rel="tag">RecyclerView</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RxJava/" rel="tag">RxJava</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/THINK/" rel="tag">THINK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TOOL/" rel="tag">TOOL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TabLayout/" rel="tag">TabLayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Test/" rel="tag">Test</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TouchEvent/" rel="tag">TouchEvent</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VIEW/" rel="tag">VIEW</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XML/" rel="tag">XML</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/anim/" rel="tag">anim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/compose/" rel="tag">compose</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/concurrency/" rel="tag">concurrency</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/coroutie/" rel="tag">coroutie</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/inter/" rel="tag">inter</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/keyboard/" rel="tag">keyboard</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/permission/" rel="tag">permission</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/proguard/" rel="tag">proguard</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-link"></i> Blogroll</h3>
    <div class="widget">
      <ul>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example1.com/">site-name1</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example2.com/">site-name2</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example3.com/">site-name3</a>
        </li>
      
      </ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <a id="totop" href="#top"></a>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <p>
        <a href="/sitemap.xml">Site Map</a>
        <span> | </span><a href="/atom.xml">Subscribe to this site</a>
        <span> | </span><a href="/about/">Contact the blogger</a>
      </p>
      
        <p>
          <i class="fa fa-visitors"></i>
          <i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>
          ，
          <i class="fa fa-views"></i>
          <i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>
        </p>
      
      <p>
        <span>Copyright &copy; 2024 Jon.</span>
        <span>Theme by <a href="https://github.com/chaooo/hexo-theme-BlueLake/" target="_blank">BlueLake.</a></span>
        <span>Powered by <a href="https://hexo.io/" target="_blank">Hexo.</a></span>
      </p>
    </div>
  </div>
</footer>

    </div>
  </div>
  
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/search.json.js"></script>


  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>






  
<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  
    
<script src="/localshare/js/social-share.js"></script>

    
<script src="/localshare/js/qrcode.js"></script>

  
  



  

  

  

  

  

  

  

  
  





</body>
</html>