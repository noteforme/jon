<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Jon&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  
  
    <link rel="alternate" href="/atom.xml" title="Jon's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="/localshare/css/share.css">

  
  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Jon&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Cease to struggle and you cease to live. - Thomas Carlyle</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/."><i class="fa fa-home"></i> Home</a>
        
          <a class="main-nav-link" href="/archives/"><i class="fa fa-archive"></i> Archive</a>
        
          <a class="main-nav-link" href="/about/"><i class="fa fa-user"></i> About</a>
        
          <a class="main-nav-link" href="/atom.xml"><i class="fa fa-rss"></i> RSS</a>
        
      </nav>
    </div>
    <div id="search-form">
      <div id="result-mask" class="hide"></div>
      <label><input id="search-key" type="text" autocomplete="off" placeholder="search"></label>
      <div id="result-wrap" class="hide">
        <div id="search-result"></div>
      </div>
      <div class="hide">
        <template id="search-tpl">
          <div class="item">
            <a href="/{path}" title="{title}">
              <div class="title">{title}</div>
              <div class="time">{date}</div>
              <div class="tags">{tags}</div>
            </a>
          </div>
        </template>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  <article id="post-SurfaceView" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/11/05/SurfaceView/">SurfaceView</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-11-05T04:42:57.000Z" itemprop="datePublished">2019年11月05日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/VIEW/">VIEW</a>
  </div>

      
      
<a href="/2019/11/05/SurfaceView/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p> 我们知道View是通过刷新来重绘视图，系统通过发出<code>VSSYNC</code>信号来进行屏幕的重绘，刷新的时间间隔是<code>16ms</code>,如果我们可以在16ms以内将绘制工作完成，则没有任何问题，如果我们绘制过程逻辑很复杂，并且我们的界面更新还非常频繁，这时候就会造成界面的卡顿，影响用户体验，为此Android提供了<code>SurfaceView</code>来解决这一问题。</p>
</blockquote>
<p>如果View需要频繁的刷新，或者刷新的数据量比较大，就需要使用SurfaceView</p>
<h4 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h4><ol>
<li><p>View中刷新频繁，Ondraw()会频繁调用,onDraw方法执行的时间过程会掉帧，出现页面卡顿。SurfaceView使用<strong>双缓冲技术</strong>，提高了绘制速度，可以缓解这一现象。</p>
</li>
<li><p>SurfaceView可以在子线程更新UI,不会阻塞主线程，提高了响应速度.</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/b037249e6d31">https://www.jianshu.com/p/b037249e6d31</a></p>
</li>
</ol>
<h4 id="啥是双缓冲技术"><a href="#啥是双缓冲技术" class="headerlink" title="啥是双缓冲技术?"></a>啥是双缓冲技术?</h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/guanguanboy/article/details/99715643">https://blog.csdn.net/guanguanboy/article/details/99715643</a></p>
<p>Android群英传 6.8</p>
<h4 id="SurfaceView使用模板"><a href="#SurfaceView使用模板" class="headerlink" title="SurfaceView使用模板"></a>SurfaceView使用模板</h4><p>大部分绘图都按照模板来</p>
<p>SurfaceViewTemplate</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SurfaceViewTemplate</span> <span class="keyword">extends</span> <span class="title">SurfaceView</span> <span class="keyword">implements</span> <span class="title">SurfaceHolder</span>.<span class="title">Callback</span>, <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> SurfaceHolder mSurfaceHolder;</span><br><span class="line">    <span class="comment">//绘图的Canvas</span></span><br><span class="line">    <span class="keyword">private</span> Canvas mCanvas;</span><br><span class="line">    <span class="comment">//子线程标志位</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mIsDrawing;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SurfaceViewTemplate</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(context, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SurfaceViewTemplate</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(context, attrs, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SurfaceViewTemplate</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">        initView();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">surfaceCreated</span><span class="params">(SurfaceHolder holder)</span> </span>&#123;</span><br><span class="line">        mIsDrawing = <span class="keyword">true</span>;</span><br><span class="line">        <span class="comment">//开启子线程</span></span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">this</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">surfaceChanged</span><span class="params">(SurfaceHolder holder, <span class="keyword">int</span> format, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">surfaceDestroyed</span><span class="params">(SurfaceHolder holder)</span> </span>&#123;</span><br><span class="line">        mIsDrawing = <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (mIsDrawing)&#123;</span><br><span class="line">            draw();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//绘图逻辑</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//获得当前Canva绘图对象，获取的还是继续上次的Canvas对象，而不是一个新的对象,因此之前的绘图都将被保留，如果需要擦除，则绘制前，通过drawColor()方法进行清屏操作.</span></span><br><span class="line">            mCanvas = mSurfaceHolder.lockCanvas();</span><br><span class="line">            <span class="comment">//绘制背景</span></span><br><span class="line">            mCanvas.drawColor(Color.WHITE);</span><br><span class="line">            <span class="comment">//绘图</span></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (mCanvas != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="comment">//释放canvas对象并提交画布</span></span><br><span class="line">                mSurfaceHolder.unlockCanvasAndPost(mCanvas);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化View</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span></span>&#123;</span><br><span class="line">        mSurfaceHolder = getHolder();</span><br><span class="line">        mSurfaceHolder.addCallback(<span class="keyword">this</span>);</span><br><span class="line">        setFocusable(<span class="keyword">true</span>);</span><br><span class="line">        setKeepScreenOn(<span class="keyword">true</span>);</span><br><span class="line">        setFocusableInTouchMode(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>正旋曲线</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  https://www.jianshu.com/p/b037249e6d31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SurfaceViewSinFun</span> <span class="keyword">extends</span> <span class="title">SurfaceView</span> <span class="keyword">implements</span> <span class="title">SurfaceHolder</span>.<span class="title">Callback</span>, <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> SurfaceHolder mSurfaceHolder;</span><br><span class="line">    <span class="comment">//绘图的Canvas</span></span><br><span class="line">    <span class="keyword">private</span> Canvas mCanvas;</span><br><span class="line">    <span class="comment">//子线程标志位</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mIsDrawing;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> x = <span class="number">0</span>, y = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> Paint mPaint;</span><br><span class="line">    <span class="keyword">private</span> Path mPath;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SurfaceViewSinFun</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(context, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SurfaceViewSinFun</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(context, attrs, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SurfaceViewSinFun</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">        mPaint = <span class="keyword">new</span> Paint();</span><br><span class="line">        mPaint.setColor(Color.BLACK);</span><br><span class="line">        mPaint.setStyle(Paint.Style.STROKE);</span><br><span class="line">        mPaint.setAntiAlias(<span class="keyword">true</span>);</span><br><span class="line">        mPaint.setStrokeWidth(<span class="number">5</span>);</span><br><span class="line">        mPath = <span class="keyword">new</span> Path();</span><br><span class="line">        <span class="comment">//路径起始点(0, 100)</span></span><br><span class="line">        mPath.moveTo(<span class="number">0</span>, <span class="number">100</span>);</span><br><span class="line">        initView();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">surfaceCreated</span><span class="params">(SurfaceHolder holder)</span> </span>&#123;</span><br><span class="line">        mIsDrawing = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">this</span>).start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">surfaceChanged</span><span class="params">(SurfaceHolder holder, <span class="keyword">int</span> format, <span class="keyword">int</span> width, <span class="keyword">int</span> height)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">surfaceDestroyed</span><span class="params">(SurfaceHolder holder)</span> </span>&#123;</span><br><span class="line">        mIsDrawing = <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">while</span> (mIsDrawing)&#123;</span><br><span class="line">            drawSomething();</span><br><span class="line">            x += <span class="number">1</span>;</span><br><span class="line">            y = (<span class="keyword">int</span>)(<span class="number">100</span> * Math.sin(<span class="number">2</span> * x * Math.PI / <span class="number">180</span>) + <span class="number">400</span>);</span><br><span class="line">            <span class="comment">//加入新的坐标点</span></span><br><span class="line">            mPath.lineTo(x, y);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//控制绘制频率</span></span><br><span class="line">        <span class="keyword">long</span> end  = System.currentTimeMillis();</span><br><span class="line">        <span class="comment">//50 - 100</span></span><br><span class="line">        <span class="keyword">if</span> (end - start&lt;<span class="number">100</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span>-(end-start));  <span class="comment">//相当于绘制一次总的时间 100ms</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">drawSomething</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//获得canvas对象</span></span><br><span class="line">            mCanvas = mSurfaceHolder.lockCanvas();</span><br><span class="line">            <span class="comment">//绘制背景</span></span><br><span class="line">            mCanvas.drawColor(Color.WHITE);</span><br><span class="line">            <span class="comment">//绘制路径</span></span><br><span class="line">            mCanvas.drawPath(mPath, mPaint);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (mCanvas != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="comment">//释放canvas对象并提交画布</span></span><br><span class="line">                mSurfaceHolder.unlockCanvasAndPost(mCanvas);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化View</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initView</span><span class="params">()</span></span>&#123;</span><br><span class="line">        mSurfaceHolder = getHolder();</span><br><span class="line">        mSurfaceHolder.addCallback(<span class="keyword">this</span>);</span><br><span class="line">        setFocusable(<span class="keyword">true</span>);</span><br><span class="line">        setKeepScreenOn(<span class="keyword">true</span>);</span><br><span class="line">        setFocusableInTouchMode(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过draw()方法所使用的逻辑时长来确定sleep的时长，这是一个非常通用的解决方案，每次绘制时间控制在100ms</p>
<p>画板</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 画板</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">class DrawingBoardView : SurfaceView, SurfaceHolder.Callback, Runnable &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> mCanvas: Canvas? = <span class="keyword">null</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> mSurfaceHolder: SurfaceHolder? = holder</span><br><span class="line"></span><br><span class="line">    <span class="comment">//子线程标志位</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> mIsDrawing = <span class="keyword">false</span></span><br><span class="line">    <span class="keyword">private</span> val x = <span class="number">0</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> y: Int = <span class="number">0</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> mPaint: Paint? = Paint().apply &#123;</span><br><span class="line">        color = Color.BLACK</span><br><span class="line">        style = Paint.Style.STROKE</span><br><span class="line">        isAntiAlias = <span class="keyword">true</span></span><br><span class="line">        strokeWidth = <span class="number">5f</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> mPath: Path? = <span class="keyword">null</span></span><br><span class="line"></span><br><span class="line">    constructor(context: Context) : <span class="keyword">this</span>(context, <span class="keyword">null</span>)</span><br><span class="line">    constructor(context: Context, attrs: AttributeSet?) : <span class="keyword">this</span>(context, attrs, <span class="number">0</span>)</span><br><span class="line">    constructor(context: Context, attrs: AttributeSet?, defStyleAttr: Int) : <span class="keyword">super</span>(context, attrs, defStyleAttr) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    init &#123;</span><br><span class="line">        mSurfaceHolder?.addCallback(<span class="keyword">this</span>)</span><br><span class="line">        isFocusable = <span class="keyword">true</span></span><br><span class="line">        keepScreenOn = <span class="keyword">true</span></span><br><span class="line">        isFocusableInTouchMode = <span class="keyword">true</span></span><br><span class="line"></span><br><span class="line">        mPath = Path()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">surfaceChanged</span><span class="params">(holder: SurfaceHolder?, format: Int, width: Int, height: Int)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">surfaceDestroyed</span><span class="params">(holder: SurfaceHolder?)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">surfaceCreated</span><span class="params">(holder: SurfaceHolder?)</span> </span>&#123;</span><br><span class="line">        mIsDrawing = <span class="keyword">true</span></span><br><span class="line">        <span class="comment">//开启子线程</span></span><br><span class="line">        Thread(<span class="keyword">this</span>).start()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (mIsDrawing) &#123;</span><br><span class="line">            draw()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> fun <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            mCanvas = mSurfaceHolder?.lockCanvas()</span><br><span class="line">            <span class="comment">//SurfaceView背景</span></span><br><span class="line">            mCanvas?.drawColor(Color.WHITE)</span><br><span class="line">            mPaint?.let &#123; mPath?.let &#123; it1 -&gt; mCanvas?.drawPath(it1, it) &#125; &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e: Exception) &#123;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            mCanvas?.let &#123;</span><br><span class="line">                mSurfaceHolder?.unlockCanvasAndPost(it)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">onTouchEvent</span><span class="params">(event: MotionEvent?)</span>: Boolean </span>&#123;</span><br><span class="line">        val x = event?.x</span><br><span class="line">        val y = event?.y</span><br><span class="line">        when (event?.action) &#123;</span><br><span class="line">            MotionEvent.ACTION_DOWN -&gt; x?.let &#123;</span><br><span class="line">                <span class="keyword">if</span> (y != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    mPath?.moveTo(it, y)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            MotionEvent.ACTION_MOVE -&gt; x?.let &#123;</span><br><span class="line">                <span class="keyword">if</span> (y != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    mPath?.lineTo(it, y)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-kotlin-begin" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/11/02/kotlin-begin/">kotlin_begin</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-11-02T08:08:22.000Z" itemprop="datePublished">2019年11月02日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/Kotlin/">Kotlin</a>
  </div>

      
      
<a href="/2019/11/02/kotlin-begin/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="Kotlin-in-Action"><a href="#Kotlin-in-Action" class="headerlink" title="Kotlin in Action"></a>Kotlin in Action</h4><h5 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">val d: (String, Int) -&gt; Unit &#x2F;&#x2F; 函数类型 (String,Int) 接收参数 ，  Unit 返回类型</span><br></pre></td></tr></table></figure>





<h5 id="kotlin-lambda"><a href="#kotlin-lambda" class="headerlink" title="kotlin lambda"></a>kotlin lambda</h5><p><img src="/2019/11/02/kotlin-begin/2020-08-01-6.39.38.png" alt="2020-08-01-6.39.38"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">    val list &#x3D; listOf(&quot;apple&quot;, &quot;pear&quot;, &quot;banana&quot;, &quot;watermelon&quot;)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;    val result &#x3D; list.maxBy &#123; it.length &#125;</span><br><span class="line"></span><br><span class="line">    val lambda &#x3D; &#123; fruit: String -&gt;</span><br><span class="line">        fruit.length</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;推导1</span><br><span class="line">&#x2F;&#x2F;    val result &#x3D; list.maxBy(lambda)</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;推导2</span><br><span class="line">&#x2F;&#x2F;    val result &#x3D; list.maxBy(&#123;fruit:String-&gt;</span><br><span class="line">&#x2F;&#x2F;        fruit.length</span><br><span class="line">&#x2F;&#x2F;    &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;推导3</span><br><span class="line">&#x2F;&#x2F;    val result &#x3D; list.maxBy(&#123; fruit: String -&gt;</span><br><span class="line">&#x2F;&#x2F;        fruit.length</span><br><span class="line">&#x2F;&#x2F;    &#125;)           &#x2F;&#x2F;如果一个函数， 他接收的最后一个参数是lambda表达式，那么这最后一个参数可以移到括号外面</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;推导4</span><br><span class="line">&#x2F;&#x2F;    val result &#x3D; list.maxBy&#123; fruit: String -&gt;</span><br><span class="line">&#x2F;&#x2F;        fruit.length         &#x2F;&#x2F;如果一个函数 ,括号可以省略</span><br><span class="line">&#x2F;&#x2F;    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;推导4</span><br><span class="line">&#x2F;&#x2F;    val result &#x3D; list.maxBy&#123; fruit -&gt;</span><br><span class="line">&#x2F;&#x2F;        fruit.length         &#x2F;&#x2F;kotlin类型推导机制，参数类型可以省略</span><br><span class="line">&#x2F;&#x2F;    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;推导5</span><br><span class="line">    val result &#x3D; list.maxBy&#123;</span><br><span class="line">        it.length         &#x2F;&#x2F; lmbda表达式只有一个参数，参数可以省略 改用it替代</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    println(result)</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">fun &lt;T,R:Comparable&lt;R&gt;&gt; List&lt;T&gt;.findMax(block: (T) -&gt; R):T?&#123;</span><br><span class="line">    if (isEmpty()) return null</span><br><span class="line">    var maxElement &#x3D;get(0) &#x2F;&#x2F;获取List上下文的 第一个元素</span><br><span class="line">    var maxValue &#x3D; block(maxElement) &#x2F;&#x2F;block() 走到了 lambda方法中</span><br><span class="line">    for(element in this)&#123;</span><br><span class="line">        var value &#x3D; block(element)</span><br><span class="line">        if (value&gt; maxValue)&#123;</span><br><span class="line">            maxElement &#x3D; element</span><br><span class="line">            maxValue &#x3D; value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return maxElement</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;    val result &#x3D; list.findMax(lambda)</span><br><span class="line">    val result &#x3D; list.findMax&#123;it.length&#125;</span><br><span class="line"></span><br><span class="line">    println(result)</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/s/video/BV1Ut4y127xM">https://www.bilibili.com/s/video/BV1Ut4y127xM</a></p>
<p>1.Java定义的接口</p>
<p>2.单抽象方法</p>
<h5 id="Defining-and-calling-functions"><a href="#Defining-and-calling-functions" class="headerlink" title="Defining and calling functions"></a>Defining and calling functions</h5><ul>
<li><em>3.2.3 Getting rid of static utility classes: top-level functions and properties</em></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class JoinJava &#123;</span><br><span class="line">    public static void johnToString()&#123;</span><br><span class="line">        System.out.println(&quot;johnToString java&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">package com.kotlin3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fun johnToString()&#123;</span><br><span class="line">    println(&quot;johnToString kotlin&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    johnToString()</span><br><span class="line">    JoinJava.johnToString()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li><p><em>3.3.3 extension functions</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">fun String.lastChar() &#x3D; this.get(this.length-1)</span><br><span class="line"></span><br><span class="line">fun String.addName() &#x3D; this + &quot; john&quot;	&#x2F;&#x2F;this 获取到String类的上下文</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">val String.lastLetter: Char get()&#x3D; get(length-1)  &#x2F;&#x2F;拓展属性</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fun String.hellowrod()&#123;</span><br><span class="line">    println(&quot;hello world&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun String.cpaitalEnd():String&#123;</span><br><span class="line">    if (this.isEmpty()) return &quot;&quot;;</span><br><span class="line">    val charArray &#x3D; this.toCharArray()</span><br><span class="line">    charArray[length-1] &#x3D; charArray[length-1].toUpperCase()</span><br><span class="line">    return String(charArray)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import com.kotlin3.t3_3_2.addName</span><br><span class="line">import com.kotlin3.t3_3_2.lastChar</span><br><span class="line">import com.kotlin3.t3_3_2.lastLetter</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">   println(&quot;kotlin&quot;.lastChar())</span><br><span class="line">    println(&quot;kotlin&quot;.addName())</span><br><span class="line"></span><br><span class="line">    print(&quot;kotlin&quot;.lastLetter)</span><br><span class="line">    </span><br><span class="line">    &quot;&quot;.hellowrod() &#x2F;&#x2F;输出  hello world</span><br><span class="line">    println(&quot;code&quot;.cpaitalEnd())	&#x2F;&#x2F; codE</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="Conventions-used-7-3"><a href="#Conventions-used-7-3" class="headerlink" title="Conventions used  7.3"></a><em>Conventions used</em>  7.3</h5><blockquote>
<p> 如果用 10..20构建一个普通的 区间(闭区间)，该区间则包括10到20的所有数字， 包括20。开区间10 until 20 包括从 10 到凹的数字，但不包括 20。矩形类通常定义成这样，它的底部和右 侧坐标不是矩形的一部分，因此在这里使用开区 间是合适的 。</p>
</blockquote>
<ul>
<li><p>Delegated - classs</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;原文链接：https:&#x2F;&#x2F;blog.csdn.net&#x2F;xlh1191860939&#x2F;article&#x2F;details&#x2F;99641573</span><br><span class="line">interface ServiceApi &#123;</span><br><span class="line">    fun login(userName: String, password: String)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Retrofit : ServiceApi &#123;</span><br><span class="line">    override fun login(userName: String, password: String) &#123;</span><br><span class="line">        println(&quot;login successfully.&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 不用委托</span><br><span class="line"> *&#x2F;</span><br><span class="line">&#x2F;&#x2F;class RemoteRepository : ServiceApi, NewsApi &#123;</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F;    private val serverApi: ServiceApi &#x3D; Retrofit()</span><br><span class="line">&#x2F;&#x2F;    private val retrofitApi: NewsApi &#x3D; NewsApiImpl()</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F;    override fun login(username: String, password: String) &#123;</span><br><span class="line">&#x2F;&#x2F;        serverApi.login(username, password)</span><br><span class="line">&#x2F;&#x2F;    &#125;</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F;    override fun getNewsList() &#123;</span><br><span class="line">&#x2F;&#x2F;        retrofitApi.getNewsList()</span><br><span class="line">&#x2F;&#x2F;    &#125;</span><br><span class="line">&#x2F;&#x2F;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line"> *  使用kotlin 委托用下面简化</span><br><span class="line"> *&#x2F;</span><br><span class="line"></span><br><span class="line">class RemoteRepository(): ServiceApi by Retrofit() , NewsApi by NewsApiImpl()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">interface NewsApi &#123;</span><br><span class="line">    fun getNewsList()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class NewsApiImpl : NewsApi &#123;</span><br><span class="line">    override fun getNewsList() &#123;</span><br><span class="line">        println(&quot;NewsApiImpl: getNewsList()&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    val repository &#x3D; RemoteRepository()</span><br><span class="line">    repository.login(&quot;David&quot;, &quot;123456&quot;) &#x2F;&#x2F;输出 login successfully.</span><br><span class="line"></span><br><span class="line">    repository.getNewsList()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>7.5.2 使用委托属性:惰性初始化和 “by lazy()”</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;class Person(val name: String) &#123;</span><br><span class="line">&#x2F;&#x2F;    private var _emails: List&lt;Email&gt;? &#x3D; null</span><br><span class="line">&#x2F;&#x2F;    val emails: List&lt;Email&gt;</span><br><span class="line">&#x2F;&#x2F;        get() &#123;</span><br><span class="line">&#x2F;&#x2F;            if (_emails &#x3D;&#x3D; null) &#123;</span><br><span class="line">&#x2F;&#x2F;                _emails &#x3D; loadEmails(this)</span><br><span class="line">&#x2F;&#x2F;            &#125;</span><br><span class="line">&#x2F;&#x2F;            return _emails!!</span><br><span class="line">&#x2F;&#x2F;        &#125;</span><br><span class="line">&#x2F;&#x2F;&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;你有一个属性， emails，用来存储这个值， 而另一个 emails，用来提供对属性的读取访 问 。你需要使用两个属性 ，因为属性 具有不同的类型: emails 可以为空，而 emails 为非空。这种技术经常会使用到， 值得熟练掌握。</span><br><span class="line"></span><br><span class="line">class Person(val name:String)&#123;</span><br><span class="line">    val emails by lazy&#123;</span><br><span class="line">        loadEmails(this)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fun loadEmails(person: Person): List&lt;Email&gt;? &#123;</span><br><span class="line">    println (&quot;load emails for $&#123;person.name &#125;&quot; )</span><br><span class="line">    return listOf()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun main(args: Array&lt;String&gt;) &#123;</span><br><span class="line">    val p &#x3D; Person(&quot;Alice&quot;)</span><br><span class="line">    p.emails</span><br><span class="line">    p.emails</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5e1288d86fb9a048217a19d9">https://juejin.im/post/5e1288d86fb9a048217a19d9</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/65914552">https://zhuanlan.zhihu.com/p/65914552</a></p>
<h5 id="委托Shareprefernce实战"><a href="#委托Shareprefernce实战" class="headerlink" title="委托Shareprefernce实战"></a>委托Shareprefernce实战</h5><ul>
<li><p>简易版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">class DelegateSharedPreferencesUtils &#123;</span><br><span class="line">    object User : Delegates() &#123;</span><br><span class="line">        override fun getSharedPreferencesName(): String &#x3D; this.javaClass.simpleName</span><br><span class="line">        var name by string()</span><br><span class="line">        var phone by long()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    abstract class Delegates &#123;</span><br><span class="line">        private val preferences: SharedPreferences by lazy &#123;</span><br><span class="line">            AppUtil.getApp().applicationContext.getSharedPreferences(</span><br><span class="line">                getSharedPreferencesName(),</span><br><span class="line">                Context.MODE_PRIVATE</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        abstract fun getSharedPreferencesName(): String</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        fun int(defaultValue: Int &#x3D; 0) &#x3D; object : ReadWriteProperty&lt;Any, Int&gt; &#123;</span><br><span class="line">            override fun getValue(thisRef: Any, property: KProperty&lt;*&gt;): Int &#123;</span><br><span class="line">                return preferences.getInt(property.name, defaultValue)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            override fun setValue(thisRef: Any, property: KProperty&lt;*&gt;, value: Int) &#123;</span><br><span class="line">                preferences.edit().putInt(property.name, value).apply()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fun string(defaultValue: String? &#x3D; null) &#x3D; object : ReadWriteProperty&lt;Any, String?&gt; &#123;</span><br><span class="line">            override fun getValue(thisRef: Any, property: KProperty&lt;*&gt;): String? &#123;</span><br><span class="line">                return preferences.getString(property.name, defaultValue)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            override fun setValue(thisRef: Any, property: KProperty&lt;*&gt;, value: String?) &#123;</span><br><span class="line">                preferences.edit().putString(property.name, value).apply()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fun long(defaultValue: Long &#x3D; 0L) &#x3D; object : ReadWriteProperty&lt;Any, Long&gt; &#123;</span><br><span class="line"></span><br><span class="line">            override fun getValue(thisRef: Any, property: KProperty&lt;*&gt;): Long &#123;</span><br><span class="line">                return preferences.getLong(property.name, defaultValue)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            override fun setValue(thisRef: Any, property: KProperty&lt;*&gt;, value: Long) &#123;</span><br><span class="line">                preferences.edit().putLong(property.name, value).apply()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fun boolean(defaultValue: Boolean &#x3D; false) &#x3D; object : ReadWriteProperty&lt;Any, Boolean&gt; &#123;</span><br><span class="line">            override fun getValue(thisRef: Any, property: KProperty&lt;*&gt;): Boolean &#123;</span><br><span class="line">                return preferences.getBoolean(property.name, defaultValue)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            override fun setValue(thisRef: Any, property: KProperty&lt;*&gt;, value: Boolean) &#123;</span><br><span class="line">                preferences.edit().putBoolean(property.name, value).apply()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fun float(defaultValue: Float &#x3D; 0.0f) &#x3D; object : ReadWriteProperty&lt;Any, Float&gt; &#123;</span><br><span class="line">            override fun getValue(thisRef: Any, property: KProperty&lt;*&gt;): Float &#123;</span><br><span class="line">                return preferences.getFloat(property.name, defaultValue)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            override fun setValue(thisRef: Any, property: KProperty&lt;*&gt;, value: Float) &#123;</span><br><span class="line">                preferences.edit().putFloat(property.name, value).apply()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fun setString(defaultValue: Set&lt;String&gt;? &#x3D; null) &#x3D; object :</span><br><span class="line">            ReadWriteProperty&lt;DelegateSharedPreferencesUtils, Set&lt;String&gt;?&gt; &#123;</span><br><span class="line">            override fun getValue(</span><br><span class="line">                thisRef: DelegateSharedPreferencesUtils,</span><br><span class="line">                property: KProperty&lt;*&gt;</span><br><span class="line">            ): Set&lt;String&gt;? &#123;</span><br><span class="line">                return preferences.getStringSet(property.name, defaultValue)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            override fun setValue(</span><br><span class="line">                thisRef: DelegateSharedPreferencesUtils,</span><br><span class="line">                property: KProperty&lt;*&gt;,</span><br><span class="line">                value: Set&lt;String&gt;?</span><br><span class="line">            ) &#123;</span><br><span class="line">                preferences.edit().putStringSet(property.name, value).apply()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fun clearAll() &#123;</span><br><span class="line">            preferences.edit().clear().apply()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DelegateSharedPreferencesUtils.User.name &#x3D; &quot;john&quot; &#x2F;&#x2F;存</span><br><span class="line"></span><br><span class="line">bt_get.setOnClickListener &#123;</span><br><span class="line">    Timber.i(&quot;bt_get    &quot;+DelegateSharedPreferencesUtils.User.name) &#x2F;&#x2F;取</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://wazing.github.io/2019/05/23/kotlin-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A7%94%E6%89%98%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0SharedPreferences/">https://wazing.github.io/2019/05/23/kotlin-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A7%94%E6%89%98%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0SharedPreferences/</a></p>
</li>
<li><p>Pro version</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">object SpUtil &#123;</span><br><span class="line">    val SP by lazy &#123;</span><br><span class="line">        AppUtil.getApp().getSharedPreferences(&quot;default&quot;, Context.MODE_PRIVATE)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;读 SP 存储项</span><br><span class="line">    fun &lt;T&gt; getValue(name: String, default: T): T &#x3D; with(SP) &#123;</span><br><span class="line">        val res: Any &#x3D; when (default) &#123;</span><br><span class="line">            is Long -&gt; getLong(name, default)</span><br><span class="line">            is String -&gt; getString(name, default) ?: &quot;&quot;</span><br><span class="line">            is Int -&gt; getInt(name, default)</span><br><span class="line">            is Boolean -&gt; getBoolean(name, default)</span><br><span class="line">            is Float -&gt; getFloat(name, default)</span><br><span class="line">            else -&gt; throw java.lang.IllegalArgumentException()</span><br><span class="line">        &#125;</span><br><span class="line">        res as T</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;写 SP 存储项</span><br><span class="line">    fun &lt;T&gt; putValue(name: String, value: T) &#x3D; with(SP.edit()) &#123;</span><br><span class="line">        when (value) &#123;</span><br><span class="line">            is Long -&gt; putLong(name, value)</span><br><span class="line">            is String -&gt; putString(name, value)</span><br><span class="line">            is Int -&gt; putInt(name, value)</span><br><span class="line">            is Boolean -&gt; putBoolean(name, value)</span><br><span class="line">            is Float -&gt; putFloat(name, value)</span><br><span class="line">            else -&gt; throw IllegalArgumentException(&quot;This type can&#39;t be saved into Preferences&quot;)</span><br><span class="line">        &#125;.apply()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * @author xiaofei_dev</span><br><span class="line"> * @desc 定义的 SP 存储项</span><br><span class="line"> *&#x2F;</span><br><span class="line">object SpBase&#123;</span><br><span class="line">    &#x2F;&#x2F;SP 存储项的键</span><br><span class="line">    private const val CONTENT_SOMETHING &#x3D; &quot;CONTENT_SOMETHING&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 这就定义了一个 SP 存储项</span><br><span class="line">    &#x2F;&#x2F; 把 SP 的读写操作委托给 SPDelegates 类的一个实例（使用 by 关键字，by 是 Kotlin 语言层面的一个原语），</span><br><span class="line">    &#x2F;&#x2F; 此时访问 SpBase 的 contentSomething (你可以简单把其看成 Java 里的一个静态变量)属性即是在读取 SP 的存储项，</span><br><span class="line">    &#x2F;&#x2F; 给 contentSomething 属性赋值即是写 SP 的操作，就这么简单</span><br><span class="line">    &#x2F;&#x2F; 这里用到的 SPDelegates 对象的 getValue 方法的 thisRef（见上文） 参数的类型正是外层的 SpBase</span><br><span class="line">    var contentSomething: String by SPDelegates(CONTENT_SOMETHING, &quot;我是一个 SP 存储项，点击编辑我&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class SPDelegates&lt;T&gt;(private val key: String, private val default: T) : ReadWriteProperty&lt;Any?, T&gt; &#123;</span><br><span class="line">    override fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T &#123;</span><br><span class="line">        return SpUtil.getValue(key, default)</span><br><span class="line">    &#125;</span><br><span class="line">    override fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: T) &#123;</span><br><span class="line">        SpUtil.putValue(key, value)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SpBase.contentSomething &#x3D; &quot;显示&quot;</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">bt_get.setOnClickListener &#123;</span><br><span class="line">      Timber.i(&quot;bt_get    &quot;+SpBase.contentSomething)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5e1bbf396fb9a02ffe702610">https://juejin.im/post/5e1bbf396fb9a02ffe702610</a></p>
<h5 id="Operator"><a href="#Operator" class="headerlink" title="Operator"></a>Operator</h5><ul>
<li><p>FindViewById</p>
<p>​    Kotlin不用findViewById 注意在Fragmet中 需要在onViewCreated后使用</p>
<p>​     <a target="_blank" rel="noopener" href="https://blog.csdn.net/hust_twj/article/details/80290362">https://blog.csdn.net/hust_twj/article/details/80290362</a> </p>
<ul>
<li><p>The reason why we ignore findviewbyId</p>
<p><a target="_blank" rel="noopener" href="https://antonioleiva.com/kotlin-android-extensions/">https://antonioleiva.com/kotlin-android-extensions/</a> </p>
</li>
</ul>
</li>
</ul>
<p>?  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;kotlin:</span><br><span class="line">a?.foo()</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;相当于java:</span><br><span class="line">if(a!&#x3D;null)&#123;</span><br><span class="line">  a.foo();</span><br><span class="line">&#125;else&#123;</span><br><span class="line">   null </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>!!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;kotlin:</span><br><span class="line">a!!.foo()</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;相当于java:  </span><br><span class="line">if(a!&#x3D;null)&#123;</span><br><span class="line">  a.foo();</span><br><span class="line">&#125;else&#123;</span><br><span class="line">  throw new KotlinNullPointException();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>null or empty</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data &#x3D; &quot; &quot; &#x2F;&#x2F; this is a text with blank space </span><br><span class="line"></span><br><span class="line">println(data.isNullOrBlank()?.toString())  &#x2F;&#x2F;true</span><br><span class="line">println(data.isNullOrEmpty()?.toString())  &#x2F;&#x2F;false</span><br></pre></td></tr></table></figure>

<ul>
<li>Elvis</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">val ss:String?&#x3D;null</span><br><span class="line">println(ss ?: &quot;1&quot;)</span><br><span class="line"></span><br><span class="line">&gt;&gt; 1</span><br></pre></td></tr></table></figure>







<p><a target="_blank" rel="noopener" href="https://developer.android.com/samples/?language=kotlin">https://developer.android.com/samples/?language=kotlin</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/kotlin/get-started">https://developer.android.com/kotlin/get-started</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/9fb9a1ab6c31">https://www.jianshu.com/p/9fb9a1ab6c31</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5aa64556f265da238c3a51d3">https://juejin.im/post/5aa64556f265da238c3a51d3</a></p>
<h4 id="高级用法"><a href="#高级用法" class="headerlink" title="高级用法"></a>高级用法</h4><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/Jetictors/p/9225557.html">https://www.cnblogs.com/Jetictors/p/9225557.html</a></p>
<h5 id="by"><a href="#by" class="headerlink" title="by"></a>by</h5><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wzgiceman/article/details/82689135">https://blog.csdn.net/wzgiceman/article/details/82689135</a></p>
<p>oprator</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/26546977">https://zhuanlan.zhihu.com/p/26546977</a></p>
<h4 id="kotlin细节"><a href="#kotlin细节" class="headerlink" title="kotlin细节"></a>kotlin细节</h4><p><a target="_blank" rel="noopener" href="https://juejin.im/post/5eeffd73f265da02ec0bc42e">https://juejin.im/post/5eeffd73f265da02ec0bc42e</a></p>
<ol>
<li><p>apply </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">val mDialPaint &#x3D; Paint(Paint.ANTI_ALIAS_FLAG)</span><br><span class="line">mDialPaint.apply &#123;</span><br><span class="line">            color &#x3D; Color.parseColor(&quot;#3333333&quot;)</span><br><span class="line">            strokeWidth &#x3D; arcWidth*8</span><br><span class="line">            textSize &#x3D; 65f</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="coroutines"><a href="#coroutines" class="headerlink" title="coroutines"></a>coroutines</h5><p><a target="_blank" rel="noopener" href="https://www.kotlincn.net/docs/reference/coroutines/coroutines-guide.html">https://www.kotlincn.net/docs/reference/coroutines/coroutines-guide.html</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5eea757a51882565ae5cb287">https://juejin.im/post/5eea757a51882565ae5cb287</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/xlh1191860939/article/details/99641573">https://blog.csdn.net/xlh1191860939/article/details/99641573</a></p>
<h5 id="Android-kotlin计划"><a href="#Android-kotlin计划" class="headerlink" title="Android kotlin计划"></a>Android kotlin计划</h5><p>ktx不是重心，重心在kotlin库如协程,paging3.0和compose</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1fV411r7Lw">https://www.bilibili.com/video/BV1fV411r7Lw</a></p>
<h5 id="string-to-list-list-to-string"><a href="#string-to-list-list-to-string" class="headerlink" title="string to list. list. to string"></a>string to list. list. to string</h5><p><a target="_blank" rel="noopener" href="https://www.bezkoder.com/kotlin-convert-string-list/">https://www.bezkoder.com/kotlin-convert-string-list/</a></p>
<h3 id="const"><a href="#const" class="headerlink" title="const"></a>const</h3><p>val 加不加const的区别</p>
<p>Const ‘val’ are only allowed on top level, in named objects, or in companion objects</p>
<p>const只能在下面3种情况加</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> name = <span class="string">&quot;jon&quot;</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">val</span> age = <span class="string">&quot;joo&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">object</span> ConstantObject &#123;</span><br><span class="line">    <span class="keyword">val</span> name = <span class="string">&quot;jon&quot;</span></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">val</span> age = <span class="string">&quot;joo&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConstantClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">companion</span> <span class="keyword">object</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> name = <span class="string">&quot;jon&quot;</span></span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">val</span> age = <span class="string">&quot;joo&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>上面三种 反编译后，都是下面这种形式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NotNull</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String name = <span class="string">&quot;jon&quot;</span>;</span><br><span class="line"><span class="meta">@NotNull</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String age = <span class="string">&quot;joo&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NotNull</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>不加const , private修饰，通过get获取， 会有一点点效率影响</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/liuliqianxiao/p/7253116.html">https://www.cnblogs.com/liuliqianxiao/p/7253116.html</a></p>
<p>const使用</p>
<h4 id="二维数组"><a href="#二维数组" class="headerlink" title="二维数组"></a>二维数组</h4><p>two dimensional array</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> twoD = Array(<span class="number">4</span>,&#123;intArray(<span class="number">3</span>)&#125;)</span><br></pre></td></tr></table></figure>



<p>4行3列,像下面的这样</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>这一题有2个注意点</p>
<ol>
<li>退出条件是根据数组字母个数来的，也就树的高度。index条件</li>
<li>在遍历过程中是不用设置startIndex的，因为每次都是从0开始的新的3个字母.</li>
</ol>
<p>这里可以理解输入字母个数树树的高度，里面for循环是控制宽度</p>
<p>随想录解法</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1yV4y1V7Ug/">https://www.bilibili.com/video/BV1yV4y1V7Ug/</a></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">val</span> result = ArrayList&lt;String&gt;()</span><br><span class="line">    <span class="keyword">val</span> pathStr = StringBuilder()</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">letterCombinations</span><span class="params">(digits: <span class="type">String</span>)</span></span>: List&lt;String&gt; &#123;</span><br><span class="line">        <span class="keyword">val</span> arrayList = arrayListOf(</span><br><span class="line">            <span class="literal">null</span>,</span><br><span class="line">            <span class="literal">null</span>,</span><br><span class="line">            (<span class="string">&quot;abc&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;def&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;ghi&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;jkl&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;mno&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;pqrs&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;tuv&quot;</span>),</span><br><span class="line">            (<span class="string">&quot;wxyz&quot;</span>)</span><br><span class="line">        )</span><br><span class="line">        backTrack(arrayList, digits, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">backTrack</span><span class="params">(arrayList: <span class="type">ArrayList</span>&lt;<span class="type">String</span>?&gt;, digits: <span class="type">String</span>, index: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index == digits.length) &#123; <span class="comment">// index==输入个数，才能退出，因为字母还要处理</span></span><br><span class="line">            <span class="keyword">if</span> (pathStr.isNotEmpty()) result.add(String(pathStr))</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">val</span> digit = digits[index] - <span class="string">&#x27;0&#x27;</span></span><br><span class="line">        <span class="keyword">val</span> item = arrayList[digit] ?: <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">for</span> (i <span class="keyword">in</span> item.indices) &#123;</span><br><span class="line">            pathStr.append(item[i])</span><br><span class="line">            backTrack(arrayList, digits, index + <span class="number">1</span>) </span><br><span class="line">            pathStr.deleteCharAt(pathStr.length - <span class="number">1</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>index + 1会不会有问题，这里是没有的，如果输入”23”, 这里到了下一层==2进入方法后就要退出.</p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-room" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/09/20/room/">room</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-09-20T02:22:52.000Z" itemprop="datePublished">2019年09月20日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2019/09/20/room/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://developer.android.com/training/data-storage/room">https://developer.android.com/training/data-storage/room</a></p>
<h5 id="Room"><a href="#Room" class="headerlink" title="Room"></a>Room</h5><p> <a target="_blank" rel="noopener" href="https://codelabs.developers.google.com/codelabs/android-room-with-a-view/#0">https://codelabs.developers.google.com/codelabs/android-room-with-a-view/#0</a></p>
<p><a target="_blank" rel="noopener" href="https://codelabs.developers.google.com/codelabs/android-room-with-a-view-kotlin/#0">https://codelabs.developers.google.com/codelabs/android-room-with-a-view-kotlin/#0</a></p>
<p>kotlin need familiar [basic coroutines](</p>
<h5 id="数据库基本操作"><a href="#数据库基本操作" class="headerlink" title="数据库基本操作"></a>数据库基本操作</h5><ul>
<li><p>主键</p>
<p>每个实体必须定义至少1个字段作为主键。即使只有1个字段，仍然需要用<code>@PrimaryKey</code>注解字段。此外，如果您想Room自动分配IDs给实体，则可以设置<code>@PrimaryKey</code>的<code>autoGenerate</code>属性。如果实体具有复合主键，则可以使用<code>@Entity</code>注解的<code>primaryKeys</code>属性</p>
</li>
</ul>
<ul>
<li><p>Entity</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BleData</span> </span>&#123;</span><br><span class="line">    <span class="meta">@PrimaryKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">long</span> createDttm;</span><br><span class="line">    <span class="keyword">public</span> String bleParam;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>Dao</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/topic/libraries/architecture/room">https://developer.android.com/topic/libraries/architecture/room</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/googlecodelabs/android-room-with-a-view">https://github.com/googlecodelabs/android-room-with-a-view</a></p>
<p><a target="_blank" rel="noopener" href="https://codelabs.developers.google.com/codelabs/android-room-with-a-view/#0">https://codelabs.developers.google.com/codelabs/android-room-with-a-view/#0</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/googlecodelabs/android-room-with-a-view/tree/kotlin">https://github.com/googlecodelabs/android-room-with-a-view/tree/kotlin</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.skymxc.com/2018/04/15/Room/">https://blog.skymxc.com/2018/04/15/Room/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/0ed8b17a199e">https://www.jianshu.com/p/0ed8b17a199e</a></p>
<p>索引为什么加快访问速度</p>
<h4 id="数据库迁移"><a href="#数据库迁移" class="headerlink" title="数据库迁移"></a>数据库迁移</h4><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/72eeaded8913">https://www.jianshu.com/p/72eeaded8913</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/a254837127/article/details/84564545">https://blog.csdn.net/a254837127/article/details/84564545</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/training/data-storage/room#java">https://developer.android.com/training/data-storage/room#java</a></p>
<p><a target="_blank" rel="noopener" href="https://codelabs.developers.google.com/codelabs/kotlin-coroutines/#0">https://codelabs.developers.google.com/codelabs/kotlin-coroutines/#0</a>)</p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DB/" rel="tag">DB</a></li></ul>

          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-RxJava02" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/09/19/RxJava02/">RxJava02</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-09-19T03:50:24.000Z" itemprop="datePublished">2019年09月19日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2019/09/19/RxJava02/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><strong>操作符</strong></p>
<ul>
<li><p>retryWhen</p>
<p><code>retryWhen</code>是收到<code>onError</code>后触发是否要重订阅的询问，而<code>repeatWhen</code>是通过<code>onComplete</code>触发。</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35599978/article/details/80290252">https://blog.csdn.net/qq_35599978/article/details/80290252</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d135f19e045c">https://www.jianshu.com/p/d135f19e045c</a></p>
<h5 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h5><p>专用于合并事件，该合并不是连接（连接操作符后面会说），而是两两配对，也就意味着，最终配对出的 <code>Observable</code> 发射事件数目只和少的那个相同。</p>
<h5 id="concat"><a href="#concat" class="headerlink" title="concat"></a><code>concat</code></h5><p>单一的把两个发射器连接成一个发射器</p>
<h5 id="FlatMap"><a href="#FlatMap" class="headerlink" title="FlatMap"></a><code>FlatMap</code></h5><p>它可以把一个发射器 <code>Observable</code> 通过某种方法转换为多个 <code>Observables</code>,<code>flatMap</code> 并不能保证事件的顺序</p>
<p>如果需要保证，需要用到我们下面要讲的 <code>ConcatMap</code></p>
<h5 id="ConcatMap"><a href="#ConcatMap" class="headerlink" title="ConcatMap"></a>ConcatMap</h5><h5 id="doOnNext"><a href="#doOnNext" class="headerlink" title="doOnNext"></a>doOnNext</h5><p>让订阅者在接收到数据之前可以做其他事情,获取到数据之前想先保存一下它</p>
<h5 id="skip"><a href="#skip" class="headerlink" title="skip"></a>skip</h5><p> skip(2)  跳过count个数开始接收</p>
<h5 id="take"><a href="#take" class="headerlink" title="take"></a>take</h5><p>最多接收count个数据</p>
<h5 id="just"><a href="#just" class="headerlink" title="just"></a>just</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Observable.just(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>简单的发射器依次调用 <code>onNext()</code> 方法</p>
<h5 id="Single"><a href="#Single" class="headerlink" title="Single"></a>Single</h5><p><code>Single</code> 只会接收一个参数，而 <code>SingleObserver</code> 只会调用 <code>onError()</code> 或者 <code>onSuccess()</code></p>
<h5 id="distinct"><a href="#distinct" class="headerlink" title="distinct"></a>distinct</h5><p>去重操作符，简单的作用就是去重</p>
<h5 id="debounce"><a href="#debounce" class="headerlink" title="debounce"></a>debounce</h5><h5 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h5><p>每次订阅都会创建一个新的 <code>Observable</code>，并且如果没有被订阅，就不会产生新的</p>
<h5 id="last"><a href="#last" class="headerlink" title="last"></a>last</h5><p>操作符仅取出可观察到的最后一个值</p>
<h5 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h5><h5 id="window"><a href="#window" class="headerlink" title="window"></a>window</h5><p>按照实际划分窗口，将数据发送给不同的 <code>Observable</code></p>
<h5 id="empty-amp-never-amp-error"><a href="#empty-amp-never-amp-error" class="headerlink" title="empty() &amp; never() &amp; error()"></a>empty() &amp; never() &amp; error()</h5><blockquote>
<ol>
<li>empty() ： 直接发送 onComplete() 事件</li>
<li>never()：不发送任何事件</li>
<li>error()：发送 onError() 事件</li>
</ol>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c08bfc58f4b6">https://www.jianshu.com/p/c08bfc58f4b6</a></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RxJava/" rel="tag">RxJava</a></li></ul>

          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-ThreadStop" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/08/30/ThreadStop/">ThreadStop</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-08-30T02:00:40.000Z" itemprop="datePublished">2019年08月30日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/JAVA/">JAVA</a>
  </div>

      
      
<a href="/2019/08/30/ThreadStop/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000007961347">https://segmentfault.com/a/1190000007961347</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xingele0917/p/3994468.html">https://www.cnblogs.com/xingele0917/p/3994468.html</a></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-GreenDao" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/08/12/GreenDao/">GreenDao</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-08-12T09:42:58.000Z" itemprop="datePublished">2019年08月12日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2019/08/12/GreenDao/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h4><h5 id="数据库定义"><a href="#数据库定义" class="headerlink" title="数据库定义"></a>数据库定义</h5><ul>
<li>Bean</li>
</ul>
<blockquote>
<p> schema：告知GreenDao当前实体属于哪个schema<br> active：标记一个实体处于活跃状态，活动实体有更新、删除和刷新方法<br> nameInDb：在数据库中使用的别名，默认使用的是实体的类名<br> indexes：定义索引，可以跨越多个列<br> createInDb：标记创建数据库表</p>
</blockquote>
<ul>
<li><p>基础属性注解</p>
<blockquote>
<p>@Id：主键 Long 型，可以通过@Id(autoincrement = true)设置自增长<br>@Property：设置一个非默认关系映射所对应的列名，默认是使用字段名，例如：@Property(nameInDb = “name”)<br>@NotNull：设置数据库表当前列不能为空<br>@Transient：添加此标记后不会生成数据库表的列</p>
</blockquote>
</li>
<li><p>索引注解</p>
</li>
</ul>
<blockquote>
<p>@Index：使用@Index作为一个属性来创建一个索引，通过name设置索引别名，也可以通过unique给索引添加约束<br>@Unique：向数据库添加了一个唯一的约束</p>
</blockquote>
<ul>
<li><p>关系注解</p>
<blockquote>
<p>@ToOne：定义与另一个实体（一个实体对象）的关系<br>@ToMany：定义与多个实体对象的关系</p>
</blockquote>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/speedystone/article/details/72769793">https://blog.csdn.net/speedystone/article/details/72769793</a></p>
<h5 id="Convert-自定义类型"><a href="#Convert-自定义类型" class="headerlink" title="@Convert 自定义类型"></a>@Convert 自定义类型</h5><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> @<span class="keyword">interface</span> Convert &#123;</span><br><span class="line">    <span class="keyword">Class</span>&lt;? <span class="keyword">extends</span> PropertyConverter&gt; converter();</span><br><span class="line">    <span class="keyword">Class</span> columnType(); <span class="comment">//可以在DB中保留的列的类。这仅限于greenDAO原生支持的所有java类。</span></span><br><span class="line">&#125;</span><br><span class="line">@Convert(converter = NoteTypeConverter.<span class="keyword">class</span>, columnType = String.<span class="keyword">class</span>) <span class="comment">//类型转换类，自定义的类型在数据库中存储的类型</span></span><br><span class="line"><span class="keyword">private</span> NoteType type; <span class="comment">//在保存到数据库时会将自定义的类型 NoteType 通过 NoteTypeConverter 转换为数据库支持的 String 类型。反之亦然</span></span><br></pre></td></tr></table></figure>



<h5 id="Basic"><a href="#Basic" class="headerlink" title="Basic"></a>Basic</h5><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span>(autoincrement = <span class="literal">true</span>)  <span class="comment">// id  递增</span></span><br><span class="line">            Long id;</span><br><span class="line">    <span class="meta">@Unique</span></span><br><span class="line">    <span class="keyword">public</span> int studentNo;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> int age; <span class="comment">//年龄</span></span><br><span class="line">    <span class="meta">@Property</span>(nameInDb = <span class="string">&quot;usePhone&quot;</span>) <span class="comment">//数据库中映射的字段就是 usePhone</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">String</span> telPhone;<span class="comment">//手机号</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transient</span>  <span class="comment">//数据库中不会创建对应的字段</span></span><br><span class="line">            <span class="built_in">String</span> sex; <span class="comment">//性别</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">String</span> name;<span class="comment">//姓名</span></span><br><span class="line">    <span class="built_in">String</span> address;<span class="comment">//家庭住址</span></span><br><span class="line">    <span class="built_in">String</span> schoolName;<span class="comment">//学校名字</span></span><br><span class="line">    <span class="built_in">String</span> grade;<span class="comment">//几年级</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">boolean</span> statue;</span><br></pre></td></tr></table></figure>

<h6 id="insert"><a href="#insert" class="headerlink" title="insert"></a>insert</h6><ul>
<li><p>insertData</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">    Student student = <span class="keyword">new</span> <span class="constructor">Student()</span>;</span><br><span class="line">    student.set<span class="constructor">StudentNo(<span class="params">i</span>)</span>;</span><br><span class="line">    student.age = <span class="keyword">new</span> <span class="constructor">Random()</span>.next<span class="constructor">Int()</span> + <span class="number">10</span>;</span><br><span class="line">    student.telPhone = <span class="module-access"><span class="module"><span class="identifier">RandomValue</span>.</span></span>get<span class="constructor">Tel()</span>;</span><br><span class="line">    student.set<span class="constructor">Name(RandomValue.<span class="params">getChineseName</span>()</span>);</span><br><span class="line">    <span class="keyword">if</span> (i % <span class="number">2</span><span class="operator"> == </span><span class="number">0</span>) &#123;</span><br><span class="line">        student.set<span class="constructor">Sex(<span class="string">&quot;男&quot;</span>)</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        student.set<span class="constructor">Sex(<span class="string">&quot;女&quot;</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (i<span class="operator"> == </span><span class="number">0</span>) &#123;</span><br><span class="line">        student.set<span class="constructor">Statue(<span class="params">true</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    student.set<span class="constructor">Address(RandomValue.<span class="params">getRoad</span>()</span>);</span><br><span class="line">    student.set<span class="constructor">SchoolName(RandomValue.<span class="params">getSchoolName</span>()</span>);</span><br><span class="line">    long dsoi = studaoImpl.insert(student);</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>i(<span class="string">&quot;insertData &quot;</span> + dsoi);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p>insertOrReplace</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Student student = <span class="keyword">new</span> <span class="constructor">Student()</span>;</span><br><span class="line">student.set<span class="constructor">StudentNo(1)</span>;</span><br><span class="line">student.set<span class="constructor">Name(<span class="string">&quot;我改名了&quot;</span>)</span>;</span><br><span class="line">long df = studaoImpl.insert<span class="constructor">OrReplace(<span class="params">student</span>)</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>updateData</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Student student = new Student()<span class="comment">;</span></span><br><span class="line">student.setStudentNo(<span class="number">1</span>)<span class="comment">;</span></span><br><span class="line">student.setName(<span class="string">&quot;我改名了&quot;</span>)<span class="comment">;</span></span><br><span class="line">studaoImpl.update(student)<span class="comment">;</span></span><br></pre></td></tr></table></figure></li>
<li><p>delete</p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Student student = new Student()<span class="comment">;</span></span><br><span class="line">student.setId(<span class="number">1</span>l)<span class="comment">;</span></span><br><span class="line">studaoImpl.delete(student)<span class="comment">;</span></span><br></pre></td></tr></table></figure></li>
<li><p>deleteAll</p>
</li>
</ul>
<p>​     <code>  studaoImpl.deleteAll();</code></p>
<h6 id="query"><a href="#query" class="headerlink" title="query"></a>query</h6><ul>
<li>QueryAll</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Student&gt; dd = studaoImpl.load<span class="constructor">All()</span>;</span><br><span class="line">studaoImpl.load<span class="constructor">All()</span>.<span class="keyword">for</span><span class="constructor">Each(<span class="params">current</span>-&gt;Timber.<span class="params">i</span>(<span class="params">current</span>.<span class="params">toString</span>()</span>)); <span class="comment">// print student</span></span><br></pre></td></tr></table></figure>

<ul>
<li>QueryLastState</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Student&gt; sList = studaoImpl.query<span class="constructor">Builder()</span>.limit(<span class="number">1</span>).where(<span class="module-access"><span class="module"><span class="identifier">StudentDao</span>.</span><span class="module"><span class="identifier">Properties</span>.</span><span class="module"><span class="identifier">Statue</span>.</span></span>eq(<span class="literal">false</span>)).<span class="built_in">list</span><span class="literal">()</span>;</span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>i(sList.<span class="keyword">to</span><span class="constructor">String()</span>);</span><br><span class="line">Student student = sList.get(<span class="number">0</span>);</span><br><span class="line">student.set<span class="constructor">Statue(<span class="params">true</span>)</span>;</span><br><span class="line">studaoImpl.update(student);</span><br><span class="line">sList = studaoImpl.query<span class="constructor">Builder()</span>.limit(<span class="number">1</span>).where(<span class="module-access"><span class="module"><span class="identifier">StudentDao</span>.</span><span class="module"><span class="identifier">Properties</span>.</span><span class="module"><span class="identifier">Statue</span>.</span></span>eq(<span class="literal">false</span>)).<span class="built_in">list</span><span class="literal">()</span>;</span><br></pre></td></tr></table></figure>

<h5 id="oneToOne"><a href="#oneToOne" class="headerlink" title="oneToOne"></a>oneToOne</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id(autoincrement = true)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> pid;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CreditCard</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id(autoincrement = true)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> cid;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> pid;</span><br><span class="line">    <span class="comment">//idcard和person是一对一关系，外键为personId</span></span><br><span class="line">    <span class="meta">@ToOne(joinProperty = &quot;pid&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Person person;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h6 id="insert-1"><a href="#insert-1" class="headerlink" title="insert"></a>insert</h6><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Long pid = <span class="number">6L</span>;<span class="comment">//personId</span></span><br><span class="line"></span><br><span class="line">Person p = <span class="keyword">new</span> <span class="constructor">Person(<span class="params">pid</span>, <span class="string">&quot;xiaoMing&quot;</span>, 18)</span>;</span><br><span class="line">mPersonDao.insert(p);</span><br><span class="line">Long cid = <span class="number">2L</span>;<span class="comment">//idcardid;</span></span><br><span class="line">CreditCard c = <span class="keyword">new</span> <span class="constructor">CreditCard(<span class="params">cid</span>, 100)</span>; <span class="comment">//这个写了100（无论写什么）,实际还是6,关联了personId</span></span><br><span class="line">c.set<span class="constructor">Person(<span class="params">p</span>)</span>;</span><br><span class="line">mCreditCardDao.insert(c);</span><br></pre></td></tr></table></figure>

<h6 id="query-1"><a href="#query-1" class="headerlink" title="query"></a>query</h6><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">List&lt;CreditCard&gt; <span class="built_in">list</span> = mCreditCardDao.load<span class="constructor">All()</span>;</span><br><span class="line">CreditCard card = <span class="built_in">list</span>.get(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span> (card != null) &#123;</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>i(<span class="string">&quot;CardInfo  cardid----------&gt;&quot;</span> + card.get<span class="constructor">Cid()</span> + <span class="string">&quot;  personid----------&gt;&quot;</span> + card.get<span class="constructor">Pid()</span>);</span><br><span class="line">&#125;</span><br><span class="line">switch (position) &#123;</span><br><span class="line">    case <span class="number">0</span>:</span><br><span class="line">        select<span class="constructor">PersonInfoByCard(<span class="params">card</span>)</span>;<span class="comment">//根据idcard获取person</span></span><br><span class="line">        break;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> void select<span class="constructor">PersonInfoByCard(CreditCard <span class="params">card</span>)</span> &#123;</span><br><span class="line">        Person person = null;</span><br><span class="line">        <span class="keyword">if</span> (card != null) &#123;</span><br><span class="line">            person = card.get<span class="constructor">Person()</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (person != null) &#123;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>i(<span class="string">&quot;PersonByCard   personId   + ----------&gt; &quot;</span> + person.get<span class="constructor">Pid()</span> + <span class="string">&quot;  name----------&gt;   &quot;</span> + person.get<span class="constructor">Name()</span> + <span class="string">&quot;    age----------&gt;&quot;</span> + person.get<span class="constructor">Age()</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>i(<span class="string">&quot;----获取person信息失败------&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5a30f79c6fb9a045031014fd">https://juejin.im/post/5a30f79c6fb9a045031014fd</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_34358104/article/details/69833909">https://blog.csdn.net/qq_34358104/article/details/69833909</a></p>
<h5 id="OneToMany"><a href="#OneToMany" class="headerlink" title="OneToMany"></a>OneToMany</h5><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MStudent</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id(autoincrement = true)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Long</span> sid;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Long</span> tid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MTecher</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id(autoincrement = true)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Long</span> tid;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//一对多关系，tid为Student表的外键</span></span><br><span class="line">    <span class="meta">@ToMany(referencedJoinProperty = <span class="meta-string">&quot;tid&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;MStudent&gt; students;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="insert-2"><a href="#insert-2" class="headerlink" title="insert"></a>insert</h6><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 添加Student信息</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">private</span> void insert<span class="constructor">Student()</span> &#123;</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           Long sid = <span class="number">1L</span>;</span><br><span class="line">           <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">               MStudent s = <span class="keyword">new</span> <span class="constructor">MStudent(<span class="params">sid</span>, <span class="string">&quot;xiaoMing--&gt;&quot;</span> + <span class="params">i</span>, <span class="params">tid</span>)</span>;</span><br><span class="line">               mStudentDao.insert(s);</span><br><span class="line">               sid++;</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>i(<span class="string">&quot;tag&quot;</span>, <span class="string">&quot;学生信息添加成功&quot;</span>);</span><br><span class="line">       &#125; catch (Exception e) &#123;</span><br><span class="line">           e.print<span class="constructor">StackTrace()</span>;</span><br><span class="line">           <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>i(<span class="string">&quot;tag&quot;</span>, <span class="string">&quot;学生信息添加失败&quot;</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">     <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 添加Teacher信息</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">private</span> void insert<span class="constructor">Teacher()</span> &#123;</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           String name = <span class="string">&quot;Miss zhang&quot;</span>;</span><br><span class="line">           MTecher mTecher = <span class="keyword">new</span> <span class="constructor">MTecher(<span class="params">tid</span>, <span class="params">name</span>)</span>;</span><br><span class="line">           mTecherDao.insert(mTecher);</span><br><span class="line">           <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>i(<span class="string">&quot;tag&quot;</span>,<span class="string">&quot;教师信息添加成功&quot;</span>);</span><br><span class="line">       &#125; catch (Exception e) &#123;</span><br><span class="line">           e.print<span class="constructor">StackTrace()</span>;</span><br><span class="line">           <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>i(<span class="string">&quot;tag&quot;</span>,<span class="string">&quot;教师信息添加失败&quot;</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<h6 id="query-2"><a href="#query-2" class="headerlink" title="query"></a>query</h6><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> void select<span class="constructor">Teacher()</span> &#123;</span><br><span class="line">    MTecher t = null;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        t = mTecherDao.load<span class="constructor">ByRowId(<span class="params">tid</span>)</span>;</span><br><span class="line">        <span class="keyword">if</span> (t != null)&#123;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>i(<span class="string">&quot;tag&quot;</span>,<span class="string">&quot;查询教师信息----&gt;成功&quot;</span>);</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>i(<span class="string">&quot;tag&quot;</span>,<span class="string">&quot;tid---&gt;&quot;</span>+t.get<span class="constructor">Tid()</span>);</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>i(<span class="string">&quot;tag&quot;</span>,<span class="string">&quot;teacher&#x27;s name-----&gt;&quot;</span>+t.get<span class="constructor">Name()</span>);</span><br><span class="line">            select<span class="constructor">StudentByTeacher(<span class="params">t</span>)</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>i(<span class="string">&quot;tag&quot;</span>,<span class="string">&quot;查询表中没有该教师信息&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; catch (Exception e) &#123;</span><br><span class="line">        e.print<span class="constructor">StackTrace()</span>;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>i(<span class="string">&quot;tag&quot;</span>,<span class="string">&quot;查询教师信息----&gt;失败&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据获取得到的Teacher获取其名下的学生信息</span></span><br><span class="line"><span class="comment">     * @param t</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> void select<span class="constructor">StudentByTeacher(MTecher <span class="params">t</span>)</span> &#123;</span><br><span class="line">        List&lt;MStudent&gt; <span class="built_in">list</span> = t.get<span class="constructor">Students()</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">list</span> != null<span class="operator"> &amp;&amp; </span><span class="built_in">list</span>.size<span class="literal">()</span> &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span> (MStudent mStudent : <span class="built_in">list</span>) &#123;</span><br><span class="line">                <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>i(<span class="string">&quot;tag&quot;</span>,<span class="string">&quot;sid---------&gt;  &quot;</span>+mStudent.get<span class="constructor">Sid()</span> +<span class="string">&quot;    tid---------&gt;&quot;</span>+mStudent.get<span class="constructor">Tid()</span>+<span class="string">&quot;  name--------&gt;&quot;</span>+mStudent.get<span class="constructor">Name()</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>i(<span class="string">&quot;tag&quot;</span>,<span class="string">&quot;--------获取学生信息失败--------&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h5 id="ManyToMany"><a href="#ManyToMany" class="headerlink" title="ManyToMany"></a>ManyToMany</h5><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NTeacher</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id(autoincrement = true)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Long</span> tid;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@ToMany</span></span><br><span class="line">    <span class="meta">@JoinEntity(entity = TandSRelative.class, sourceProperty = <span class="meta-string">&quot;tid&quot;</span>, targetProperty = <span class="meta-string">&quot;sid&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;TandSRelative&gt; list;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NStudent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id(autoincrement = true)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Long</span> sid;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ToMany</span></span><br><span class="line">    <span class="meta">@JoinEntity(entity = TandSRelative.class,sourceProperty = <span class="meta-string">&quot;sid&quot;</span>,targetProperty = <span class="meta-string">&quot;tid&quot;</span>)</span></span><br><span class="line">    List&lt;NTeacher&gt; teacherList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TandSRelative</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id(autoincrement = true)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Long</span> tsid;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Long</span> tid;<span class="comment">//teacher的id</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Long</span> sid;<span class="comment">//student的id</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="insert-3"><a href="#insert-3" class="headerlink" title="insert"></a>insert</h6><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">//2个教师和3个学生的关系</span></span><br><span class="line"><span class="comment">//教师1，带学生1、2</span></span><br><span class="line"><span class="comment">//教师2，带学生1、3</span></span><br><span class="line"><span class="comment">//学生1，选修教师1和教师2的课</span></span><br><span class="line">    <span class="keyword">private</span> void add<span class="constructor">TeacherStu()</span> &#123;</span><br><span class="line">        List&lt;NTeacher&gt; teacherList = <span class="keyword">new</span> ArrayList&lt;&gt;<span class="literal">()</span>;</span><br><span class="line">        <span class="keyword">for</span> (long i = <span class="number">1</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">            NTeacher teacherBean = <span class="keyword">new</span> <span class="constructor">NTeacher()</span>;</span><br><span class="line">            teacherBean.set<span class="constructor">Tid(<span class="params">i</span>)</span>;</span><br><span class="line">            teacherList.add(teacherBean);</span><br><span class="line">        &#125;</span><br><span class="line">        daoSession.get<span class="constructor">NTeacherDao()</span>.insert<span class="constructor">InTx(<span class="params">teacherList</span>)</span>;</span><br><span class="line"></span><br><span class="line">        List&lt;NStudent&gt; studentList = <span class="keyword">new</span> ArrayList&lt;&gt;<span class="literal">()</span>;</span><br><span class="line">        <span class="keyword">for</span> (long j = <span class="number">1</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line">            NStudent studentBean = <span class="keyword">new</span> <span class="constructor">NStudent()</span>;</span><br><span class="line">            studentBean.set<span class="constructor">Sid(<span class="params">j</span>)</span>;</span><br><span class="line">            studentList.add(studentBean);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//教师1带学生1、2</span></span><br><span class="line">        List&lt;TandSRelative&gt; teacherTeachStuList = <span class="keyword">new</span> ArrayList&lt;&gt;<span class="literal">()</span>;</span><br><span class="line">        TandSRelative tandSRelative1 = <span class="keyword">new</span> <span class="constructor">TandSRelative(<span class="params">null</span>, 1L, 1L)</span>;</span><br><span class="line">        teacherTeachStuList.add(tandSRelative1);</span><br><span class="line"></span><br><span class="line">        TandSRelative tandSRelative2 = <span class="keyword">new</span> <span class="constructor">TandSRelative(<span class="params">null</span>, 1L, 2L)</span>;</span><br><span class="line">        teacherTeachStuList.add(tandSRelative2);</span><br><span class="line"></span><br><span class="line">        TandSRelative tandSRelative3 = <span class="keyword">new</span> <span class="constructor">TandSRelative(<span class="params">null</span>, 2L, 1L)</span>;</span><br><span class="line">        teacherTeachStuList.add(tandSRelative3);</span><br><span class="line"></span><br><span class="line">        TandSRelative tandSRelative4 = <span class="keyword">new</span> <span class="constructor">TandSRelative(<span class="params">null</span>, 2L, 3L)</span>;</span><br><span class="line">        teacherTeachStuList.add(tandSRelative4);</span><br><span class="line"></span><br><span class="line">        daoSession.get<span class="constructor">TandSRelativeDao()</span>.insert<span class="constructor">InTx(<span class="params">teacherTeachStuList</span>)</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/Free-Thinker/p/10654474.html">https://www.cnblogs.com/Free-Thinker/p/10654474.html</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5a30f79c6fb9a045031014fd">https://juejin.im/post/5a30f79c6fb9a045031014fd</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/RobotHost/article/details/70098744">https://blog.csdn.net/RobotHost/article/details/70098744</a></p>
<h5 id="migration"><a href="#migration" class="headerlink" title="migration"></a>migration</h5><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">class</span> MySQLiteOpenHelper extends DaoMaster.OpenHelper &#123;</span><br><span class="line"></span><br><span class="line">    public <span class="constructor">MySQLiteOpenHelper(Context <span class="params">context</span>, String <span class="params">name</span>, SQLiteDatabase.CursorFactory <span class="params">factory</span>)</span> &#123;</span><br><span class="line">        super(context, name, factory);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void on<span class="constructor">Upgrade(Database <span class="params">db</span>, <span class="params">int</span> <span class="params">oldVersion</span>, <span class="params">int</span> <span class="params">newVersion</span>)</span> &#123;</span><br><span class="line"><span class="comment">//        super.onUpgrade(db, oldVersion, newVersion);</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">MigrationHelper</span>.</span></span>migrate(db, <span class="keyword">new</span> MigrationHelper.<span class="constructor">ReCreateAllTableListener()</span> &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void on<span class="constructor">CreateAllTables(Database <span class="params">db</span>, <span class="params">boolean</span> <span class="params">ifNotExists</span>)</span> &#123;</span><br><span class="line">                <span class="module-access"><span class="module"><span class="identifier">DaoMaster</span>.</span></span>create<span class="constructor">AllTables(<span class="params">db</span>, <span class="params">ifNotExists</span>)</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void on<span class="constructor">DropAllTables(Database <span class="params">db</span>, <span class="params">boolean</span> <span class="params">ifExists</span>)</span> &#123;</span><br><span class="line">                <span class="module-access"><span class="module"><span class="identifier">DaoMaster</span>.</span></span>drop<span class="constructor">AllTables(<span class="params">db</span>, <span class="params">ifExists</span>)</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="module-access"><span class="module"><span class="identifier">StudentDao</span>.</span></span><span class="keyword">class</span>); <span class="comment">//可以添加多个</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//        DaoMaster.DevOpenHelper helper = new DaoMaster.DevOpenHelper(this, &quot;dblearn.db&quot;);</span></span><br><span class="line">        MigrationHelper.DEBUG = <span class="literal">true</span>;</span><br><span class="line">        MySQLiteOpenHelper helper = <span class="keyword">new</span> <span class="constructor">MySQLiteOpenHelper(<span class="params">this</span>,<span class="string">&quot;dblearn.db&quot;</span>,<span class="params">null</span>)</span>;</span><br><span class="line">        SQLiteDatabase db = helper.get<span class="constructor">WritableDatabase()</span>;</span><br><span class="line">        DaoMaster daoMaster = <span class="keyword">new</span> <span class="constructor">DaoMaster(<span class="params">db</span>)</span>;</span><br><span class="line">        daoSession = daoMaster.<span class="keyword">new</span><span class="constructor">Session()</span>;</span><br></pre></td></tr></table></figure>



<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span>(autoincrement = <span class="literal">true</span>)  <span class="comment">// id  递增</span></span><br><span class="line">            Long id;</span><br><span class="line">    <span class="meta">@Unique</span></span><br><span class="line">    <span class="keyword">public</span> int studentNo;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> int age; <span class="comment">//年龄</span></span><br><span class="line">    <span class="meta">@Property</span>(nameInDb = <span class="string">&quot;usePhone&quot;</span>) <span class="comment">//数据库中映射的字段就是 usePhone</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">String</span> telPhone;<span class="comment">//手机号</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Transient</span>  <span class="comment">//数据库中不会创建对应的字段</span></span><br><span class="line">            <span class="built_in">String</span> sex; <span class="comment">//性别</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">String</span> name;<span class="comment">//姓名</span></span><br><span class="line">    <span class="built_in">String</span> address;<span class="comment">//家庭住址</span></span><br><span class="line">    <span class="built_in">String</span> schoolName;<span class="comment">//学校名字</span></span><br><span class="line">    <span class="built_in">String</span> grade;<span class="comment">//几年级</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">boolean</span> statue;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ToOne</span>(joinProperty = <span class="string">&quot;name&quot;</span>)</span><br><span class="line">    IdCard student;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> migrate; <span class="comment">//新添加的字段 迁移</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://github.com/yuweiguocn/GreenDaoUpgradeHelper/blob/master/README_CH.md">https://github.com/yuweiguocn/GreenDaoUpgradeHelper/blob/master/README_CH.md</a></p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/13373170/greendao-schema-update-and-data-migration/30334668#30334668">https://stackoverflow.com/questions/13373170/greendao-schema-update-and-data-migration/30334668#30334668</a></p>
<h4 id="查看数据库"><a href="#查看数据库" class="headerlink" title="查看数据库"></a>查看数据库</h4><h5 id="database-navigator"><a href="#database-navigator" class="headerlink" title="database navigator"></a>database navigator</h5><p>![check_Screen Shot 2020-04-13 at 5.59.22 PM](GreenDao/check_Screen Shot 2020-04-13 at 5.59.22 PM.png)</p>
<p>![Screen Shot 2020-04-13 at 6.04.11 PM](GreenDao/Screen Shot 2020-04-13 at 6.04.11 PM.png)</p>
<p>C:\Users\john\Desktop\dbsqlite</p>
<p>Device file explorer里面查看</p>
<p>data/data/{$packname}/mine</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/yu75567218/article/details/78904909">https://blog.csdn.net/yu75567218/article/details/78904909</a></p>
<h4 id="数据缓存"><a href="#数据缓存" class="headerlink" title="数据缓存"></a>数据缓存</h4><ul>
<li><p>RxJava实现数据网络数据缓存</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35064774/article/details/53449795">https://blog.csdn.net/qq_35064774/article/details/53449795</a></p>
</li>
<li><p>用户测量数据有网上传</p>
<p><a target="_blank" rel="noopener" href="https://wenku.baidu.com/view/65f16f61998fcc22bdd10d5b.html">https://wenku.baidu.com/view/65f16f61998fcc22bdd10d5b.html</a></p>
<p><a target="_blank" rel="noopener" href="https://my.oschina.net/banxi/blog/57984">https://my.oschina.net/banxi/blog/57984</a></p>
<p><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/q-EjPtHOVFaE46XKjhlf">https://www.infoq.cn/article/q-EjPtHOVFaE46XKjhlf</a></p>
</li>
</ul>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DB/" rel="tag">DB</a></li></ul>

          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Binder" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/08/11/Binder/">Binder</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-08-11T07:26:25.000Z" itemprop="datePublished">2019年08月11日</time>
</span>
      
      
      
<a href="/2019/08/11/Binder/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="IPC方式"><a href="#IPC方式" class="headerlink" title="IPC方式"></a>IPC方式</h4><p>信号量</p>
<p>共享内存 : 容易导致同步问题。因为用户端没法解决。</p>
<p>Socket</p>
<p>Binder: 服务端映射后， 官方解决了同步问题。</p>
<p><img src="/2019/08/11/Binder/2021-08-11_9.56_qustion1.png"></p>
<h4 id="多进程作用"><a href="#多进程作用" class="headerlink" title="多进程作用"></a>多进程作用</h4><p><img src="/2019/08/11/Binder/2021-08-11_8.40_function2.png"></p>
<h4 id="Binder流程"><a href="#Binder流程" class="headerlink" title="Binder流程"></a>Binder流程</h4><p>![](Binder/2021-08-11 _8.31_binder_over.png)</p>
<h4 id="Binder机制"><a href="#Binder机制" class="headerlink" title="Binder机制"></a>Binder机制</h4><h5 id="mmap作用"><a href="#mmap作用" class="headerlink" title="mmap作用"></a>mmap作用</h5><p>让一块虚拟内存 指向一块已知的物理内存。  这个物理内存是binder提供的。</p>
<p><img src="/2019/08/11/Binder/2021-08-11_9_binder_function.png"></p>
<h4 id="传统进程通信"><a href="#传统进程通信" class="headerlink" title="传统进程通信"></a>传统进程通信</h4><img src="/2019/08/11/Binder/2021-08-11_9.12_process_old.png" style="zoom: 33%;">



<h4 id="Binder进程通信"><a href="#Binder进程通信" class="headerlink" title="Binder进程通信"></a>Binder进程通信</h4><img src="/2019/08/11/Binder/2021-08-11_9.13_process_now.png" style="zoom:33%;">







<p><img src="/2019/08/11/Binder/2021-08-11_9.29.33_mmap.png"></p>
<h5 id="查看进程分配的内存大小"><a href="#查看进程分配的内存大小" class="headerlink" title="查看进程分配的内存大小"></a>查看进程分配的内存大小</h5><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">AppledeMacBook-Pro:MineUtils apple<span class="symbol">$</span> adb shell</span><br><span class="line">generic_x86:/ <span class="symbol">$</span> getprop dalvik.vm.<span class="built_in">heapsize</span></span><br><span class="line"><span class="number">512</span>m</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Hr4y1P7QC?from=search&amp;seid=18026610356055236655">https://www.bilibili.com/video/BV1Hr4y1P7QC?from=search&amp;seid=18026610356055236655</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Hr4y1P7QC?p=4">https://www.bilibili.com/video/BV1Hr4y1P7QC?p=4</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Hr4y1P7QC?p=5&amp;spm_id_from=pageDriver">https://www.bilibili.com/video/BV1Hr4y1P7QC?p=5&amp;spm_id_from=pageDriver</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/weidongshan/APP_0005_Binder_JAVA_App">https://github.com/weidongshan/APP_0005_Binder_JAVA_App</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1tW411i7aB?p=22">https://www.bilibili.com/video/BV1tW411i7aB?p=22</a></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AOSP/" rel="tag">AOSP</a></li></ul>

          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Gradient" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/07/22/Gradient/">Gradient</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-07-22T09:41:27.000Z" itemprop="datePublished">2019年07月22日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/VIEW/">VIEW</a>
  </div>

      
      
<a href="/2019/07/22/Gradient/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h5 id="LinearGradient"><a href="#LinearGradient" class="headerlink" title="LinearGradient"></a>LinearGradient</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * LinearGradient</span></span><br><span class="line"><span class="comment"> * Create a shader that draws a linear gradient along a line.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> x0           The x-coordinate for the start of the gradient line</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> y0           The y-coordinate for the start of the gradient line</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> x1           The x-coordinate for the end of the gradient line</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> y1           The y-coordinate for the end of the gradient line</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> colors       The colors to be distributed along the gradient line</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> positions    May be null. The relative positions [0..1] of</span></span><br><span class="line"><span class="comment"> *                     each corresponding color in the colors array. If this is null,</span></span><br><span class="line"><span class="comment"> *                     the the colors are distributed evenly along the gradient line.</span></span><br><span class="line"><span class="comment"> 					 所占比例，渲染颜色所占比例,如果传null，则均匀渲染</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> tile         The Shader tiling mode</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">val colors = intArrayOf(</span><br><span class="line">    Color.RED, Color.GREEN, Color.BLUE</span><br><span class="line">)</span><br><span class="line">val positions = floatArrayOf(<span class="number">0.5</span>f, <span class="number">1</span>f, <span class="number">0.5</span>f)</span><br><span class="line">val linearGradient = LinearGradient(<span class="number">0</span>f, <span class="number">300</span>f, <span class="number">300</span>f, <span class="number">300</span>f, colors, positions, Shader.TileMode.CLAMP)</span><br><span class="line">val mPaint = Paint()</span><br><span class="line">mPaint.setShader(linearGradient)</span><br><span class="line">canvas?.drawRect(<span class="number">0</span>f, <span class="number">0</span>f, <span class="number">300</span>f, <span class="number">300</span>f, mPaint)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>LinearGradient（0f, 0f, 300f, 300f）,说明从 (0,0) 到(300,300)对角线方向渲染</p>
<p><img src="/2019/07/22/Gradient/Gradient%5Cgradient_20171214100743840.png" alt="LinearGradient"></p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/5fb82b189094">https://www.jianshu.com/p/5fb82b189094</a></p>
<ul>
<li><p>渐变模式 </p>
<p>-CLAMP<br>边缘拉伸<br>-REPEAT<br>在水平和垂直两个方向上重复，相邻图像没有间隙<br>-MIRROR</p>
<p>以镜像的方式在水平和垂直两个方向上重复，相邻图像有间隙</p>
</li>
</ul>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-TEST_Robolectric" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/06/13/TEST_Robolectric/">TEST_Robolectric</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-06-13T01:42:52.000Z" itemprop="datePublished">2019年06月13日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/TEST/">TEST</a>
  </div>

      
      
<a href="/2019/06/13/TEST_Robolectric/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>robolectric</p>
<p><a target="_blank" rel="noopener" href="https://github.com/robolectric/robolectric">https://github.com/robolectric/robolectric</a></p>
<p>google官方 Fragment测试方法</p>
<p><a target="_blank" rel="noopener" href="https://developer.android.google.cn/training/basics/fragments/testing">https://developer.android.google.cn/training/basics/fragments/testing</a></p>
<p>谷歌官方推荐的开源测试框架 Robolectric就是这么一个工具，简单来说它实现了一套可以在JVM上运行的Android代码。 谷歌官方推荐的开源测试框架 Robolectric就是这么一个工具，它实现了一套可以在JVM上运行的Android代码。</p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904054192111623">https://juejin.cn/post/6844904054192111623</a></p>
<h5 id="robolectric-Dependency"><a href="#robolectric-Dependency" class="headerlink" title="robolectric Dependency"></a>robolectric Dependency</h5><p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=AiTh0rGMdjs">https://www.youtube.com/watch?v=AiTh0rGMdjs</a></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Test/" rel="tag">Test</a></li></ul>

          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-PrincipleComputer" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/04/08/PrincipleComputer/">PrincipleComputer</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2019-04-08T07:52:07.000Z" itemprop="datePublished">2019年04月08日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/Organization/">Organization</a>
  </div>

      
      
<a href="/2019/04/08/PrincipleComputer/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Guestbook
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="/2019/04/08/PrincipleComputer/computer_overview.png"></p>
<h4 id="进制运算的基本知识"><a href="#进制运算的基本知识" class="headerlink" title="进制运算的基本知识"></a>进制运算的基本知识</h4><h5 id="整数二进制"><a href="#整数二进制" class="headerlink" title="整数二进制"></a>整数二进制</h5><p>2进制转10进制： 重复除2取余数</p>
<h5 id="小数二进制"><a href="#小数二进制" class="headerlink" title="小数二进制 :"></a>小数二进制 :</h5><p>𝑁= 0.11001 =1∗2−1+1∗2−2+1∗2−5=0.78125=25 / 32</p>
<p>(小数)十进制转换二进制:重复相乘法</p>
<p><img src="/2019/04/08/PrincipleComputer/caculate_binary_01.png"></p>
<h4 id="二进制数据的表示方法"><a href="#二进制数据的表示方法" class="headerlink" title="二进制数据的表示方法"></a>二进制数据的表示方法</h4><h5 id="原码"><a href="#原码" class="headerlink" title="原码"></a>原码</h5><ul>
<li>原码表示法</li>
</ul>
<ol>
<li>使用0表示正数、1表示负数</li>
<li>规定符号位位于数值第一位</li>
<li>表达简单明了，是人类最容易理解的表示法</li>
</ol>
<p>0有两种表示方法:00 , 10</p>
<ul>
<li>缺陷</li>
</ul>
<p>但是原码表示法有缺陷</p>
<p><strong>希望找到不同符号操作数更加简单的运算方法</strong></p>
<p><strong>希望找到使用正数代替负数的方法</strong></p>
<p><strong>使用加法操作代替减法操作，从而消除减法</strong>    </p>
<h5 id="阶码-尾数"><a href="#阶码-尾数" class="headerlink" title="阶码 尾数"></a>阶码 尾数</h5><p><img src="/2019/04/08/PrincipleComputer/JiemaWeiShu.png"></p>
<h5 id="补码"><a href="#补码" class="headerlink" title="补码"></a>补码</h5><p>补码表示法</p>
<p><img src="/2019/04/08/PrincipleComputer/complementcode.png"></p>
<ul>
<li><p>例子2:  x=-13，计算x的二进制原码和补码</p>
<p>原码:x=1,1101</p>
<p>补码:2^(𝑛+1) + 𝑥 = 2^(4+1) − 13 = 100000 − 1101 = <u>1</u>,0011 </p>
<p>​                                                                                1是符号位</p>
<p>补码:x=1,0011</p>
</li>
<li><p>例子3:   x=-7，计算x的二进制原码和补码</p>
<p>原码:x=1,0111</p>
<p>补码:2^(𝑛+1) + 𝑥 = 2^(4+1) − 7 = <u>100000 − 0111</u> = 11001</p>
<p>​        补码:x=1,1001</p>
</li>
<li><p>缺陷</p>
<p>还是同样的问题,</p>
<p><strong>希望找到使用正数代替负数的方法</strong>$$</p>
<p><strong>使用加法操作代替减法操作，从而消除减法</strong></p>
<p>在计算补码的过程中，还是使用了减法!!</p>
</li>
</ul>
<h5 id="反码"><a href="#反码" class="headerlink" title="反码"></a>反码</h5><p><img src="/2019/04/08/PrincipleComputer/FANMA.png"></p>
<ul>
<li><p><strong>引进补码的目的</strong></p>
<p>减法运算复杂，希望找到使用正数替代负数的方法</p>
<p>使用加法代替减法操作，从而消除减法</p>
</li>
<li><p>例子1:    x=-13，计算x的二进制原码和,反码,补码</p>
<p>原码:      x=1,1101</p>
<p>反码:    2^(𝑛+1)−1 + 𝑥 = (2^(4+1)−1) − 13 = 011111 − 1101 = <u>1</u>0010</p>
<p>​            反码:x=1,0010</p>
<p>补码:    2^(𝑛+1) + 𝑥 = 2^(4+1) − <u>13 = 100000 − 11</u>01 = 10011</p>
</li>
<li><p>例子2:x=-7，计算x的二进制原码和反码</p>
<p>原码:x=1,0111</p>
<p>反码:2^(𝑛+1) + 𝑥 = 2^(4+1) − 7 = 011111 − 0111 = <u>1</u>1000</p>
<p>​        反码:x=1,1000</p>
</li>
<li><p>反码表示法</p>
<p><img src="/2019/04/08/PrincipleComputer/FANMA2.png"></p>
<p><strong>负数的反码</strong>等于原码除符号位外按位取反</p>
<p><strong>负数的补码</strong>= (反码+1)                </p>
</li>
<li><p>例子3:x=-7，计算x的二进制原码和反码和补码</p>
<p>原码:x=1,0111                    反码:x=1,1000.         补码:x=1,1001        </p>
</li>
<li><p>例子4:x=-9，计算x的二进制原码和反码和补码</p>
<p>原码:x=1,1001                    反码:x=1,0110         补码:x=1,0111    </p>
<p>​                </p>
<p><img src="/2019/04/08/PrincipleComputer/fanma03.png"></p>
</li>
</ul>
<h5 id="小数的补码"><a href="#小数的补码" class="headerlink" title="小数的补码"></a>小数的补码</h5><p>小数的补码 反码规则和整数一样，原码的方式按照 小数二进制 先算出来</p>
<ul>
<li><p>例子1: x= 9/16 ，计算x的二进制原码和反码和补码</p>
<p>原码:x=0,0.1001        反码:x= 0,0.1001            补码:x= 0,0.1001</p>
</li>
<li><p>例子2:x=- ，计算x的二进制原码和反码和补码</p>
<p>原码:x=1,0.01011    反码:x=1,1.10100             补码:x=1,1.10101</p>
</li>
</ul>
<h4 id="二进制数据的运算"><a href="#二进制数据的运算" class="headerlink" title="二进制数据的运算"></a>二进制数据的运算</h4><h5 id="定点数的加法运算"><a href="#定点数的加法运算" class="headerlink" title="定点数的加法运算"></a><strong>定点数的加法运算</strong></h5><p>整数加法: A 补 + B 补 = 𝐴 + 𝐵 补 (𝑚𝑜𝑑2𝑛+1)</p>
<p>小数加法: A补 +B补 = 𝐴+𝐵 补(𝑚𝑜𝑑2)</p>
<p>数值位与符号位一同运算，并将符号位产生的进位自然丢掉                         </p>
<ul>
<li><p>例子1:    A=-110010， B=001101，求A+B</p>
<p>A[补] = 1,001110     =&gt;     A[原] = 1,110010 =&gt; A[反]= 1,001101            </p>
<p>B 补 = B[原] = 0,001101                </p>
<p>A 补 +B 补 =(A+B) 补 =1,011011 </p>
<p>A + B = −100101                    <img src="/2019/04/08/PrincipleComputer/computer_principle.png" style="zoom:33%;"></p>
</li>
<li><p>例子2:A=-0.1010010， B=0.0110100，求A+B</p>
<p>A[补] = 1,1.0101110</p>
<p>B 补 = B[原] = 0,0.0110100</p>
<p>A 补 +B 补 =(A+B) 补 =1,1.1100010 </p>
<p>A + B =-0.0011110                    <img src="/2019/04/08/PrincipleComputer/computer_principle02.png" style="zoom: 67%;"></p>
</li>
<li><p>例子4 ： A=-10010000， B=-11010000，求A+B</p>
<p>A补 =1,01110000</p>
<p>B补 =1,00110000        </p>
<p> A 补 +B 补 =(A+B) 补 =0,10100000</p>
<p> A + B = 10100000        A + B = 160</p>
<p>A = −144    B = −208            <img src="/2019/04/08/PrincipleComputer/computer_principle04.png" style="zoom: 67%;"></p>
<p>发生了溢出 : A</p>
</li>
<li><p><strong>判断溢出</strong></p>
<p> 双符号位判断法</p>
<p>**单符号位表示变成双符号位:**<strong>0=&gt;00,1=&gt;11</strong></p>
<p><strong>双符号位产生的进位丢弃</strong></p>
<p><strong>结果的双符号位不同则表示溢出</strong></p>
</li>
<li><p>例子4:A=-10010000， B=-11010000，求A+B</p>
<p>A补 =1,01110000    </p>
<p>B补 =1,00110000</p>
<p>A 补 +B 补 =(A+B) 补 =<u>10</u>,10100000        双符号位不同，表示溢出    </p>
<p><img src="/2019/04/08/PrincipleComputer/computer_principle04.png" style="zoom: 67%;">              符号位进位舍去</p>
</li>
<li><p>例子3:A=-10010000， B=-01010000，求A+B</p>
<p>A补 =1,01110000</p>
<p>B补 =1,10110000</p>
<p>A 补 +B 补 =(A+B) 补 =<u>11,</u>00100000     双符号位相同，没有溢出</p>
<p>(A+B)[原] = 11,11100000 = −11100000</p>
</li>
</ul>
<h5 id="定点数的减法运算"><a href="#定点数的减法运算" class="headerlink" title="定点数的减法运算"></a><strong>定点数的减法运算</strong></h5><p>整数减法: A补 −B补 =𝐴+(−𝐵)补(𝑚𝑜𝑑2𝑛+1)</p>
<p>小数减法: A 补 −B 补 =𝐴+(−𝐵) 补 (𝑚𝑜𝑑2)</p>
<p>-B[补]等于B[补]连同符号位按位取反，末位加一</p>
<p>B 补 = 1,0010101             (−B) 补 = 0,1101011</p>
<ul>
<li><p>例子5:A=11001000， B=-00110100，求A-B</p>
<p>A 补 = A[原] = 0,11001000</p>
<p>B 补 = 1,11001100</p>
<p> (−B) 补 = 0,00110100</p>
</li>
</ul>
<p>A补 −B补 =A+(−B)补</p>
<p>A+(−B)补 =0,11111100</p>
<p>A − B = 111111100</p>
<h5 id="浮点数的加减法运算"><a href="#浮点数的加减法运算" class="headerlink" title="浮点数的加减法运算"></a>浮点数的加减法运算</h5><p><strong>対阶                          尾数求和                          尾数规格化 舍入                          溢出判断</strong></p>
<p>浮点数乘除法也是上面4个步骤</p>
<p>做蓝牙开发时byte数组出现 -122，来看看这个负数是怎么出现的</p>
<p>byte转int类型</p>
<p>b1 &amp; 0xff</p>
<p><a target="_blank" rel="noopener" href="http://ju.outofmemory.cn/entry/215778">http://ju.outofmemory.cn/entry/215778</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/RuobaiMEN/article/details/79890823">https://blog.csdn.net/RuobaiMEN/article/details/79890823</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/LVXIANGAN/article/details/72726152">https://blog.csdn.net/LVXIANGAN/article/details/72726152</a></p>
<p>问题: 计算机负数加法 8 + （-1）</p>
<p>​    b1 &amp; 0xff 不理解</p>
<p><a target="_blank" rel="noopener" href="https://www.imooc.com/article/21360">https://www.imooc.com/article/21360</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zdy10326621/article/details/50236529">https://blog.csdn.net/zdy10326621/article/details/50236529</a></p>
<h4 id="字节"><a href="#字节" class="headerlink" title="字节"></a>字节</h4><h6 id="一个字节byte-两位16进制数"><a href="#一个字节byte-两位16进制数" class="headerlink" title="一个字节byte 两位16进制数"></a>一个字节byte 两位16进制数</h6><p>1个字节是8位，二进制8位：xxxxxxxx 范围从00000000－11111111，表示0到255。</p>
<p>1位16进制数最大是15（用二进制表示是xxxx ）（即对应16进制的0xF 1111 4位），要表示到255,就还需要4位。</p>
<ul>
<li>位运算符基本操作</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qiantudou/article/details/49928423">https://blog.csdn.net/qiantudou/article/details/49928423</a></p>
<p><a target="_blank" rel="noopener" href="https://www.orchome.com/1190">https://www.orchome.com/1190</a></p>
<h6 id="取一个字节-某几位"><a href="#取一个字节-某几位" class="headerlink" title="取一个字节 某几位"></a>取一个字节 某几位</h6><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 取一个字节高几位</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> b</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> length</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">int</span> <span class="title">getLeftNum</span><span class="params">(<span class="keyword">byte</span> b, <span class="keyword">int</span> length)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> b &gt;&gt; (<span class="number">8</span> - length);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 取一个字节低几位bit</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> b</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> length</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">int</span> <span class="title">getRightNum</span><span class="params">(<span class="keyword">byte</span> b, <span class="keyword">int</span> length)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">byte</span> mv = (<span class="keyword">byte</span>) (<span class="number">0xff</span> &gt;&gt; (<span class="number">8</span> - length));</span><br><span class="line">    <span class="keyword">return</span> b &amp; mv;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * https://blog.csdn.net/bluestarjava/article/details/83446129</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> b</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> startIndex 高位从0开始</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> endIndex</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">int</span> <span class="title">getMidNum</span><span class="params">(<span class="keyword">byte</span> b, <span class="keyword">int</span> startIndex, <span class="keyword">int</span> endIndex)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">byte</span> i = (<span class="keyword">byte</span>) getLeftNum(b, endIndex + <span class="number">1</span>);<span class="comment">//先取高几位</span></span><br><span class="line">    <span class="function"><span class="keyword">return</span> <span class="title">getRightNum</span><span class="params">(i, endIndex - startIndex + <span class="number">1</span>)</span></span>;<span class="comment">//再取低几位</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://bbs.csdn.net/topics/310178646">https://bbs.csdn.net/topics/310178646</a></p>

        
        
          <blockquote id="copyright">
              <p>Original link: <a href="https://noteforme.github.io/page/12/index.html">https://noteforme.github.io/page/12/index.html</a></p>
              <p>Copyright Notice: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Share:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>



    <nav id="page-nav">

<a class="extend prev" rel="prev" href="/page/11/">Previous</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/">13</a><a class="page-number" href="/page/14/">14</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><a class="extend next" rel="next" href="/page/13/">Next</a>
</nav>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-posts"></i> Recent</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/04/02/LC-DP/">LC-DP</a>
          </li>
        
          <li>
            <a href="/2023/01/10/RecyclerView-padding/">RecyclerView-padding</a>
          </li>
        
          <li>
            <a href="/2023/01/02/LC-GREEDY/">LC-GREEDY</a>
          </li>
        
          <li>
            <a href="/2022/12/27/viewBinding/">viewBinding</a>
          </li>
        
          <li>
            <a href="/2022/10/17/AppLink/">AppLink</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ANDROID/" style="font-size: 12.86px;">ANDROID</a> <a href="/tags/AOSP/" style="font-size: 18.57px;">AOSP</a> <a href="/tags/Activity/" style="font-size: 10px;">Activity</a> <a href="/tags/AndroidNewFeatures/" style="font-size: 10px;">AndroidNewFeatures</a> <a href="/tags/Assembly/" style="font-size: 10px;">Assembly</a> <a href="/tags/BLOG/" style="font-size: 10px;">BLOG</a> <a href="/tags/ConstraintLayout/" style="font-size: 10px;">ConstraintLayout</a> <a href="/tags/DB/" style="font-size: 11.43px;">DB</a> <a href="/tags/Drawer/" style="font-size: 10px;">Drawer</a> <a href="/tags/Fragment/" style="font-size: 11.43px;">Fragment</a> <a href="/tags/Git/" style="font-size: 11.43px;">Git</a> <a href="/tags/JVM/" style="font-size: 18.57px;">JVM</a> <a href="/tags/LEETCODE/" style="font-size: 20px;">LEETCODE</a> <a href="/tags/Operators/" style="font-size: 10px;">Operators</a> <a href="/tags/Performance/" style="font-size: 14.29px;">Performance</a> <a href="/tags/RecyclerView/" style="font-size: 11.43px;">RecyclerView</a> <a href="/tags/RxJava/" style="font-size: 14.29px;">RxJava</a> <a href="/tags/THINK/" style="font-size: 10px;">THINK</a> <a href="/tags/TOOL/" style="font-size: 11.43px;">TOOL</a> <a href="/tags/TabLayout/" style="font-size: 10px;">TabLayout</a> <a href="/tags/Test/" style="font-size: 14.29px;">Test</a> <a href="/tags/TouchEvent/" style="font-size: 12.86px;">TouchEvent</a> <a href="/tags/VIEW/" style="font-size: 11.43px;">VIEW</a> <a href="/tags/anim/" style="font-size: 10px;">anim</a> <a href="/tags/concurrency/" style="font-size: 14.29px;">concurrency</a> <a href="/tags/coroutie/" style="font-size: 17.14px;">coroutie</a> <a href="/tags/inter/" style="font-size: 15.71px;">inter</a> <a href="/tags/keyboard/" style="font-size: 10px;">keyboard</a> <a href="/tags/proguard/" style="font-size: 10px;">proguard</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-classify"></i> Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ANDROID/">ANDROID</a><span class="category-list-count">59</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/BLE/">BLE</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DataStructure/">DataStructure</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DesignPatterns/">DesignPatterns</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ENGLISH/">ENGLISH</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/">JAVA</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Jetpack/">Jetpack</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kotlin/">Kotlin</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LINUX/">LINUX</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mathematics/">Mathematics</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS/">OS</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Organization/">Organization</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SOURCE/">SOURCE</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TEST/">TEST</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TOOL/">TOOL</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/VIEW/">VIEW</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/anim/">anim</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/flutter/">flutter</a><span class="category-list-count">5</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-archive"></i> Archive</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/">2023年04月</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/">2022年12月</a><span class="archive-list-count">31</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/">2021年12月</a><span class="archive-list-count">24</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020年12月</a><span class="archive-list-count">45</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019年12月</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018年11月</a><span class="archive-list-count">32</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017年12月</a><span class="archive-list-count">57</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ANDROID/" rel="tag">ANDROID</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AOSP/" rel="tag">AOSP</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Activity/" rel="tag">Activity</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AndroidNewFeatures/" rel="tag">AndroidNewFeatures</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Assembly/" rel="tag">Assembly</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BLOG/" rel="tag">BLOG</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ConstraintLayout/" rel="tag">ConstraintLayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DB/" rel="tag">DB</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Drawer/" rel="tag">Drawer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Fragment/" rel="tag">Fragment</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LEETCODE/" rel="tag">LEETCODE</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Operators/" rel="tag">Operators</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Performance/" rel="tag">Performance</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RecyclerView/" rel="tag">RecyclerView</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RxJava/" rel="tag">RxJava</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/THINK/" rel="tag">THINK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TOOL/" rel="tag">TOOL</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TabLayout/" rel="tag">TabLayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Test/" rel="tag">Test</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TouchEvent/" rel="tag">TouchEvent</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VIEW/" rel="tag">VIEW</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/anim/" rel="tag">anim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/concurrency/" rel="tag">concurrency</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/coroutie/" rel="tag">coroutie</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/inter/" rel="tag">inter</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/keyboard/" rel="tag">keyboard</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/proguard/" rel="tag">proguard</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-link"></i> Blogroll</h3>
    <div class="widget">
      <ul>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example1.com/">site-name1</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example2.com/">site-name2</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example3.com/">site-name3</a>
        </li>
      
      </ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <a id="totop" href="#top"></a>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <p>
        <a href="/sitemap.xml">Site Map</a>
        <span> | </span><a href="/atom.xml">Subscribe to this site</a>
        <span> | </span><a href="/about/">Contact the blogger</a>
      </p>
      
        <p>
          <i class="fa fa-visitors"></i>
          <i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>
          ，
          <i class="fa fa-views"></i>
          <i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>
        </p>
      
      <p>
        <span>Copyright &copy; 2023 Jon.</span>
        <span>Theme by <a href="https://github.com/chaooo/hexo-theme-BlueLake/" target="_blank">BlueLake.</a></span>
        
            <span>Count by <a href="http://busuanzi.ibruce.info/" target="_blank">busuanzi.</a></span>
        
        <span>Powered by <a href="https://hexo.io/" target="_blank">Hexo.</a></span>
      </p>
    </div>
  </div>
</footer>

    </div>
    
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/search.json.js"></script>


  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>






  
<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



  
<script src="/localshare/js/social-share.js"></script>

  
<script src="/localshare/js/qrcode.js"></script>




















  </div>
</body>
</html>