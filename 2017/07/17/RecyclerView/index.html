<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  
  <title>RecyclerView | Jon&#39;s Blog</title>
  <meta name="author" content="Jon">
  
  <meta name="description" content="Question
https://www.bilibili.com/video/BV1Fi4y1x7p5?from=search&amp;amp;seid=3244755609076396172

RecycleView复用机制

无

问题3
适配不同类型的View布局，将用户界面显示与逻辑代码分离

无">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="RecyclerView"/>
  <meta property="og:site_name" content="Jon&#39;s Blog"/>

  
    <meta property="og:image" content=""/>
  

  
    <link rel="alternative" href="/atom.xml" title="Jon&#39;s Blog" type="application/atom+xml">
  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/prism.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70812759-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70812759-1');
</script>






<meta name="generator" content="Hexo 6.3.0"></head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">Jon&#39;s Blog</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class=""></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class=""></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class=""></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class=""></i>About
			</a>
		  </li>
		  
		  <li>
			<a href="/atom.xml" title="Subscribe me.">
			  <i class=""></i>RSS
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header">
			<h1> RecyclerView</h1>
		</div>
	



<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">		
	  		

	  <h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><p><img src="/2017/07/17/RecyclerView/2021-08-02_10.11_recyleview.png"></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Fi4y1x7p5?from=search&amp;seid=3244755609076396172">https://www.bilibili.com/video/BV1Fi4y1x7p5?from=search&amp;seid=3244755609076396172</a></p>
<ol>
<li><p>RecycleView复用机制</p>
</li>
<li><p>无</p>
</li>
<li><p>问题3</p>
<p>适配不同类型的View布局，将用户界面显示与逻辑代码分离</p>
</li>
<li><p>无</p>
</li>
</ol>
<h4 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LinearLayoutManager layoutManager = <span class="keyword">new</span> LinearLayoutManager(getActivity());</span><br><span class="line">layoutManager.setOrientation(LinearLayoutManager.VERTICAL); <span class="comment">//默认竖直布局</span></span><br><span class="line">mRecyclerView.setLayoutManager(layoutManager);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomAdapter</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">Adapter</span>&lt;<span class="title">CustomAdapter</span>.<span class="title">ViewHolder</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">&quot;CustomAdapter&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String[] mDataSet;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// BEGIN_INCLUDE(recyclerViewSampleViewHolder)</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Provide a reference to the type of views that you are using (custom ViewHolder)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewHolder</span> <span class="keyword">extends</span> <span class="title">RecyclerView</span>.<span class="title">ViewHolder</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> TextView textView;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">ViewHolder</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>(v);</span><br><span class="line">            <span class="comment">// Define click listener for the ViewHolder&#x27;s View.</span></span><br><span class="line">            v.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">                    Log.d(TAG, <span class="string">&quot;Element &quot;</span> + getAdapterPosition() + <span class="string">&quot; clicked.&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            textView = (TextView) v.findViewById(R.id.textView);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> TextView <span class="title">getTextView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> textView;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// END_INCLUDE(recyclerViewSampleViewHolder)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Initialize the dataset of the Adapter.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dataSet String[] containing the data to populate views to be used by RecyclerView.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomAdapter</span><span class="params">(String[] dataSet)</span> </span>&#123;</span><br><span class="line">        mDataSet = dataSet;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// BEGIN_INCLUDE(recyclerViewOnCreateViewHolder)</span></span><br><span class="line">    <span class="comment">// Create new views (invoked by the layout manager)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ViewHolder <span class="title">onCreateViewHolder</span><span class="params">(ViewGroup viewGroup, <span class="keyword">int</span> viewType)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// Create a new view.</span></span><br><span class="line">        View v = LayoutInflater.from(viewGroup.getContext())</span><br><span class="line">                .inflate(R.layout.text_row_item, viewGroup, <span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ViewHolder(v);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// END_INCLUDE(recyclerViewOnCreateViewHolder)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// BEGIN_INCLUDE(recyclerViewOnBindViewHolder)</span></span><br><span class="line">    <span class="comment">// Replace the contents of a view (invoked by the layout manager)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBindViewHolder</span><span class="params">(ViewHolder viewHolder, <span class="keyword">final</span> <span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">        Log.d(TAG, <span class="string">&quot;Element &quot;</span> + position + <span class="string">&quot; set.&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Get element from your dataset at this position and replace the contents of the view</span></span><br><span class="line">        <span class="comment">// with that element</span></span><br><span class="line">        viewHolder.getTextView().setText(mDataSet[position]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// END_INCLUDE(recyclerViewOnBindViewHolder)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Return the size of your dataset (invoked by the layout manager)</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getItemCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mDataSet.length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://github.com/googlesamples/android-RecyclerView">https://github.com/googlesamples/android-RecyclerView</a></p>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/lmj623565791/article/details/51854533">http://blog.csdn.net/lmj623565791/article/details/51854533</a><br><a target="_blank" rel="noopener" href="http://blog.csdn.net/qibin0506/article/details/49716795">http://blog.csdn.net/qibin0506/article/details/49716795</a></p>
<h3 id="复用分析"><a href="#复用分析" class="headerlink" title="复用分析"></a>复用分析</h3><p>分析onCreateViewHolder onBindViewHolder和 view是怎么复用的</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ec6585e5220d">https://www.jianshu.com/p/ec6585e5220d</a></p>
<h6 id="滑动坐标"><a href="#滑动坐标" class="headerlink" title="滑动坐标"></a>滑动坐标</h6><p>第一个左边 - 第二个坐标</p>
<p>所以负值 一定是往下滑</p>
<p>用栈数组保存不同类型回收的view</p>
<h6 id="回收情况"><a href="#回收情况" class="headerlink" title="回收情况"></a>回收情况</h6><p>ScrollY  第一个可见Item的左上顶点 距离屏幕左上角的距离。</p>
<h6 id="顶部item回收"><a href="#顶部item回收" class="headerlink" title="顶部item回收"></a>顶部item回收</h6><ol>
<li>往上滑动 </li>
</ol>
<p>​    当顶部item滑出屏幕，ScrollY的高度等于第一个item高度时，就被滑出了屏幕。</p>
<p>​    底部item再添加</p>
<ol start="2">
<li>网上滑动</li>
</ol>
<p>​    当 屏幕显示的几个Item 长度 -  ScrollY  刚好等于 屏幕高度，底部item之下再开始添加item。</p>
<p>​    因为ScrollY变大.</p>
<h6 id="顶部item添加"><a href="#顶部item添加" class="headerlink" title="顶部item添加"></a>顶部item添加</h6><p>向下滑动</p>
<p>ScrollY = 顶部item高度，顶部添加item</p>
<p>底部item回收</p>
<p>ScrollY = 底部item高度，底部回收。</p>
<h4 id="Jectpack-Paging"><a href="#Jectpack-Paging" class="headerlink" title="Jectpack Paging"></a>Jectpack Paging</h4><p><a target="_blank" rel="noopener" href="https://developer.android.com/topic/libraries/architecture/paging">https://developer.android.com/topic/libraries/architecture/paging</a></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=BE5bsyGGLf4&amp;t=841s">https://www.youtube.com/watch?v=BE5bsyGGLf4&amp;t=841s</a></p>
<p><a target="_blank" rel="noopener" href="https://codelabs.developers.google.com/codelabs/android-paging/index.html?index=../../index#1">https://codelabs.developers.google.com/codelabs/android-paging/index.html?index=..%2F..%2Findex#1</a></p>
<p>ItemKeyedDataSource的子类需要实现loadInitial、loadAfter、loadBefore和getKey方法。它们分别的作用如下：</p>
<ul>
<li><p>loadInitial：此方法之后在用DataSource构建PageList的时候才会调用一次。用于进行加载初始化。</p>
</li>
<li><p>loadAfter：在每次RecyclerView滑动到<code>底部</code>没有数据的时候就会调用此方法进行数据的加载。</p>
</li>
<li><p>loadBefore：在每次RecyclerView滑动到<code>顶部</code>没有数据的时候就会调用此方法进行数据的加载。</p>
</li>
<li><p>getKey: 这返回下一个loadAfter调用所需要用到的key。<strong>就相当于链表的指针。</strong></p>
<p><a target="_blank" rel="noopener" href="https://anriku.top/2018/09/25/Android%E5%A4%A7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%8A%A0%E8%BD%BD-Paging%E7%9A%84%E4%BD%BF%E7%94%A8/">https://anriku.top/2018/09/25/Android%E5%A4%A7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%8A%A0%E8%BD%BD-Paging%E7%9A%84%E4%BD%BF%E7%94%A8/</a></p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/fmtjava/Jetpack_GitHub">https://github.com/fmtjava/Jetpack_GitHub</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Hankkin/JetPack_Note">https://github.com/Hankkin/JetPack_Note</a></p>
<p>解释 paging diff</p>
<p><a target="_blank" rel="noopener" href="http://www.jeepxie.net/article/25492.html">http://www.jeepxie.net/article/25492.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/bbb96fc62bcd">https://www.jianshu.com/p/bbb96fc62bcd</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/10bf4bf59122">https://www.jianshu.com/p/10bf4bf59122</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5db06bb6518825646d79070b">https://juejin.im/post/5db06bb6518825646d79070b</a></p>
<h4 id="Item分类"><a href="#Item分类" class="headerlink" title="Item分类"></a>Item分类</h4><p>前面添加header, footer就用到了item分类<br>reclverview也有很多分类方式</p>
<ul>
<li>使用adapter　组合设计模式，进行组装，代码简洁，比较好操作<br><a target="_blank" rel="noopener" href="http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0810/3282.html">多adapter分类</a> </li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/luizgrp/SectionedRecyclerViewAdapter">https://github.com/luizgrp/SectionedRecyclerViewAdapter</a><br><a target="_blank" rel="noopener" href="http://blog.csdn.net/wzlyd1/article/details/52292548">http://blog.csdn.net/wzlyd1/article/details/52292548</a><br><a target="_blank" rel="noopener" href="https://github.com/luizgrp/SectionedRecyclerViewAdapter">https://github.com/luizgrp/SectionedRecyclerViewAdapter</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/donkingliang/GroupedRecyclerViewAdapter">https://github.com/donkingliang/GroupedRecyclerViewAdapter</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/oCl4BQ8uB9ZDSOEKESM7hA">https://mp.weixin.qq.com/s/oCl4BQ8uB9ZDSOEKESM7hA</a></p>
<p> 复杂布局: <a target="_blank" rel="noopener" href="https://github.com/385841539/RecycleviewStaggered">https://github.com/385841539/RecycleviewStaggered</a></p>
<p> 竖直嵌套水平:<a target="_blank" rel="noopener" href="https://github.com/drakeet/MultiType/issues/67">https://github.com/drakeet/MultiType/issues/67</a></p>
<h6 id="preview"><a href="#preview" class="headerlink" title="preview"></a>preview</h6><p><a target="_blank" rel="noopener" href="https://medium.com/aubergine-solutions/creating-recyclerview-layout-in-android-no-pain-only-gain-404280471003">https://medium.com/aubergine-solutions/creating-recyclerview-layout-in-android-no-pain-only-gain-404280471003</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tools:itemCount&#x3D;&quot;5&quot;</span><br><span class="line">tools:listitem&#x3D;&quot;@layout&#x2F;adapter_red_pack&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tools:src&#x3D;&quot;@sample&#x2F;RedPack.json&#x2F;dataList&#x2F;redEnvelopeMoney&quot;</span><br></pre></td></tr></table></figure>



<h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><p>使用recycleView中会遇到一些问题,总结一下</p>
<ol>
<li>问题1<br>下拉刷新 滑动列表 crash</li>
</ol>
<p>使用下拉刷新的时候 往上滑动item会出现这样的错误</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">E&#x2F;CrashReport: sys default last handle start!</span><br><span class="line">FATAL EXCEPTION: main</span><br><span class="line"> Process: com.huifu, PID: 22865</span><br><span class="line"> java.lang.IndexOutOfBoundsException: Inconsistency detected. Invalid item position 4(offset:4).state:10</span><br><span class="line"> at android.support.v7.widget.RecyclerView$Recycler.tryGetViewHolderForPositionByDeadline(RecyclerView.java:5504)</span><br><span class="line"> at android.support.v7.widget.GapWorker.prefetchPositionWithDeadline(GapWorker.java:282)</span><br><span class="line"> at android.support.v7.widget.GapWorker.flushTaskWithDeadline(GapWorker.java:336)</span><br><span class="line"> at android.support.v7.widget.GapWorker.flushTasksWithDeadline(GapWorker.java:349)</span><br><span class="line"> at android.support.v7.widget.GapWorker.prefetch(GapWorker.java:356)</span><br><span class="line"> at android.support.v7.widget.GapWorker.run(GapWorker.java:387)</span><br><span class="line"> at android.os.Handler.handleCallback(Handler.java:739)</span><br><span class="line"> at android.os.Handler.dispatchMessage(Handler.java:95)</span><br><span class="line"> at android.os.Looper.loop(Looper.java:148)</span><br><span class="line"> at android.app.ActivityThread.main(ActivityThread.java:5417)</span><br><span class="line"> at java.lang.reflect.Method.invoke(Native Method)</span><br><span class="line"> at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)</span><br><span class="line"> at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p> 刷新之后数据清空，再滑动数据和item不一致, 情况数据应该在拿到数据之后, 使用下面这种方式解决问题，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">    @Override</span><br><span class="line">    public void onRefresh() &#123;</span><br><span class="line">&#x2F;&#x2F;        if (!mProjectList.isEmpty()) &#123;</span><br><span class="line">&#x2F;&#x2F;            mProjectList.clear();</span><br><span class="line">&#x2F;&#x2F;        &#125;</span><br><span class="line">        start &#x3D; 0;</span><br><span class="line">        loadData();</span><br><span class="line">    &#125;</span><br><span class="line">&#x2F;&#x2F;拿到数据后</span><br><span class="line"></span><br><span class="line"> public void onSuccess(List&lt;Project&gt; projects) &#123;</span><br><span class="line">                        swipeInvest.setRefreshing(false);</span><br><span class="line">                        isloading &#x3D; false;</span><br><span class="line">                        if (start &#x3D;&#x3D; 0) mProjectList.clear();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>  <a target="_blank" rel="noopener" href="http://blog.csdn.net/weixiao_812/article/details/78138075">http://blog.csdn.net/weixiao_812/article/details/78138075</a><br> <a target="_blank" rel="noopener" href="https://allen218.github.io/2016/06/02/RecyclerView%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E6%97%B6%E5%BF%AB%E9%80%9F%E6%BB%91%E5%8A%A8%E5%B4%A9%E6%BA%83%E7%9A%84%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/">下拉刷新时快速滑动崩溃的问题解决</a>  </p>
<ol start="2">
<li>问题2</li>
</ol>
<p>界面不能展示 ,和ListView  不同的是RecyclerView不同,没设置下面的参数是不显示的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mLayoutManager &#x3D; new LinearLayoutManager(getActivity());</span><br><span class="line">rcvRrecord.setLayoutManager(mLayoutManager);</span><br></pre></td></tr></table></figure>

<p>如果还是没有就看看 recycleview布局是否显示</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/mjb00000/article/details/106014544">https://blog.csdn.net/mjb00000/article/details/106014544</a></p>
<p>不用等数据来了后再显示</p>
<p><a target="_blank" rel="noopener" href="https://github.com/leobert-lan/Pandora">https://github.com/leobert-lan/Pandora</a> </p>
<h4 id="RecyclerView拖拽功能"><a href="#RecyclerView拖拽功能" class="headerlink" title="RecyclerView拖拽功能"></a>RecyclerView拖拽功能</h4><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/9605d14ddcc2">https://www.jianshu.com/p/9605d14ddcc2</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/b9a22f0c537d">https://www.jianshu.com/p/b9a22f0c537d</a></p>
<p><a target="_blank" rel="noopener" href="https://medium.com/@ipaulpro/drag-and-swipe-with-recyclerview-b9456d2b1aaf">https://medium.com/@ipaulpro/drag-and-swipe-with-recyclerview-b9456d2b1aaf</a></p>
<p>drag禁用</p>
<p><a target="_blank" rel="noopener" href="https://github.com/CymChad/BaseRecyclerViewAdapterHelper/issues/3378">https://github.com/CymChad/BaseRecyclerViewAdapterHelper/issues/3378</a></p>
<h4 id="BaseRecyclerViewAdapterHelper"><a href="#BaseRecyclerViewAdapterHelper" class="headerlink" title="BaseRecyclerViewAdapterHelper"></a>BaseRecyclerViewAdapterHelper</h4><p>getLayoutPosition getAdapterPosition区别</p>
<p>如果界面在notifyDataSetChanged()刷新所有数据,获取的adapterPosition 有可能会是-1,而layoutPosition获取到的还是旧的值.<br> 如果使用但如果用的是notifyItemInserted(0),获取的adapterPosition就能立刻获取到新的值.</p>
<p>作者：JimmyZou92<br>链接：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6999213411204595720">https://juejin.cn/post/6999213411204595720</a><br>来源：稀土掘金<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>

	  <div class="article-footer-copyright">

    本博客采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议(CC BY-NC-SA 4.0) 发布.</a>
</div>

	</div>

	
	
	<div>
  	<center>

	<div class="pagination">

    
    
    <a href="/2017/07/18/ubuntu_vr/" type="button" class="btn btn-default"><i
                class="fa fa-arrow-circle-o-left"></i> Prev</a>
    

    <a href="/" type="button" class="btn btn-default"><i class="fa fa-home"></i>Home</a>
    
    <a href="/2017/07/14/VideoAudio/" type="button" class="btn btn-default ">Next<i
                class="fa fa-arrow-circle-o-right"></i></a>
    

    
</div>


    </center>
	</div>
	
	<!-- comment -->
	<!--
<section id="comment">
    <h2 class="title">Comments</h2>

    
</section>

-->
	
	
	
	</div> <!-- col-md-9/col-md-12 -->


	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2017-07-17 
	</div>
	

	<!-- categories -->
    
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i></a>	
    <ul id="categorys" class="tag_box list-unstyled collapse in">
          
  <li>
    <li><a href="/categories/ANDROID/">ANDROID<span>58</span></a></li>
  </li>

    </ul>
	</div>
	

	<!-- tags -->
		

	<!-- toc -->
	<div class="meta-widget">
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

		

	</div>
	
		

</div><!-- row -->

<!--
 -->



	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  
  &copy; 2023 Jon's Blog
  
      powered by <a href="http://hexo.io/" target="_blank">Hexo</a>.Theme <a href="https://github.com/Ares-X/hexo-theme-freemind.bithack" target="_blank">freemind.bithack</a>  
</p>
 </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>⬆︎TOP</span>
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



</body>
   </html>
