<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Jon&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  
  
    <link rel="alternate" href="/atom.xml" title="Jon's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="/localshare/css/share.css">

  
  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Jon&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Cease to struggle and you cease to live. - Thomas Carlyle</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/."><i class="fa fa-home"></i> Start</a>
        
          <a class="main-nav-link" href="/archives/"><i class="fa fa-archive"></i> Archiv</a>
        
          <a class="main-nav-link" href="/about/"><i class="fa fa-user"></i> Über</a>
        
          <a class="main-nav-link" href="/atom.xml"><i class="fa fa-rss"></i> RSS</a>
        
      </nav>
    </div>
    <div id="search-form">
      <div id="result-mask" class="hide"></div>
      <label><input id="search-key" type="text" autocomplete="off" placeholder="Suche"></label>
      <div id="result-wrap" class="hide">
        <div id="search-result"></div>
      </div>
      <div class="hide">
        <template id="search-tpl">
          <div class="item">
            <a href="/{path}" title="{title}">
              <div class="title">{title}</div>
              <div class="time">{date}</div>
              <div class="tags">{tags}</div>
            </a>
          </div>
        </template>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  <article id="post-tool-miflash" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/13/tool-miflash/">tool_pc_phone</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-13T15:22:47.000Z" itemprop="datePublished">2017年10月13日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/TOOL/">TOOL</a>
  </div>

      
      
<a href="/2017/10/13/tool-miflash/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Gästebuch
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="mi救砖"><a href="#mi救砖" class="headerlink" title="mi救砖"></a>mi救砖</h2><p>前两天不小心把　新买的小米４给刷成黑砖了，我的操作是<br><strong>双击磁盘模式工具目录里的“清除fastboot进磁盘操作.bat”进入磁盘模式</strong><br> 使用这种方式把fastboot清掉了，然后手机都没法进入fastboot模式，插入电脑无法识别</p>
<h1 id="我的方法"><a href="#我的方法" class="headerlink" title="我的方法"></a>我的方法</h1><h2 id="进入方法三：通过线刷升级"><a href="#进入方法三：通过线刷升级" class="headerlink" title="进入方法三：通过线刷升级"></a>进入方法三：通过线刷升级</h2><p>　　点以下链接 <a target="_blank" rel="noopener" href="http://www.miui.com/shuaji-393.html,%E4%B8%8B%E8%BD%BD%E9%80%9A%E7%94%A8%E5%88%B7%E6%9C%BA%E5%B7%A5%E5%85%B7%EF%BC%8C%E5%AE%89%E8%A3%85%E5%90%8E">http://www.miui.com/shuaji-393.html,下载通用刷机工具，安装后</a>(需要<br>　　一段时间)，插上已成砖手机，windows设备管理器　端口我的显示9006
　　</p>
<h2 id="下载fastboot完整包"><a href="#下载fastboot完整包" class="headerlink" title="下载fastboot完整包"></a>下载fastboot完整包</h2><pre><code>   也是在上面链接路径下面
</code></pre>
<h2 id="下载-miflash"><a href="#下载-miflash" class="headerlink" title="下载 miflash"></a>下载 miflash</h2><p>   我下载的是15版的miflash　新版 .bat文件不同会报各种错误<br>    链接: <a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1pKPLJdD">https://pan.baidu.com/s/1pKPLJdD</a> 密码: 94mi</p>
<h2 id="救活"><a href="#救活" class="headerlink" title="救活"></a>救活</h2><p>  选择下载的fastboot包，刷机，然后是等待</p>
<p>   看到一篇文章高通下教程　<a target="_blank" rel="noopener" href="http://www.miui.com/thread-2689657-1-1.html">http://www.miui.com/thread-2689657-1-1.html</a></p>
<h2 id="Thinkpad更换固态硬盘"><a href="#Thinkpad更换固态硬盘" class="headerlink" title="Thinkpad更换固态硬盘"></a>Thinkpad更换固态硬盘</h2><ul>
<li>视频教程:</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://v.qq.com/x/page/k0157zxhob1.html">https://v.qq.com/x/page/k0157zxhob1.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=Qgh5v6ccMOg">https://www.youtube.com/watch?v=Qgh5v6ccMOg</a></p>
<p><a target="_blank" rel="noopener" href="http://v.youku.com/v_show/id_XMzE3NTU5MjA4OA==.html?spm=a2hzp.8244740.0.0">http://v.youku.com/v_show/id_XMzE3NTU5MjA4OA==.html?spm=a2hzp.8244740.0.0</a></p>
<ul>
<li>文字教程:</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://www.xinxunwei.com/bjbcj/2016/0119/5261.html">http://www.xinxunwei.com/bjbcj/2016/0119/5261.html</a></p>
<ul>
<li>Ubuntu系统安装:</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/dkh_321/article/details/79304377">https://blog.csdn.net/dkh_321/article/details/79304377</a></p>
<p>　　</p>

        
        
          <blockquote id="copyright">
              <p>Ursprünglicher Link: <a href="http://noteforme.github.io.com/page/15/index.html">http://noteforme.github.io.com/page/15/index.html</a></p>
              <p>Copyright-Erklärung: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Aktie:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Toolbar" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/12/Toolbar/">Toolbar</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-12T08:35:05.000Z" itemprop="datePublished">2017年10月12日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2017/10/12/Toolbar/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Gästebuch
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://developer.android.com/training/appbar/setting-up.html">https://developer.android.com/training/appbar/setting-up.html</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/xiewenfeng/statusbartextcolorchange">https://github.com/xiewenfeng/statusbartextcolorchange</a></p>
<p>目前只要考虑 5.0以上系统就可以了,有些flag虽然被标记为Deprecated,但是系统也还在用，所以有必要研究。</p>
 <img src="/2017/10/12/Toolbar/tool_color.png" alt="tool设置" style="zoom:50%;">

<p> <a target="_blank" rel="noopener" href="http://blog.csdn.net/a553181867/article/details/51336899">http://blog.csdn.net/a553181867/article/details/51336899</a></p>
<h3 id="statebar"><a href="#statebar" class="headerlink" title="statebar"></a>statebar</h3><p>实现沉浸式状态栏主要跟以下四个Api相关:</p>
<ul>
<li>View#setSystemUiVisibility()</li>
<li>Window#addFlags()</li>
<li>View#setFitsSystemWindows</li>
<li>Window#setStatusBarColor()</li>
</ul>
<h5 id="View-setSystemUiVisibility-及其各种Flags"><a href="#View-setSystemUiVisibility-及其各种Flags" class="headerlink" title="View#setSystemUiVisibility()及其各种Flags"></a>View#setSystemUiVisibility()及其各种Flags</h5><p>首先setSystemUiVisibility()这个方法就是设置状态栏或者导航栏的各种属性的，哪都有些可以设置的属性呢？</p>
<ul>
<li> View.SYSTEM_UI_FLAG_FULLSCREEN</li>
</ul>
<p>  视图全屏并隐藏状态栏，当用户交互时（如下滑状态栏）会恢复隐藏的状态栏（例子：电子书阅读）缺点：进入Activity会产生一个从非全屏到全屏的闪动效果</p>
<p>  <img src="/2017/10/12/Toolbar/View.SYSTEM_UI_FLAG_FULLSCREEN.gif" alt="View.SYSTEM_UI_FLAG_FULLSCREEN"></p>
<ul>
<li><p>View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY</p>
<p>粘性沉浸模式，需要和SYSTEM_UI_FLAG_FULLSCREEN或者SYSTEM_UI_FLAG_HIDE_NAVIGATION联用，当使用View.setSystemUiVisibility(View.SYSTEM_UI_FLAG_FULLSCREEN|View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY)联用时视图全屏，当用户产生交互时（如下滑状态栏）不会恢复状态栏，只会以半透明的方式覆盖在视图上面并在一定时间内自动消失</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_FULLSCREEN|View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY)</span><br></pre></td></tr></table></figure>

<p><img src="/2017/10/12/Toolbar/SYSTEM_UI_FLAG_IMMERSIVE_STICKY.gif" alt="SYSTEM_UI_FLAG_IMMERSIVE_STICKY"></p>
</li>
<li><p>View.SYSTEM_UI_FLAG_IMMERSIVE：<br> 沉浸模式，只能和View.SYSTEM_UI_FLAG_FULLSCREEN联用，效果和View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY一样，目前已被后者替代。</p>
</li>
<li><p>View.SYSTEM_UI_FLAG_LOW_PROFILE:<br> 低配模式，会隐藏一些不重要的状态栏和导航栏的图标,(用模拟器跑，只剩下电池了)</p>
</li>
<li><p>View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN：<br> 视图全屏且不会产生闪动，如果没有toolbar,contentview会占住statebar的位置，状态栏会覆盖在contentview上面.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isWhite = <span class="literal">false</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">change_statebar_element_color</span><span class="params">(view: <span class="type">View</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (isWhite) &#123;</span><br><span class="line">        window.decorView.systemUiVisibility = SYSTEM_UI_FLAG_LAYOUT_STABLE <span class="comment">//statebar 元素显示白色</span></span><br><span class="line">        isWhite = <span class="literal">false</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        window.decorView.systemUiVisibility =</span><br><span class="line">            SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN or SYSTEM_UI_FLAG_LIGHT_STATUS_BAR  <span class="comment">//显示黑色</span></span><br><span class="line">        isWhite = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>View.SYSTEM_UI_FLAG_LAYOUT_STABLE：<br> 使视图稳定，当使用fitSystemWindows（）（下面会介绍这个方法）需要视图稳定，一般和SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN联用,我使用这个属性后，能使<strong>statebar的电池条变成白色</strong>。</p>
</li>
<li><p>View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR:<br> Android6.0系统以上增加的属性，设置了这个属性，状态栏会以与状态栏背景颜色兼容的模式绘制。什么意思呢？就是说如果当前的状态栏颜色是浅色，那么就有可能造成状态栏上的图标看不清了，但是如果你设置这个属性以后，状态栏的图标就会以深色绘制，这样就没有什么UI上的问题了。</p>
</li>
</ul>
<h5 id="Window-addFlags"><a href="#Window-addFlags" class="headerlink" title="Window#addFlags()"></a>Window#addFlags()</h5><p>这种方式<strong>感觉是setSystemUiVisibility之前的用法</strong>了。</p>
<p>WindowManager.LayoutParams相关属性：</p>
<ul>
<li>FLAG_TRANSLUCENT_STATUS:<br> Android4.4系统增加的属性，它会使状态栏透明,并且自动执行View.SYSTEM_UI_FLAG_LAYOUT_STABLE和View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN</li>
<li>FLAG_FULLSCREEN:<br> 视图全屏并隐藏状态栏，效果相当于View.SYSTEM_UI_FLAG_FULLSCREEN+View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY，并且视图稳定（不会因为系统控件的变化（如输入法），而重新布局）</li>
<li>FLAG_FORCE_NOT_FULLSCREEN：<br> 重写了FLAG_FULLSCREEN并强制显示状态栏（没有啥用）</li>
<li>FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS：<br> Android5.0系统以上支持，如果设置了该属性，系统栏（状态栏和导航栏）将以透明背景绘制，并且该窗口中的相应区域将填充setStatusBar（）和setNavigationBarColor（）中设置的颜色。 现在项目就是用这种方式。<ol>
<li>感觉这也是设置stateBar颜色一种主要的方式。</li>
<li>另一种就是自己设置statebar颜色。</li>
</ol>
</li>
</ul>
<h4 id="几种全屏模式"><a href="#几种全屏模式" class="headerlink" title="几种全屏模式"></a>几种全屏模式</h4><h5 id="Lean-back"><a href="#Lean-back" class="headerlink" title="Lean back"></a>Lean back</h5><p>倾斜模式</p>
<p>When users want to bring back the system bars, they simply tap the screen anywhere.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">window.decorView.systemUiVisibility =</span><br><span class="line">    SYSTEM_UI_FLAG_FULLSCREEN or SYSTEM_UI_FLAG_HIDE_NAVIGATION</span><br></pre></td></tr></table></figure>

<p>轻触屏幕 会显示 底部导航如返回按钮 </p>
<h5 id="Immersive"><a href="#Immersive" class="headerlink" title="Immersive"></a>Immersive</h5><p>沉浸模式：从边缘滑动，显示系统Bar,也可以通过回调显示系统控件</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">window.decorView.systemUiVisibility =</span><br><span class="line">    SYSTEM_UI_FLAG_FULLSCREEN or SYSTEM_UI_FLAG_HIDE_NAVIGATION or  SYSTEM_UI_FLAG_IMMERSIVE</span><br></pre></td></tr></table></figure>



<h5 id="Sticky-immersive"><a href="#Sticky-immersive" class="headerlink" title="Sticky immersive"></a>Sticky immersive</h5><p>从边缘滑动，显示系统Bar,statebar.又恢复了。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">window.decorView.systemUiVisibility =</span><br><span class="line">    SYSTEM_UI_FLAG_FULLSCREEN or SYSTEM_UI_FLAG_HIDE_NAVIGATION or  SYSTEM_UI_FLAG_IMMERSIVE_STICKY</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://developer.android.com/training/system-ui/immersive">https://developer.android.com/training/system-ui/immersive</a></p>
<p>android 11  systemUiVisibility过期需要更新</p>
<h4 id="Statabar-Color"><a href="#Statabar-Color" class="headerlink" title="Statabar Color"></a>Statabar Color</h4><ol>
<li><p>Application AppTheme statusBarColor</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;AppTheme&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Theme.AppCompat.Light.NoActionBar&quot;</span>&gt;</span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- Customize your theme here. --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorPrimary&quot;</span>&gt;</span>@color/colorPrimary<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorPrimaryDark&quot;</span>&gt;</span>@color/colorPrimaryDark<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;colorAccent&quot;</span>&gt;</span>@color/colorAccent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:statusBarColor&quot;</span>&gt;</span> @android:color/white<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>Activity设置</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.R) &#123;</span><br><span class="line">    window.decorView.systemUiVisibility =</span><br><span class="line">        View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    window.insetsController?.setSystemBarsAppearance(</span><br><span class="line">        WindowInsetsController.APPEARANCE_LIGHT_STATUS_BARS,</span><br><span class="line">        WindowInsetsController.APPEARANCE_LIGHT_STATUS_BARS</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="Statabar-element-Color"><a href="#Statabar-element-Color" class="headerlink" title="Statabar element Color"></a>Statabar element Color</h5><p>两种方式</p>
<h6 id="systemUiVisibility"><a href="#systemUiVisibility" class="headerlink" title="systemUiVisibility"></a>systemUiVisibility</h6><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">window.decorView.systemUiVisibility = SYSTEM_UI_FLAG_LAYOUT_STABLE <span class="comment">//statebar 元素显示白色</span></span><br><span class="line"></span><br><span class="line">window.decorView.systemUiVisibility = SYSTEM_UI_FLAG_LIGHT_STATUS_BAR  <span class="comment">//显示黑色</span></span><br></pre></td></tr></table></figure>



<h6 id="主题配置-gt-23"><a href="#主题配置-gt-23" class="headerlink" title="主题配置&gt;23"></a>主题配置&gt;23</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowLightStatusBar&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>false : 白色</p>
<p>true :  黑色</p>
<p><a target="_blank" rel="noopener" href="https://imstudio.medium.com/android-change-status-bar-text-color-659680fce49b">https://imstudio.medium.com/android-change-status-bar-text-color-659680fce49b</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/training/system-ui">https://developer.android.com/training/system-ui</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/shanshui911587154/article/details/86623646">https://blog.csdn.net/shanshui911587154/article/details/86623646</a></p>
<h4 id="WindowInsetsController"><a href="#WindowInsetsController" class="headerlink" title="WindowInsetsController"></a>WindowInsetsController</h4><p>Android11 使用</p>
<h5 id="statabar-text-color"><a href="#statabar-text-color" class="headerlink" title="statabar text color"></a>statabar text color</h5><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequiresApi(Build.VERSION_CODES.R)</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">AppearanceLightStatusBars</span><span class="params">(view: <span class="type">android</span>.<span class="type">view</span>.<span class="type">View</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (isWhite) &#123;</span><br><span class="line">        controller?.setSystemBarsAppearance(</span><br><span class="line">            WindowInsetsController.APPEARANCE_LIGHT_STATUS_BARS,</span><br><span class="line">            WindowInsetsController.APPEARANCE_LIGHT_STATUS_BARS</span><br><span class="line">        )</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        controller?.setSystemBarsAppearance(</span><br><span class="line">            <span class="number">0</span>,</span><br><span class="line">            WindowInsetsController.APPEARANCE_LIGHT_STATUS_BARS</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">    isWhite = !isWhite</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="statebar-hide"><a href="#statebar-hide" class="headerlink" title="statebar hide"></a>statebar hide</h5><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> isHide = <span class="literal">true</span></span><br><span class="line"><span class="meta">@RequiresApi(Build.VERSION_CODES.R)</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">hide_state_bar</span><span class="params">(view: <span class="type">android</span>.<span class="type">view</span>.<span class="type">View</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (isHide) &#123;</span><br><span class="line">        controller?.hide(WindowInsetsCompat.Type.statusBars())</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        controller?.show(WindowInsetsCompat.Type.statusBars())</span><br><span class="line">    &#125;</span><br><span class="line">    isHide = !isHide</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/jingzz1/article/details/111468726">https://blog.csdn.net/jingzz1/article/details/111468726</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6940048488071856164">https://juejin.cn/post/6940048488071856164</a></p>
<h3 id="ToolBar"><a href="#ToolBar" class="headerlink" title="ToolBar"></a>ToolBar</h3><h5 id="颜色设置"><a href="#颜色设置" class="headerlink" title="颜色设置"></a>颜色设置</h5><p>  AppTheme下的设置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;application</span><br><span class="line">      android:name=&quot;.application.NBBApplication&quot;</span><br><span class="line">      android:allowBackup=&quot;true&quot;</span><br><span class="line">      android:icon=&quot;@mipmap/icon&quot;</span><br><span class="line">      android:label=&quot;@string/app_name&quot;</span><br><span class="line">      android:supportsRtl=&quot;true&quot;</span><br><span class="line">      android:theme=&quot;@style/AppTheme&quot;&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>Toolbar颜色:<br><code>&lt;item name=&quot;colorPrimary&quot;&gt;@color/toolbar_color&lt;/item&gt;</code></p>
</li>
<li><p>状态栏设置 :<br><code>&lt;item name=&quot;android:windowTranslucentStatus&quot;&gt;true&lt;/item&gt;</code><br> 在 API 19 及更高版本上，Toolbar 内容延伸至状态栏上去了, statebar把toolbar给覆盖了<br> 要解决这个问题就需要下面的属性</p>
</li>
<li><p>android:fitsSystemWindows =”true”<br>  这个属性能保持与statebar一定 的padding,能解决上面windowTranslucentStatus的重叠问题</p>
<p>   参考: <a target="_blank" rel="noopener" href="http://yifeng.studio/2017/02/19/android-statusbar/">亦枫</a> </p>
</li>
<li><p>去掉阴影线</p>
<p>   toolbar底部会有一条阴影线,通过AppBarLayout标签下的app:elevation=”0dp”去掉</p>
</li>
</ul>
<h5 id="自定义返回键"><a href="#自定义返回键" class="headerlink" title="自定义返回键"></a>自定义返回键</h5><p><code> mToolbar.setNavigationIcon(R.mipmap.ic_back);//自定义返回键</code></p>
<p>或者这样设置<br> <code>app:navigationIcon=&quot;@mipmap/ic_back&quot;</code></p>
<h5 id="toolbar-xml解读"><a href="#toolbar-xml解读" class="headerlink" title="toolbar.xml解读"></a>toolbar.xml解读</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.design.widget.AppBarLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:elevation</span>=<span class="string">&quot;0dp&quot;</span>&gt;</span>                    			 //设置仰角,0dp可以去掉底部的线</span><br><span class="line"></span><br><span class="line">    &lt;android.support.v7.widget.Toolbar</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;?attr/actionBarSize&quot;</span><br><span class="line">        android:minHeight=&quot;?actionBarSize&quot;</span><br><span class="line">        android:theme=&quot;@style/ThemeOverlay.AppCompat.ActionBar&quot;			//toolbar主题</span><br><span class="line">        app:popupTheme=&quot;@style/ThemeOverlay.AppCompat.Light&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:id=&quot;@+id/tb_title&quot;</span><br><span class="line">            style=&quot;@style/TextAppearance.AppCompat.Widget.ActionBar.Title&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_gravity=&quot;center&quot;</span><br><span class="line">            android:text=&quot;标题&quot;</span><br><span class="line">            android:textColor=&quot;#333333&quot;</span><br><span class="line">            android:textSize=&quot;18sp&quot; /&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.v7.widget.Toolbar</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.design.widget.AppBarLayout</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<p>还有一种方式是在application设置，这样就不用集成baseActivity</p>
<h3 id="menu设置"><a href="#menu设置" class="headerlink" title="menu设置"></a>menu设置</h3><p>AppBarLayout下的 <code>app:theme=&quot;@style/toolbar_menu&quot;</code>用于设置menu</p>
<h5 id="menu字体颜色"><a href="#menu字体颜色" class="headerlink" title="menu字体颜色"></a>menu字体颜色</h5><p>需要设置 app:theme ,用 android:theme不起作用.</p>
<p><code>&lt;item name=&quot;android:actionMenuTextColor&quot;&gt;@color/text_my_black&lt;/item&gt;</code></p>
<h5 id="menu事件"><a href="#menu事件" class="headerlink" title="menu事件"></a>menu事件</h5><pre><code>@Override
public boolean onCreateOptionsMenu(Menu menu) &#123;
    getMenuInflater().inflate(R.menu.menu_login, menu);
    menu.findItem(R.id.item_right_text).setTitle(&quot;注册&quot;); //设置文字
    return true;
&#125;

@Override
public boolean onOptionsItemSelected(MenuItem item) &#123;
    switch (item.getItemId()) &#123;
        
            break;
    &#125;
    return super.onOptionsItemSelected(item);
&#125;
</code></pre>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/guyuealian/article/details/51721167">https://blog.csdn.net/guyuealian/article/details/51721167</a></p>
<p>使用toolbar过程中遇到了一些问题</p>
<p>问题 1</p>
<p>弹出键盘后 editext不见了，应该是toolbar被拉伸了</p>
<p>暂时解决方式:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;activity</span><br><span class="line">   android:name=&quot;.activity.WebActivity&quot;</span><br><span class="line">   android:hardwareAccelerated=&quot;true&quot;</span><br><span class="line">   android:screenOrientation=&quot;portrait&quot;</span><br><span class="line">   android:windowSoftInputMode=&quot;adjustPan&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://github.com/CoolThink/StatusBarAdapt/issues/2">https://github.com/CoolThink/StatusBarAdapt/issues/2</a></p>
<h5 id="fragment使用toolbar"><a href="#fragment使用toolbar" class="headerlink" title="fragment使用toolbar"></a>fragment使用toolbar</h5><p><a target="_blank" rel="noopener" href="http://wuxiaolong.me/2015/12/21/fragmentToolbar/">http://wuxiaolong.me/2015/12/21/fragmentToolbar/</a></p>
<h5 id="三条线的颜色修改"><a href="#三条线的颜色修改" class="headerlink" title="三条线的颜色修改"></a>三条线的颜色修改</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;DrawerArrowStyle&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Base.Widget.AppCompat.DrawerArrowToggle&quot;</span>&gt;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;spinBars&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;color&quot;</span>&gt;</span>@android:color/white<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>具体可以查看mineutil:PopupWindowActivity</p>
<ul>
<li>溢出菜单三个点离右边的距离</li>
</ul>
<p> AppTheme中设置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:actionOverflowButtonStyle&quot;</span>&gt;</span>@style/OverflowMenuStyle<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;OverflowMenuStyle&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Widget.AppCompat.Light.PopupMenu.Overflow&quot;</span>&gt;</span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;overlapAnchor&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span>  <span class="comment">&lt;!--把该属性改为false即可使menu位置位于toolbar之下--&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:src&quot;</span>&gt;</span>@mipmap/doc_ic_new_patient<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:paddingRight&quot;</span>&gt;</span>15dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>





<table>
<thead>
<tr>
<th>操作符</th>
<th>描述</th>
<th>例子</th>
</tr>
</thead>
<tbody><tr>
<td>＆</td>
<td>如果相对应位都是1，则结果为1，否则为0</td>
<td>（A＆B），得到12，即0000 1100</td>
</tr>
<tr>
<td>|</td>
<td>如果相对应位都是 0，则结果为 0，否则为 1</td>
<td>（A | B）得到61，即 0011 1101</td>
</tr>
<tr>
<td>^</td>
<td>如果相对应位值相同，则结果为0，否则为1</td>
<td>（A ^ B）得到49，即 0011 0001</td>
</tr>
</tbody></table>
<p><a target="_blank" rel="noopener" href="https://noteforme.github.io/2018/01/07/Operators/">https://noteforme.github.io/2018/01/07/Operators/</a></p>

        
        
          <blockquote id="copyright">
              <p>Ursprünglicher Link: <a href="http://noteforme.github.io.com/page/15/index.html">http://noteforme.github.io.com/page/15/index.html</a></p>
              <p>Copyright-Erklärung: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Aktie:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-DesignPattern_Builder" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/07/DesignPattern_Builder/">DesignPattern-Builder</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-07T09:45:46.000Z" itemprop="datePublished">2017年10月07日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/DesignPatterns/">DesignPatterns</a>
  </div>

      
      
<a href="/2017/10/07/DesignPattern_Builder/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Gästebuch
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Builder模式"><a href="#Builder模式" class="headerlink" title="Builder模式"></a>Builder模式</h1><p>不直接生成想要的对象，而是让客户端利用所有必要的参数调用构造器（或者静态工厂），得到一个builder对象，然后客户端在builder对象上调用类似于setter的方法，来设置每个相关的可选参数</p>
<p> 既能保证像重叠构造器模式那样的安全性，也能保证像JavaBeans模式那么好的可读性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NutritionFacts_03_Builder</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> servingSize;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> servings;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> calories;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> fat;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> sodium;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> carbohydrate;</span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">static</span>  <span class="class"><span class="keyword">class</span>  <span class="title">Builder</span></span>&#123;</span><br><span class="line">        <span class="comment">//Required parameters</span></span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> servingSize;</span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">final</span>  <span class="keyword">int</span> servings;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Optional parameters = initialized to default values</span></span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">int</span> calories     = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">int</span> fat          = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">int</span> carbohydrate = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">private</span>  <span class="keyword">int</span> sodium       = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Builder</span><span class="params">(<span class="keyword">int</span> servingSize, <span class="keyword">int</span> servings)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.servingSize = servingSize;</span><br><span class="line">            <span class="keyword">this</span>.servings = servings;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span>  Builder <span class="title">calories</span><span class="params">(<span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">            calories = val;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span>  Builder <span class="title">fat</span><span class="params">(<span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.fat = fat;</span><br><span class="line">            <span class="keyword">return</span>  <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span>  Builder <span class="title">carbohydrate</span><span class="params">(<span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">            carbohydrate = val;</span><br><span class="line">            <span class="keyword">return</span>  <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span>  Builder <span class="title">sodium</span><span class="params">(<span class="keyword">int</span> val)</span></span>&#123;</span><br><span class="line">            sodium = val;</span><br><span class="line">            <span class="keyword">return</span>  <span class="keyword">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span>  NutritionFacts_03_Builder <span class="title">build</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span>  <span class="keyword">new</span> NutritionFacts_03_Builder(<span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">NutritionFacts_03_Builder</span><span class="params">(Builder builder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.servingSize = builder.servingSize;</span><br><span class="line">        <span class="keyword">this</span>.servings = builder.servings;</span><br><span class="line">        <span class="keyword">this</span>.calories = builder.calories;</span><br><span class="line">        <span class="keyword">this</span>.fat = builder.fat;</span><br><span class="line">        <span class="keyword">this</span>.sodium = builder.sodium;</span><br><span class="line">        <span class="keyword">this</span>.carbohydrate = builder.carbohydrate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        NutritionFacts_03_Builder cocaCola = <span class="keyword">new</span> NutritionFacts_03_Builder.Builder(<span class="number">240</span>,<span class="number">9</span>)</span><br><span class="line">                .calories(<span class="number">100</span>).sodium(<span class="number">35</span>).carbohydrate(<span class="number">27</span>).build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id=""><a href="#" class="headerlink" title=""></a></h2><p> 返回的this时怎么替代对象的</p>
<h5 id="对象创建更加灵活"><a href="#对象创建更加灵活" class="headerlink" title="对象创建更加灵活"></a>对象创建更加灵活</h5><p>当 isRef 为 true 的时候，arg 表示 String 类型的 refBeanId，type 不需要设置；当 isRef 为 false 的时候，arg、type 都需要设置</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConstructorArg</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">boolean</span> isRef;</span><br><span class="line">    <span class="keyword">private</span> Class <span class="keyword">type</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Object</span> arg;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="title">ConstructorArg</span>(<span class="params">Builder builder</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.isRef = isRef;</span><br><span class="line">        <span class="built_in">this</span>.type = <span class="keyword">type</span>;</span><br><span class="line">        <span class="built_in">this</span>.arg = arg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">boolean</span> isRef;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> Class <span class="keyword">type</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">Object</span> arg;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="function"><span class="title">Builder</span>(<span class="params"><span class="built_in">boolean</span> isRef</span>)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.isRef = isRef;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Builder <span class="function"><span class="title">setType</span>(<span class="params">Class <span class="keyword">type</span></span>)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.type = <span class="keyword">type</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> Builder <span class="function"><span class="title">setArg</span>(<span class="params"><span class="built_in">Object</span> arg</span>)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.arg = arg;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> ConstructorArg <span class="function"><span class="title">build</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (isRef) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!(arg <span class="keyword">instanceof</span> <span class="built_in">String</span>)) &#123;</span><br><span class="line">                    <span class="comment">//这里refBeanId是ConstructorArg吗？只是判断了下arg类型是否为String</span></span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;当 isRef 为 true 的时候，arg 表示 String 类型refBeanId&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">type</span> != <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;当 isRef 为 true 的时候，type 不需要设置&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!isRef) &#123;</span><br><span class="line">                <span class="keyword">if</span> (arg == <span class="literal">null</span> || <span class="keyword">type</span> == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">&quot;当 isRef 为 false 的时候，arg、type 都需要设置&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ConstructorArg(<span class="built_in">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
        
          <blockquote id="copyright">
              <p>Ursprünglicher Link: <a href="http://noteforme.github.io.com/page/15/index.html">http://noteforme.github.io.com/page/15/index.html</a></p>
              <p>Copyright-Erklärung: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Aktie:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Fragment" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/10/05/Fragment/">Fragment</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-05T11:54:50.000Z" itemprop="datePublished">2017年10月05日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2017/10/05/Fragment/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Gästebuch
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://developer.android.com/reference/android/app/Fragment.html">https://developer.android.com/reference/android/app/Fragment.html</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/components/fragments.html">https://developer.android.com/guide/components/fragments.html</a></p>
<p><a target="_blank" rel="noopener" href="https://wizardforcel.gitbooks.io/w3school-android/content/77.html">https://wizardforcel.gitbooks.io/w3school-android/content/77.html</a><br><a target="_blank" rel="noopener" href="https://juejin.im/post/5901b564570c35005804424b">https://juejin.im/post/5901b564570c35005804424b</a></p>
<h4 id="Lifecycle"><a href="#Lifecycle" class="headerlink" title="Lifecycle"></a>Lifecycle</h4><p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/fragments/lifecycle">https://developer.android.com/guide/fragments/lifecycle</a></p>
<ul>
<li>onViewCreated(View view, Bundle savedInstanceState)</li>
</ul>
<p>Called immediately after <code>onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)</code> has returned, but before any saved state has been restored in to the view.</p>
<p><img src="/2017/10/05/Fragment/fragment-view-lifecycle.png"></p>
<h5 id="fragment回调"><a href="#fragment回调" class="headerlink" title="fragment回调"></a>fragment回调</h5><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mListener: IFeedBackListener? = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onAttach</span><span class="params">(context: <span class="type">Context</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onAttach(context)</span><br><span class="line">    <span class="keyword">if</span> (parentFragment <span class="keyword">is</span> IFeedBackListener) &#123;</span><br><span class="line">        mListener = parentFragment <span class="keyword">as</span> IFeedBackListener</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (context <span class="keyword">is</span> IFeedBackListener) &#123;</span><br><span class="line">        mListener = context</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> RuntimeException(context?.toString() + <span class="string">&quot; must implement ISelectListener&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://noteforme.github.io/2017/10/05/Fragment/">https://noteforme.github.io/2017/10/05/Fragment/</a></p>
<h4 id="Fragment重叠"><a href="#Fragment重叠" class="headerlink" title="Fragment重叠"></a>Fragment重叠</h4><p> 横竖屏切换</p>
<p>被系统回收（复现 进入开发者选项 -》不保留活动）</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c12a98a36b2b">https://www.jianshu.com/p/c12a98a36b2b</a></p>
<h5 id="BottomNavigationView-error"><a href="#BottomNavigationView-error" class="headerlink" title="BottomNavigationView error"></a>BottomNavigationView error</h5><p>使用BottomNavigationView出现很严重的问题,很久才找到原因</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Caused <span class="keyword">by</span>: android.<span class="keyword">view</span>.InflateException: Binary XML <span class="keyword">file</span> <span class="keyword">line</span> #16: Binary XML <span class="keyword">file</span> <span class="keyword">line</span> #16: <span class="keyword">Error</span> inflating <span class="keyword">class</span> com.google.android.material.bottomnavigation.BottomNavigationView</span><br><span class="line">    Caused <span class="keyword">by</span>: android.<span class="keyword">view</span>.InflateException: Binary XML <span class="keyword">file</span> <span class="keyword">line</span> #16: <span class="keyword">Error</span> inflating <span class="keyword">class</span> com.google.android.material.bottomnavigation.BottomNavigationView</span><br></pre></td></tr></table></figure>

<p>因为 AndroidManifest.xml  application下的android:theme=”@style/AppTheme”多出了,把下面的删除了就好了.</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="built_in">item</span> <span class="built_in">name</span>=<span class="string">&quot;android:textColorSecondary&quot;</span>&gt;<span class="comment">#ffffff&lt;/item&gt;</span></span><br><span class="line">&lt;<span class="built_in">item</span> <span class="built_in">name</span>=<span class="string">&quot;android:actionOverflowButtonStyle&quot;</span>&gt;@style/OverflowMenuStyle&lt;/<span class="built_in">item</span>&gt;</span><br><span class="line">&lt;<span class="built_in">item</span> <span class="built_in">name</span>=<span class="string">&quot;android:listDivider&quot;</span>&gt;@drawable/divider&lt;/<span class="built_in">item</span>&gt;</span><br></pre></td></tr></table></figure>

<h5 id="重叠原因"><a href="#重叠原因" class="headerlink" title="重叠原因"></a>重叠原因</h5><blockquote>
<p> 旋转屏幕时候，创建的homeFragment会被回收,在销毁前，执行了onSaveInstanceState(Bundle outState)这个方法。这个方法会保存activity的一些信息，其中就包括添加过的fragment，Activity重建后，再次初始化homeFragment，接着显示，导致了重叠的问题。</p>
</blockquote>
<h5 id="代码验证"><a href="#代码验证" class="headerlink" title="代码验证"></a>代码验证</h5><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">initFragment</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (homeFragment == <span class="literal">null</span>) &#123;</span><br><span class="line">        homeFragment = HomeFragment()</span><br><span class="line">        addFragment(homeFragment!!)</span><br><span class="line">        showFragment(homeFragment)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">    Timber.d(<span class="string">&quot;onCreate() <span class="variable">$homeFragment</span>&quot;</span>)</span><br><span class="line">    initFragment()</span><br><span class="line">    Timber.d(<span class="string">&quot;initFragment() <span class="variable">$homeFragment</span>&quot;</span>)   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onDestroy</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy()</span><br><span class="line">        Timber.tag(TAG).d(<span class="string">&quot;onDestroy() homeFragment <span class="variable">$homeFragment</span>&quot;</span>)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>日志</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onCreate() taskId  <span class="number">641</span></span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onCreate() homeFragment null</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;<span class="number">1</span>adc<span class="number">3</span>fa&#125; (b<span class="number">0660244</span>-<span class="number">39</span>c<span class="number">4</span>-<span class="number">4104</span>-b<span class="number">558</span>-f<span class="number">5384</span>c<span class="number">7</span>adb<span class="number">0</span>d) id=<span class="number">0</span>x<span class="number">7</span>f<span class="number">09010</span>e&#125;</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStart()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onResume()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onPause()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onSaveInstanceState()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStop()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onDestroy()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onDestroy() homeFragment HomeFragment&#123;<span class="number">1</span>adc<span class="number">3</span>fa&#125; (d<span class="number">84</span>f<span class="number">5956</span>-fa<span class="number">2</span>c-<span class="number">4</span>cd<span class="number">2</span>-<span class="number">8397</span>-<span class="number">0904040</span>d<span class="number">2</span>a<span class="number">6</span>f)&#125;</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onCreate() taskId  <span class="number">641</span></span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onCreate() homeFragment null</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;ac<span class="number">076</span>db&#125; (f<span class="number">8</span>ee<span class="number">348</span>b-<span class="number">6</span>ff<span class="number">7</span>-<span class="number">4</span>b<span class="number">1</span>e-ba<span class="number">27</span>-<span class="number">6</span>e<span class="number">47</span>e<span class="number">848</span>f<span class="number">623</span>) id=<span class="number">0</span>x<span class="number">7</span>f<span class="number">09010</span>e&#125;</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStart()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onRestoreInstanceState()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onResume()</span><br></pre></td></tr></table></figure>

<p>从 initFragment（） 1adc3fa , ac076db 可以看到，HomeFrgment重新创建了.</p>
<h5 id="处理方法"><a href="#处理方法" class="headerlink" title="处理方法"></a>处理方法</h5><ol>
<li><p>onSaveInstanceState 不保存信息</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onSaveInstanceState</span><span class="params">(outState: <span class="type">Bundle</span>)</span></span> &#123;</span><br><span class="line"><span class="comment">//        super.onSaveInstanceState(outState)</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>这种方式的弊端就是，切换后总是回到首页.</p>
</li>
<li><p>onSaveInstanceState() 保存Fragment</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">override <span class="keyword">fun</span> on<span class="constructor">Create(<span class="params">savedInstanceState</span>: Bundle?)</span> &#123;</span><br><span class="line">    super.on<span class="constructor">Create(<span class="params">savedInstanceState</span>)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (savedInstanceState != null) &#123;</span><br><span class="line">        <span class="comment">/*获取保存的fragment  没有的话返回null*/</span></span><br><span class="line">        homeFragment = supportFragmentManager.get<span class="constructor">Fragment(<span class="params">savedInstanceState</span>, HOME_FRAGMENT_KEY)</span> <span class="keyword">as</span> HomeFragment?</span><br><span class="line">        healthFragment = supportFragmentManager.get<span class="constructor">Fragment(<span class="params">savedInstanceState</span>, DASHBOARD_FRAGMENT_KEY)</span> <span class="keyword">as</span> HealthFragment?</span><br><span class="line">        personFragment = supportFragmentManager.get<span class="constructor">Fragment(<span class="params">savedInstanceState</span>, NOTICE_FRAGMENT_KEY)</span> <span class="keyword">as</span> PersonFragment?</span><br><span class="line">        add<span class="constructor">ToList(<span class="params">homeFragment</span>)</span></span><br><span class="line">        add<span class="constructor">ToList(<span class="params">healthFragment</span>)</span></span><br><span class="line">        add<span class="constructor">ToList(<span class="params">personFragment</span>)</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        init<span class="constructor">Fragment()</span></span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> override <span class="keyword">fun</span> on<span class="constructor">SaveInstanceState(<span class="params">outState</span>: Bundle)</span> &#123;</span><br><span class="line">        super.on<span class="constructor">SaveInstanceState(<span class="params">outState</span>)</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>d(<span class="string">&quot;MainActivity onSaveInstanceState&quot;</span>)</span><br><span class="line">        <span class="comment">/*fragment不为空时 保存*/</span><span class="keyword">if</span> (homeFragment != null) &#123;</span><br><span class="line">            supportFragmentManager.put<span class="constructor">Fragment(<span class="params">outState</span>!!, HOME_FRAGMENT_KEY, <span class="params">homeFragment</span>!!)</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (healthFragment != null) &#123;</span><br><span class="line">            supportFragmentManager.put<span class="constructor">Fragment(<span class="params">outState</span>!!, DASHBOARD_FRAGMENT_KEY, <span class="params">healthFragment</span>!!)</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (personFragment != null) &#123;</span><br><span class="line">            supportFragmentManager.put<span class="constructor">Fragment(<span class="params">outState</span>!!, NOTICE_FRAGMENT_KEY, <span class="params">personFragment</span>!!)</span></span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure></li>
</ol>
<p>这种方式，可以解决问题，但是打印的日志HomeFragment还是不一样，是什么情况？</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onCreate() taskId  <span class="number">4437</span></span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;dc<span class="number">2914</span>d&#125; (<span class="number">5</span>f<span class="number">30</span>b<span class="number">0</span>dd-a<span class="number">8</span>d<span class="number">2</span>-<span class="number">4</span>b<span class="number">3</span>c-a<span class="number">27</span>f-<span class="number">1</span>d<span class="number">160</span>a<span class="number">9</span>da<span class="number">58</span>e) id=<span class="number">0</span>x<span class="number">7</span>f<span class="number">09010</span>e&#125;</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStart()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onResume()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity$onCreate: navigation_health</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onPause()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onSaveInstanceState()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity: MainActivity onSaveInstanceState</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStop()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onDestroy()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onDestroy() homeFragment HomeFragment&#123;dc<span class="number">2914</span>d&#125; (ab<span class="number">276</span>ea<span class="number">2</span>-<span class="number">5</span>fa<span class="number">2</span>-<span class="number">4</span>d<span class="number">79</span>-b<span class="number">6</span>a<span class="number">6</span>-af<span class="number">7143</span>b<span class="number">114</span>e<span class="number">8</span>)&#125;</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onCreate() taskId  <span class="number">4437</span></span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity: fragmentList数量<span class="number">1</span></span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity: fragmentList数量<span class="number">2</span></span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity: fragmentList数量<span class="number">2</span></span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;<span class="number">9139494</span>&#125; (<span class="number">5</span>f<span class="number">30</span>b<span class="number">0</span>dd-a<span class="number">8</span>d<span class="number">2</span>-<span class="number">4</span>b<span class="number">3</span>c-a<span class="number">27</span>f-<span class="number">1</span>d<span class="number">160</span>a<span class="number">9</span>da<span class="number">58</span>e) id=<span class="number">0</span>x<span class="number">7</span>f<span class="number">09010</span>e&#125;</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStart()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onRestoreInstanceState()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onResume()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onPause()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onSaveInstanceState()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity: MainActivity onSaveInstanceState</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStop()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onDestroy()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onDestroy() homeFragment HomeFragment&#123;<span class="number">9139494</span>&#125; (cadcb<span class="number">63</span>f-<span class="number">8516</span>-<span class="number">4</span>d<span class="number">44</span>-<span class="number">8</span>f<span class="number">3</span>c-<span class="number">75</span>b<span class="number">0</span>c<span class="number">8</span>e<span class="number">9</span>f<span class="number">27</span>f)&#125;</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/yuzhiqiang_1993/article/details/75014591">https://blog.csdn.net/yuzhiqiang_1993/article/details/75014591</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/78ec81b42f92">https://www.jianshu.com/p/78ec81b42f92</a></p>
<h5 id="下面这种方式没理解"><a href="#下面这种方式没理解" class="headerlink" title="下面这种方式没理解"></a>下面这种方式没理解</h5><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d9143a92ad94">https://www.jianshu.com/p/d9143a92ad94</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c12a98a36b2b">https://www.jianshu.com/p/c12a98a36b2b</a></p>
<h4 id="横竖屏切换，Fragment实例复用"><a href="#横竖屏切换，Fragment实例复用" class="headerlink" title="横竖屏切换，Fragment实例复用"></a>横竖屏切换，Fragment实例复用</h4><h5 id="setRetainInstance-true"><a href="#setRetainInstance-true" class="headerlink" title="setRetainInstance=true"></a>setRetainInstance=true</h5><p><strong>retainInstance = true已经过期，改用ViewModel</strong></p>
<p>LifeFragment</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">    retainInstance = <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">fun</span> init<span class="constructor">Fragment()</span> &#123;</span><br><span class="line">    var lifeFragment = supportFragmentManager.find<span class="constructor">FragmentById(R.<span class="params">id</span>.<span class="params">fl_content</span>)</span></span><br><span class="line">    <span class="keyword">if</span> (lifeFragment<span class="operator"> == </span>null) &#123;</span><br><span class="line">        lifeFragment = <span class="constructor">LifeFragment()</span></span><br><span class="line">        supportFragmentManager.<span class="keyword">begin</span><span class="constructor">Transaction()</span>.add(<span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>id.fl_content, lifeFragment).commit<span class="literal">()</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>d(<span class="string">&quot;LifeFragment $lifeFragment&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>切换屏幕后 LifeFragment,ondestroy()没志行,后面的Oncreate()也没有创建.</p>
<figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">D</span>/<span class="variable">LifeActivity</span> <span class="variable">LaunchModeActivity</span>: <span class="function"><span class="title">onCreate</span>() <span class="variable">taskId</span>  <span class="number">599</span></span></span><br><span class="line"><span class="function"><span class="variable">D</span>/<span class="variable">LifeActivity</span>: <span class="variable">LifeFragment</span> <span class="variable">LifeFragment</span>&#123;<span class="number">6</span><span class="variable">a86311</span>&#125; (<span class="number">70133</span><span class="variable">a14</span>-<span class="number">6</span><span class="variable">dcf</span>-<span class="number">4</span><span class="variable">f8b</span>-<span class="variable">beee</span>-<span class="number">6</span><span class="variable">cd31d6623ba</span>) <span class="variable">id</span>=<span class="number">0</span><span class="variable">x7f090109</span>&#125;</span></span><br><span class="line"><span class="function"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="title">onAttach</span>(<span class="variable">Context</span> <span class="variable">context</span>)</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onCreate</span>() <span class="variable">savedInstanceState</span>    <span class="variable"><span class="literal">null</span></span></span></span><br><span class="line"><span class="function"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="title">onCreateView</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onActivityCreated</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onStart</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onResume</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onPause</span>() </span></span><br><span class="line"><span class="function"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="title">onStop</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onDestroyView</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onDetach</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onAttach</span>(<span class="variable">Context</span> <span class="variable">context</span>)</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeActivity</span> <span class="variable">LaunchModeActivity</span>: <span class="function"><span class="title">onCreate</span>() <span class="variable">taskId</span>  <span class="number">599</span></span></span><br><span class="line"><span class="function"><span class="variable">D</span>/<span class="variable">LifeActivity</span>: <span class="variable">LifeFragment</span> <span class="variable">LifeFragment</span>&#123;<span class="number">6</span><span class="variable">a86311</span>&#125; (<span class="number">70133</span><span class="variable">a14</span>-<span class="number">6</span><span class="variable">dcf</span>-<span class="number">4</span><span class="variable">f8b</span>-<span class="variable">beee</span>-<span class="number">6</span><span class="variable">cd31d6623ba</span>) <span class="variable">id</span>=<span class="number">0</span><span class="variable">x7f090109</span>&#125;</span></span><br><span class="line"><span class="function"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="title">onCreateView</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onActivityCreated</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onStart</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onResume</span>()</span></span><br></pre></td></tr></table></figure>

<h4 id="Fragment懒加载"><a href="#Fragment懒加载" class="headerlink" title="Fragment懒加载"></a>Fragment懒加载</h4><p>Fragment和ViewPager一起使用会有个预加载机制，会把旁白的Fragment的生命周期方法<br>前半段先执行，然后执行自身的生命周期方法</p>
<p>在项目终从其他页面回到MainAcitivty的时候，三个页面的生命周期方法都跑了一遍</p>
<figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">　  <span class="variable">D</span>/<span class="variable">FinanceFragment</span>         <span class="variable">Test</span>: <span class="function"><span class="title">onStart</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">WealthFragment</span>         <span class="variable">Test</span>: <span class="function"><span class="title">onStart</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">MineFragment</span>         <span class="variable">Test</span>: <span class="function"><span class="title">onStart</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">FinanceFragment</span>         <span class="variable">Test</span>: <span class="function"><span class="title">onResume</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">WealthFragment</span>         <span class="variable">Test</span>: <span class="function"><span class="title">onResume</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">MineFragment</span>         <span class="variable">Test</span>: <span class="function"><span class="title">onResume</span>()</span></span><br></pre></td></tr></table></figure>


<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">     </span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">boolean</span> isPrepared;  <span class="comment">//判断view是否加载完成,在视图未初始化的时候，在lazyLoad当中就使用的话，就会有空指针的异常</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">boolean</span> isVisible;  <span class="comment">//判断当前Fragment是否可见状态,标志已经初始化完成，因为setUserVisibleHint是在onCreateView之前调用的</span></span><br><span class="line">	  <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="function"><span class="title">onViewCreated</span>(<span class="params">View view, <span class="meta">@Nullable</span> Bundle savedInstanceState</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onViewCreated(view, savedInstanceState);</span><br><span class="line">        isPrepared = <span class="literal">true</span>;</span><br><span class="line">        lazyLoad();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="function"><span class="title">onCreateView</span>(<span class="params">LayoutInflater inflater, <span class="meta">@Nullable</span> ViewGroup container, Bundle savedInstanceState</span>)</span> &#123;</span><br><span class="line"><span class="comment">//        Log.d(TAG + &quot;         Test&quot;, &quot; onCreateView()&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (rootView == <span class="literal">null</span>) &#123;</span><br><span class="line">            int view = setLayoutId();</span><br><span class="line">            <span class="keyword">if</span> (view != <span class="number">0</span>) &#123;</span><br><span class="line">                rootView = inflater.inflate(view, container, <span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ViewGroup parent = (ViewGroup) rootView.getParent();</span><br><span class="line">            <span class="keyword">if</span> (parent != <span class="literal">null</span>) &#123;</span><br><span class="line">                parent.removeView(rootView);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        initView(rootView);</span><br><span class="line">        <span class="keyword">return</span> rootView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  http://www.10tiao.com/html/565/201702/2247483988/1.html</span></span><br><span class="line">    <span class="comment">// 标志位，标志已经初始化完成，因为setUserVisibleHint是在onCreateView之前调用的，</span></span><br><span class="line">    <span class="comment">// 在视图未初始化的时候，在lazyLoad当中就使用的话，就会有空指针的异常</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">boolean</span> isPrepared;</span><br><span class="line">    <span class="comment">//标志当前页面是否可见</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">boolean</span> isVisible;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="function"><span class="title">setUserVisibleHint</span>(<span class="params"><span class="built_in">boolean</span> isVisibleToUser</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.setUserVisibleHint(isVisibleToUser);</span><br><span class="line"><span class="comment">//        Log.d(TAG + &quot;         Test&quot;, &quot; setUserVisibleHint() is Visible : ?  &quot; + isVisibleToUser);</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (getUserVisibleHint()) &#123;</span><br><span class="line">            isVisible = <span class="literal">true</span>;</span><br><span class="line">            onVisible();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            isVisible = <span class="literal">false</span>;</span><br><span class="line">            onInvisible();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">void</span> <span class="function"><span class="title">onInvisible</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">void</span> <span class="function"><span class="title">onVisible</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        lazyLoad();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">void</span> <span class="function"><span class="title">lazyLoad</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!isVisible || !isPrepared) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        requestData();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 请求数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">void</span> <span class="function"><span class="title">requestData</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        Log.d(TAG + <span class="string">&quot;         Test&quot;</span>, <span class="string">&quot; requestData &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>参考: <a target="_blank" rel="noopener" href="http://www.10tiao.com/html/565/201702/2247483988/1.html">http://www.10tiao.com/html/565/201702/2247483988/1.html</a></p>
<h4 id="Activity-dialogFragment-的事件回调"><a href="#Activity-dialogFragment-的事件回调" class="headerlink" title="Activity  dialogFragment 的事件回调"></a>Activity  dialogFragment 的事件回调</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">ISelectListener</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">getItemPosition</span><span class="params">(position: <span class="type">Int</span>)</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mListener: ISelectListener? = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onAttach</span><span class="params">(context: <span class="type">Context</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onAttach(context)</span><br><span class="line">    <span class="keyword">if</span> (parentFragment <span class="keyword">is</span> ISelectListener)&#123;</span><br><span class="line">        mListener = parentFragment  <span class="keyword">as</span> ISelectListener</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (context <span class="keyword">is</span> ISelectListener) &#123;</span><br><span class="line">        mListener = context</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> RuntimeException(context!!.toString() + <span class="string">&quot; must implement ISelectListener&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/components/fragments.html">https://developer.android.com/guide/components/fragments.html</a></p>
<h4 id="onHiddenChanged切换刷新"><a href="#onHiddenChanged切换刷新" class="headerlink" title="onHiddenChanged切换刷新"></a>onHiddenChanged切换刷新</h4><p>使用hide()/show()发现生命周期基本不执行，不过可以用到这个onHiddenChanged();</p>
<p>看下执行的生命周期;   从 SecondFragment 页面开始到 -&gt;FirstFragment </p>
<blockquote>
<p>07-18 15:53:25.128 7758-7758/com.mineutils D/SecondFragment: onAttach(Context context)<br>07-18 15:53:25.129 7758-7758/com.mineutils D/SecondFragment: onCreate()<br>07-18 15:53:25.142 7758-7758/com.mineutils D/SecondFragment: onCreateView()<br>07-18 15:53:25.148 7758-7758/com.mineutils D/SecondFragment:  onViewCreated<br>                                                                onActivityCreated()<br>                                                                onStart()<br>​                                                                  onResume()</p>
<p>07-18 15:53:34.200 7758-7758/com.mineutils D/SecondFragment: onHiddenChanged hidden   true<br>07-18 15:53:34.207 7758-7758/com.mineutils D/FirstFragment:    onCreateView()<br>07-18 15:53:34.208 7758-7758/com.mineutils D/FirstFragment:    onViewCreated<br>                                                              onActivityCreated()<br>​                                                           onStart()</p>
<p>07-18 15:53:53.968 7758-7758/com.mineutils D/FirstFragment: onHiddenChanged hidden   true<br>07-18 15:53:53.968 7758-7758/com.mineutils D/SecondFragment: onHiddenChanged hidden   false</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/cml_blog/article/details/41411451">https://blog.csdn.net/cml_blog/article/details/41411451</a></p>
<h4 id="fragment常用特性"><a href="#fragment常用特性" class="headerlink" title="fragment常用特性"></a>fragment常用特性</h4><h5 id="commitAllowingStateLoss-VS-commit-区别"><a href="#commitAllowingStateLoss-VS-commit-区别" class="headerlink" title="commitAllowingStateLoss VS  commit()区别"></a>commitAllowingStateLoss VS  commit()区别</h5><p><a target="_blank" rel="noopener" href="https://huxian99.github.io/2016/08/28/cj3qymo360000owxk9zp17alo/">https://huxian99.github.io/2016/08/28/cj3qymo360000owxk9zp17alo/</a></p>
<h5 id="Fragment之间传递数据"><a href="#Fragment之间传递数据" class="headerlink" title="Fragment之间传递数据"></a>Fragment之间传递数据</h5><ol>
<li><p>Fragment.setArguments()方法传递bundle</p>
</li>
<li><p>findFragmentById()找到tag,然后直接操作Framgent</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onArticleSelected</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">      ArticleFragment articleFrag = (ArticleFragment)</span><br><span class="line">              getSupportFragmentManager().findFragmentById(R.id.article_fragment);</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">if</span> (articleFrag != <span class="keyword">null</span>) &#123;</span><br><span class="line">          articleFrag.updateArticleView(position);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          ArticleFragment newFragment = <span class="keyword">new</span> ArticleFragment();</span><br><span class="line">          Bundle args = <span class="keyword">new</span> Bundle();</span><br><span class="line">          args.putInt(ArticleFragment.ARG_POSITION, position);</span><br><span class="line">          newFragment.setArguments(args);</span><br><span class="line">   </span><br><span class="line">          FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();</span><br><span class="line">          transaction.replace(R.id.fragment_container, newFragment);</span><br><span class="line">          transaction.addToBackStack(<span class="keyword">null</span>);</span><br><span class="line">          transaction.commit();</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>接口回调</p>
</li>
<li><p>ViewModel Livedata</p>
</li>
</ol>
<h5 id="给已经创建frament传递数据"><a href="#给已经创建frament传递数据" class="headerlink" title="给已经创建frament传递数据"></a>给已经创建frament传递数据</h5><p>也是直接 Fragment.refresh(),第一行代码第三版P227，也是这样做的。</p>
<h5 id="fragment回退栈"><a href="#fragment回退栈" class="headerlink" title="fragment回退栈"></a>fragment回退栈</h5><p>tx.addToBackStack(null); 添加回退功能，类似Activity压栈的过程</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/fe16553ca2ca">https://www.jianshu.com/p/fe16553ca2ca</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zhiyuan0932/article/details/52593039">https://blog.csdn.net/zhiyuan0932/article/details/52593039</a></p>
<p>Fragment控制父Fragment展示</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/39491655/communication-between-nested-fragments-in-android">Communication between nested fragments in Android</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u011481547/article/details/71552720">https://blog.csdn.net/u011481547/article/details/71552720</a></p>
<p>Fragmet全局流程图</p>
<p><a target="_blank" rel="noopener" href="https://kotlintc.com/articles/5693">https://kotlintc.com/articles/5693</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/MOWdbI5IREjQP1Px-WJY1Q">https://mp.weixin.qq.com/s/MOWdbI5IREjQP1Px-WJY1Q</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5bcd58b6e51d45404c71d23f">https://juejin.im/post/5bcd58b6e51d45404c71d23f</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/_hdbMOA2TVvX4jFnMu15bg">https://mp.weixin.qq.com/s/_hdbMOA2TVvX4jFnMu15bg</a></p>

        
        
          <blockquote id="copyright">
              <p>Ursprünglicher Link: <a href="http://noteforme.github.io.com/page/15/index.html">http://noteforme.github.io.com/page/15/index.html</a></p>
              <p>Copyright-Erklärung: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Aktie:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-onActivityResult" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/09/26/onActivityResult/">onActivityResult</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-09-26T06:01:53.000Z" itemprop="datePublished">2017年09月26日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2017/09/26/onActivityResult/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Gästebuch
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="传统方式"><a href="#传统方式" class="headerlink" title="传统方式"></a>传统方式</h4><h6 id="单个页面跳转"><a href="#单个页面跳转" class="headerlink" title="单个页面跳转"></a>单个页面跳转</h6><p> 主要有三个方法实现</p>
<ul>
<li> startActivityForResult(@RequiresPermission Intent intent, int requestCode)</li>
<li> setResult(int resultCode, Intent data)</li>
<li> onActivityResult(int requestCode, int resultCode, Intent data)</li>
</ul>
<p>下面是简单例子<br>跳转MainActivity</p>
<p>目标SecondAcitivty</p>
<p>其中数据传递很简单,特别注意requestCode，resultCode不同的区分的区别</p>
<ul>
<li><p>requestCode：假设  MainActivity　button1 button2到SecondAcitivty,回来的在onActivityResult就需要</p>
<pre><code>   判断是哪个button点击的
</code></pre>
</li>
<li><p>resultCode: 假设MainActivity　button1跳转到SecondAcitivty,  button2到ThirdActiivty,回来后onActivityResult</p>
<pre><code>   就需要判断是哪个Activity回来的
</code></pre>
<p>   参考:<a target="_blank" rel="noopener" href="http://blog.csdn.net/jiangwei0910410003/article/details/16983049">http://blog.csdn.net/jiangwei0910410003/article/details/16983049</a></p>
</li>
</ul>
<p><em>注意</em>:onActivityResult方法用的算比较普遍，刚好有个困惑，回传数据时<code>intent.putExtra(&quot;text&quot;,122);</code>  使用 <code>  String couponId = data.getStringExtra(&quot;text&quot;);</code> 接收时为null,里面跳转和回传,存的值是int类型，获取string类型</p>
<h6 id="Fragment接收onActivityResult"><a href="#Fragment接收onActivityResult" class="headerlink" title="Fragment接收onActivityResult"></a>Fragment接收onActivityResult</h6><p><em>必须使用Fragment 的 startActivityForResult()</em>*</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">startForResult</span><span class="params">(Activity activity, Fragment fragment)</span> </span>&#123;</span><br><span class="line">       Intent intent = <span class="keyword">new</span> Intent(activity, LoginActivity.class);</span><br><span class="line">       fragment.startActivityForResult(intent, REQUEST_CODE_MINE_FRAGMENT);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>setResult(RESULT_OK, result); ,finish()后 onActivityResult 返回 resultCode </p>
<h4 id="Activity嵌套Fragment-他们各自发起startActivityForResult发起数据请求"><a href="#Activity嵌套Fragment-他们各自发起startActivityForResult发起数据请求" class="headerlink" title="Activity嵌套Fragment,他们各自发起startActivityForResult发起数据请求"></a>Activity嵌套Fragment,他们各自发起startActivityForResult发起数据请求</h4><h5 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h5><p> <img src="/2017/09/26/onActivityResult/20161119124707067.jpg"></p>
<ul>
<li><p>Fragment发起</p>
<p> Fragment onActivityResult能接收。Activity onActivityResult能接收,但是requestCode不正确。</p>
</li>
<li><p>Activity发起</p>
<p> Fragment不能接收。 Activity onActivityResult能接收。</p>
</li>
</ul>
<h5 id="代码验证"><a href="#代码验证" class="headerlink" title="代码验证"></a>代码验证</h5><p>FirstResultActivity</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> requestCode = <span class="number">1000</span></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">initView</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="keyword">super</span>.initView()</span><br><span class="line">      <span class="keyword">val</span> intent = Intent(<span class="keyword">this</span>, SecondResultActivity::<span class="keyword">class</span>.java)</span><br><span class="line">      findViewById&lt;View&gt;(R.id.bt_activity).setOnClickListener &#123;</span><br><span class="line">          startActivityForResult(intent, requestCode)</span><br><span class="line">          Timber.i(<span class="string">&quot;startActivityForResult <span class="variable">$requestCode</span>&quot;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onActivityResult</span><span class="params">(requestCode: <span class="type">Int</span>, resultCode: <span class="type">Int</span>, <span class="keyword">data</span>: <span class="type">Intent</span>?)</span></span> &#123;</span><br><span class="line">      <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, <span class="keyword">data</span>)</span><br><span class="line">      Timber.d(<span class="string">&quot;onActivityResult resultCode <span class="variable">$requestCode</span> resultCode <span class="variable">$resultCode</span>  data  <span class="subst">$&#123;data?.getStringExtra(SecondResultActivity.sData)&#125;</span>&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">initFragment</span><span class="params">()</span></span> &#123;</span><br><span class="line">      <span class="keyword">val</span> ftn = supportFragmentManager.beginTransaction().replace(R.id.fl_content, newInstance(<span class="string">&quot;数据&quot;</span>))</span><br><span class="line">      ftn.commit()</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>ResultOkFragment</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">val</span> requestCode: <span class="built_in">Int</span> = <span class="number">2000</span></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onActivityCreated</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onActivityCreated(savedInstanceState)</span><br><span class="line">    <span class="keyword">val</span> intent = Intent(context, SecondResultActivity::<span class="keyword">class</span>.java)</span><br><span class="line"></span><br><span class="line">    bt_fragment.setOnClickListener &#123;</span><br><span class="line">        startActivityForResult(intent, requestCode)</span><br><span class="line">        Timber.d(<span class="string">&quot;startActivityForResult <span class="variable">$requestCode</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onActivityResult</span><span class="params">(requestCode: <span class="type">Int</span>, resultCode: <span class="type">Int</span>, <span class="keyword">data</span>: <span class="type">Intent</span>?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, <span class="keyword">data</span>)</span><br><span class="line">    Timber.d(<span class="string">&quot;onActivityResult resultCode <span class="variable">$requestCode</span> resultCode <span class="variable">$resultCode</span>  data 			<span class="subst">$&#123;data?.getStringExtra(SecondResultActivity.sData)&#125;</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>SecondResultActivity</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setResult(<span class="number">21</span>, <span class="keyword">new</span> Intent().putExtra(sData, <span class="string">&quot;我要回调啦!!!&quot;</span>));</span><br><span class="line">finish();</span><br></pre></td></tr></table></figure>



<ul>
<li><p>Activity发起</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">I</span>/FirstResultActivity$initView: startActivityForResult <span class="number">1000</span></span><br><span class="line"><span class="attribute">D</span>/FirstResultActivity: onActivityResult resultCode <span class="number">1000</span> resultCode <span class="number">21</span>  data  我要回调啦!!!</span><br></pre></td></tr></table></figure></li>
<li><p>Fragment发起</p>
<figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">D/ResultOkFragment$onActivityCreated: startActivityForResult <span class="number">2000</span></span><br><span class="line">D/ResultOkFragment: onActivityResult resultCode <span class="number">2000</span> resultCode <span class="number">21</span>  data 我要回调啦!!!</span><br><span class="line">D/FirstResultActivity: onActivityResult resultCode <span class="number">329680</span> resultCode <span class="number">21</span>  data  我要回调啦!!!</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="跳转多个页面-回来"><a href="#跳转多个页面-回来" class="headerlink" title="跳转多个页面 回来"></a>跳转多个页面 回来</h4><p>中间页面不能finish，也需要在onActivityResult方法内部 起到桥梁作用，回传数据</p>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/lanyachuanshu/article/details/52172143">http://blog.csdn.net/lanyachuanshu/article/details/52172143</a><br><a target="_blank" rel="noopener" href="https://developer.android.com/training/basics/intents/result.html">https://developer.android.com/training/basics/intents/result.html</a></p>
<p><a target="_blank" rel="noopener" href="http://45.77.222.97:3000/root/MineUtils/src/master/app/src/main/java/com/jonzhou/mineutils/result/FirstResultActivity.java">http://45.77.222.97:3000/root/MineUtils/src/master/app/src/main/java/com/jonzhou/mineutils/result/FirstResultActivity.java</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzAxMTI4MTkwNQ==&amp;mid=2650826252&amp;idx=1&amp;sn=9ec620d630706c9f8de328e87bb8a0f1&amp;chksm=80b7b292b">https://mp.weixin.qq.com/s?__biz=MzAxMTI4MTkwNQ==&amp;mid=2650826252&amp;idx=1&amp;sn=9ec620d630706c9f8de328e87bb8a0f1&amp;chksm=80b7b292b</a></p>
<h5 id="ActivityResultContract新方式"><a href="#ActivityResultContract新方式" class="headerlink" title="ActivityResultContract新方式"></a>ActivityResultContract新方式</h5><p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/o2_2DeAIcJGYSvm2WlhUxg">https://mp.weixin.qq.com/s/o2_2DeAIcJGYSvm2WlhUxg</a></p>

        
        
          <blockquote id="copyright">
              <p>Ursprünglicher Link: <a href="http://noteforme.github.io.com/page/15/index.html">http://noteforme.github.io.com/page/15/index.html</a></p>
              <p>Copyright-Erklärung: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Aktie:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-DevicesScreenSupport" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/09/23/DevicesScreenSupport/">DevicesScreenSupport</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-09-23T13:41:20.000Z" itemprop="datePublished">2017年09月23日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2017/09/23/DevicesScreenSupport/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Gästebuch
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Android屏幕的一些技巧</p>
<h5 id="官网适配方案"><a href="#官网适配方案" class="headerlink" title="官网适配方案"></a>官网适配方案</h5><p><a target="_blank" rel="noopener" href="https://developer.android.com/training/basics/supporting-devices/index.html">https://developer.android.com/training/basics/supporting-devices/index.html</a><br><a target="_blank" rel="noopener" href="https://developer.android.com/training/multiscreen/screensizes.html">https://developer.android.com/training/multiscreen/screensizes.html</a></p>
<h5 id="资源图片适配"><a href="#资源图片适配" class="headerlink" title="资源图片适配"></a>资源图片适配</h5><p>Provide alternative bitmaps</p>
<p>To provide good graphical qualities on devices with different pixel densities, you should provide multiple versions of each bitmap in your app—one for each density bucket, at a corresponding resolution. Otherwise, Android must scale your bitmap so it occupies the same visible space on each screen, resulting in scaling artifacts such as blurring.</p>
<p><img src="https://developer.android.com/images/screens_support/devices-density_2x.png" alt="img"></p>
<p><strong>Figure 2.</strong> Relative sizes for bitmaps at different density sizes</p>
<p>There are several density buckets available for use in your apps. Table 1 describes the different configuration qualifiers available and what screen types they apply to.</p>
<p><strong>Table 1.</strong> Configuration qualifiers for different pixel densities.</p>
<table>
<thead>
<tr>
<th align="left">Density qualifier</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>ldpi</code></td>
<td align="left">Resources for low-density (<em>ldpi</em>) screens (~120dpi).</td>
</tr>
<tr>
<td align="left"><code>mdpi</code></td>
<td align="left">Resources for medium-density (<em>mdpi</em>) screens (~160dpi). (This is the baseline density.)</td>
</tr>
<tr>
<td align="left"><code>hdpi</code></td>
<td align="left">Resources for high-density (<em>hdpi</em>) screens (~240dpi).</td>
</tr>
<tr>
<td align="left"><code>xhdpi</code></td>
<td align="left">Resources for extra-high-density (<em>xhdpi</em>) screens (~320dpi).</td>
</tr>
<tr>
<td align="left"><code>xxhdpi</code></td>
<td align="left">Resources for extra-extra-high-density (<em>xxhdpi</em>) screens (~480dpi).</td>
</tr>
<tr>
<td align="left"><code>xxxhdpi</code></td>
<td align="left">Resources for extra-extra-extra-high-density (<em>xxxhdpi</em>) uses (~640dpi).</td>
</tr>
<tr>
<td align="left"><code>nodpi</code></td>
<td align="left">Resources for all densities. These are density-independent resources. The system does not scale resources tagged with this qualifier, regardless of the current screen’s density.</td>
</tr>
<tr>
<td align="left"><code>tvdpi</code></td>
<td align="left">Resources for screens somewhere between mdpi and hdpi; approximately 213dpi. This is not considered a “primary” density group. It is mostly intended for televisions and most apps shouldn’t need it—providing mdpi and hdpi resources is sufficient for most apps and the system will scale them as appropriate. If you find it necessary to provide tvdpi resources, you should size them at a factor of 1.33*mdpi. For example, a 100px x 100px image for mdpi screens should be 133px x 133px for tvdpi.</td>
</tr>
</tbody></table>
<p>To create alternative bitmap drawables for different densities, you should follow the <strong>3:4:6:8:12:16 scaling ratio</strong> between the six primary densities. For example, if you have a bitmap drawable that’s 48x48 pixels for medium-density screens, all the different sizes should be:</p>
<ul>
<li>36x36 (0.75x) for low-density (ldpi)</li>
<li>48x48 (1.0x baseline) for medium-density (mdpi)</li>
<li>72x72 (1.5x) for high-density (hdpi)</li>
<li>96x96 (2.0x) for extra-high-density (xhdpi)</li>
<li>144x144 (3.0x) for extra-extra-high-density (xxhdpi)</li>
<li>192x192 (4.0x) for extra-extra-extra-high-density (xxxhdpi)</li>
</ul>
<p>Then, place the generated image files in the appropriate subdirectory under <code>res/</code> and the system will pick the correct one automatically based on the pixel density of the device your app is running on:</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">res/</span><br><span class="line">  drawable-xxxhdpi/</span><br><span class="line">    awesome-image.png</span><br><span class="line">  drawable-xxhdpi/</span><br><span class="line">    awesome-image.png</span><br><span class="line">  drawable-xhdpi/</span><br><span class="line">    awesome-image.png</span><br><span class="line">  drawable-hdpi/</span><br><span class="line">    awesome-image.png</span><br><span class="line">  drawable-mdpi/</span><br><span class="line">    awesome-image.png</span><br></pre></td></tr></table></figure>

<p>Then, any time you reference <code>@drawable/awesomeimage</code>, the system selects the appropriate bitmap based on the screen’s dpi. If you don’t provide a density-specific resource for that density, the system picks the next best match and scales it to fit the screen.</p>
<p>This means that if you generate a 200x200 image for xhdpi devices, you should generate the same resource in 150x150 for hdpi, 100x100 for mdpi, and 75x75 for ldpi devices.<br>而UI问我们需要多少大小的图，如果效果图根据750*1334的话，可以告诉他，不过PS有个叫<br>cutterman的工具可以自动生成不同分辨率的图片</p>
<ul>
<li>PX转 dp</li>
</ul>
<p>以5X 为例: 5X的dpi =420,   PPI = 420/160 = 2.625<br>设置view的宽度我们用　match_parent,那么在5X上，他是多少dp呢？</p>
<p>5X : width = 1080 px<br>dp = 1080 / PPI = 411.428571429,<br>所以411dp就是5X的match_parent</p>
<p><a target="_blank" rel="noopener" href="http://blog.csdn.net/u010983881/article/details/51993157">http://blog.csdn.net/u010983881/article/details/51993157</a></p>
<h5 id="实际应用"><a href="#实际应用" class="headerlink" title="实际应用"></a>实际应用</h5><ul>
<li>开发中的实际转化</li>
</ul>
<p>　　生成主流屏幕的values，安宽分成320份,高400份<br>　　<br>　　假设ＵＩ根据 iphone6(750×1334)设计的效果图<br>　　根据下图公式计算　Dpi</p>
<p>　   iphone6是4.7寸的 分辨率 750 * 1334,　它的dpi 就是　√(750²+1334²)/4.7 =  325 </p>
<p>​       和drawable-xhdpi 320接近<br>　　<br>　　drawable-xhdpi　480上做的图就是大概是1.5倍的样子 ,分辨率在1920 *1080上的也是一样的</p>
<p>​    然而pixel 2的模拟器是420 真机是441，这是什么原因呢!!!</p>
<p>　　<a target="_blank" rel="noopener" href="http://blog.csdn.net/zengd0/article/details/52464627">http://blog.csdn.net/zengd0/article/details/52464627</a><br>　　所以说　给的1334 * 750 　图就是<br>　　10px  我们写5dp</p>
<p>​    参考:　<a target="_blank" rel="noopener" href="http://www.jianshu.com/p/ec5a1a30694b">http://www.jianshu.com/p/ec5a1a30694b</a><br>　<a target="_blank" rel="noopener" href="http://blog.csdn.net/lmj623565791/article/details/45460089">http://blog.csdn.net/lmj623565791/article/details/45460089</a>
　</p>
<ul>
<li>DPI参考</li>
</ul>
<p>自己计算按照上面的公式很简单，最棘手的还是手机尺寸给出一个手机dpi网站 get what you want<br><a target="_blank" rel="noopener" href="http://dpi.lv/">http://dpi.lv/</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/v_aauFjx-f91WrpCAaNMVQ">https://mp.weixin.qq.com/s/v_aauFjx-f91WrpCAaNMVQ</a>)</p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/practices/screens_support">https://developer.android.com/guide/practices/screens_support</a></p>
<p>今日头条适配 </p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/55e0fca23b4f">https://www.jianshu.com/p/55e0fca23b4f</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/JessYanCoding/AndroidAutoSize">https://github.com/JessYanCoding/AndroidAutoSize</a></p>
<p>为什么原来长度 ic_launcher.png 192*192  到了nexus5 中显示是216 * 216 而不是原来的尺寸</p>

        
        
          <blockquote id="copyright">
              <p>Ursprünglicher Link: <a href="http://noteforme.github.io.com/page/15/index.html">http://noteforme.github.io.com/page/15/index.html</a></p>
              <p>Copyright-Erklärung: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Aktie:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Retrofit" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/09/23/Retrofit/">Retrofit</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-09-23T01:20:09.000Z" itemprop="datePublished">2017年09月23日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2017/09/23/Retrofit/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Gästebuch
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="Okhttp缺陷"><a href="#Okhttp缺陷" class="headerlink" title="Okhttp缺陷"></a>Okhttp缺陷</h4><p><img src="retrofit/2021-07-26_4.24_vsokhttp.png"></p>
<p><img src="/2017/09/23/Retrofit/retrofit/2021-07-28_7.46.04.png"></p>
<h4 id="Retofit调用"><a href="#Retofit调用" class="headerlink" title="Retofit调用"></a>Retofit调用</h4><p><img src="/2017/09/23/Retrofit/retrofit/2021-07-27_10.42_retrofit.png"></p>
<h4 id="Retrofit-Rxjava"><a href="#Retrofit-Rxjava" class="headerlink" title="Retrofit Rxjava"></a>Retrofit Rxjava</h4><p><img src="/2017/09/23/Retrofit/retrofit/2021-07-27_10.43_rxjava.png"></p>
<p><img src="/2017/09/23/Retrofit/retrofit/2021-07-28_3.02.05.png"></p>
<p><img src="/2017/09/23/Retrofit/retrofit/2021-07-28_04.21.png"></p>
<p> Retorift使用过程</p>
<ol>
<li><p>动态生成了实现了接口类型的， 类的对象。</p>
<p>调用方法,通过反射解析接口，拿到方法参数</p>
<p>生成代理类</p>
<p>Retrofit.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;T&gt; <span class="function">T <span class="title">create</span><span class="params">(<span class="keyword">final</span> Class&lt;T&gt; service)</span> </span>&#123;</span><br><span class="line">  validateServiceInterface(service);</span><br><span class="line">  <span class="keyword">return</span> (T)</span><br><span class="line">      Proxy.newProxyInstance(</span><br><span class="line">          service.getClassLoader(),</span><br><span class="line">          <span class="keyword">new</span> Class&lt;?&gt;[] &#123;service&#125;,</span><br><span class="line">          <span class="keyword">new</span> InvocationHandler() &#123;</span><br><span class="line">            <span class="keyword">private</span> <span class="keyword">final</span> Platform platform = Platform.get();</span><br><span class="line">            <span class="keyword">private</span> <span class="keyword">final</span> Object[] emptyArgs = <span class="keyword">new</span> Object[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="meta">@Nullable</span> <span class="function">Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, <span class="meta">@Nullable</span> Object[] args)</span></span></span><br><span class="line"><span class="function">                <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">              <span class="comment">// If the method is a method from Object then defer to normal invocation.</span></span><br><span class="line">              <span class="keyword">if</span> (method.getDeclaringClass() == Object.class) &#123;</span><br><span class="line">                <span class="keyword">return</span> method.invoke(<span class="keyword">this</span>, args); <span class="comment">//传入的是this</span></span><br><span class="line">              &#125;</span><br><span class="line">              args = args != <span class="keyword">null</span> ? args : emptyArgs;</span><br><span class="line">              <span class="keyword">return</span> platform.isDefaultMethod(method)</span><br><span class="line">                  ? platform.invokeDefaultMethod(method, service, proxy, args)</span><br><span class="line">                  : loadServiceMethod(method).invoke(args); <span class="comment">//这个动态代理的形式，为什么没传对象？</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IApiStores iApiStores = RetrofitFactory.create(IApiStores.class);</span><br><span class="line">retrofit2.Call&lt;List&lt;SharedListBean&gt;&gt; sharedListCall = iApiStores.getSharedList(<span class="number">2</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure></li>
<li><p>ServiceMethod</p>
<p>一个方法对应一个serviceMethod,使用hashmap缓存,构建okhttp的网络请求。</p>
</li>
</ol>
<h4 id="Retrofit包装类"><a href="#Retrofit包装类" class="headerlink" title="Retrofit包装类"></a>Retrofit包装类</h4><p>Retrofit组装完数据，使用Okhttp进行网络请求的类</p>
<p>OkHttpCall.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(<span class="keyword">final</span> Callback&lt;T&gt; callback)</span> </span>&#123;</span><br><span class="line">  Objects.requireNonNull(callback, <span class="string">&quot;callback == null&quot;</span>);</span><br><span class="line"></span><br><span class="line">  okhttp3.Call call;</span><br><span class="line">  Throwable failure;</span><br><span class="line">  <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">    call = rawCall = createRawCall();     <span class="comment">// 创建OkhttpCall</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  call.enqueue(</span><br><span class="line">      <span class="keyword">new</span> okhttp3.Callback() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResponse</span><span class="params">(okhttp3.Call call, okhttp3.Response rawResponse)</span> </span>&#123;</span><br><span class="line">          Response&lt;T&gt; response;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            response = parseResponse(rawResponse);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            throwIfFatal(e);</span><br><span class="line">            callFailure(e);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            callback.onResponse(OkHttpCall.<span class="keyword">this</span>, response);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (Throwable t) &#123;</span><br><span class="line">            throwIfFatal(t);</span><br><span class="line">            t.printStackTrace(); <span class="comment">// TODO this is not great</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(okhttp3.Call call, IOException e)</span> </span>&#123;</span><br><span class="line">          callFailure(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">callFailure</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            callback.onFailure(OkHttpCall.<span class="keyword">this</span>, e);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (Throwable t) &#123;</span><br><span class="line">            throwIfFatal(t);</span><br><span class="line">            t.printStackTrace(); <span class="comment">// TODO this is not great</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1mU4y1p71g?p=10&amp;spm_id_from=pageDriver">https://www.bilibili.com/video/BV1mU4y1p71g?p=10&amp;spm_id_from=pageDriver</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV12Q4y1d7uD?p=7&amp;spm_id_from=pageDriver">https://www.bilibili.com/video/BV12Q4y1d7uD?p=7&amp;spm_id_from=pageDriver</a></p>
<p><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/308f3c54abdd">http://www.jianshu.com/p/308f3c54abdd</a><br>这篇文章不错，深入浅出<br>我还加了了提交Map参数的<a target="_blank" rel="noopener" href="https://gitee.com/huaiyi/RetrofitDemo.git">Demo</a> Demo</p>
<p> <a target="_blank" rel="noopener" href="http://www.10tiao.com/html/227/201701/2650238307/1.html">http://www.10tiao.com/html/227/201701/2650238307/1.html</a><br> <a target="_blank" rel="noopener" href="http://blog.csdn.net/itjianghuxiaoxiong/article/details/52135748">http://blog.csdn.net/itjianghuxiaoxiong/article/details/52135748</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5afc1706518825426f30f6ec">https://juejin.im/post/5afc1706518825426f30f6ec</a></p>
<p>要实现类似这样的请求,用post方式怎么也不行<br><a target="_blank" rel="noopener" href="https://newsapi.org/v2/top-headlines?sources=financial-times&amp;apiKey=e4f505f73a9f4ee99119ab33a19ab05e">https://newsapi.org/v2/top-headlines?sources=financial-times&amp;apiKey=e4f505f73a9f4ee99119ab33a19ab05e</a><br><a target="_blank" rel="noopener" href="http://wuxiaolong.me/2016/06/18/retrofits/">http://wuxiaolong.me/2016/06/18/retrofits/</a></p>

        
        
          <blockquote id="copyright">
              <p>Ursprünglicher Link: <a href="http://noteforme.github.io.com/page/15/index.html">http://noteforme.github.io.com/page/15/index.html</a></p>
              <p>Copyright-Erklärung: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Aktie:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-Package-signature" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/09/21/Package-signature/">Package-signature</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-09-21T02:56:13.000Z" itemprop="datePublished">2017年09月21日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
      
<a href="/2017/09/21/Package-signature/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Gästebuch
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="Apk打包流程"><a href="#Apk打包流程" class="headerlink" title="Apk打包流程"></a>Apk打包流程</h4><img src="/2017/09/21/Package-signature/2021-08-01_3.apk_package.png" style="zoom:50%;">







<h2 id="相同签名-不同包名问题"><a href="#相同签名-不同包名问题" class="headerlink" title="相同签名 不同包名问题"></a>相同签名 不同包名问题</h2><p>现在把项目重新生成签名，然后安装，安装后会安装失败，因为和以前的app冲突</p>
<p>应用安装后会在data/data 目录生成和包名一样的文件夹</p>
<p>虽然生成了了新的签名但是会覆盖</p>
<h2 id="打包"><a href="#打包" class="headerlink" title="打包"></a>打包</h2><p>android studio更新了新版本 打包的时候v1和v2都需要勾选才能安装</p>
<p><a target="_blank" rel="noopener" href="http://blog.h5min.cn/daihuimaozideren/article/details/77842549">http://blog.h5min.cn/daihuimaozideren/article/details/77842549</a></p>
<h2 id="walle打包"><a href="#walle打包" class="headerlink" title="walle打包"></a>walle打包</h2><p>生成渠道包</p>
<ul>
<li>生成渠道包 ./gradlew clean assembleReleaseChannels </li>
<li>支持 productFlavors ./gradlew clean<br>  assembleMeituanReleaseChannels</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/Meituan-Dianping/walle">https://github.com/Meituan-Dianping/walle</a></p>

        
        
          <blockquote id="copyright">
              <p>Ursprünglicher Link: <a href="http://noteforme.github.io.com/page/15/index.html">http://noteforme.github.io.com/page/15/index.html</a></p>
              <p>Copyright-Erklärung: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Aktie:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-ubuntu_guide" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/09/20/ubuntu_guide/">ubuntu_guide</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-09-20T13:42:17.000Z" itemprop="datePublished">2017年09月20日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/LINUX/">LINUX</a>
  </div>

      
      
<a href="/2017/09/20/ubuntu_guide/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Gästebuch
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>　<strong>解决Ubuntu 16.04 系统的一些错误</strong></p>
<h2 id="Unable-to-mount-root-fs-on-unknown-block"><a href="#Unable-to-mount-root-fs-on-unknown-block" class="headerlink" title="Unable to mount root fs on unknown-block"></a>Unable to mount root fs on unknown-block</h2><p>　看到Ubuntu系统有更新就点了下，早上打开电脑 Ubuntu直接进不去最下面弹出这这样的<br>　错误　Unable to mount root fs on unknown-block　而且只能强制关机，心想完了我的<br>　资料，还有辛苦编译的源码，不过好在晚上回来倒腾了一把　终于好了。</p>
<p>步骤<br>1、  Advanced options for Ubuntu<br>２、ubuntu Linux 4.4.0-96… (recovery mdoe)  　这里我选择的是第二个，第一个点击后还是<br>　　会报错<br>3、Menu界面　，把能清的先清了，然后点击grub,执行后续操作</p>
<p>4、登录进入命令行界面</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -o rw <span class="regexp">//</span>这一行和参考资料不同</span><br><span class="line">sudo dpkg --configure -a　<span class="regexp">//</span>在这里等了很久 Device ....Start的字样,接着就按了　Ctrl + Alt + Delete , 重启就好了</span><br><span class="line"></span><br><span class="line">sudo apt-get install -f  <span class="comment"># to finish upgrades 最好加这个吧</span></span><br><span class="line">type reboot</span><br></pre></td></tr></table></figure>

<p>  <a target="_blank" rel="noopener" href="https://askubuntu.com/questions/875862/kernel-panic-unable-to-mount-root-in-ubuntu-16-04/875868">https://askubuntu.com/questions/875862/kernel-panic-unable-to-mount-root-in-ubuntu-16-04/875868</a></p>
<h2 id="解压乱码"><a href="#解压乱码" class="headerlink" title="解压乱码"></a>解压乱码</h2><p>在windows上压缩的文件，是以系统默认编码中文来压缩文件。由于zip文件中没有声明其编码，所以linux上的unzip一般以默认编码解压，中文文件名会出现乱码。<br>可以使用终端zip文件进行解压并指定解压的编码<br>　<code>unzip -O GBK   xxx.zip</code><br>解压后的文件的路径为当前终端所在的路径</p>
<p>参考：　<a target="_blank" rel="noopener" href="http://hareric.com/2016/07/26/%E7%AE%80%E6%98%93%E6%96%B9%E6%B3%95%E8%A7%A3%E5%86%B3ubuntu%E4%B8%8B%E8%A7%A3%E5%8E%8B%E6%96%87%E4%BB%B6%E4%B9%B1%E7%A0%81/">Eric Chan</a> </p>
<p>** 17.10的问题　**</p>
<ul>
<li>Android studio3.1无法输入中文<br>　使用 fcitx 选择sunpingying  也可以选择 google pinyin<br>  　然后输入这两行命令<pre><code>      pidof fcitx | xargs kill  #找到原有的fcitx端口并kill掉
      fcitx                     #开启fcitx
</code></pre>
</li>
</ul>
<p>参考： 　<a target="_blank" rel="noopener" href="https://blog.csdn.net/he729164860/article/details/78484713">https://blog.csdn.net/he729164860/article/details/78484713</a>
  　
  　
  　</p>
<h2 id="安装Gnome-shell"><a href="#安装Gnome-shell" class="headerlink" title="安装Gnome　shell"></a>安装Gnome　shell</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> install gnome-tweak-tool</span><br><span class="line">sudo apt-<span class="builtin-name">get</span> install chrome-gnome-shell</span><br></pre></td></tr></table></figure>
<p>打开tweak可以看到按钮</p>
<p>浏览点击 ||| off按钮系统就会安装</p>
<p>开源chromium加载有问题，使用firefox</p>
<p>很有用的插件</p>
<p><a target="_blank" rel="noopener" href="https://extensions.gnome.org/extension/545/hide-top-bar/">https://extensions.gnome.org/extension/545/hide-top-bar/</a></p>
<p>参考:<a target="_blank" rel="noopener" href="https://www.mobibrw.com/2017/9342">https://www.mobibrw.com/2017/9342</a></p>
<p>　</p>
<h2 id="ctrl-alt-left-（Intellij-idea-shortcut-conflict）"><a href="#ctrl-alt-left-（Intellij-idea-shortcut-conflict）" class="headerlink" title="ctrl + alt + left （Intellij idea shortcut conflict）"></a>ctrl + alt + left （Intellij idea shortcut conflict）</h2><ul>
<li><p>install <u>Dconf Editor</u>   in ubuntu software</p>
</li>
<li><p>launch <u>Dconf Editor</u>, go to    /org/gnome/desktop/wm/keybindings/switch-to-workspace-left  </p>
<p>double click like below</p>
<p><img src="/2017/09/20/ubuntu_guide/ubuntu_guide_01.png" alt="df"></p>
</li>
</ul>
<p> use default value(click Off) -&gt; Custom value(like me or else)</p>
<ul>
<li>you could use it in intellij idea now .</li>
</ul>
<h4 id="genymotion安装"><a href="#genymotion安装" class="headerlink" title="genymotion安装"></a>genymotion安装</h4><ul>
<li>下载Virtualbox</li>
<li>下载genymotion</li>
<li>下载Android stuido genymotion插件</li>
</ul>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod +x genymotion-<span class="number">2.6</span>.<span class="number">0</span>-linux_x64.bin      </span><br><span class="line">.<span class="regexp">/genymotion-2.6.0-linux_x64.bin -d /</span>home<span class="regexp">/qiu/</span>Work/genymotion  </span><br></pre></td></tr></table></figure>

<p>//注意： chmod +x 有空格</p>
<h4 id="输入法设置"><a href="#输入法设置" class="headerlink" title="输入法设置"></a>输入法设置</h4><p>ubuntu 18.04 intellij 输入法选择有问题，可以用命令行安装 ibus-pinyin，然后input souce选择拼音输入法</p>

        
        
          <blockquote id="copyright">
              <p>Ursprünglicher Link: <a href="http://noteforme.github.io.com/page/15/index.html">http://noteforme.github.io.com/page/15/index.html</a></p>
              <p>Copyright-Erklärung: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Aktie:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>


  <article id="post-SDK_Integration" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2017/09/19/SDK_Integration/">SDK_Integration</a>
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-09-19T06:44:01.000Z" itemprop="datePublished">2017年09月19日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/TOOL/">TOOL</a>
  </div>

      
      
<a href="/2017/09/19/SDK_Integration/#comments" class="article-comment-link">
  
  <i class="fa fa-commt"></i>
  Gästebuch
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>平常集成SDK虽然简单，但是过了半年就全忘了，又得重新来过</p>
<h4 id="友盟分享"><a href="#友盟分享" class="headerlink" title="友盟分享"></a>友盟分享</h4><p><a target="_blank" rel="noopener" href="https://open.weixin.qq.com/">微信开发者平台</a><br>创建应用需要 <strong>应用签名</strong></p>
<p>需要签名工具,可以从 <a target="_blank" rel="noopener" href="https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&t=resource/res_list&verify=1&id=open1419319167&token=&lang=zh_CN">微信资源中心</a> 获取</p>
<p> 注意要打包才能运行</p>
<h4 id="商汤认证"><a href="#商汤认证" class="headerlink" title="商汤认证"></a>商汤认证</h4><p><a target="_blank" rel="noopener" href="https://v2-devcenter.visioncloudapi.com/#!/home/doc/ocr/android/online/useguide">文档</a></p>
<p>身份证认证</p>
<ul>
<li><p>在common-idcard包中的assets目录下添加 SenseID_OCR.lic文件就可以了</p>
</li>
<li><p>在androidmanifest.xml注册activity</p>
</li>
</ul>
<p>活体认证</p>
<p>最终调用onDetectOver</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public void on<span class="constructor">DetectOver(ResultCode <span class="params">code</span>, String <span class="params">id</span>, List <span class="params">imageData</span>)</span></span><br></pre></td></tr></table></figure>

<p>会返回id,然后把id,身份证number,name传给商汤对比</p>
<h4 id="极光推送"><a href="#极光推送" class="headerlink" title="极光推送"></a>极光推送</h4><ul>
<li><p>集成过程</p>
<p>按照文档，主要是要注意这个广播接收器就可以了</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;receiver</span><br><span class="line">          android:name=&quot;.jpush.MyReceiver&quot;</span><br><span class="line">          android:enabled=&quot;true&quot;&gt;</span><br><span class="line">          <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!--Required 用户注册SDK的intent--&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;cn.jpush.android.intent.REGISTRATION&quot;</span> /&gt;</span></span><br><span class="line">              <span class="comment">&lt;!--Required 用户接收SDK消息的intent--&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;cn.jpush.android.intent.MESSAGE_RECEIVED&quot;</span> /&gt;</span></span><br><span class="line">              <span class="comment">&lt;!--Required 用户接收SDK通知栏信息的intent--&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;cn.jpush.android.intent.NOTIFICATION_RECEIVED&quot;</span> /&gt;</span></span><br><span class="line">              <span class="comment">&lt;!--Required 用户打开自定义通知栏的intent--&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;cn.jpush.android.intent.NOTIFICATION_OPENED&quot;</span> /&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- 接收网络变化 连接/断开 since 1.6.3 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;cn.jpush.android.intent.CONNECTION&quot;</span> /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;com.zhujia.land&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>有点疑惑的是推送给特定的APP</p>
<p>目前获取RegistrationID，登陆接口把 RegistrationID传给服务端, 然后Server推送过来就可以了</p>
<p><a target="_blank" rel="noopener" href="http://blog.jiguang.cn/push_audience_tech-2/">http://blog.jiguang.cn/push_audience_tech-2/</a></p>
<p> 暂时别试用Jcenter集成,会出现各种问题</p>
</li>
</ul>
<h4 id="微信登陆"><a href="#微信登陆" class="headerlink" title="微信登陆"></a>微信登陆</h4><h5 id="App登录"><a href="#App登录" class="headerlink" title="App登录"></a>App登录</h5><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/doc/oplatform/Mobile_App/Resource_Center_Homepage.html">https://developers.weixin.qq.com/doc/oplatform/Mobile_App/Resource_Center_Homepage.html</a></p>
<ol>
<li>问题1</li>
</ol>
<p><code>E/MtaSDK: [pool-4-thread-1(320): null:705] - Server response error code:404, error:&#123;&quot;ret&quot;:-1, &quot;msg&quot;:&quot;invalid appkey&quot;&#125;</code></p>
<p>Demo里的wechat-sdk-android-with-mta 换成     api ‘com.tencent.mm.opensdk:wechat-sdk-android-without-mta:+’  这个弄了一上午</p>
<ol start="2">
<li><p>问题2  </p>
<p> <code> No value for openid.</code> WXEntryActivity {“errcode”:40029,”errmsg”:”invalid code”}   WXEntryActivity<br> appid secret错误</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (resp.<span class="built_in">getType</span>() == ConstantsAPI.COMMAND_SENDAUTH) &#123;</span><br><span class="line">   SendAuth.Resp authResp = (SendAuth.Resp)resp;</span><br><span class="line">   <span class="keyword">final</span> <span class="keyword">String</span> code = authResp.code;</span><br><span class="line">   NetworkUtil.<span class="built_in">sendWxAPI</span>(handler, <span class="keyword">String</span>.format(<span class="string">&quot;https://api.weixin.qq.com/sns/oauth2/access_token?&quot;</span> +</span><br><span class="line">               <span class="string">&quot;appid=%s&amp;secret=%s&amp;code=%s&amp;grant_type=authorization_code&quot;</span>, <span class="string">&quot;wx930ea5d5a258f4f&quot;</span>,</span><br><span class="line">         <span class="string">&quot;1d6d1d57a3dd06336d917bc0b44d964&quot;</span>, code), NetworkUtil.GET_TOKEN);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET https://api.weixin.qq.com/sns/oauth2/access_token?appid=APPID&amp;secret=SECRET&amp;code=CODE&amp;grant_type=authorization_code</span><br></pre></td></tr></table></figure>

<p>demo中 </p>
<p>appid wxd930ea5d5a2584f要换成自己的</p>
<p>secret 1d6d1d57a3dd063b36d91bc0b44d964也要换成自己的</p>
<ol start="3">
<li><p>问题3  需要注册，否则WXEntryActivity不能收到回调</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String APP_ID = <span class="string">&quot;wx88888888&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// IWXAPI 是第三方app和微信通信的openApi接口</span></span><br><span class="line"><span class="keyword">private</span> IWXAPI api;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">regToWx</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 通过WXAPIFactory工厂，获取IWXAPI的实例</span></span><br><span class="line">    api = WXAPIFactory.createWXAPI(<span class="keyword">this</span>, APP_ID, <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将应用的appId注册到微信</span></span><br><span class="line">    api.registerApp(APP_ID);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//建议动态监听微信启动广播进行注册到微信</span></span><br><span class="line">  registerReceiver(<span class="keyword">new</span> BroadcastReceiver() &#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onReceive</span><span class="params">(Context context, Intent intent)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">     <span class="comment">// 将该app注册到微信</span></span><br><span class="line">    api.registerApp(Constants.APP_ID);</span><br><span class="line">   &#125;</span><br><span class="line">  &#125;, <span class="keyword">new</span> IntentFilter(ConstantsAPI.ACTION_REFRESH_WXAPP));</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="二维码扫码登录"><a href="#二维码扫码登录" class="headerlink" title="二维码扫码登录"></a>二维码扫码登录</h5><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/doc/oplatform/Mobile_App/WeChat_Login/Login_via_Scan.html">https://developers.weixin.qq.com/doc/oplatform/Mobile_App/WeChat_Login/Login_via_Scan.html</a></p>
<ol>
<li><p>登录公众平台 <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/cgi-bin/home?t=home">https://mp.weixin.qq.com/cgi-bin/home?t=home</a> ,点击配置进入IP白名单</p>
<p>点击配置进入IP白名单设置页</p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/cgi-bin/announce?action=getannouncement&amp;key=1495617578&amp;version=1&amp;lang=zh_CN&amp;platform=2&amp;token=38764305">https://mp.weixin.qq.com/cgi-bin/announce?action=getannouncement&amp;key=1495617578&amp;version=1&amp;lang=zh_CN&amp;platform=2&amp;token=38764305</a></p>
</li>
<li><p>二维码扫码登录的appid secret key用开放平台的  <a target="_blank" rel="noopener" href="https://open.weixin.qq.com/cgi-bin/index?t=home/index&amp;lang=zh_CN">https://open.weixin.qq.com/cgi-bin/index?t=home/index&amp;lang=zh_CN</a></p>
<p>注意两个不同的平台配置</p>
</li>
</ol>
</li>
</ol>
<p>二维码失效:  首先普及一下二维码是有失效时间以及失效状态的，一旦你扫过一次二维码或者在某段时间内没有扫描页面上的二维码，该二维码就失效了</p>
<p>app分享拉新规则</p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/3bsmiv78yJ4XKwd8iu-0Ig">https://mp.weixin.qq.com/s/3bsmiv78yJ4XKwd8iu-0Ig</a></p>
<h4 id="Wechat-Pay"><a href="#Wechat-Pay" class="headerlink" title="Wechat Pay"></a>Wechat Pay</h4><p><a target="_blank" rel="noopener" href="https://pay.weixin.qq.com/wiki/doc/api/app/app.php?chapter=8_5">https://pay.weixin.qq.com/wiki/doc/api/app/app.php?chapter=8_5</a></p>
<h4 id="Alipay"><a href="#Alipay" class="headerlink" title="Alipay"></a>Alipay</h4><p><a target="_blank" rel="noopener" href="https://opendocs.alipay.com/open/204/105296">https://opendocs.alipay.com/open/204/105296</a></p>
<p>orderInfo订单信息 由接口拼接就可以了</p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/wWB5ENo3eQJH03OXvoup8w">https://mp.weixin.qq.com/s/wWB5ENo3eQJH03OXvoup8w</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzUxODg0MzU2OQ==&amp;mid=2247485318&amp;idx=1&amp;sn=174338566ad8c0426c95815c4f4aee5a&amp;scene=21#wechat_redirect">https://mp.weixin.qq.com/s?__biz=MzUxODg0MzU2OQ==&amp;mid=2247485318&amp;idx=1&amp;sn=174338566ad8c0426c95815c4f4aee5a&amp;scene=21#wechat_redirect</a></p>
<p>推送相关</p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/6881414546859229192">https://juejin.im/post/6881414546859229192</a></p>

        
        
          <blockquote id="copyright">
              <p>Ursprünglicher Link: <a href="http://noteforme.github.io.com/page/15/index.html">http://noteforme.github.io.com/page/15/index.html</a></p>
              <p>Copyright-Erklärung: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Aktie:</span>
    </div>



        </div>
      
      
      
    </footer>
  </div>
</article>



    <nav id="page-nav">

<a class="extend prev" rel="prev" href="/page/14/">Vorheriger</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="page-number" href="/page/14/">14</a><span class="page-number current">15</span><a class="page-number" href="/page/16/">16</a><a class="page-number" href="/page/17/">17</a><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/16/">Nächster</a>
</nav>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-posts"></i> Letzte</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/12/19/RecyclerView-Divider/">RecyclerView_Divider</a>
          </li>
        
          <li>
            <a href="/2021/12/14/coroutie1-start/">coroutie1_start</a>
          </li>
        
          <li>
            <a href="/2021/11/23/Font/">Font</a>
          </li>
        
          <li>
            <a href="/2021/11/08/coroutine-begin/">coroutine_begin</a>
          </li>
        
          <li>
            <a href="/2021/11/06/Language/">Language</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/AOSP/" style="font-size: 20px;">AOSP</a> <a href="/tags/Activity/" style="font-size: 10px;">Activity</a> <a href="/tags/AndroidNewFeatures/" style="font-size: 10px;">AndroidNewFeatures</a> <a href="/tags/Assembly/" style="font-size: 10px;">Assembly</a> <a href="/tags/BLOG/" style="font-size: 10px;">BLOG</a> <a href="/tags/ConstraintLayout/" style="font-size: 10px;">ConstraintLayout</a> <a href="/tags/DB/" style="font-size: 11.43px;">DB</a> <a href="/tags/DataStructure/" style="font-size: 10px;">DataStructure</a> <a href="/tags/Drawer/" style="font-size: 10px;">Drawer</a> <a href="/tags/Git/" style="font-size: 11.43px;">Git</a> <a href="/tags/JVM/" style="font-size: 18.57px;">JVM</a> <a href="/tags/Kotlin/" style="font-size: 15.71px;">Kotlin</a> <a href="/tags/Operators/" style="font-size: 10px;">Operators</a> <a href="/tags/RxJava/" style="font-size: 14.29px;">RxJava</a> <a href="/tags/THINK/" style="font-size: 10px;">THINK</a> <a href="/tags/TabLayout/" style="font-size: 10px;">TabLayout</a> <a href="/tags/Test/" style="font-size: 14.29px;">Test</a> <a href="/tags/TouchEvent/" style="font-size: 12.86px;">TouchEvent</a> <a href="/tags/VIEW/" style="font-size: 12.86px;">VIEW</a> <a href="/tags/concurrency/" style="font-size: 14.29px;">concurrency</a> <a href="/tags/coroutie/" style="font-size: 10px;">coroutie</a> <a href="/tags/inter/" style="font-size: 17.14px;">inter</a> <a href="/tags/keyboard/" style="font-size: 10px;">keyboard</a> <a href="/tags/proguard/" style="font-size: 10px;">proguard</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-classify"></i> Kategorien</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ANDROID/">ANDROID</a><span class="category-list-count">56</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/BLE/">BLE</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DataStructure/">DataStructure</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DesignPatterns/">DesignPatterns</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ENGLISH/">ENGLISH</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/">JAVA</a><span class="category-list-count">25</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Jetpack/">Jetpack</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kotlin/">Kotlin</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LINUX/">LINUX</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mathematics/">Mathematics</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS/">OS</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Organization/">Organization</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TEST/">TEST</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TOOL/">TOOL</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/VIEW/">VIEW</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/anim/">anim</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/coroutine/">coroutine</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/flutter/">flutter</a><span class="category-list-count">5</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-archive"></i> Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/">2021年12月</a><span class="archive-list-count">24</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020年12月</a><span class="archive-list-count">45</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019年12月</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018年11月</a><span class="archive-list-count">32</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017年12月</a><span class="archive-list-count">57</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AOSP/" rel="tag">AOSP</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Activity/" rel="tag">Activity</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AndroidNewFeatures/" rel="tag">AndroidNewFeatures</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Assembly/" rel="tag">Assembly</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BLOG/" rel="tag">BLOG</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ConstraintLayout/" rel="tag">ConstraintLayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DB/" rel="tag">DB</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DataStructure/" rel="tag">DataStructure</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Drawer/" rel="tag">Drawer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kotlin/" rel="tag">Kotlin</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Operators/" rel="tag">Operators</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RxJava/" rel="tag">RxJava</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/THINK/" rel="tag">THINK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TabLayout/" rel="tag">TabLayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Test/" rel="tag">Test</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TouchEvent/" rel="tag">TouchEvent</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VIEW/" rel="tag">VIEW</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/concurrency/" rel="tag">concurrency</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/coroutie/" rel="tag">coroutie</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/inter/" rel="tag">inter</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/keyboard/" rel="tag">keyboard</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/proguard/" rel="tag">proguard</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-link"></i> Blogroll</h3>
    <div class="widget">
      <ul>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example1.com/">site-name1</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example2.com/">site-name2</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example3.com/">site-name3</a>
        </li>
      
      </ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <a id="totop" href="#top"></a>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <p>
        <a href="/sitemap.xml">Sitemap</a>
        <span> | </span><a href="/atom.xml">Abonnieren Sie diese Site</a>
        <span> | </span><a href="/about/">Kontaktieren Sie den Blogger</a>
      </p>
      
        <p>
          <i class="fa fa-visitors"></i>
          <i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>
          ，
          <i class="fa fa-views"></i>
          <i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>
        </p>
      
      <p>
        <span>Copyright &copy; 2021 Jon.</span>
        <span>Theme by <a href="https://github.com/chaooo/hexo-theme-BlueLake/" target="_blank">BlueLake.</a></span>
        
            <span>Count by <a href="http://busuanzi.ibruce.info/" target="_blank">busuanzi.</a></span>
        
        <span>Powered by <a href="https://hexo.io/" target="_blank">Hexo.</a></span>
      </p>
    </div>
  </div>
</footer>

    </div>
    
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/search.json.js"></script>


  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>






  
<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



  
<script src="/localshare/js/social-share.js"></script>

  
<script src="/localshare/js/qrcode.js"></script>




















  </div>
</body>
</html>