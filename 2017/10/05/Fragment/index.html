<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Fragment | Jon&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  
  
    <link rel="alternate" href="/atom.xml" title="Jon's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="/localshare/css/share.css">

  
  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Jon&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Cease to struggle and you cease to live. - Thomas Carlyle</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/."><i class="fa fa-home"></i> Start</a>
        
          <a class="main-nav-link" href="/archives/"><i class="fa fa-archive"></i> Archiv</a>
        
          <a class="main-nav-link" href="/about/"><i class="fa fa-user"></i> Über</a>
        
          <a class="main-nav-link" href="/atom.xml"><i class="fa fa-rss"></i> RSS</a>
        
      </nav>
    </div>
    <div id="search-form">
      <div id="result-mask" class="hide"></div>
      <label><input id="search-key" type="text" autocomplete="off" placeholder="Suche"></label>
      <div id="result-wrap" class="hide">
        <div id="search-result"></div>
      </div>
      <div class="hide">
        <template id="search-tpl">
          <div class="item">
            <a href="/{path}" title="{title}">
              <div class="title">{title}</div>
              <div class="time">{date}</div>
              <div class="tags">{tags}</div>
            </a>
          </div>
        </template>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-Fragment" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Fragment
    </h1>
  


      </header>
    
    <div class="article-meta">
      
      <span class="article-date">
  <i class="fa fa-date"></i>
  <time class="dt-published" datetime="2017-10-05T11:54:50.000Z" itemprop="datePublished">2017年10月05日</time>
</span>
      
  <div class="article-category">
    <i class="fa fa-classify"></i>
    <a class="article-category-link" href="/categories/ANDROID/">ANDROID</a>
  </div>

      
        <span class="article-views">
  <i class="fa fa-views"></i>
  <i id="busuanzi_container_page_pv">
      <i id="busuanzi_value_page_pv"></i>
  </i>
</span>

      
      
<a href="/2017/10/05/Fragment/#comments" class="article-comment-link">
  
    
    
    
    
    
  
  <i class="fa fa-commt"></i>
  Gästebuch
</a>


    </div>
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://developer.android.com/reference/android/app/Fragment.html">https://developer.android.com/reference/android/app/Fragment.html</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/components/fragments.html">https://developer.android.com/guide/components/fragments.html</a></p>
<p><a target="_blank" rel="noopener" href="https://wizardforcel.gitbooks.io/w3school-android/content/77.html">https://wizardforcel.gitbooks.io/w3school-android/content/77.html</a><br><a target="_blank" rel="noopener" href="https://juejin.im/post/5901b564570c35005804424b">https://juejin.im/post/5901b564570c35005804424b</a></p>
<h4 id="Lifecycle"><a href="#Lifecycle" class="headerlink" title="Lifecycle"></a>Lifecycle</h4><p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/fragments/lifecycle">https://developer.android.com/guide/fragments/lifecycle</a></p>
<ul>
<li>onViewCreated(View view, Bundle savedInstanceState)</li>
</ul>
<p>Called immediately after <code>onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)</code> has returned, but before any saved state has been restored in to the view.</p>
<p><img src="/2017/10/05/Fragment/fragment-view-lifecycle.png"></p>
<h5 id="fragment回调"><a href="#fragment回调" class="headerlink" title="fragment回调"></a>fragment回调</h5><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mListener: IFeedBackListener? = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onAttach</span><span class="params">(context: <span class="type">Context</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onAttach(context)</span><br><span class="line">    <span class="keyword">if</span> (parentFragment <span class="keyword">is</span> IFeedBackListener) &#123;</span><br><span class="line">        mListener = parentFragment <span class="keyword">as</span> IFeedBackListener</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (context <span class="keyword">is</span> IFeedBackListener) &#123;</span><br><span class="line">        mListener = context</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> RuntimeException(context?.toString() + <span class="string">&quot; must implement ISelectListener&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://noteforme.github.io/2017/10/05/Fragment/">https://noteforme.github.io/2017/10/05/Fragment/</a></p>
<h4 id="Fragment重叠"><a href="#Fragment重叠" class="headerlink" title="Fragment重叠"></a>Fragment重叠</h4><p> 横竖屏切换</p>
<p>被系统回收（复现 进入开发者选项 -》不保留活动）</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c12a98a36b2b">https://www.jianshu.com/p/c12a98a36b2b</a></p>
<h5 id="BottomNavigationView-error"><a href="#BottomNavigationView-error" class="headerlink" title="BottomNavigationView error"></a>BottomNavigationView error</h5><p>使用BottomNavigationView出现很严重的问题,很久才找到原因</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Caused <span class="keyword">by</span>: android.<span class="keyword">view</span>.InflateException: Binary XML <span class="keyword">file</span> <span class="keyword">line</span> #16: Binary XML <span class="keyword">file</span> <span class="keyword">line</span> #16: <span class="keyword">Error</span> inflating <span class="keyword">class</span> com.google.android.material.bottomnavigation.BottomNavigationView</span><br><span class="line">    Caused <span class="keyword">by</span>: android.<span class="keyword">view</span>.InflateException: Binary XML <span class="keyword">file</span> <span class="keyword">line</span> #16: <span class="keyword">Error</span> inflating <span class="keyword">class</span> com.google.android.material.bottomnavigation.BottomNavigationView</span><br></pre></td></tr></table></figure>

<p>因为 AndroidManifest.xml  application下的android:theme=”@style/AppTheme”多出了,把下面的删除了就好了.</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="built_in">item</span> <span class="built_in">name</span>=<span class="string">&quot;android:textColorSecondary&quot;</span>&gt;<span class="comment">#ffffff&lt;/item&gt;</span></span><br><span class="line">&lt;<span class="built_in">item</span> <span class="built_in">name</span>=<span class="string">&quot;android:actionOverflowButtonStyle&quot;</span>&gt;@style/OverflowMenuStyle&lt;/<span class="built_in">item</span>&gt;</span><br><span class="line">&lt;<span class="built_in">item</span> <span class="built_in">name</span>=<span class="string">&quot;android:listDivider&quot;</span>&gt;@drawable/divider&lt;/<span class="built_in">item</span>&gt;</span><br></pre></td></tr></table></figure>

<h5 id="重叠原因"><a href="#重叠原因" class="headerlink" title="重叠原因"></a>重叠原因</h5><blockquote>
<p> 旋转屏幕时候，创建的homeFragment会被回收,在销毁前，执行了onSaveInstanceState(Bundle outState)这个方法。这个方法会保存activity的一些信息，其中就包括添加过的fragment，Activity重建后，再次初始化homeFragment，接着显示，导致了重叠的问题。</p>
</blockquote>
<h5 id="代码验证"><a href="#代码验证" class="headerlink" title="代码验证"></a>代码验证</h5><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">initFragment</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (homeFragment == <span class="literal">null</span>) &#123;</span><br><span class="line">        homeFragment = HomeFragment()</span><br><span class="line">        addFragment(homeFragment!!)</span><br><span class="line">        showFragment(homeFragment)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">    Timber.d(<span class="string">&quot;onCreate() <span class="variable">$homeFragment</span>&quot;</span>)</span><br><span class="line">    initFragment()</span><br><span class="line">    Timber.d(<span class="string">&quot;initFragment() <span class="variable">$homeFragment</span>&quot;</span>)   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onDestroy</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onDestroy()</span><br><span class="line">        Timber.tag(TAG).d(<span class="string">&quot;onDestroy() homeFragment <span class="variable">$homeFragment</span>&quot;</span>)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>日志</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onCreate() taskId  <span class="number">641</span></span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onCreate() homeFragment null</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;<span class="number">1</span>adc<span class="number">3</span>fa&#125; (b<span class="number">0660244</span>-<span class="number">39</span>c<span class="number">4</span>-<span class="number">4104</span>-b<span class="number">558</span>-f<span class="number">5384</span>c<span class="number">7</span>adb<span class="number">0</span>d) id=<span class="number">0</span>x<span class="number">7</span>f<span class="number">09010</span>e&#125;</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStart()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onResume()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onPause()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onSaveInstanceState()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStop()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onDestroy()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onDestroy() homeFragment HomeFragment&#123;<span class="number">1</span>adc<span class="number">3</span>fa&#125; (d<span class="number">84</span>f<span class="number">5956</span>-fa<span class="number">2</span>c-<span class="number">4</span>cd<span class="number">2</span>-<span class="number">8397</span>-<span class="number">0904040</span>d<span class="number">2</span>a<span class="number">6</span>f)&#125;</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onCreate() taskId  <span class="number">641</span></span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onCreate() homeFragment null</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;ac<span class="number">076</span>db&#125; (f<span class="number">8</span>ee<span class="number">348</span>b-<span class="number">6</span>ff<span class="number">7</span>-<span class="number">4</span>b<span class="number">1</span>e-ba<span class="number">27</span>-<span class="number">6</span>e<span class="number">47</span>e<span class="number">848</span>f<span class="number">623</span>) id=<span class="number">0</span>x<span class="number">7</span>f<span class="number">09010</span>e&#125;</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStart()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onRestoreInstanceState()</span><br><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onResume()</span><br></pre></td></tr></table></figure>

<p>从 initFragment（） 1adc3fa , ac076db 可以看到，HomeFrgment重新创建了.</p>
<h5 id="处理方法"><a href="#处理方法" class="headerlink" title="处理方法"></a>处理方法</h5><ol>
<li><p>onSaveInstanceState 不保存信息</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onSaveInstanceState</span><span class="params">(outState: <span class="type">Bundle</span>)</span></span> &#123;</span><br><span class="line"><span class="comment">//        super.onSaveInstanceState(outState)</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>这种方式的弊端就是，切换后总是回到首页.</p>
</li>
<li><p>onSaveInstanceState() 保存Fragment</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">override <span class="keyword">fun</span> on<span class="constructor">Create(<span class="params">savedInstanceState</span>: Bundle?)</span> &#123;</span><br><span class="line">    super.on<span class="constructor">Create(<span class="params">savedInstanceState</span>)</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (savedInstanceState != null) &#123;</span><br><span class="line">        <span class="comment">/*获取保存的fragment  没有的话返回null*/</span></span><br><span class="line">        homeFragment = supportFragmentManager.get<span class="constructor">Fragment(<span class="params">savedInstanceState</span>, HOME_FRAGMENT_KEY)</span> <span class="keyword">as</span> HomeFragment?</span><br><span class="line">        healthFragment = supportFragmentManager.get<span class="constructor">Fragment(<span class="params">savedInstanceState</span>, DASHBOARD_FRAGMENT_KEY)</span> <span class="keyword">as</span> HealthFragment?</span><br><span class="line">        personFragment = supportFragmentManager.get<span class="constructor">Fragment(<span class="params">savedInstanceState</span>, NOTICE_FRAGMENT_KEY)</span> <span class="keyword">as</span> PersonFragment?</span><br><span class="line">        add<span class="constructor">ToList(<span class="params">homeFragment</span>)</span></span><br><span class="line">        add<span class="constructor">ToList(<span class="params">healthFragment</span>)</span></span><br><span class="line">        add<span class="constructor">ToList(<span class="params">personFragment</span>)</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        init<span class="constructor">Fragment()</span></span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> override <span class="keyword">fun</span> on<span class="constructor">SaveInstanceState(<span class="params">outState</span>: Bundle)</span> &#123;</span><br><span class="line">        super.on<span class="constructor">SaveInstanceState(<span class="params">outState</span>)</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>d(<span class="string">&quot;MainActivity onSaveInstanceState&quot;</span>)</span><br><span class="line">        <span class="comment">/*fragment不为空时 保存*/</span><span class="keyword">if</span> (homeFragment != null) &#123;</span><br><span class="line">            supportFragmentManager.put<span class="constructor">Fragment(<span class="params">outState</span>!!, HOME_FRAGMENT_KEY, <span class="params">homeFragment</span>!!)</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (healthFragment != null) &#123;</span><br><span class="line">            supportFragmentManager.put<span class="constructor">Fragment(<span class="params">outState</span>!!, DASHBOARD_FRAGMENT_KEY, <span class="params">healthFragment</span>!!)</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (personFragment != null) &#123;</span><br><span class="line">            supportFragmentManager.put<span class="constructor">Fragment(<span class="params">outState</span>!!, NOTICE_FRAGMENT_KEY, <span class="params">personFragment</span>!!)</span></span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure></li>
</ol>
<p>这种方式，可以解决问题，但是打印的日志HomeFragment还是不一样，是什么情况？</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onCreate() taskId  <span class="number">4437</span></span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;dc<span class="number">2914</span>d&#125; (<span class="number">5</span>f<span class="number">30</span>b<span class="number">0</span>dd-a<span class="number">8</span>d<span class="number">2</span>-<span class="number">4</span>b<span class="number">3</span>c-a<span class="number">27</span>f-<span class="number">1</span>d<span class="number">160</span>a<span class="number">9</span>da<span class="number">58</span>e) id=<span class="number">0</span>x<span class="number">7</span>f<span class="number">09010</span>e&#125;</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStart()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onResume()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity$onCreate: navigation_health</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onPause()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onSaveInstanceState()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity: MainActivity onSaveInstanceState</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStop()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onDestroy()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onDestroy() homeFragment HomeFragment&#123;dc<span class="number">2914</span>d&#125; (ab<span class="number">276</span>ea<span class="number">2</span>-<span class="number">5</span>fa<span class="number">2</span>-<span class="number">4</span>d<span class="number">79</span>-b<span class="number">6</span>a<span class="number">6</span>-af<span class="number">7143</span>b<span class="number">114</span>e<span class="number">8</span>)&#125;</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onCreate() taskId  <span class="number">4437</span></span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity: fragmentList数量<span class="number">1</span></span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity: fragmentList数量<span class="number">2</span></span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity: fragmentList数量<span class="number">2</span></span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: initFragment() homeFragment HomeFragment&#123;<span class="number">9139494</span>&#125; (<span class="number">5</span>f<span class="number">30</span>b<span class="number">0</span>dd-a<span class="number">8</span>d<span class="number">2</span>-<span class="number">4</span>b<span class="number">3</span>c-a<span class="number">27</span>f-<span class="number">1</span>d<span class="number">160</span>a<span class="number">9</span>da<span class="number">58</span>e) id=<span class="number">0</span>x<span class="number">7</span>f<span class="number">09010</span>e&#125;</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStart()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onRestoreInstanceState()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onResume()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onPause()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onSaveInstanceState()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity: MainActivity onSaveInstanceState</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onStop()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onDestroy()</span><br><span class="line"> <span class="attribute">D</span>/TabBottomActivity LaunchModeActivity: onDestroy() homeFragment HomeFragment&#123;<span class="number">9139494</span>&#125; (cadcb<span class="number">63</span>f-<span class="number">8516</span>-<span class="number">4</span>d<span class="number">44</span>-<span class="number">8</span>f<span class="number">3</span>c-<span class="number">75</span>b<span class="number">0</span>c<span class="number">8</span>e<span class="number">9</span>f<span class="number">27</span>f)&#125;</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/yuzhiqiang_1993/article/details/75014591">https://blog.csdn.net/yuzhiqiang_1993/article/details/75014591</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/78ec81b42f92">https://www.jianshu.com/p/78ec81b42f92</a></p>
<h5 id="下面这种方式没理解"><a href="#下面这种方式没理解" class="headerlink" title="下面这种方式没理解"></a>下面这种方式没理解</h5><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/d9143a92ad94">https://www.jianshu.com/p/d9143a92ad94</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c12a98a36b2b">https://www.jianshu.com/p/c12a98a36b2b</a></p>
<h4 id="横竖屏切换，Fragment实例复用"><a href="#横竖屏切换，Fragment实例复用" class="headerlink" title="横竖屏切换，Fragment实例复用"></a>横竖屏切换，Fragment实例复用</h4><h5 id="setRetainInstance-true"><a href="#setRetainInstance-true" class="headerlink" title="setRetainInstance=true"></a>setRetainInstance=true</h5><p><strong>retainInstance = true已经过期，改用ViewModel</strong></p>
<p>LifeFragment</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">    retainInstance = <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">fun</span> init<span class="constructor">Fragment()</span> &#123;</span><br><span class="line">    var lifeFragment = supportFragmentManager.find<span class="constructor">FragmentById(R.<span class="params">id</span>.<span class="params">fl_content</span>)</span></span><br><span class="line">    <span class="keyword">if</span> (lifeFragment<span class="operator"> == </span>null) &#123;</span><br><span class="line">        lifeFragment = <span class="constructor">LifeFragment()</span></span><br><span class="line">        supportFragmentManager.<span class="keyword">begin</span><span class="constructor">Transaction()</span>.add(<span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>id.fl_content, lifeFragment).commit<span class="literal">()</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">Timber</span>.</span></span>d(<span class="string">&quot;LifeFragment $lifeFragment&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>切换屏幕后 LifeFragment,ondestroy()没志行,后面的Oncreate()也没有创建.</p>
<figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">D</span>/<span class="variable">LifeActivity</span> <span class="variable">LaunchModeActivity</span>: <span class="function"><span class="title">onCreate</span>() <span class="variable">taskId</span>  <span class="number">599</span></span></span><br><span class="line"><span class="function"><span class="variable">D</span>/<span class="variable">LifeActivity</span>: <span class="variable">LifeFragment</span> <span class="variable">LifeFragment</span>&#123;<span class="number">6</span><span class="variable">a86311</span>&#125; (<span class="number">70133</span><span class="variable">a14</span>-<span class="number">6</span><span class="variable">dcf</span>-<span class="number">4</span><span class="variable">f8b</span>-<span class="variable">beee</span>-<span class="number">6</span><span class="variable">cd31d6623ba</span>) <span class="variable">id</span>=<span class="number">0</span><span class="variable">x7f090109</span>&#125;</span></span><br><span class="line"><span class="function"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="title">onAttach</span>(<span class="variable">Context</span> <span class="variable">context</span>)</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onCreate</span>() <span class="variable">savedInstanceState</span>    <span class="variable"><span class="literal">null</span></span></span></span><br><span class="line"><span class="function"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="title">onCreateView</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onActivityCreated</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onStart</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onResume</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onPause</span>() </span></span><br><span class="line"><span class="function"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="title">onStop</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onDestroyView</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onDetach</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onAttach</span>(<span class="variable">Context</span> <span class="variable">context</span>)</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeActivity</span> <span class="variable">LaunchModeActivity</span>: <span class="function"><span class="title">onCreate</span>() <span class="variable">taskId</span>  <span class="number">599</span></span></span><br><span class="line"><span class="function"><span class="variable">D</span>/<span class="variable">LifeActivity</span>: <span class="variable">LifeFragment</span> <span class="variable">LifeFragment</span>&#123;<span class="number">6</span><span class="variable">a86311</span>&#125; (<span class="number">70133</span><span class="variable">a14</span>-<span class="number">6</span><span class="variable">dcf</span>-<span class="number">4</span><span class="variable">f8b</span>-<span class="variable">beee</span>-<span class="number">6</span><span class="variable">cd31d6623ba</span>) <span class="variable">id</span>=<span class="number">0</span><span class="variable">x7f090109</span>&#125;</span></span><br><span class="line"><span class="function"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="title">onCreateView</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onActivityCreated</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onStart</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">LifeFragment</span> <span class="variable">LaunchModeFragment</span>: <span class="function"><span class="title">onResume</span>()</span></span><br></pre></td></tr></table></figure>

<h4 id="Fragment懒加载"><a href="#Fragment懒加载" class="headerlink" title="Fragment懒加载"></a>Fragment懒加载</h4><p>Fragment和ViewPager一起使用会有个预加载机制，会把旁白的Fragment的生命周期方法<br>前半段先执行，然后执行自身的生命周期方法</p>
<p>在项目终从其他页面回到MainAcitivty的时候，三个页面的生命周期方法都跑了一遍</p>
<figure class="highlight isbl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">　  <span class="variable">D</span>/<span class="variable">FinanceFragment</span>         <span class="variable">Test</span>: <span class="function"><span class="title">onStart</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">WealthFragment</span>         <span class="variable">Test</span>: <span class="function"><span class="title">onStart</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">MineFragment</span>         <span class="variable">Test</span>: <span class="function"><span class="title">onStart</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">FinanceFragment</span>         <span class="variable">Test</span>: <span class="function"><span class="title">onResume</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">WealthFragment</span>         <span class="variable">Test</span>: <span class="function"><span class="title">onResume</span>()</span></span><br><span class="line"><span class="variable">D</span>/<span class="variable">MineFragment</span>         <span class="variable">Test</span>: <span class="function"><span class="title">onResume</span>()</span></span><br></pre></td></tr></table></figure>


<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">     </span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">boolean</span> isPrepared;  <span class="comment">//判断view是否加载完成,在视图未初始化的时候，在lazyLoad当中就使用的话，就会有空指针的异常</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">boolean</span> isVisible;  <span class="comment">//判断当前Fragment是否可见状态,标志已经初始化完成，因为setUserVisibleHint是在onCreateView之前调用的</span></span><br><span class="line">	  <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="function"><span class="title">onViewCreated</span>(<span class="params">View view, <span class="meta">@Nullable</span> Bundle savedInstanceState</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onViewCreated(view, savedInstanceState);</span><br><span class="line">        isPrepared = <span class="literal">true</span>;</span><br><span class="line">        lazyLoad();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nullable</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="function"><span class="title">onCreateView</span>(<span class="params">LayoutInflater inflater, <span class="meta">@Nullable</span> ViewGroup container, Bundle savedInstanceState</span>)</span> &#123;</span><br><span class="line"><span class="comment">//        Log.d(TAG + &quot;         Test&quot;, &quot; onCreateView()&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (rootView == <span class="literal">null</span>) &#123;</span><br><span class="line">            int view = setLayoutId();</span><br><span class="line">            <span class="keyword">if</span> (view != <span class="number">0</span>) &#123;</span><br><span class="line">                rootView = inflater.inflate(view, container, <span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ViewGroup parent = (ViewGroup) rootView.getParent();</span><br><span class="line">            <span class="keyword">if</span> (parent != <span class="literal">null</span>) &#123;</span><br><span class="line">                parent.removeView(rootView);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        initView(rootView);</span><br><span class="line">        <span class="keyword">return</span> rootView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  http://www.10tiao.com/html/565/201702/2247483988/1.html</span></span><br><span class="line">    <span class="comment">// 标志位，标志已经初始化完成，因为setUserVisibleHint是在onCreateView之前调用的，</span></span><br><span class="line">    <span class="comment">// 在视图未初始化的时候，在lazyLoad当中就使用的话，就会有空指针的异常</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">boolean</span> isPrepared;</span><br><span class="line">    <span class="comment">//标志当前页面是否可见</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">boolean</span> isVisible;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="function"><span class="title">setUserVisibleHint</span>(<span class="params"><span class="built_in">boolean</span> isVisibleToUser</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.setUserVisibleHint(isVisibleToUser);</span><br><span class="line"><span class="comment">//        Log.d(TAG + &quot;         Test&quot;, &quot; setUserVisibleHint() is Visible : ?  &quot; + isVisibleToUser);</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (getUserVisibleHint()) &#123;</span><br><span class="line">            isVisible = <span class="literal">true</span>;</span><br><span class="line">            onVisible();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            isVisible = <span class="literal">false</span>;</span><br><span class="line">            onInvisible();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">void</span> <span class="function"><span class="title">onInvisible</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">void</span> <span class="function"><span class="title">onVisible</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        lazyLoad();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">void</span> <span class="function"><span class="title">lazyLoad</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!isVisible || !isPrepared) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        requestData();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 请求数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="built_in">void</span> <span class="function"><span class="title">requestData</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        Log.d(TAG + <span class="string">&quot;         Test&quot;</span>, <span class="string">&quot; requestData &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>参考: <a target="_blank" rel="noopener" href="http://www.10tiao.com/html/565/201702/2247483988/1.html">http://www.10tiao.com/html/565/201702/2247483988/1.html</a></p>
<h4 id="Activity-dialogFragment-的事件回调"><a href="#Activity-dialogFragment-的事件回调" class="headerlink" title="Activity  dialogFragment 的事件回调"></a>Activity  dialogFragment 的事件回调</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">ISelectListener</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">getItemPosition</span><span class="params">(position: <span class="type">Int</span>)</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mListener: ISelectListener? = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onAttach</span><span class="params">(context: <span class="type">Context</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onAttach(context)</span><br><span class="line">    <span class="keyword">if</span> (parentFragment <span class="keyword">is</span> ISelectListener)&#123;</span><br><span class="line">        mListener = parentFragment  <span class="keyword">as</span> ISelectListener</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (context <span class="keyword">is</span> ISelectListener) &#123;</span><br><span class="line">        mListener = context</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> RuntimeException(context!!.toString() + <span class="string">&quot; must implement ISelectListener&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/components/fragments.html">https://developer.android.com/guide/components/fragments.html</a></p>
<h4 id="onHiddenChanged切换刷新"><a href="#onHiddenChanged切换刷新" class="headerlink" title="onHiddenChanged切换刷新"></a>onHiddenChanged切换刷新</h4><p>使用hide()/show()发现生命周期基本不执行，不过可以用到这个onHiddenChanged();</p>
<p>看下执行的生命周期;   从 SecondFragment 页面开始到 -&gt;FirstFragment </p>
<blockquote>
<p>07-18 15:53:25.128 7758-7758/com.mineutils D/SecondFragment: onAttach(Context context)<br>07-18 15:53:25.129 7758-7758/com.mineutils D/SecondFragment: onCreate()<br>07-18 15:53:25.142 7758-7758/com.mineutils D/SecondFragment: onCreateView()<br>07-18 15:53:25.148 7758-7758/com.mineutils D/SecondFragment:  onViewCreated<br>                                                                onActivityCreated()<br>                                                                onStart()<br>​                                                                  onResume()</p>
<p>07-18 15:53:34.200 7758-7758/com.mineutils D/SecondFragment: onHiddenChanged hidden   true<br>07-18 15:53:34.207 7758-7758/com.mineutils D/FirstFragment:    onCreateView()<br>07-18 15:53:34.208 7758-7758/com.mineutils D/FirstFragment:    onViewCreated<br>                                                              onActivityCreated()<br>​                                                           onStart()</p>
<p>07-18 15:53:53.968 7758-7758/com.mineutils D/FirstFragment: onHiddenChanged hidden   true<br>07-18 15:53:53.968 7758-7758/com.mineutils D/SecondFragment: onHiddenChanged hidden   false</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/cml_blog/article/details/41411451">https://blog.csdn.net/cml_blog/article/details/41411451</a></p>
<h4 id="fragment常用特性"><a href="#fragment常用特性" class="headerlink" title="fragment常用特性"></a>fragment常用特性</h4><h5 id="commitAllowingStateLoss-VS-commit-区别"><a href="#commitAllowingStateLoss-VS-commit-区别" class="headerlink" title="commitAllowingStateLoss VS  commit()区别"></a>commitAllowingStateLoss VS  commit()区别</h5><p><a target="_blank" rel="noopener" href="https://huxian99.github.io/2016/08/28/cj3qymo360000owxk9zp17alo/">https://huxian99.github.io/2016/08/28/cj3qymo360000owxk9zp17alo/</a></p>
<h5 id="Fragment之间传递数据"><a href="#Fragment之间传递数据" class="headerlink" title="Fragment之间传递数据"></a>Fragment之间传递数据</h5><ol>
<li><p>Fragment.setArguments()方法传递bundle</p>
</li>
<li><p>findFragmentById()找到tag,然后直接操作Framgent</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onArticleSelected</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</span><br><span class="line">      ArticleFragment articleFrag = (ArticleFragment)</span><br><span class="line">              getSupportFragmentManager().findFragmentById(R.id.article_fragment);</span><br><span class="line">   </span><br><span class="line">      <span class="keyword">if</span> (articleFrag != <span class="keyword">null</span>) &#123;</span><br><span class="line">          articleFrag.updateArticleView(position);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          ArticleFragment newFragment = <span class="keyword">new</span> ArticleFragment();</span><br><span class="line">          Bundle args = <span class="keyword">new</span> Bundle();</span><br><span class="line">          args.putInt(ArticleFragment.ARG_POSITION, position);</span><br><span class="line">          newFragment.setArguments(args);</span><br><span class="line">   </span><br><span class="line">          FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();</span><br><span class="line">          transaction.replace(R.id.fragment_container, newFragment);</span><br><span class="line">          transaction.addToBackStack(<span class="keyword">null</span>);</span><br><span class="line">          transaction.commit();</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
<li><p>接口回调</p>
</li>
<li><p>ViewModel Livedata</p>
</li>
</ol>
<h5 id="给已经创建frament传递数据"><a href="#给已经创建frament传递数据" class="headerlink" title="给已经创建frament传递数据"></a>给已经创建frament传递数据</h5><p>也是直接 Fragment.refresh(),第一行代码第三版P227，也是这样做的。</p>
<h5 id="fragment回退栈"><a href="#fragment回退栈" class="headerlink" title="fragment回退栈"></a>fragment回退栈</h5><p>tx.addToBackStack(null); 添加回退功能，类似Activity压栈的过程</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/fe16553ca2ca">https://www.jianshu.com/p/fe16553ca2ca</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zhiyuan0932/article/details/52593039">https://blog.csdn.net/zhiyuan0932/article/details/52593039</a></p>
<p>Fragment控制父Fragment展示</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/39491655/communication-between-nested-fragments-in-android">Communication between nested fragments in Android</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u011481547/article/details/71552720">https://blog.csdn.net/u011481547/article/details/71552720</a></p>
<p>Fragmet全局流程图</p>
<p><a target="_blank" rel="noopener" href="https://kotlintc.com/articles/5693">https://kotlintc.com/articles/5693</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/MOWdbI5IREjQP1Px-WJY1Q">https://mp.weixin.qq.com/s/MOWdbI5IREjQP1Px-WJY1Q</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.im/post/5bcd58b6e51d45404c71d23f">https://juejin.im/post/5bcd58b6e51d45404c71d23f</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/_hdbMOA2TVvX4jFnMu15bg">https://mp.weixin.qq.com/s/_hdbMOA2TVvX4jFnMu15bg</a></p>

        
            <div id="toc-article">
                
  <div class="widget-wrap" id="toc-wrap">
    <h3 class="widget-title"><i class="fa fa-toc"></i> Inhalte</h3>
    <div class="widget">
      <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#Lifecycle"><span class="toc-text">Lifecycle</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#fragment%E5%9B%9E%E8%B0%83"><span class="toc-text">fragment回调</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Fragment%E9%87%8D%E5%8F%A0"><span class="toc-text">Fragment重叠</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#BottomNavigationView-error"><span class="toc-text">BottomNavigationView error</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%87%8D%E5%8F%A0%E5%8E%9F%E5%9B%A0"><span class="toc-text">重叠原因</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E9%AA%8C%E8%AF%81"><span class="toc-text">代码验证</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95"><span class="toc-text">处理方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8B%E9%9D%A2%E8%BF%99%E7%A7%8D%E6%96%B9%E5%BC%8F%E6%B2%A1%E7%90%86%E8%A7%A3"><span class="toc-text">下面这种方式没理解</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%AA%E7%AB%96%E5%B1%8F%E5%88%87%E6%8D%A2%EF%BC%8CFragment%E5%AE%9E%E4%BE%8B%E5%A4%8D%E7%94%A8"><span class="toc-text">横竖屏切换，Fragment实例复用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#setRetainInstance-true"><span class="toc-text">setRetainInstance&#x3D;true</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Fragment%E6%87%92%E5%8A%A0%E8%BD%BD"><span class="toc-text">Fragment懒加载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Activity-dialogFragment-%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%9B%9E%E8%B0%83"><span class="toc-text">Activity  dialogFragment 的事件回调</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#onHiddenChanged%E5%88%87%E6%8D%A2%E5%88%B7%E6%96%B0"><span class="toc-text">onHiddenChanged切换刷新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fragment%E5%B8%B8%E7%94%A8%E7%89%B9%E6%80%A7"><span class="toc-text">fragment常用特性</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#commitAllowingStateLoss-VS-commit-%E5%8C%BA%E5%88%AB"><span class="toc-text">commitAllowingStateLoss VS  commit()区别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Fragment%E4%B9%8B%E9%97%B4%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE"><span class="toc-text">Fragment之间传递数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%99%E5%B7%B2%E7%BB%8F%E5%88%9B%E5%BB%BAframent%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE"><span class="toc-text">给已经创建frament传递数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#fragment%E5%9B%9E%E9%80%80%E6%A0%88"><span class="toc-text">fragment回退栈</span></a></li></ol></li></ol>
    </div>
  </div>


            </div>
        
        
          <blockquote id="copyright">
              <p>Ursprünglicher Link: <a href="http://noteforme.github.io.com/2017/10/05/Fragment/">http://noteforme.github.io.com/2017/10/05/Fragment/</a></p>
              <p>Copyright-Erklärung: 转载请注明出处.</p>
          </blockquote>
        
      
    </div>
    <footer class="article-footer">
      
        <div class="article-tag-wrap">
          

          
          
    <div class="social-share">
      <span>Aktie:</span>
    </div>



        </div>
      
      
        
<nav id="article-nav">
  
    <a href="/2017/10/07/DesignPattern_Builder/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">newer</strong>
      <div class="article-nav-title">
        
          DesignPattern-Builder
        
      </div>
    </a>
  
  
    <a href="/2017/09/26/onActivityResult/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">older</strong>
      <div class="article-nav-title">onActivityResult</div>
    </a>
  
</nav>

      
      
        







      
    </footer>
  </div>
</article>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-posts"></i> Letzte</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/09/11/kotlin-senior2/">kotlin-senior2</a>
          </li>
        
          <li>
            <a href="/2021/08/30/Leetcode-Linklist/">Leetcode_Linklist</a>
          </li>
        
          <li>
            <a href="/2021/08/29/Dagger/">Dagger</a>
          </li>
        
          <li>
            <a href="/2021/08/22/kotlin-senior/">kotlin-senior</a>
          </li>
        
          <li>
            <a href="/2021/08/21/kotlin-object/">kotlin-object</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/AOSP/" style="font-size: 20px;">AOSP</a> <a href="/tags/Activity/" style="font-size: 10px;">Activity</a> <a href="/tags/AndroidNewFeatures/" style="font-size: 10px;">AndroidNewFeatures</a> <a href="/tags/Assembly/" style="font-size: 10px;">Assembly</a> <a href="/tags/BLOG/" style="font-size: 10px;">BLOG</a> <a href="/tags/ConstraintLayout/" style="font-size: 10px;">ConstraintLayout</a> <a href="/tags/DB/" style="font-size: 11.67px;">DB</a> <a href="/tags/DataStructure/" style="font-size: 10px;">DataStructure</a> <a href="/tags/Drawer/" style="font-size: 10px;">Drawer</a> <a href="/tags/Git/" style="font-size: 11.67px;">Git</a> <a href="/tags/JVM/" style="font-size: 18.33px;">JVM</a> <a href="/tags/Kotlin/" style="font-size: 16.67px;">Kotlin</a> <a href="/tags/RxJava/" style="font-size: 15px;">RxJava</a> <a href="/tags/THINK/" style="font-size: 10px;">THINK</a> <a href="/tags/TabLayout/" style="font-size: 10px;">TabLayout</a> <a href="/tags/Test/" style="font-size: 15px;">Test</a> <a href="/tags/TouchEvent/" style="font-size: 13.33px;">TouchEvent</a> <a href="/tags/VIEW/" style="font-size: 13.33px;">VIEW</a> <a href="/tags/concurrency/" style="font-size: 15px;">concurrency</a> <a href="/tags/inter/" style="font-size: 16.67px;">inter</a> <a href="/tags/keyboard/" style="font-size: 10px;">keyboard</a> <a href="/tags/operators/" style="font-size: 10px;">operators</a> <a href="/tags/proguard/" style="font-size: 10px;">proguard</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-classify"></i> Kategorien</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ANDROID/">ANDROID</a><span class="category-list-count">54</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/BLE/">BLE</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DataStructure/">DataStructure</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/DesignPatterns/">DesignPatterns</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ENGLISH/">ENGLISH</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/">JAVA</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Jetpack/">Jetpack</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Kotlin/">Kotlin</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LINUX/">LINUX</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mathematics/">Mathematics</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS/">OS</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Organization/">Organization</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TEST/">TEST</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TOOL/">TOOL</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/VIEW/">VIEW</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/anim/">anim</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/flutter/">flutter</a><span class="category-list-count">5</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-archive"></i> Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/">2021年09月</a><span class="archive-list-count">18</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020年12月</a><span class="archive-list-count">45</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019年12月</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">2018年11月</a><span class="archive-list-count">32</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">2017年12月</a><span class="archive-list-count">57</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-tag"></i> Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AOSP/" rel="tag">AOSP</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Activity/" rel="tag">Activity</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AndroidNewFeatures/" rel="tag">AndroidNewFeatures</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Assembly/" rel="tag">Assembly</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BLOG/" rel="tag">BLOG</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ConstraintLayout/" rel="tag">ConstraintLayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DB/" rel="tag">DB</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DataStructure/" rel="tag">DataStructure</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Drawer/" rel="tag">Drawer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kotlin/" rel="tag">Kotlin</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RxJava/" rel="tag">RxJava</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/THINK/" rel="tag">THINK</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TabLayout/" rel="tag">TabLayout</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Test/" rel="tag">Test</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TouchEvent/" rel="tag">TouchEvent</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VIEW/" rel="tag">VIEW</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/concurrency/" rel="tag">concurrency</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/inter/" rel="tag">inter</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/keyboard/" rel="tag">keyboard</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/operators/" rel="tag">operators</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/proguard/" rel="tag">proguard</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title"><i class="fa fa-link"></i> Blogroll</h3>
    <div class="widget">
      <ul>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example1.com/">site-name1</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example2.com/">site-name2</a>
        </li>
      
        <li>
          <a target="_blank" rel="noopener" href="http://www.example3.com/">site-name3</a>
        </li>
      
      </ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <a id="totop" href="#top"></a>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <p>
        <a href="/sitemap.xml">Sitemap</a>
        <span> | </span><a href="/atom.xml">Abonnieren Sie diese Site</a>
        <span> | </span><a href="/about/">Kontaktieren Sie den Blogger</a>
      </p>
      
        <p>
          <i class="fa fa-visitors"></i>
          <i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>
          ，
          <i class="fa fa-views"></i>
          <i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>
        </p>
      
      <p>
        <span>Copyright &copy; 2021 Jon.</span>
        <span>Theme by <a href="https://github.com/chaooo/hexo-theme-BlueLake/" target="_blank">BlueLake.</a></span>
        
            <span>Count by <a href="http://busuanzi.ibruce.info/" target="_blank">busuanzi.</a></span>
        
        <span>Powered by <a href="https://hexo.io/" target="_blank">Hexo.</a></span>
      </p>
    </div>
  </div>
</footer>

    </div>
    
<script src="/js/jquery-3.4.1.min.js"></script>


<script src="/js/search.json.js"></script>


  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>






  
<script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



  
<script src="/localshare/js/social-share.js"></script>

  
<script src="/localshare/js/qrcode.js"></script>




















  </div>
</body>
</html>